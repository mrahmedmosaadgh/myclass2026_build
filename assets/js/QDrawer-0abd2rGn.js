import{E as e,aO as a,T as o,aP as l,U as i,O as t,F as n,aJ as r,aQ as u,aR as s,aN as v,aS as d,aT as c,V as p,S as m}from"./app-BzjXrVp9.js";import{p as f,q as h,f as w,a as b,k as y,n as q,o as g,z as k,x,h as B}from"./vendor-EI0FRBVb.js";const S=e({name:"QDrawer",inheritAttrs:!1,props:{...l,...o,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...a,"onLayout","miniState"],setup(e,{slots:a,emit:o,attrs:l}){const S=f(),{proxy:{$q:T}}=S,O=i(e,T),{preventBodyScroll:$}=d(),{registerTimeout:C,removeTimeout:W}=t(),A=h(r,n);if(A===n)return console.error("QDrawer needs to be child of QLayout"),n;let L,M,_=null;const z=w("mobile"===e.behavior||"desktop"!==e.behavior&&A.totalWidth.value<=e.breakpoint),F=b(()=>!0===e.mini&&!0!==z.value),V=b(()=>!0===F.value?e.miniWidth:e.width),I=w(!0===e.showIfAbove&&!1===z.value||!0===e.modelValue),Q=b(()=>!0!==e.persistent&&(!0===z.value||!0===le.value));function N(e,a){if(R(),!1!==e&&A.animate(),he(0),!0===z.value){const e=A.instances[Z.value];!0===(null==e?void 0:e.belowBreakpoint)&&e.hide(!1),we(1),!0!==A.isContainer.value&&$(!0)}else we(0),!1!==e&&be(!1);C(()=>{!1!==e&&be(!0),!0!==a&&o("show",e)},150)}function j(e,a){P(),!1!==e&&A.animate(),we(0),he(J.value*V.value),ge(),!0!==a?C(()=>{o("hide",e)},150):W()}const{show:D,hide:H}=u({showing:I,hideOnRouteChange:Q,handleShow:N,handleHide:j}),{addToHistory:R,removeFromHistory:P}=s(I,H,Q),U={belowBreakpoint:z,hide:H},E=b(()=>"right"===e.side),J=b(()=>(!0===T.lang.rtl?-1:1)*(!0===E.value?1:-1)),X=w(0),G=w(!1),K=w(!1),Y=w(V.value*J.value),Z=b(()=>!0===E.value?"left":"right"),ee=b(()=>!0===I.value&&!1===z.value&&!1===e.overlay?!0===e.miniToOverlay?e.miniWidth:V.value:0),ae=b(()=>!0===e.overlay||!0===e.miniToOverlay||-1!==A.view.value.indexOf(E.value?"R":"L")||!0===T.platform.is.ios&&!0===A.isContainer.value),oe=b(()=>!1===e.overlay&&!0===I.value&&!1===z.value),le=b(()=>!0===e.overlay&&!0===I.value&&!1===z.value),ie=b(()=>"fullscreen q-drawer__backdrop"+(!1===I.value&&!1===G.value?" hidden":"")),te=b(()=>({backgroundColor:`rgba(0,0,0,${.4*X.value})`})),ne=b(()=>!0===E.value?"r"===A.rows.value.top[2]:"l"===A.rows.value.top[0]),re=b(()=>!0===E.value?"r"===A.rows.value.bottom[2]:"l"===A.rows.value.bottom[0]),ue=b(()=>{const e={};return!0===A.header.space&&!1===ne.value&&(!0===ae.value?e.top=`${A.header.offset}px`:!0===A.header.space&&(e.top=`${A.header.size}px`)),!0===A.footer.space&&!1===re.value&&(!0===ae.value?e.bottom=`${A.footer.offset}px`:!0===A.footer.space&&(e.bottom=`${A.footer.size}px`)),e}),se=b(()=>{const e={width:`${V.value}px`,transform:`translateX(${Y.value}px)`};return!0===z.value?e:Object.assign(e,ue.value)}),ve=b(()=>"q-drawer__content fit "+(!0!==A.isContainer.value?"scroll":"overflow-auto")),de=b(()=>`q-drawer q-drawer--${e.side}`+(!0===K.value?" q-drawer--mini-animate":"")+(!0===e.bordered?" q-drawer--bordered":"")+(!0===O.value?" q-drawer--dark q-dark":"")+(!0===G.value?" no-transition":!0===I.value?"":" q-layout--prevent-focus")+(!0===z.value?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":" q-drawer--"+(!0===F.value?"mini":"standard")+(!0===ae.value||!0!==oe.value?" fixed":"")+(!0===e.overlay||!0===e.miniToOverlay?" q-drawer--on-top":"")+(!0===ne.value?" q-drawer--top-padding":""))),ce=b(()=>{const a=!0===T.lang.rtl?e.side:Z.value;return[[v,ye,void 0,{[a]:!0,mouse:!0}]]}),pe=b(()=>{const a=!0===T.lang.rtl?Z.value:e.side;return[[v,qe,void 0,{[a]:!0,mouse:!0}]]}),me=b(()=>{const a=!0===T.lang.rtl?Z.value:e.side;return[[v,qe,void 0,{[a]:!0,mouse:!0,mouseAllDir:!0}]]});function fe(){var a,o;a=z,o="mobile"===e.behavior||"desktop"!==e.behavior&&A.totalWidth.value<=e.breakpoint,a.value!==o&&(a.value=o)}function he(e){void 0===e?q(()=>{e=!0===I.value?0:V.value,he(J.value*e)}):(!0!==A.isContainer.value||!0!==E.value||!0!==z.value&&Math.abs(e)!==V.value||(e+=J.value*A.scrollbarWidth.value),Y.value=e)}function we(e){X.value=e}function be(e){const a=!0===e?"remove":!0!==A.isContainer.value?"add":"";""!==a&&document.body.classList[a]("q-body--drawer-toggle")}function ye(e){if(!1!==I.value)return;const a=V.value,o=c(e.distance.x,0,a);if(!0===e.isFinal){return!0===o>=Math.min(75,a)?D():(A.animate(),we(0),he(J.value*a)),void(G.value=!1)}he((!0===T.lang.rtl?!0!==E.value:E.value)?Math.max(a-o,0):Math.min(0,o-a)),we(c(o/a,0,1)),!0===e.isFirst&&(G.value=!0)}function qe(a){if(!0!==I.value)return;const o=V.value,l=a.direction===e.side,i=(!0===T.lang.rtl?!0!==l:l)?c(a.distance.x,0,o):0;if(!0===a.isFinal){return!0===Math.abs(i)<Math.min(75,o)?(A.animate(),we(1),he(0)):H(),void(G.value=!1)}he(J.value*i),we(c(1-i/o,0,1)),!0===a.isFirst&&(G.value=!0)}function ge(){$(!1),be(!0)}function ke(a,o){A.update(e.side,a,o)}function xe(a,o){ke("size",!0===a?e.miniWidth:o)}return y(z,a=>{!0===a?(L=I.value,!0===I.value&&H(!1)):!1===e.overlay&&"mobile"!==e.behavior&&!1!==L&&(!0===I.value?(he(0),we(0),ge()):D(!1))}),y(()=>e.side,(e,a)=>{A.instances[a]===U&&(A.instances[a]=void 0,A[a].space=!1,A[a].offset=0),A.instances[e]=U,A[e].size=V.value,A[e].space=oe.value,A[e].offset=ee.value}),y(A.totalWidth,()=>{!0!==A.isContainer.value&&!0===document.qScrollPrevented||fe()}),y(()=>e.behavior+e.breakpoint,fe),y(A.isContainer,e=>{!0===I.value&&$(!0!==e),!0===e&&fe()}),y(A.scrollbarWidth,()=>{he(!0===I.value?0:void 0)}),y(ee,e=>{ke("offset",e)}),y(oe,e=>{o("onLayout",e),ke("space",e)}),y(E,()=>{he()}),y(V,a=>{he(),xe(e.miniToOverlay,a)}),y(()=>e.miniToOverlay,e=>{xe(e,V.value)}),y(()=>T.lang.rtl,()=>{he()}),y(()=>e.mini,()=>{e.noMiniAnimation||!0===e.modelValue&&(!function(){null!==_&&clearTimeout(_),S.proxy&&S.proxy.$el&&S.proxy.$el.classList.add("q-drawer--mini-animate");K.value=!0,_=setTimeout(()=>{var e,a;_=null,K.value=!1,null==(a=null==(e=null==S?void 0:S.proxy)?void 0:e.$el)||a.classList.remove("q-drawer--mini-animate")},150)}(),A.animate())}),y(F,e=>{o("miniState",e)}),A.instances[e.side]=U,xe(e.miniToOverlay,V.value),ke("space",oe.value),ke("offset",ee.value),!0===e.showIfAbove&&!0!==e.modelValue&&!0===I.value&&void 0!==e["onUpdate:modelValue"]&&o("update:modelValue",!0),g(()=>{o("onLayout",oe.value),o("miniState",F.value),L=!0===e.showIfAbove;const a=()=>{(!0===I.value?N:j)(!1,!0)};0===A.totalWidth.value?M=y(A.totalWidth,()=>{M(),M=void 0,!1===I.value&&!0===e.showIfAbove&&!1===z.value?D(!1):a()}):q(a)}),k(()=>{null==M||M(),null!==_&&(clearTimeout(_),_=null),!0===I.value&&ge(),A.instances[e.side]===U&&(A.instances[e.side]=void 0,ke("size",0),ke("offset",0),ke("space",!1))}),()=>{const o=[];!0===z.value&&(!1===e.noSwipeOpen&&o.push(x(B("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),ce.value)),o.push(p("div",{ref:"backdrop",class:ie.value,style:te.value,"aria-hidden":"true",onClick:H},void 0,"backdrop",!0!==e.noSwipeBackdrop&&!0===I.value,()=>me.value)));const i=!0===F.value&&void 0!==a.mini,t=[B("div",{...l,key:""+i,class:[ve.value,l.class]},!0===i?a.mini():m(a.default))];return!0===e.elevated&&!0===I.value&&t.push(B("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(p("aside",{ref:"content",class:de.value,style:se.value},t,"contentclose",!0!==e.noSwipeClose&&!0===z.value,()=>pe.value)),B("div",{class:"q-drawer-container"},o)}}});export{S as Q};
