import{_ as e}from"./AppLayout-B3PyevP7.js";import{B as a,y as s,z as t,A as r,D as l,E as n,b6 as o,C as u}from"./app-DraepSDZ.js";import{f as i,a as c,o as d,e as g,N as m,J as v,R as b,U as p,V as f,O as y,y as x,ac as h,I as w,K as k,b as D,W as F}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const _={class:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow"},C={class:"mb-4"},R={class:"flex items-center mb-2"},T={class:"text-sm text-gray-600 dark:text-gray-400"},j={class:"space-y-4"},E={class:"flex space-x-2"},I=["disabled"],U=["disabled"],L={key:0,class:"mt-2"},N={key:0,class:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto"},A={__name:"ConnectionTest",setup(e){const w=i(!1),k=i("Checking connection..."),D=i("Hello from Firebase test!"),F=i(!1),A=i(!1),O=i(null),W=i(null),S=i(null),J=c(()=>w.value?{text:"Connected",color:"bg-green-500"}:{text:"Disconnected",color:"bg-red-500"}),V=async()=>{if(w.value){F.value=!0,O.value=null;try{const e=s(t,"firebase_test/messages"),a=l(e);await n(a,{text:D.value,timestamp:u()}),O.value={success:!0,message:"Test message written successfully!"}}catch(e){console.error("Error writing test data:",e),O.value={success:!1,message:`Error writing data: ${e.message}`}}finally{F.value=!1}}else O.value={success:!1,message:"Cannot write data: Not connected to Firebase."}},$=async()=>{if(w.value){A.value=!0,W.value=null;try{const e=s(t,"firebase_test/messages"),a=await o(e);a.exists()?W.value={success:!0,message:"Data retrieved successfully!",data:a.val()}:W.value={success:!0,message:"No test messages found. Try writing some data first.",data:null}}catch(e){console.error("Error reading test data:",e),W.value={success:!1,message:`Error reading data: ${e.message}`}}finally{A.value=!1}}else W.value={success:!1,message:"Cannot read data: Not connected to Firebase."}};return d(()=>{S.value=s(t,".info/connected"),r(S.value,e=>{w.value=!0===e.val(),k.value=w.value?"Successfully connected to Firebase Realtime Database.":"Not connected to Firebase Realtime Database. Check your configuration."})}),g(()=>{S.value&&a(S.value)}),(e,a)=>(v(),m("div",_,[a[3]||(a[3]=b("h2",{class:"text-lg font-semibold mb-4"},"Firebase Connection Test",-1)),b("div",C,[b("div",R,[b("div",{class:p(["w-3 h-3 rounded-full mr-2",J.value.color])},null,2),b("span",null,f(J.value.text),1)]),b("p",T,f(k.value),1)]),b("div",j,[b("div",null,[a[1]||(a[1]=b("h3",{class:"font-medium mb-2"},"Test Write Operation",-1)),b("div",E,[x(b("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>D.value=e),type:"text",class:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a test message"},null,512),[[h,D.value]]),b("button",{onClick:V,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:F.value},f(F.value?"Writing...":"Write"),9,I)]),O.value?(v(),m("p",{key:0,class:p(["mt-2 text-sm",O.value.success?"text-green-600":"text-red-600"])},f(O.value.message),3)):y("",!0)]),b("div",null,[a[2]||(a[2]=b("h3",{class:"font-medium mb-2"},"Test Read Operation",-1)),b("button",{onClick:$,class:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:A.value},f(A.value?"Reading...":"Read Test Data"),9,U),W.value?(v(),m("div",L,[b("p",{class:p(["text-sm",W.value.success?"text-green-600":"text-red-600"])},f(W.value.message),3),W.value.data?(v(),m("pre",N,f(JSON.stringify(W.value.data,null,2)),1)):y("",!0)])):y("",!0)])])]))}},O={class:"py-12"},W={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},S={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg p-6"},J={class:"mt-8"},V={class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg"},$={class:"mb-2"},q={class:"mb-2"},z={__name:"Test",setup(a){const s=c(()=>{try{return{projectId:t._repoInternal.app.options.projectId,databaseURL:t._repoInternal.databaseURL,authDomain:t._repoInternal.app.options.authDomain}}catch(e){return console.error("Error getting Firebase config:",e),{projectId:"Error retrieving config",databaseURL:"Error retrieving config",authDomain:"Error retrieving config"}}});return(a,t)=>(v(),w(e,{title:"Firebase Test"},{header:k(()=>t[0]||(t[0]=[b("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Firebase Connection Test ",-1)])),default:k(()=>[b("div",O,[b("div",W,[b("div",S,[t[5]||(t[5]=b("p",{class:"mb-4 text-gray-600 dark:text-gray-400"}," This page allows you to test your Firebase connection and verify that read/write operations are working correctly. ",-1)),D(A),b("div",J,[t[4]||(t[4]=b("h3",{class:"text-lg font-medium mb-2"},"Firebase Configuration",-1)),b("div",V,[b("p",$,[t[1]||(t[1]=b("strong",null,"Project ID:",-1)),F(" "+f(s.value.projectId),1)]),b("p",q,[t[2]||(t[2]=b("strong",null,"Database URL:",-1)),F(" "+f(s.value.databaseURL),1)]),b("p",null,[t[3]||(t[3]=b("strong",null,"Auth Domain:",-1)),F(" "+f(s.value.authDomain),1)])])]),t[6]||(t[6]=b("div",{class:"mt-8"},[b("h3",{class:"text-lg font-medium mb-2"},"Firebase Security Rules"),b("p",{class:"mb-4 text-gray-600 dark:text-gray-400"},[F(" Make sure you've set up your Firebase security rules correctly. The test component requires read/write access to the "),b("code",null,"firebase_test"),F(" path. ")]),b("div",{class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg overflow-auto"},[b("pre",{class:"text-xs"},'{\n  "rules": {\n    // Your existing rules...\n    \n    // Add this rule for testing\n    "firebase_test": {\n      ".read": true,\n      ".write": true\n    }\n  }\n}\n              ')])],-1))])])])]),_:1}))}};export{z as default};
