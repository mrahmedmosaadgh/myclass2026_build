import{Q as e}from"./QSpace-Bn7M2Abx.js";import{o as a,u as l,c as t,aP as o,Q as u,f as s,n as r,l as i,m as n,b as d}from"./app-C-NJhdpe.js";import{Q as p}from"./QSelect-B3f0Rrq3.js";import{Q as m}from"./QForm-CqbXDoyt.js";import{f as v,a as g,k as c,H as y,I as f,J as b,b as V,M as q,x as h,U as _,$ as w,O as x}from"./vendor-CUZ9QTQV.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";import"./rtl-Cr6c3OOr.js";const U={class:"text-h6"},A={class:"q-gutter-md"},Q=a({__name:"QuestionForm",props:{modelValue:{type:Boolean,default:!1},question:{type:Object,default:null},categories:{type:Array,default:()=>["General","Technical","Behavioral","Experience","Education"]},questionTypes:{type:Array,default:()=>["text","textarea","select","multi-select","media","file"]}},emits:["update:modelValue","save"],setup(a,{expose:Q,emit:j}){const S=a,T=j,O=l(),E=v(S.modelValue),B=v(!1),F=v({}),C=v({title:"",type:"",category:[],language:"en",tags:[],options:"",default_answer:"",is_required:!1,description:""}),I=g(()=>[{label:"Text Input",value:"text"},{label:"Textarea",value:"textarea"},{label:"Single Select",value:"select"},{label:"Multi Select",value:"multi-select"},{label:"Media Upload",value:"media"},{label:"File Upload",value:"file"}]),M=g(()=>S.categories),k=g(()=>[{label:"English",value:"en"},{label:"Spanish",value:"es"},{label:"French",value:"fr"},{label:"Arabic",value:"ar"}]),D=v(["core","optional","advanced","beginner","intermediate"]),L=g(()=>!!S.question),P=g(()=>C.value.title&&C.value.type&&C.value.category.length>0&&C.value.language),$=e=>{e?C.value={title:e.title||"",type:e.type||"",category:Array.isArray(e.category)?e.category:[e.category].filter(Boolean),language:e.language||"en",tags:Array.isArray(e.tags)?e.tags:[],options:Array.isArray(e.options)?e.options.join(", "):e.options||"",default_answer:e.default_answer||"",is_required:e.is_required||!1,description:e.description||""}:(C.value={title:"",type:"",category:[],language:"en",tags:[],options:"",default_answer:"",is_required:!1,description:""},F.value={})},z=()=>{if(!P.value)return void O.notify({type:"negative",message:"Please fill in all required fields",position:"top"});B.value=!0,F.value={};const e={...C.value,options:C.value.options?C.value.options.split(",").map(e=>e.trim()).filter(Boolean):[]};L.value&&(e.id=S.question.id),T("save",e)};return c(()=>S.modelValue,e=>{E.value=e,e&&$(S.question)}),c(()=>S.question,e=>{E.value&&$(e)}),Q({handleSaveComplete:()=>{B.value=!1,E.value=!1},handleSaveError:e=>{var a,l;B.value=!1,(null==(l=null==(a=e.response)?void 0:a.data)?void 0:l.errors)&&(F.value=e.response.data.errors)}}),(a,l)=>(f(),y(d,{modelValue:E.value,"onUpdate:modelValue":[l[9]||(l[9]=e=>E.value=e),l[10]||(l[10]=e=>a.$emit("update:modelValue",e))],persistent:""},{default:b(()=>[V(n,{style:{"min-width":"500px","max-width":"700px",width:"100%"}},{default:b(()=>[V(t,{class:"row items-center q-pb-none"},{default:b(()=>[q("div",U,_(L.value?"Edit Question":"Add New Question"),1),V(e),h(V(u,{icon:"close",flat:"",round:"",dense:""},null,512),[[o]])]),_:1}),V(m,{onSubmit:w(z,["prevent"]),class:"q-gutter-md"},{default:b(()=>[V(t,{class:"q-pt-none"},{default:b(()=>[q("div",A,[V(s,{modelValue:C.value.title,"onUpdate:modelValue":l[0]||(l[0]=e=>C.value.title=e),label:"Question Title *",outlined:"",dense:"",rules:[e=>!!e||"Title is required"],error:!!F.value.title,"error-message":F.value.title},null,8,["modelValue","rules","error","error-message"]),V(p,{modelValue:C.value.type,"onUpdate:modelValue":l[1]||(l[1]=e=>C.value.type=e),options:I.value,label:"Question Type *",outlined:"",dense:"","emit-value":"","map-options":"",rules:[e=>!!e||"Type is required"],error:!!F.value.type,"error-message":F.value.type},null,8,["modelValue","options","rules","error","error-message"]),V(p,{modelValue:C.value.category,"onUpdate:modelValue":l[2]||(l[2]=e=>C.value.category=e),options:M.value,label:"Category *",outlined:"",dense:"",multiple:"","use-chips":"","use-input":"","input-debounce":"0","new-value-mode":"add-unique",rules:[e=>e&&e.length>0||"At least one category is required"],error:!!F.value.category,"error-message":F.value.category},null,8,["modelValue","options","rules","error","error-message"]),V(p,{modelValue:C.value.language,"onUpdate:modelValue":l[3]||(l[3]=e=>C.value.language=e),options:k.value,label:"Language *",outlined:"",dense:"","emit-value":"","map-options":"",rules:[e=>!!e||"Language is required"],error:!!F.value.language,"error-message":F.value.language},null,8,["modelValue","options","rules","error","error-message"]),V(p,{modelValue:C.value.tags,"onUpdate:modelValue":l[4]||(l[4]=e=>C.value.tags=e),options:D.value,label:"Tags",outlined:"",dense:"",multiple:"","use-chips":"","use-input":"","input-debounce":"0","new-value-mode":"add-unique",hint:"Optional tags for categorization"},null,8,["modelValue","options"]),"select"===C.value.type||"multi-select"===C.value.type?(f(),y(s,{key:0,modelValue:C.value.options,"onUpdate:modelValue":l[5]||(l[5]=e=>C.value.options=e),label:"Options (comma separated)",outlined:"",dense:"",type:"textarea",rows:"3",hint:"Enter options separated by commas"},null,8,["modelValue"])):x("",!0),V(s,{modelValue:C.value.default_answer,"onUpdate:modelValue":l[6]||(l[6]=e=>C.value.default_answer=e),label:"Default Answer",outlined:"",dense:"",type:"textarea",rows:"3",hint:"Optional default answer or placeholder text"},null,8,["modelValue"]),V(r,{modelValue:C.value.is_required,"onUpdate:modelValue":l[7]||(l[7]=e=>C.value.is_required=e),label:"This question is required",color:"primary"},null,8,["modelValue"]),V(s,{modelValue:C.value.description,"onUpdate:modelValue":l[8]||(l[8]=e=>C.value.description=e),label:"Description",outlined:"",dense:"",type:"textarea",rows:"2",hint:"Optional description or instructions for this question"},null,8,["modelValue"])])]),_:1}),V(i,{align:"right",class:"q-pa-md"},{default:b(()=>[h(V(u,{flat:"",label:"Cancel",color:"grey-7",disable:B.value},null,8,["disable"]),[[o]]),V(u,{type:"submit",label:"Save",color:"primary",loading:B.value,disable:!P.value},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},[["__scopeId","data-v-1434750a"]]);export{Q as default};
