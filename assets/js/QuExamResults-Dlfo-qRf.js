import{r as e,f as s,G as t,Q as a,c as r,d as l,i,j as c,k as o,o as n,b as d}from"./app-CmR0nRZC.js";import{a as u,af as m,N as _,J as v,b as x,R as p,K as w,I as y,O as h,V as f,U as q,W as g,F as b,Q as k,z as A,$ as j}from"./vendor-BWKGNkNB.js";import{s as M}from"./i18n-B0T1C7j3.js";import{r as T}from"./katex-DjUCNC-N.js";import"./offline-BzIlwqNM.js";import"./ui-B7TfxbV_.js";import"./katex-BXKQVcz-.js";const z={class:"q-pa-md"},H={class:"text-h5"},L={class:"text-subtitle2"},Q={class:"text-h6 text-grey-7 q-mt-sm"},R={class:"row q-gutter-md"},E={class:"col-12 col-sm-6 col-md-3"},O={class:"text-h6"},B={class:"col-12 col-sm-6 col-md-3"},I={class:"text-h6"},N={class:"col-12 col-sm-6 col-md-3"},S={class:"text-h6"},Y={key:0,class:"col-12 col-sm-6 col-md-3"},$={class:"text-h6"},C={class:"row items-start"},D={class:"col"},F={class:"text-subtitle1 text-weight-bold q-mb-sm"},P=["innerHTML"],U={key:0,class:"q-mb-md"},G={key:0},J=["innerHTML"],K={key:1},V={key:1},W=["innerHTML"],X={key:0,class:"q-mt-sm"},Z=["innerHTML"],ee={class:"col-auto text-center"},se=e({__name:"QuExamResults",props:{exam:Object,attempt:Object,statistics:Object,show_results:Boolean,show_correct_answers:Boolean,questions_with_answers:Array},setup(e){const se=e,te=u(()=>se.statistics.passed?se.statistics.passed?"text-positive":"text-negative":"text-grey-7"),ae=(e,s)=>{var t;if(!se.show_correct_answers)return"";const a=(Array.isArray(e.correct_answer)?e.correct_answer[0]:e.correct_answer)===s,r=(null==(t=e.student_answer)?void 0:t.selected_options)===s;return a?"text-positive text-weight-bold":r&&!a?"text-negative":""},re=(e,s)=>{var t,a;if(!se.show_correct_answers)return"";const r=e.correct_answer===s,l=(null==(a=null==(t=e.student_answer)?void 0:t.selected_options)?void 0:a[0])===s;return r?"text-positive text-weight-bold":l&&!r?"text-negative":""},le=e=>{var s,t;const a=null!=(t=null==(s=e.student_answer)?void 0:s.marks_obtained)?t:0;return a===e.marks?"positive":0===a?"negative":"orange"},ie=()=>{j.visit(M("qu-student.exams.index"))};return(u,j)=>{const M=m("Head");return v(),_(b,null,[x(M,{title:e.exam.title?e.exam.title+" - Results":"Exam Results"},null,8,["title"]),p("div",z,[x(l,null,{default:w(()=>[x(s,{class:"bg-primary text-white"},{default:w(()=>{var s;return[p("div",H,f(e.exam.title),1),p("div",L,f(null==(s=e.exam.subject)?void 0:s.name),1)]}),_:1}),e.show_results?(v(),y(s,{key:0,class:"text-center q-py-xl"},{default:w(()=>[p("div",{class:q(["text-h2 text-weight-bold",te.value])},f(Math.round(e.attempt.score))+" / "+f(e.exam.total_marks),3),p("div",Q,f(e.statistics.percentage)+"% ",1),null!==e.statistics.passed?(v(),y(t,{key:0,color:e.statistics.passed?"positive":"negative","text-color":"white",size:"lg",class:"q-mt-md"},{default:w(()=>[x(a,{name:e.statistics.passed?"check_circle":"cancel",size:"sm",class:"q-mr-sm"},null,8,["name"]),g(" "+f(e.statistics.passed?"PASSED":"FAILED"),1)]),_:1},8,["color"])):h("",!0)]),_:1})):(v(),y(s,{key:1,class:"text-center q-py-xl"},{default:w(()=>[x(a,{name:"lock",size:"64px",color:"grey-5"}),j[0]||(j[0]=p("div",{class:"text-h6 text-grey-7 q-mt-md"}," Results Not Yet Available ",-1)),j[1]||(j[1]=p("div",{class:"text-caption text-grey-6 q-mt-sm"}," Your teacher will publish the results soon. ",-1))]),_:1})),x(r),e.show_results?(v(),y(s,{key:2},{default:w(()=>[p("div",R,[p("div",E,[x(l,{flat:"",bordered:""},{default:w(()=>[x(s,{class:"text-center"},{default:w(()=>[p("div",O,f(e.statistics.answered_questions),1),j[2]||(j[2]=p("div",{class:"text-caption text-grey-7"},"Questions Answered",-1))]),_:1})]),_:1})]),p("div",B,[x(l,{flat:"",bordered:""},{default:w(()=>[x(s,{class:"text-center"},{default:w(()=>[p("div",I,f(e.statistics.total_questions),1),j[3]||(j[3]=p("div",{class:"text-caption text-grey-7"},"Total Questions",-1))]),_:1})]),_:1})]),p("div",N,[x(l,{flat:"",bordered:""},{default:w(()=>[x(s,{class:"text-center"},{default:w(()=>[p("div",S,f(Math.round(e.attempt.time_taken_minutes))+" min",1),j[4]||(j[4]=p("div",{class:"text-caption text-grey-7"},"Time Taken",-1))]),_:1})]),_:1})]),e.exam.passing_score?(v(),_("div",Y,[x(l,{flat:"",bordered:""},{default:w(()=>[x(s,{class:"text-center"},{default:w(()=>[p("div",$,f(e.exam.passing_score),1),j[5]||(j[5]=p("div",{class:"text-caption text-grey-7"},"Passing Score",-1))]),_:1})]),_:1})])):h("",!0)])]),_:1})):h("",!0),e.show_results&&e.questions_with_answers.length>0?(v(),y(r,{key:3})):h("",!0),e.show_results&&e.questions_with_answers.length>0?(v(),y(s,{key:4},{default:w(()=>[j[8]||(j[8]=p("div",{class:"text-h6 q-mb-md"},"Question Review",-1)),x(i,{separator:""},{default:w(()=>[(v(!0),_(b,null,k(e.questions_with_answers,(s,r)=>(v(),y(c,{key:s.id,class:"q-pa-md"},{default:w(()=>[x(o,null,{default:w(()=>[p("div",C,[p("div",D,[p("div",F," Question "+f(r+1),1),p("div",{class:"text-body1 q-mb-md",innerHTML:A(T)(s.question_text)},null,8,P),"mcq"===s.question_type||"true_false"===s.question_type?(v(),_("div",U,["mcq"===s.question_type?(v(),_("div",G,[(v(!0),_(b,null,k(s.options,(t,r)=>{var l;return v(),_("div",{key:r,class:q(["q-py-xs",ae(s,r)])},[e.show_correct_answers&&(Array.isArray(s.correct_answer)?s.correct_answer[0]===r:s.correct_answer===r)?(v(),y(a,{key:0,name:"check_circle",color:"positive",size:"sm",class:"q-mr-sm"})):(null==(l=s.student_answer)?void 0:l.selected_options)===r&&(Array.isArray(s.correct_answer)?s.correct_answer[0]!==r:s.correct_answer!==r)?(v(),y(a,{key:1,name:"cancel",color:"negative",size:"sm",class:"q-mr-sm"})):h("",!0),p("span",{innerHTML:`${r}. ${A(T)(t)}`},null,8,J)],2)}),128))])):(v(),_("div",K,[(v(),_(b,null,k(["true","false"],t=>{var r,l,i;return p("div",{key:t,class:q(["q-py-xs",re(s,t)])},[e.show_correct_answers&&s.correct_answer===t?(v(),y(a,{key:0,name:"check_circle",color:"positive",size:"sm",class:"q-mr-sm"})):(null==(l=null==(r=s.student_answer)?void 0:r.selected_options)?void 0:l[0])===t&&s.correct_answer!==t?(v(),y(a,{key:1,name:"cancel",color:"negative",size:"sm",class:"q-mr-sm"})):h("",!0),g(" "+f((i=t,i?i.charAt(0).toUpperCase()+i.slice(1):"")),1)],2)}),64))]))])):"short"===s.question_type||"long"===s.question_type?(v(),_("div",V,[j[7]||(j[7]=p("div",{class:"text-caption text-grey-7 q-mb-xs"},"Your Answer:",-1)),x(l,{flat:"",bordered:"",class:"q-pa-sm bg-grey-1"},{default:w(()=>{var e;return[p("div",{innerHTML:A(T)((null==(e=s.student_answer)?void 0:e.answer_text)||"No answer provided")},null,8,W)]}),_:2},1024),e.show_correct_answers&&s.correct_answer?(v(),_("div",X,[j[6]||(j[6]=p("div",{class:"text-caption text-grey-7 q-mb-xs"},"Model Answer:",-1)),x(l,{flat:"",bordered:"",class:"q-pa-sm bg-green-1"},{default:w(()=>[p("div",{innerHTML:A(T)(s.correct_answer)},null,8,Z)]),_:2},1024)])):h("",!0)])):h("",!0)]),p("div",ee,[x(t,{color:le(s),"text-color":"white",size:"lg"},{default:w(()=>{var e,t;return[g(f(null!=(t=null==(e=s.student_answer)?void 0:e.marks_obtained)?t:0)+" / "+f(s.marks),1)]}),_:2},1032,["color"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):h("",!0),x(r),x(n,{align:"center",class:"q-pa-md"},{default:w(()=>[x(d,{color:"primary",label:"Back to Exams",icon:"arrow_back",onClick:ie})]),_:1})]),_:1})])],64)}}},[["__scopeId","data-v-7cb92b0e"]]);export{se as default};
