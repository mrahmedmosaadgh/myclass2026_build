import{u as e,Q as l,C as a,q as o,d as t,n as s,aD as n,g as d,e as i,m as r,b as u}from"./app-BzjXrVp9.js";import{Q as c}from"./QBadge-D2ciqrkO.js";import{Q as m}from"./QSpace-qzKo_-If.js";import{Q as p}from"./QColor-9nuGqmA9.js";import{Q as f}from"./QPopupProxy-DuCU3AfJ.js";import{f as v,o as b,L as g,I as y,M as V,b as x,F as C,Q as _,H as U,J as h,O as j,U as k,R as w,V as Q,x as A,y as T,Z as S}from"./vendor-EI0FRBVb.js";import{d as I}from"./vuedraggable.umd-BrRipYEW.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./QSlider-Ca7ul8Gv.js";import"./QTabs-BwLFzVWR.js";import"./rtl-Cr6c3OOr.js";import"./QTab-Cx9aTRVb.js";import"./QTabPanels-C2OMgZHe.js";import"./use-panel-DdQZ_Vdk.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-BWvsj8on.js";import"./index-DND4IDLC.js";const N={class:"p-6 bg-gray-50 min-h-screen"},q={class:"max-w-6xl mx-auto"},z={class:"flex items-center justify-between mb-6"},D={class:"grid gap-4"},O={class:"flex-1"},F={class:"flex items-center gap-2 mb-2"},P={class:"text-lg font-semibold"},B={class:"flex flex-wrap gap-2"},J={class:"mr-1"},M={class:"flex gap-2 ml-4"},E={class:"text-h6"},H={class:"max-w-4xl mx-auto"},L={class:"mb-4 flex items-center justify-between"},G={class:"flex-1 grid grid-cols-2 gap-3"},K={__name:"SectionTemplateManager",setup(K){const R=e(),Z=v([]),$=v(!1),W=v(!1),X=v({name:"",structure:{sections:[]}}),Y=async()=>{try{const e=await S.get(route("lesson-presentation.section-templates.index"));Z.value=e.data}catch(e){console.error(e),R.notify({type:"negative",message:"Failed to load templates"})}},ee=()=>{X.value={name:"New Template",structure:{sections:[{id:"objectives",title:"Objectives",icon:"ðŸŽ¯",qIcon:"flag",bg:"#fffbeb",bgActive:"#fef3c7",borderColor:"#f59e0b",textColor:"#92400e"}]}},$.value=!0},le=()=>{X.value.structure.sections.push({id:`section_${Date.now()}`,title:"New Section",icon:"ðŸ“",qIcon:"article",bg:"#f3f4f6",bgActive:"#e5e7eb",borderColor:"#9ca3af",textColor:"#1f2937"})},ae=async()=>{if(X.value.name&&X.value.structure.sections&&0!==X.value.structure.sections.length){W.value=!0;try{X.value.id?await S.put(route("lesson-presentation.section-templates.update",{id:X.value.id}),X.value):await S.post(route("lesson-presentation.section-templates.store"),X.value),R.notify({type:"positive",message:"Template saved successfully"}),$.value=!1,Y()}catch(e){console.error(e),R.notify({type:"negative",message:"Failed to save template"})}finally{W.value=!1}}else R.notify({type:"warning",message:"Name and at least one section required"})};return b(()=>{Y()}),(e,v)=>(y(),g("div",N,[V("div",q,[V("div",z,[v[4]||(v[4]=V("div",null,[V("h1",{class:"text-2xl font-bold"},"Lesson Section Templates"),V("p",{class:"text-gray-600 mt-1"},"Manage section templates for your lessons")],-1)),x(l,{unelevated:"",color:"primary",icon:"add",label:"New Template",onClick:ee})]),V("div",D,[(y(!0),g(C,null,_(Z.value,e=>(y(),U(s,{key:e.id,flat:"",bordered:""},{default:h(()=>[x(t,{class:"flex items-start justify-between"},{default:h(()=>{var t;return[V("div",O,[V("div",F,[V("h3",P,k(e.name),1),e.is_active?(y(),U(c,{key:0,color:"positive",label:"Active"})):j("",!0)]),V("div",B,[(y(!0),g(C,null,_((null==(t=e.structure)?void 0:t.sections)||[],e=>(y(),U(a,{key:e.id,style:w({backgroundColor:e.bg||"#f3f4f6",color:e.textColor||"#1f2937",borderColor:e.borderColor||"#e5e7eb"}),dense:"",class:"border"},{default:h(()=>[V("span",J,k(e.icon),1),Q(" "+k(e.title),1)]),_:2},1032,["style"]))),128))])]),V("div",M,[x(l,{flat:"",dense:"",round:"",icon:"edit",color:"primary",onClick:l=>(e=>{X.value=JSON.parse(JSON.stringify(e)),X.value.structure||(X.value.structure={sections:[]}),$.value=!0})(e)},{default:h(()=>[x(o,null,{default:h(()=>v[5]||(v[5]=[Q("Edit")])),_:1})]),_:2},1032,["onClick"]),e.is_active?j("",!0):(y(),U(l,{key:0,flat:"",dense:"",round:"",icon:"check_circle",color:"positive",onClick:l=>(async e=>{try{await S.post(route("lesson-presentation.section-templates.set-active",{id:e})),R.notify({type:"positive",message:"Active template updated"}),Y()}catch(l){console.error(l),R.notify({type:"negative",message:"Failed to set active"})}})(e.id)},{default:h(()=>[x(o,null,{default:h(()=>v[6]||(v[6]=[Q("Set as Active")])),_:1})]),_:2},1032,["onClick"])),e.is_active?j("",!0):(y(),U(l,{key:1,flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:l=>(async e=>{R.dialog({title:"Confirm Delete",message:"Are you sure?",cancel:!0}).onOk(async()=>{try{await S.delete(route("lesson-presentation.section-templates.destroy",{id:e})),R.notify({type:"positive",message:"Template deleted"}),Y()}catch(l){console.error(l),R.notify({type:"negative",message:"Failed to delete"})}})})(e.id)},{default:h(()=>[x(o,null,{default:h(()=>v[7]||(v[7]=[Q("Delete")])),_:1})]),_:2},1032,["onClick"]))])]}),_:2},1024)]),_:2},1024))),128))])]),x(u,{modelValue:$.value,"onUpdate:modelValue":v[3]||(v[3]=e=>$.value=e),persistent:"",maximized:""},{default:h(()=>[x(s,null,{default:h(()=>[x(t,{class:"bg-primary text-white row items-center"},{default:h(()=>[V("div",E,k(X.value.id?"Edit":"Create")+" Template",1),x(m),A(x(l,{flat:"",round:"",dense:"",icon:"close"},null,512),[[n]])]),_:1}),x(t,{class:"q-pa-md"},{default:h(()=>[V("div",H,[x(d,{modelValue:X.value.name,"onUpdate:modelValue":v[0]||(v[0]=e=>X.value.name=e),label:"Template Name *",outlined:"",dense:"",class:"mb-6"},null,8,["modelValue"]),V("div",L,[v[8]||(v[8]=V("h3",{class:"text-lg font-semibold"},"Sections",-1)),x(l,{flat:"",dense:"",color:"primary",icon:"add",label:"Add Section",onClick:le})]),x(T(I),{modelValue:X.value.structure.sections,"onUpdate:modelValue":v[1]||(v[1]=e=>X.value.structure.sections=e),handle:".drag-handle","item-key":"id"},{item:h(({element:e,index:a})=>[x(s,{flat:"",bordered:"",class:"mb-3"},{default:h(()=>[x(t,{class:"flex items-start gap-4"},{default:h(()=>[x(i,{name:"drag_indicator",class:"drag-handle cursor-move text-gray-400",size:"24px"}),V("div",G,[x(d,{modelValue:e.id,"onUpdate:modelValue":l=>e.id=l,label:"Section ID *",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),x(d,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,label:"Title *",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),x(d,{modelValue:e.icon,"onUpdate:modelValue":l=>e.icon=l,label:"Emoji Icon",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),x(d,{modelValue:e.qIcon,"onUpdate:modelValue":l=>e.qIcon=l,label:"Quasar Icon",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),x(d,{modelValue:e.bg,"onUpdate:modelValue":l=>e.bg=l,label:"Background Color",dense:"",outlined:"",style:w({backgroundColor:e.bg})},{append:h(()=>[x(i,{name:"colorize",class:"cursor-pointer"},{default:h(()=>[x(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:h(()=>[x(p,{modelValue:e.bg,"onUpdate:modelValue":l=>e.bg=l},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","style"]),x(d,{modelValue:e.bgActive,"onUpdate:modelValue":l=>e.bgActive=l,label:"Active BG",dense:"",outlined:"",style:w({backgroundColor:e.bgActive})},{append:h(()=>[x(i,{name:"colorize",class:"cursor-pointer"},{default:h(()=>[x(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:h(()=>[x(p,{modelValue:e.bgActive,"onUpdate:modelValue":l=>e.bgActive=l},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","style"]),x(d,{modelValue:e.borderColor,"onUpdate:modelValue":l=>e.borderColor=l,label:"Border Color",dense:"",outlined:"",style:w({backgroundColor:e.borderColor})},{append:h(()=>[x(i,{name:"colorize",class:"cursor-pointer"},{default:h(()=>[x(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:h(()=>[x(p,{modelValue:e.borderColor,"onUpdate:modelValue":l=>e.borderColor=l},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","style"]),x(d,{modelValue:e.textColor,"onUpdate:modelValue":l=>e.textColor=l,label:"Text Color",dense:"",outlined:"",style:w({color:e.textColor})},{append:h(()=>[x(i,{name:"colorize",class:"cursor-pointer"},{default:h(()=>[x(f,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:h(()=>[x(p,{modelValue:e.textColor,"onUpdate:modelValue":l=>e.textColor=l},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","style"])]),x(l,{flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:e=>(e=>{X.value.structure.sections.splice(e,1)})(a)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])])]),_:1}),x(r,{align:"right",class:"border-t"},{default:h(()=>[x(l,{flat:"",label:"Cancel",onClick:v[2]||(v[2]=e=>$.value=!1)}),x(l,{unelevated:"",color:"primary",label:"Save",onClick:ae,loading:W.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{K as default};
