import{a7 as e,f as s,M as a,J as o,b as t,z as r,a4 as l,K as m,Q as i,N as n,V as u,I as d,W as c,P as p,U as f,a0 as g,F as b}from"./vendor-DuKqz2x4.js";import{A as w}from"./AuthenticationCard-CBdkQVRo.js";import{_ as y}from"./AuthenticationCardLogo-LroOaa5a.js";import{_ as v}from"./Checkbox-eXwwg0Qm.js";import{_ as x}from"./InputError-DsbrcuwC.js";import{_ as h}from"./InputLabel-D7_a4jhT.js";import{_ as j}from"./PrimaryButton-Cw-PZntm.js";import{_ as k}from"./TextInput-CjrCWcm1.js";import"./app-BB4Fw2oM.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const _={key:0,class:"mb-4 font-medium text-sm text-green-600"},V={key:0,class:"mt-4"},C={key:1,class:"block mt-4"},I={class:"flex items-center"},L={key:2,class:"flex items-center justify-end mt-4"},P={key:3,class:"mt-4 text-center text-sm text-gray-600"},U={__name:"Login",props:{canResetPassword:Boolean,status:String},setup(U){const R=e({email:"",password:"",remember:!1}),q=s(!1);async function A(){if(R.email&&!(R.email.length<3)){q.value=!0;try{const e=await axios.post(route("detect.school"),{email:R.email});e.data.redirect&&(window.location.href=e.data.redirect+"?email="+encodeURIComponent(R.email))}catch(e){console.log("No school detected, using default login")}finally{q.value=!1}}}const B=()=>{R.transform(e=>({...e,remember:R.remember?"on":""})).post(route("login"),{onFinish:()=>R.reset("password")})};return(e,s)=>(o(),a(b,null,[t(r(l),{title:"Log in"}),t(w,null,{logo:m(()=>[t(y)]),default:m(()=>[U.status?(o(),a("div",_,u(U.status),1)):i("",!0),n("form",{onSubmit:g(B,["prevent"])},[n("div",null,[t(h,{for:"email",value:"Email"}),t(k,{id:"email",modelValue:r(R).email,"onUpdate:modelValue":s[0]||(s[0]=e=>r(R).email=e),class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"username",onBlur:A},null,8,["modelValue"]),t(x,{class:"mt-2",message:r(R).errors.email},null,8,["message"])]),q.value?i("",!0):(o(),a("div",V,[t(h,{for:"password",value:"Password"}),t(k,{id:"password",modelValue:r(R).password,"onUpdate:modelValue":s[1]||(s[1]=e=>r(R).password=e),type:"password",class:"mt-1 block w-full",required:"",autocomplete:"current-password"},null,8,["modelValue"]),t(x,{class:"mt-2",message:r(R).errors.password},null,8,["message"])])),q.value?i("",!0):(o(),a("div",C,[n("label",I,[t(v,{checked:r(R).remember,"onUpdate:checked":s[2]||(s[2]=e=>r(R).remember=e),name:"remember"},null,8,["checked"]),s[3]||(s[3]=n("span",{class:"ms-2 text-sm text-gray-600"},"Remember me",-1))])])),q.value?i("",!0):(o(),a("div",L,[U.canResetPassword?(o(),d(r(p),{key:0,href:e.route("password.request"),class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:m(()=>s[4]||(s[4]=[c(" Forgot your password? ")])),_:1},8,["href"])):i("",!0),t(j,{class:f(["ms-4",{"opacity-25":r(R).processing}]),disabled:r(R).processing},{default:m(()=>s[5]||(s[5]=[c(" Log in ")])),_:1},8,["class","disabled"])])),q.value?(o(),a("div",P," Detecting your school... ")):i("",!0)],32)]),_:1})],64))}};export{U as default};
