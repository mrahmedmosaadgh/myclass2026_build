import{o as e,u as l,c as a,d as t,Q as s,m as o,b as i,a as n,h as d,i as r,j as u,l as c,f as v,aP as p,C as m,A as g,k as f,p as b}from"./app-CqJgtQaN.js";import{Q as y,a as x}from"./QToolbar-Ca3FN16A.js";import{Q as h}from"./QTab-ryoZpl60.js";import{Q as w}from"./QTabs-HxdE4zj2.js";import{Q as _}from"./QTabPanel-ZKXTFaGG.js";import{Q as k}from"./QSelect-DIrzf0A1.js";import{Q as C}from"./QBadge-Coi-CloS.js";import{Q as j}from"./QTabPanels-B9tZ3cBE.js";import{f as V,k as S,a as A,o as z,_ as N,M as U,J as P,b as I,I as F,Q as B,K as E,N as R,V as Q,y as $,W as T,F as D,R as M,ag as L,ah as q,U as O}from"./vendor-DuKqz2x4.js";import{r as G}from"./reward_sys_point_action-CqMZi24d.js";import W from"./PeriodSelectionRefactored-cg9UapZM.js";import K from"./ClassroomSelection-DmnJsvTw.js";import J from"./TopLeaderboard-DEOxDNLj.js";import Z from"./StudentCard-BcNCufoG.js";import Y from"./StudentGrouping-CW4VAI2H.js";import H from"./BehaviorIncidents-CN2fFnaU.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./rtl-Cr6c3OOr.js";import"./use-panel-CvVDQB6d.js";import"./use-render-cache-CmTcazfP.js";import"./html2canvas.esm-Cq3pa7K9.js";import"./CertificateGenerator-DbhSd2TB.js";import"./QSpace-1qvgFvrB.js";import"./QBar-dUcuj-Ci.js";import"./jspdf.es.min-BZKw8HNe.js";import"./AvatarManager-BpOQ7k6V.js";import"./CameraCapture-BPBLcg2-.js";import"./vuedraggable.umd-CABkNphu.js";import"./index-DJPqu1_-.js";import"./QBtnToggle-nmVF79qa.js";import"./IncidentPrintReport-CduXi70k.js";const X={class:"p-6 space-y-6 bg-gradient-to-br from-blue-50 to-indigo-50 min-h-screen"},ee={class:"flex items-center justify-between bg-white p-4 rounded-lg border border-gray-200 shadow-sm"},le={class:"flex items-center gap-4"},ae={class:"bg-blue-100 p-3 rounded-full text-blue-600"},te={class:"text-lg font-bold text-gray-800 flex items-center gap-2"},se={key:0},oe={key:1,class:"text-gray-400 italic"},ie={class:"text-blue-600 font-mono bg-blue-50 px-2 py-0.5 rounded text-base"},ne={class:"text-xs text-gray-500 mt-1"},de={class:"max-w-7xl mx-auto space-y-8"},re={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200"},ue={class:"text-lg font-bold text-gray-700 mb-4 flex items-center gap-2"},ce={class:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-100 flex justify-center"},ve={class:"text-sm text-gray-700"},pe={class:"font-bold text-blue-600 font-mono text-lg"},me={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200"},ge={class:"text-lg font-bold text-gray-700 mb-4 flex items-center gap-2"},fe={class:"space-y-4"},be={class:"flex justify-between items-center mb-4"},ye={class:"flex gap-2"},xe={class:"flex flex-wrap justify-center gap-6 p-4"},he={class:""},we={class:"flex items-center justify-between gap-4"},_e={class:"flex items-center gap-3 flex-1"},ke={class:"flex flex-col md:flex-row gap-6 mt-6"},Ce={class:"w-full md:w-fit flex-shrink-0"},je={class:"sticky top-4"},Ve={class:"bg-blue-50 rounded-xl border border-blue-100 p-4 shadow-sm"},Se={class:"font-bold text-blue-800 mb-3 flex items-center gap-2"},Ae={key:0,class:"text-center py-8 text-gray-400 italic text-sm"},ze={key:1,class:"flex flex-col gap-2 max-h-[calc(100vh-300px)] overflow-y-auto custom-scrollbar pr-1"},Ne={class:"leading-tight overflow-hidden w-full"},Ue={class:"font-bold w-32 inline-block text-xl"},Pe={class:"text-xs opacity-80 truncate"},Ie={class:"mt-4 pt-3 border-t border-blue-200 space-y-2"},Fe={class:"grid grid-cols-3 gap-1"},Be={class:"grid grid-cols-2 gap-2 pt-2"},Ee={class:"flex-1"},Re={key:0,class:"mb-3 p-3 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg border border-indigo-200"},Qe={class:"font-bold text-indigo-900 flex items-center gap-2"},$e={class:"flex flex-wrap justify-center gap-4"},Te={class:"space-y-4"},De={class:"p-4 bg-red-50 rounded-lg border border-red-200"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Le={class:"mt-2 text-sm"},qe={class:"flex flex-wrap justify-center gap-6 p-4"},Oe={class:"space-y-4"},Ge={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},We=["onClick"],Ke={class:"flex items-start justify-between mb-3"},Je={class:"flex-1"},Ze={class:"font-semibold text-lg"},Ye={class:"text-xs text-gray-600"},He={key:0,class:"text-xs text-red-600 mt-1"},Xe={class:"space-y-2"},el={class:"p-2 bg-green-100 rounded flex justify-between items-center"},ll={class:"text-sm font-bold text-green-900"},al={class:"p-2 bg-red-100 rounded flex justify-between items-center"},tl={class:"text-sm font-bold text-red-900"},sl={class:"p-2 bg-blue-100 rounded flex justify-between items-center"},ol={class:"text-lg font-bold text-blue-600"},il={class:"space-y-4"},nl={class:"flex justify-between items-center mb-4"},dl={key:0,class:"text-center py-8"},rl={class:"flex items-start justify-between"},ul={class:"flex-1"},cl={class:"flex items-center gap-2 mb-1"},vl={class:"font-bold text-lg"},pl={class:"text-2xl"},ml={class:"text-sm text-gray-700"},gl={class:"text-xs text-gray-500 mt-1"},fl={key:0,class:"text-xs text-gray-600 mt-1 italic"},bl={key:1,class:"text-xs text-red-600 mt-1"},yl={class:"space-y-6"},xl={class:"flex justify-between items-center mb-6"},hl={class:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-6 border border-green-200"},wl={class:"flex items-center gap-3 mb-4"},_l={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},kl={class:"flex items-start justify-between mb-2"},Cl={class:"flex items-center gap-2"},jl={class:"text-3xl"},Vl={class:"font-bold text-gray-800"},Sl={class:"text-xs text-gray-500"},Al={class:"flex gap-1"},zl={class:"flex items-center justify-between mt-3 pt-3 border-t border-green-100"},Nl={class:"text-lg font-bold text-green-600"},Ul={key:0,class:"text-center py-8 text-gray-400"},Pl={class:"bg-gradient-to-r from-red-50 to-rose-50 rounded-xl p-6 border border-red-200"},Il={class:"flex items-center gap-3 mb-4"},Fl={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Bl={class:"flex items-start justify-between mb-2"},El={class:"flex items-center gap-2"},Rl={class:"text-3xl"},Ql={class:"font-bold text-gray-800"},$l={class:"text-xs text-gray-500"},Tl={class:"flex gap-1"},Dl={class:"flex items-center justify-between mt-3 pt-3 border-t border-red-100"},Ml={class:"text-lg font-bold text-red-600"},Ll={key:0,class:"text-center py-8 text-gray-400"},ql={class:"p-4 border-b border-blue-200 bg-blue-100/50"},Ol={class:"font-bold text-blue-900 flex items-center gap-2 text-lg"},Gl={class:"flex-1 overflow-y-auto p-4 custom-scrollbar"},Wl={key:0,class:"text-center py-8 text-gray-400 italic text-sm"},Kl={key:1,class:"flex flex-col gap-2"},Jl={class:"flex flex-col leading-tight overflow-hidden w-full"},Zl={class:"font-bold text-2xl truncate"},Yl={class:"text-sm opacity-80 truncate"},Hl={class:"p-3 border-t border-blue-200 bg-white"},Xl={class:"grid grid-cols-3 gap-2"},ea={class:"flex-1 flex flex-col bg-white"},la={class:"text-h6 font-bold flex items-center gap-2"},aa={class:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3"},ta=["onClick"],sa={class:"font-bold text-xl leading-tight text-gray-800 line-clamp-2"},oa={class:"text-h6"},ia=e({__name:"reward_sys",setup(e){V("https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf");const ia=l(),na=V("attendance");S(na,(e,l)=>{e!==l&&(xa.value=[])});const da=V([]),ra=V([]),ua=V([]),ca=V(null),va=V((new Date).toISOString().split("T")[0]),pa=V(1),ma=V(1),ga=V(1),fa=V(1),ba=V(null),ya=V(null),xa=V([]),ha=V({}),wa=V({}),_a=V({}),ka=V([]);V([]);const Ca=V(!1),ja=V(!1),Va=V(!1),Sa=V(!1),Aa=V(!1),za=V(null),Na=V(null),Ua=V({message:"",created:0,skipped:0}),Pa=V(!0),Ia=V(!1),Fa=V(!1),Ba=V("positive"),Ea=V(null),Ra=V("no_groups"),Qa=V([]),$a=V(!1),Ta=V(null),Da=V(!1),Ma=V(null),La=V(!1),qa=V({name:"",type:"positive",points:0,icon:""}),Oa=A(()=>`${pa.value}.${ma.value}.${ga.value}.${fa.value}`),Ga=A(()=>{console.log("ðŸ” All behaviors:",ua.value);const e=ua.value.filter(e=>{if(e.type)return"positive"===e.type||"reward"===e.type;return(e.value||e.points||0)>0});return console.log("âœ… Positive behaviors:",e),e}),Wa=A(()=>{const e=ua.value.filter(e=>{if(e.type)return"negative"===e.type||"penalty"===e.type;return(e.value||e.points||0)<0});return console.log("âš ï¸ Negative behaviors:",e),e}),Ka=A(()=>[{label:"No Groups",value:"no_groups",icon:"grid_view"},{label:"Name (Aâ†’Z)",value:"name_asc",icon:"sort_by_alpha"},{label:"Name (Zâ†’A)",value:"name_desc",icon:"sort_by_alpha"},...Qa.value.map(e=>({label:e.name,value:e.id,icon:"groups"}))]),Ja=A(()=>{const e=Ka.value.find(e=>e.value===Ra.value);return(null==e?void 0:e.icon)||"grid_view"}),Za=A(()=>{if("no_groups"===Ra.value)return[{name:null,students:ra.value}];if("name_asc"===Ra.value){return[{name:null,students:[...ra.value].sort((e,l)=>(e.firstName||"").localeCompare(l.firstName||""))}]}if("name_desc"===Ra.value){return[{name:null,students:[...ra.value].sort((e,l)=>(l.firstName||"").localeCompare(e.firstName||""))}]}const e=Qa.value.find(e=>e.id===Ra.value);if(!e)return[{name:null,students:ra.value}];const l=e.groups.map(e=>({name:e.name,students:ra.value.filter(l=>e.student_ids.includes(l.id))})),a=new Set(e.groups.flatMap(e=>e.student_ids)),t=ra.value.filter(e=>!a.has(e.id));return t.length>0&&l.push({name:"Unassigned",students:t}),l});function Ya(){const e=ra.value.filter(e=>wa.value[e.id]);xa.value=e.map(e=>e.id)}function Ha(){const e=ra.value.filter(e=>wa.value[e.id]),l=new Set(xa.value),a=[];e.forEach(e=>{l.has(e.id)||a.push(e.id)}),xa.value=a}function Xa(e){0!==xa.value.length?(Ba.value=e,Ea.value=null,Fa.value=!0):ia.notify({message:"Please select students first",color:"warning",position:"top"})}async function et(){Ea.value&&("positive"===Ba.value?(ba.value=Ea.value,await async function(){await vt(ba.value),ba.value=null}()):(ya.value=Ea.value,await ct()),Fa.value=!1,Ea.value=null)}async function lt(e){var l,a;const t=Qa.value.findIndex(l=>l.id===e.id);t>=0?Qa.value[t]=e:Qa.value.push(e);try{const l=await N.post("/api/classroom-layouts/save",{classroom_id:ca.value,layouts:Qa.value});if(!l.data.success)throw new Error(l.data.message||"Failed to save layout");ia.notify({message:`Layout "${e.name}" saved successfully!`,color:"positive",position:"top",icon:"check_circle"}),Ra.value=e.id,$a.value=!1,Ta.value=null}catch(s){if(console.error("Error saving layout:",s),ia.notify({message:"Failed to save layout: "+((null==(a=null==(l=s.response)?void 0:l.data)?void 0:a.message)||s.message),color:"negative",position:"top",icon:"error"}),t>=0)Qa.value.splice(t,1);else{const l=Qa.value.findIndex(l=>l.id===e.id);l>=0&&Qa.value.splice(l,1)}}}async function at(e){var l,a;const t=Qa.value.findIndex(l=>l.id===e);if(t<0)return;const s=Qa.value[t];Qa.value.splice(t,1),Ra.value===e&&(Ra.value="no_groups");try{const e=await N.post("/api/classroom-layouts/save",{classroom_id:ca.value,layouts:Qa.value});if(!e.data.success)throw new Error(e.data.message||"Failed to delete layout");ia.notify({message:`Layout "${s.name}" deleted successfully!`,color:"positive",position:"top",icon:"delete"})}catch(o){console.error("Error deleting layout:",o),ia.notify({message:"Failed to delete layout: "+((null==(a=null==(l=o.response)?void 0:l.data)?void 0:a.message)||o.message),color:"negative",position:"top",icon:"error"}),Qa.value.splice(t,0,s),"no_groups"===Ra.value&&(Ra.value=e)}}function tt(e){e?(Ma.value=e,qa.value={name:e.name,type:e.type||(e.value>0?"positive":"negative"),points:e.value||e.points||0,icon:e.icon||""}):(Ma.value=null,qa.value={name:"",type:"positive",points:0,icon:""}),Da.value=!0}async function st(){var e,l;if(qa.value.name&&qa.value.type&&null!==qa.value.points){La.value=!0;try{const e={name:qa.value.name,type:qa.value.type,value:qa.value.points,points:qa.value.points,icon:qa.value.icon||null,school_id:1,year_id:2};if(Ma.value){const l=await N.put(`/api/behaviors/${Ma.value.id}`,e),a=ua.value.findIndex(e=>e.id===Ma.value.id);a>=0&&(ua.value[a]=l.data),ia.notify({message:"Behavior updated successfully!",color:"positive",icon:"check_circle"})}else{const l=await N.post("/api/behaviors",e);ua.value.push(l.data),ia.notify({message:"Behavior created successfully!",color:"positive",icon:"check_circle"})}Da.value=!1,Ma.value=null}catch(a){console.error("Error saving behavior:",a),ia.notify({message:"Failed to save behavior: "+((null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.message)||a.message),color:"negative",icon:"error"})}finally{La.value=!1}}else ia.notify({message:"Please fill in all required fields",color:"warning",position:"top"})}function ot(e){ia.dialog({title:"Confirm Delete",message:`Are you sure you want to delete "${e.name}"? This action cannot be undone.`,cancel:!0,persistent:!0,color:"negative"}).onOk(()=>{!async function(e){var l,a;try{await N.delete(`/api/behaviors/${e.id}`);const l=ua.value.findIndex(l=>l.id===e.id);l>=0&&ua.value.splice(l,1),ia.notify({message:"Behavior deleted successfully!",color:"positive",icon:"check_circle"})}catch(t){console.error("Error deleting behavior:",t),ia.notify({message:"Failed to delete behavior: "+((null==(a=null==(l=t.response)?void 0:l.data)?void 0:a.message)||t.message),color:"negative",icon:"error"})}}(e)})}function it(e){va.value=e.date,pa.value=e.semester,ma.value=e.week,ga.value=e.day,fa.value=e.periodNumber,console.log("ðŸ“… Period changed:",{periodCode:Oa.value,...e})}function nt(e){if(!wa.value[e])return void ia.notify({message:"Cannot select absent students",color:"warning",position:"top",timeout:1e3});const l=xa.value.indexOf(e);-1===l?xa.value.push(e):xa.value.splice(l,1)}function dt(){xa.value=[]}async function rt(e){if(!e)return ra.value=[],xa.value=[],void(Qa.value=[]);try{ja.value=!0,ra.value=[],xa.value=[],Na.value=null,Ua.value={message:"",created:0,skipped:0},await async function(){if(ca.value)try{const e=await N.get("/api/classroom-layouts/load",{params:{classroom_id:ca.value}});e.data.success&&(Qa.value=e.data.data||[])}catch(e){console.error("Error loading layouts:",e)}}()}catch(l){console.error("Failed to load classroom:",l),ia.notify({message:"Failed to load classroom: "+l.message,color:"negative",position:"top"})}finally{ja.value=!1}}async function ut(){if(ca.value){ja.value=!0,Ua.value={message:"Initializing...",created:0,skipped:0};try{const e={classroom_id:ca.value,date:va.value,period_code:Oa.value},l=await N.post("/api/student-behaviors/init-classroom",e);if(l&&l.data){const e=l.data;Na.value=e.student_behaviors_mains_id,Ua.value={message:`Session initialized (created ${e.created}, skipped ${e.skipped})`,created:e.created,skipped:e.skipped};const a=e.student_behaviors||[],t=a.map(e=>({id:e.student.id,name:e.student.name||`Student ${e.student_id}`,firstName:e.student.first_name,secondName:e.student.second_name,lastName:e.student.last_name,avatar:e.student.avatar,behaviorRecordId:e.id}));ra.value=t,xa.value=[];const s={};for(const l of a)wa.value[l.student_id]=void 0===l.attend||l.attend,s[l.student_id]={attend:void 0===l.attend||l.attend,points_plus:l.points_plus||0,points_minus:l.points_minus||0};ha.value=s,ia.notify({message:"Session initialized",color:"positive",position:"top"}),await ft(),Pa.value=!1}}catch(e){console.error("Failed to init classroom session:",e),Ua.value={message:"Initialization failed",created:0,skipped:0},ia.notify({message:"Failed to init session: "+(e.message||"error"),color:"negative",position:"top"})}finally{ja.value=!1}}}async function ct(){await vt(ya.value),ya.value=null}async function vt(e){if(xa.value.length&&e)try{Va.value=!0;const l=await G.applyBehaviorToStudents(xa.value,e,{date:va.value,periodCode:Oa.value,classroomId:ca.value});l.success?(ia.notify({message:`Applied behavior to ${xa.value.length} students`,color:"positive",position:"top"}),await ut(),xa.value=[]):ia.notify({message:l.error||"Failed to apply behavior",color:"negative",position:"top"})}catch(l){console.error("Error applying behavior:",l),ia.notify({message:l.message||"Error applying behavior",color:"negative",position:"top"})}finally{Va.value=!1}}async function pt(e,l,a){wa.value[e]=l,_a.value[e]=!0;try{const a=await G.updateAttendance(e,l,{date:va.value,periodCode:Oa.value,classroomId:ca.value});if(!a.success)throw new Error(a.error||"Failed to update attendance");ia.notify({message:a.message||"Attendance updated",color:"positive",position:"top"}),!1===l&&await ut()}catch(t){console.error("Failed to persist attendance for",e,t),wa.value[e]=a,ia.notify({message:"Failed to update attendance. Reverted.",color:"negative",position:"top"})}finally{_a.value[e]=!1}}async function mt(){Sa.value=!0;const e={};for(const a of ra.value)e[a.id]=!0,wa.value[a.id]=!0;try{(await G.batchUpdateAttendance(e,{date:va.value,periodCode:Oa.value,classroomId:ca.value})).success&&ia.notify({message:"All students marked present",color:"positive",position:"top"})}catch(l){console.error("Failed to mark all present:",l),ia.notify({message:"Failed to mark all present",color:"negative",position:"top"})}finally{Sa.value=!1}}async function gt(){Sa.value=!0;const e={};for(const a of ra.value)e[a.id]=!1,wa.value[a.id]=!1;try{(await G.batchUpdateAttendance(e,{date:va.value,periodCode:Oa.value,classroomId:ca.value})).success&&ia.notify({message:"All students marked absent",color:"warning",position:"top"})}catch(l){console.error("Failed to mark all absent:",l),ia.notify({message:"Failed to mark all absent",color:"negative",position:"top"})}finally{Sa.value=!1}}async function ft(){Aa.value=!0;try{const e=await G.getRecentActions({classroomId:ca.value,date:va.value,limit:10});e.success?ka.value=e.data:console.error("Failed to load history:",e.error)}catch(e){console.error("Error loading history:",e)}finally{Aa.value=!1}}function bt(e){if(!e)return"";return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}async function yt(e){console.log("Incident recorded:",e),await ut(),ia.notify({message:"Behavior incident recorded (-1 point)",color:"warning",position:"top"})}return z(async()=>{try{console.log("ðŸš€ Initializing reward system...");const e=await N.get("/my_classes_with_students");da.value=e.data,console.log(`âœ… Loaded ${da.value.length} classrooms`);const l=await G.fetchBehaviors();l.success?(ua.value=l.data,console.log(`âœ… Loaded ${ua.value.length} behaviors`),console.log("ðŸ“‹ Behaviors data:",ua.value),ua.value=ua.value.map(e=>({...e,value:e.value||e.points||0})),console.log("ðŸ“‹ Normalized behaviors:",ua.value)):(console.error("âŒ Failed to load behaviors:",l.error),ia.notify({message:"Failed to load behaviors: "+l.error,color:"negative",position:"top"})),console.log("âœ… Reward system initialized")}catch(e){console.error("âŒ Failed to initialize reward system:",e),ia.notify({message:"Failed to initialize reward system: "+e.message,color:"negative",position:"top"})}}),(e,l)=>(P(),U("div",X,[I(o,{class:"shadow-lg rounded-2xl overflow-hidden"},{default:E(()=>[I(a,{class:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white"},{default:E(()=>l[27]||(l[27]=[R("h1",{class:"text-3xl font-bold"},"ðŸ† Reward System",-1),R("p",{class:"text-blue-100"},"Manage student behaviors and track achievements",-1)])),_:1}),I(a,{class:"p-6 space-y-4"},{default:E(()=>{var e;return[R("div",ee,[R("div",le,[R("div",ae,[I(t,{name:"event_note",size:"md"})]),R("div",null,[l[29]||(l[29]=R("div",{class:"text-sm text-gray-500 font-medium"},"Current Session",-1)),R("div",te,[ca.value?(P(),U("span",se,Q((null==(e=da.value.find(e=>e.classroom_id===ca.value))?void 0:e.classroom_name)||"Unknown Class"),1)):(P(),U("span",oe,"No classroom selected")),l[28]||(l[28]=R("span",{class:"text-gray-300"},"|",-1)),R("span",ie,Q(Oa.value),1)]),R("div",ne,Q(new Date(va.value).toLocaleDateString())+" â€¢ Period "+Q(fa.value),1)])]),I(s,{color:"primary",icon:"settings",label:"Setup Session",onClick:l[0]||(l[0]=e=>Pa.value=!0),size:"lg",class:"shadow-md"})])]}),_:1})]),_:1}),I(i,{modelValue:Pa.value,"onUpdate:modelValue":l[8]||(l[8]=e=>Pa.value=e),"full-width":"","full-height":""},{default:E(()=>[I(o,{class:"flex flex-col bg-gray-50"},{default:E(()=>[I(y,{class:"bg-white border-b border-gray-200 p-4"},{default:E(()=>[I(x,{class:"text-xl font-bold text-gray-800 flex items-center gap-2"},{default:E(()=>[I(t,{name:"settings_suggest",color:"primary"}),l[30]||(l[30]=T(" Session Setup "))]),_:1}),$(I(s,{flat:"",round:"",dense:"",icon:"close"},null,512),[[p]])]),_:1}),I(a,{class:"flex-1 overflow-auto p-6"},{default:E(()=>[R("div",de,[R("div",re,[R("h3",ue,[I(t,{name:"schedule",class:"text-blue-500"}),l[31]||(l[31]=T(" Time & Period "))]),I(W,{date:va.value,semester:pa.value,week:ma.value,day:ga.value,"period-number":fa.value,"onUpdate:date":l[1]||(l[1]=e=>va.value=e),"onUpdate:semester":l[2]||(l[2]=e=>pa.value=e),"onUpdate:week":l[3]||(l[3]=e=>ma.value=e),"onUpdate:day":l[4]||(l[4]=e=>ga.value=e),"onUpdate:periodNumber":l[5]||(l[5]=e=>fa.value=e),onChange:it,persist:!0,persistKey:"reward-system-period-selection"},null,8,["date","semester","week","day","period-number"]),R("div",ce,[R("p",ve,[l[32]||(l[32]=T(" Active Period Code: ")),R("span",pe,Q(Oa.value),1)])])]),R("div",me,[R("h3",ge,[I(t,{name:"school",class:"text-blue-500"}),l[33]||(l[33]=T(" Classroom "))]),I(K,{modelValue:ca.value,"onUpdate:modelValue":l[6]||(l[6]=e=>ca.value=e),classrooms:da.value,loading:ja.value,"init-status":Ua.value,"avatar-edit-enabled":Ia.value,"onUpdate:avatarEditEnabled":l[7]||(l[7]=e=>Ia.value=e),onChange:rt,onInit:ut},null,8,["modelValue","classrooms","loading","init-status","avatar-edit-enabled"])])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),ra.value.length?(P(),F(o,{key:0,class:"shadow-lg rounded-2xl"},{default:E(()=>[I(w,{modelValue:na.value,"onUpdate:modelValue":l[10]||(l[10]=e=>na.value=e),dense:"",class:"text-grey-7","active-color":"primary","indicator-color":"primary",align:"left"},{default:E(()=>[I(h,{name:"attendance",icon:"how_to_reg",label:"Attendance"}),I(h,{name:"behavior_incidents",icon:"report_problem",label:"Behavior Incidents"}),I(h,{name:"positive",icon:"add_circle",label:"+ Points"}),I(h,{name:"history",icon:"cancel",label:"Cancel"}),I(h,{name:"champions",icon:"emoji_events",label:"Champions",onClick:l[9]||(l[9]=e=>Ca.value=!0)}),I(h,{name:"behaviors",icon:"settings",label:"Behaviors"})]),_:1},8,["modelValue"]),I(n),I(j,{modelValue:na.value,"onUpdate:modelValue":l[17]||(l[17]=e=>na.value=e),animated:""},{default:E(()=>[I(_,{name:"attendance"},{default:E(()=>[R("div",fe,[R("div",be,[l[34]||(l[34]=R("h3",{class:"text-xl font-bold"},"Manage Attendance",-1)),R("div",ye,[I(s,{color:"positive",label:"Mark All Present",onClick:mt,loading:Sa.value},null,8,["loading"]),I(s,{color:"warning",label:"Mark All Absent",onClick:gt,loading:Sa.value},null,8,["loading"])])]),R("div",xe,[(P(!0),U(D,null,M(ra.value,e=>{var l,a,t,s;return P(),F(Z,{key:e.id,student:e,"disable-behavior":!wa.value[e.id],"allow-disabled-click":!0,"avatar-edit-enabled":Ia.value,"student-summary":{positive:(null==(l=ha.value[e.id])?void 0:l.points_plus)||0,negative:(null==(a=ha.value[e.id])?void 0:a.points_minus)||0,total:((null==(t=ha.value[e.id])?void 0:t.points_plus)||0)-((null==(s=ha.value[e.id])?void 0:s.points_minus)||0)},onSelect:l=>async function(e){const l=void 0===wa.value[e]||wa.value[e],a=!l;if(!1===a){const t=ha.value[e];if(t&&(t.points_plus>0||t.points_minus>0))return void ia.dialog({title:"Warning",message:`This student has ${t.points_plus} positive and ${t.points_minus} negative points for this session. Marking them absent will remove all their points for this session. Continue?`,cancel:!0,persistent:!0,ok:{label:"Yes, Mark Absent",color:"negative"},cancel:{label:"Cancel",color:"grey"}}).onOk(async()=>{await pt(e,a,l)})}await pt(e,a,l)}(e.id)},null,8,["student","disable-behavior","avatar-edit-enabled","student-summary","onSelect"])}),128))])])]),_:1}),I(_,{name:"behavior_incidents"},{default:E(()=>[I(H,{students:ra.value,"classroom-id":ca.value,date:va.value,"period-code":Oa.value,onIncidentRecorded:yt},null,8,["students","classroom-id","date","period-code"])]),_:1}),I(_,{name:"positive"},{default:E(()=>[R("div",he,[I(o,{class:"shadow-md rounded-xl mb-4"},{default:E(()=>[I(a,{class:"p-3 bg-gradient-to-r from-blue-50 to-indigo-50"},{default:E(()=>[R("div",we,[R("div",_e,[I(t,{name:"view_module",size:"sm",color:"primary"}),l[35]||(l[35]=R("span",{class:"font-bold text-gray-700"},"Layout:",-1)),I(k,{modelValue:Ra.value,"onUpdate:modelValue":l[11]||(l[11]=e=>Ra.value=e),options:Ka.value,"option-value":"value","option-label":"label",outlined:"",dense:"","emit-value":"","map-options":"",class:"w-64"},{prepend:E(()=>[I(t,{name:Ja.value},null,8,["name"])]),_:1},8,["modelValue","options"])]),I(s,{flat:"",color:"primary",icon:"settings",label:"Manage Groups",onClick:l[12]||(l[12]=e=>$a.value=!0)})])]),_:1})]),_:1}),R("div",ke,[R("div",Ce,[R("div",je,[R("div",Ve,[R("h4",Se,[I(t,{name:"checklist"}),T(" Selected ("+Q(xa.value.length)+") ",1)]),0===xa.value.length?(P(),U("div",Ae," Click students to select them ")):(P(),U("div",ze,[(P(!0),U(D,null,M(xa.value,e=>(P(),F(m,{key:e,removable:"",onRemove:l=>nt(e),color:"white","text-color":"primary",class:"shadow-sm border border-blue-100 m-0 w-full"},{default:E(()=>{var l,a;return[I(g,{icon:"person",color:"primary","text-color":"white","font-size":"14px"}),R("div",Ne,[R("span",Ue,Q(null==(l=ra.value.find(l=>l.id===e))?void 0:l.firstName),1),R("span",Pe,Q(null==(a=ra.value.find(l=>l.id===e))?void 0:a.lastName),1)])]}),_:2},1032,["onRemove"]))),128))])),R("div",Ie,[R("div",Fe,[I(s,{flat:"",dense:"",color:"primary",label:"All",size:"sm",onClick:Ya,class:"bg-blue-100/50"}),I(s,{flat:"",dense:"",color:"primary",label:"Inv",size:"sm",onClick:Ha,class:"bg-blue-100/50"}),I(s,{flat:"",dense:"",color:"negative",label:"Clear",size:"sm",onClick:dt,class:"bg-red-100/50"})]),R("div",Be,[I(s,{color:"positive",icon:"add",label:"Points",onClick:l[13]||(l[13]=e=>Xa("positive")),disable:0===xa.value.length},null,8,["disable"]),I(s,{color:"negative",icon:"remove",label:"Points",onClick:l[14]||(l[14]=e=>Xa("negative")),disable:0===xa.value.length},null,8,["disable"])])])])])]),R("div",Ee,[(P(!0),U(D,null,M(Za.value,(e,l)=>(P(),U("div",{key:l,class:"mb-6"},[e.name?(P(),U("div",Re,[R("h4",Qe,[I(t,{name:"groups"}),T(" "+Q(e.name)+" ",1),I(C,{label:e.students.length,color:"indigo"},null,8,["label"])])])):B("",!0),R("div",$e,[(P(!0),U(D,null,M(e.students,e=>{var l,a,t,s;return P(),F(Z,{key:e.id,student:e,selected:xa.value.includes(e.id),"selected-id":xa.value.includes(e.id)?e.id:null,"disable-behavior":!wa.value[e.id],"allow-disabled-click":!1,"avatar-edit-enabled":Ia.value,"student-summary":{positive:(null==(l=ha.value[e.id])?void 0:l.points_plus)||0,negative:(null==(a=ha.value[e.id])?void 0:a.points_minus)||0,total:((null==(t=ha.value[e.id])?void 0:t.points_plus)||0)-((null==(s=ha.value[e.id])?void 0:s.points_minus)||0)},onSelect:l=>nt(e.id)},null,8,["student","selected","selected-id","disable-behavior","avatar-edit-enabled","student-summary","onSelect"])}),128))])]))),128))])])])]),_:1}),I(_,{name:"negative"},{default:E(()=>[R("div",Te,[l[38]||(l[38]=R("div",{class:"mb-4"},[R("h3",{class:"text-xl font-bold mb-2"},"Deduct Points"),R("p",{class:"text-sm text-gray-600"},"Select students and choose a negative behavior")],-1)),R("div",De,[R("div",Me,[I(k,{modelValue:ya.value,"onUpdate:modelValue":l[15]||(l[15]=e=>ya.value=e),options:Wa.value,"option-value":"id","option-label":"name",outlined:"",dense:"",placeholder:"Select negative behavior","emit-value":"","map-options":""},{option:E(e=>[I(d,L(q(e.itemProps)),{default:E(()=>[I(r,null,{default:E(()=>[I(u,null,{default:E(()=>[T(Q(e.opt.name),1)]),_:2},1024),I(u,{caption:""},{default:E(()=>[T(Q(e.opt.value||e.opt.points||0)+" points",1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),I(s,{color:"negative",icon:"remove_circle",label:"Apply to Selected",onClick:ct,disable:!xa.value.length||!ya.value,loading:Va.value},null,8,["disable","loading"])]),R("div",Le,[l[36]||(l[36]=T("Selected: ")),R("strong",null,Q(xa.value.length),1),l[37]||(l[37]=T(" students"))])]),R("div",qe,[(P(!0),U(D,null,M(ra.value,e=>{var l,a,t,s;return P(),F(Z,{key:e.id,student:e,selected:xa.value.includes(e.id),"selected-id":xa.value.includes(e.id)?e.id:null,"disable-behavior":!wa.value[e.id],"allow-disabled-click":!1,"avatar-edit-enabled":Ia.value,"student-summary":{positive:(null==(l=ha.value[e.id])?void 0:l.points_plus)||0,negative:(null==(a=ha.value[e.id])?void 0:a.points_minus)||0,total:((null==(t=ha.value[e.id])?void 0:t.points_plus)||0)-((null==(s=ha.value[e.id])?void 0:s.points_minus)||0)},onSelect:l=>nt(e.id)},null,8,["student","selected","selected-id","disable-behavior","avatar-edit-enabled","student-summary","onSelect"])}),128))])])]),_:1}),I(_,{name:"old_card"},{default:E(()=>[R("div",Oe,[l[42]||(l[42]=R("h3",{class:"text-xl font-bold mb-4"},"Old Card View",-1)),R("div",Ge,[(P(!0),U(D,null,M(ra.value,e=>{var a,t,s,o;return P(),U("div",{key:e.id,class:O(["p-4 border-2 rounded-lg transition",[wa.value[e.id]?xa.value.includes(e.id)?"bg-green-100 border-green-500 cursor-pointer":"bg-white border-gray-200 cursor-pointer":"bg-gray-100 border-gray-300 opacity-50 cursor-not-allowed"]]),onClick:l=>wa.value[e.id]&&nt(e.id)},[R("div",Ke,[R("div",Je,[R("p",Ze,Q(e.name),1),R("p",Ye,"ID: "+Q(e.id),1),wa.value[e.id]?B("",!0):(P(),U("p",He,"âŒ Absent"))]),I(f,{"model-value":xa.value.includes(e.id),"onUpdate:modelValue":l=>nt(e.id),disable:!wa.value[e.id],color:"positive",size:"lg"},null,8,["model-value","onUpdate:modelValue","disable"])]),R("div",Xe,[R("div",el,[l[39]||(l[39]=R("span",{class:"text-xs font-semibold text-green-800"},"Positive",-1)),R("span",ll,"+"+Q((null==(a=ha.value[e.id])?void 0:a.points_plus)||0)+" â­",1)]),R("div",al,[l[40]||(l[40]=R("span",{class:"text-xs font-semibold text-red-800"},"Negative",-1)),R("span",tl,"-"+Q((null==(t=ha.value[e.id])?void 0:t.points_minus)||0)+" âš ï¸",1)]),R("div",sl,[l[41]||(l[41]=R("span",{class:"text-xs font-semibold text-blue-800"},"Total",-1)),R("span",ol,Q(((null==(s=ha.value[e.id])?void 0:s.points_plus)||0)-((null==(o=ha.value[e.id])?void 0:o.points_minus)||0)),1)])])],10,We)}),128))])])]),_:1}),I(_,{name:"history"},{default:E(()=>[R("div",il,[R("div",nl,[l[43]||(l[43]=R("h3",{class:"text-xl font-bold"},"Recent Actions",-1)),I(s,{color:"primary",icon:"refresh",label:"Refresh",onClick:ft,loading:Aa.value},null,8,["loading"])]),ka.value.length?B("",!0):(P(),U("div",dl,l[44]||(l[44]=[R("p",{class:"text-gray-500 text-lg"},"No recent actions",-1)]))),(P(!0),U(D,null,M(ka.value,e=>{var l,a,t,o;return P(),U("div",{key:e.id,class:O(["p-4 bg-white rounded-lg border-l-4",[e.canceled?"border-gray-400 opacity-60":e.value>0?"border-green-500":"border-red-500"]])},[R("div",rl,[R("div",ul,[R("div",cl,[R("span",vl,Q((null==(a=null==(l=e.student_behavior)?void 0:l.student)?void 0:a.name)||"Unknown"),1),R("span",pl,Q(e.value>0?"â­":"âš ï¸"),1)]),R("p",ml,[R("strong",null,Q((null==(t=e.behavior)?void 0:t.name)||"Unknown Behavior"),1),R("span",{class:O(e.value>0?"text-green-600":"text-red-600")}," ("+Q(e.value>0?"+":"")+Q(e.value)+" points) ",3)]),R("p",gl,Q(bt(e.created_at))+" by "+Q((null==(o=e.created_by)?void 0:o.name)||"Unknown"),1),e.note?(P(),U("p",fl,"Note: "+Q(e.note),1)):B("",!0),e.canceled?(P(),U("p",bl," âŒ Canceled: "+Q(e.cancel_reason)+" ("+Q(bt(e.canceled_at))+") ",1)):B("",!0)]),e.canceled?B("",!0):(P(),F(s,{key:0,color:"warning",icon:"undo",label:"Undo",size:"sm",onClick:l=>async function(e){za.value=e;try{const l=await G.undoAction(e,"Undone by teacher");l.success?(ia.notify({message:"Action undone successfully",color:"positive",position:"top"}),await ft(),await ut()):ia.notify({message:l.error||"Failed to undo action",color:"negative",position:"top"})}catch(l){console.error("Error undoing action:",l),ia.notify({message:"Error undoing action",color:"negative",position:"top"})}finally{za.value=null}}(e.id),loading:za.value===e.id},null,8,["onClick","loading"]))])],2)}),128))])]),_:1}),I(_,{name:"behaviors"},{default:E(()=>[R("div",yl,[R("div",xl,[l[45]||(l[45]=R("h3",{class:"text-2xl font-bold text-gray-800"},"Behavior Management",-1)),I(s,{color:"primary",icon:"add",label:"Add New Behavior",onClick:l[16]||(l[16]=e=>tt(null)),size:"md",class:"shadow-md"})]),R("div",hl,[R("div",wl,[I(t,{name:"add_circle",size:"md",color:"positive"}),l[46]||(l[46]=R("h4",{class:"text-xl font-bold text-green-800"},"Positive Behaviors / Rewards",-1)),I(C,{label:Ga.value.length,color:"positive"},null,8,["label"])]),R("div",_l,[(P(!0),U(D,null,M(Ga.value,e=>(P(),U("div",{key:e.id,class:"bg-white rounded-lg p-4 shadow-sm border border-green-100 hover:shadow-md transition-all"},[R("div",kl,[R("div",Cl,[R("div",jl,Q(e.icon||"â­"),1),R("div",null,[R("h5",Vl,Q(e.name),1),R("p",Sl,"ID: "+Q(e.id),1)])]),R("div",Al,[I(s,{flat:"",round:"",dense:"",icon:"edit",color:"primary",size:"sm",onClick:l=>tt(e)},{default:E(()=>[I(b,null,{default:E(()=>l[47]||(l[47]=[T("Edit")])),_:1})]),_:2},1032,["onClick"]),I(s,{flat:"",round:"",dense:"",icon:"delete",color:"negative",size:"sm",onClick:l=>ot(e)},{default:E(()=>[I(b,null,{default:E(()=>l[48]||(l[48]=[T("Delete")])),_:1})]),_:2},1032,["onClick"])])]),R("div",zl,[l[49]||(l[49]=R("span",{class:"text-sm text-gray-600"},"Points:",-1)),R("span",Nl,"+"+Q(e.value||e.points||0),1)])]))),128))]),0===Ga.value.length?(P(),U("div",Ul,[I(t,{name:"sentiment_neutral",size:"3rem",class:"mb-2"}),l[50]||(l[50]=R("p",null,'No positive behaviors yet. Click "Add New Behavior" to create one.',-1))])):B("",!0)]),R("div",Pl,[R("div",Il,[I(t,{name:"remove_circle",size:"md",color:"negative"}),l[51]||(l[51]=R("h4",{class:"text-xl font-bold text-red-800"},"Negative Behaviors / Penalties",-1)),I(C,{label:Wa.value.length,color:"negative"},null,8,["label"])]),R("div",Fl,[(P(!0),U(D,null,M(Wa.value,e=>(P(),U("div",{key:e.id,class:"bg-white rounded-lg p-4 shadow-sm border border-red-100 hover:shadow-md transition-all"},[R("div",Bl,[R("div",El,[R("div",Rl,Q(e.icon||"âš ï¸"),1),R("div",null,[R("h5",Ql,Q(e.name),1),R("p",$l,"ID: "+Q(e.id),1)])]),R("div",Tl,[I(s,{flat:"",round:"",dense:"",icon:"edit",color:"primary",size:"sm",onClick:l=>tt(e)},{default:E(()=>[I(b,null,{default:E(()=>l[52]||(l[52]=[T("Edit")])),_:1})]),_:2},1032,["onClick"]),I(s,{flat:"",round:"",dense:"",icon:"delete",color:"negative",size:"sm",onClick:l=>ot(e)},{default:E(()=>[I(b,null,{default:E(()=>l[53]||(l[53]=[T("Delete")])),_:1})]),_:2},1032,["onClick"])])]),R("div",Dl,[l[54]||(l[54]=R("span",{class:"text-sm text-gray-600"},"Points:",-1)),R("span",Ml,Q(e.value||e.points||0),1)])]))),128))]),0===Wa.value.length?(P(),U("div",Ll,[I(t,{name:"sentiment_neutral",size:"3rem",class:"mb-2"}),l[55]||(l[55]=R("p",null,'No negative behaviors yet. Click "Add New Behavior" to create one.',-1))])):B("",!0)])])]),_:1})]),_:1},8,["modelValue"])]),_:1})):B("",!0),ra.value.length?B("",!0):(P(),F(o,{key:1,class:"shadow-lg rounded-2xl"},{default:E(()=>[I(a,{class:"text-center py-12"},{default:E(()=>l[56]||(l[56]=[R("p",{class:"text-2xl font-semibold text-gray-600"},'ðŸ“š Select a classroom and click "Init Session" to get started',-1)])),_:1})]),_:1})),I(i,{modelValue:Ca.value,"onUpdate:modelValue":l[18]||(l[18]=e=>Ca.value=e),maximized:""},{default:E(()=>[I(o,null,{default:E(()=>[I(c,{align:"right"},{default:E(()=>[$(I(s,{flat:"",label:"Close",color:"primary"},null,512),[[p]])]),_:1}),I(a,{class:"p-0"},{default:E(()=>[I(J,{students:ra.value,"student-behaviors":ha.value,"period-code":Oa.value,date:va.value},null,8,["students","student-behaviors","period-code","date"])]),_:1}),I(c,{align:"right"},{default:E(()=>[$(I(s,{flat:"",label:"Close",color:"primary"},null,512),[[p]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),I(i,{modelValue:Fa.value,"onUpdate:modelValue":l[19]||(l[19]=e=>Fa.value=e),"full-width":"",maxWidth:"1000px"},{default:E(()=>[I(o,{class:"flex flex-col md:flex-row h-[80vh] md:h-[70vh]"},{default:E(()=>[I(a,{class:"w-full md:w-1/3 bg-blue-50 border-r border-blue-100 flex flex-col p-0"},{default:E(()=>[R("div",ql,[R("h4",Ol,[I(t,{name:"checklist"}),T(" Selected ("+Q(xa.value.length)+") ",1)])]),R("div",Gl,[0===xa.value.length?(P(),U("div",Wl," Click students to select them ")):(P(),U("div",Kl,[(P(!0),U(D,null,M(xa.value,e=>(P(),F(m,{key:e,removable:"",onRemove:l=>nt(e),color:"white","text-color":"primary",class:"shadow-sm border border-blue-100 m-0 w-full"},{default:E(()=>{var l,a;return[I(g,{icon:"person",color:"primary","text-color":"white","font-size":"14px"}),R("div",Jl,[R("span",Zl,[T(Q(null==(l=ra.value.find(l=>l.id===e))?void 0:l.firstName)+" ",1),R("span",Yl,Q(null==(a=ra.value.find(l=>l.id===e))?void 0:a.lastName),1)])])]}),_:2},1032,["onRemove"]))),128))]))]),R("div",Hl,[R("div",Xl,[I(s,{flat:"",dense:"",color:"primary",label:"All",size:"sm",onClick:Ya,class:"bg-blue-50"}),I(s,{flat:"",dense:"",color:"primary",label:"Inv",size:"sm",onClick:Ha,class:"bg-blue-50"}),I(s,{flat:"",dense:"",color:"negative",label:"Clear",size:"sm",onClick:dt,class:"bg-red-50"})])])]),_:1}),R("div",ea,[I(a,{class:O("positive"===Ba.value?"bg-green-50 border-b border-green-100":"bg-red-50 border-b border-red-100")},{default:E(()=>[R("div",la,[I(t,{name:"positive"===Ba.value?"add_circle":"remove_circle",color:"positive"===Ba.value?"positive":"negative"},null,8,["name","color"]),T(" "+Q("positive"===Ba.value?"Add Positive Points":"Deduct Points"),1)])]),_:1},8,["class"]),I(a,{class:"flex-1 overflow-y-auto p-4 custom-scrollbar"},{default:E(()=>[R("div",aa,[(P(!0),U(D,null,M("positive"===Ba.value?Ga.value:Wa.value,e=>(P(),U("div",{key:e.id,class:"cursor-pointer transition-all duration-200 relative group",onClick:l=>Ea.value=e.id},[R("div",{class:O(["h-full p-3 rounded-xl border-2 flex flex-col items-center text-center gap-2 hover:shadow-md transition-all",[Ea.value===e.id?"positive"===Ba.value?"border-green-500 bg-green-50 scale-105":"border-red-500 bg-red-50 scale-105":"border-gray-100 bg-white hover:border-gray-300"]])},[R("div",{class:O(["text-3xl p-3 rounded-full mb-1","positive"===Ba.value?"bg-green-100 text-green-600":"bg-red-100 text-red-600"])},Q(e.icon||("positive"===Ba.value?"â­":"âš ï¸")),3),R("div",sa,Q(e.name),1),R("div",{class:O(["text-xl font-bold px-3 py-1 rounded-full mt-auto","positive"===Ba.value?"bg-green-200 text-green-800":"bg-red-200 text-red-800"])},Q("positive"===Ba.value?"+":"")+Q(e.value||e.points||0),3),Ea.value===e.id?(P(),U("div",{key:0,class:O(["absolute top-2 right-2 text-xl drop-shadow-sm","positive"===Ba.value?"text-green-600":"text-red-600"])},[I(t,{name:"check_circle"})],2)):B("",!0)],2)],8,ta))),128))])]),_:1}),I(c,{align:"right",class:"p-4 border-t border-gray-100 bg-gray-50 gap-3"},{default:E(()=>[$(I(s,{flat:"",label:"Cancel",color:"grey-7",size:"lg",class:"font-bold"},null,512),[[p]]),I(s,{color:"positive"===Ba.value?"positive":"negative",label:"positive"===Ba.value?"Apply Reward":"Apply Penalty",icon:"positive"===Ba.value?"check_circle":"warning",onClick:et,disable:!Ea.value,loading:Va.value,size:"lg",class:"px-8 font-bold shadow-md",push:""},null,8,["color","label","icon","disable","loading"])]),_:1})])]),_:1})]),_:1},8,["modelValue"]),I(i,{modelValue:Da.value,"onUpdate:modelValue":l[24]||(l[24]=e=>Da.value=e),persistent:""},{default:E(()=>[I(o,{class:"min-w-[400px]"},{default:E(()=>[I(a,{class:"bg-primary text-white"},{default:E(()=>[R("div",oa,Q(Ma.value?"Edit Behavior":"Add New Behavior"),1)]),_:1}),I(a,{class:"q-pt-md space-y-4"},{default:E(()=>[I(v,{modelValue:qa.value.name,"onUpdate:modelValue":l[20]||(l[20]=e=>qa.value.name=e),label:"Behavior Name *",outlined:"",dense:"",rules:[e=>!!e||"Name is required"]},null,8,["modelValue","rules"]),I(k,{modelValue:qa.value.type,"onUpdate:modelValue":l[21]||(l[21]=e=>qa.value.type=e),options:[{label:"Positive / Reward",value:"positive"},{label:"Negative / Penalty",value:"negative"}],label:"Type *",outlined:"",dense:"","emit-value":"","map-options":"",rules:[e=>!!e||"Type is required"]},null,8,["modelValue","rules"]),I(v,{modelValue:qa.value.points,"onUpdate:modelValue":l[22]||(l[22]=e=>qa.value.points=e),modelModifiers:{number:!0},label:"Points Value *",type:"number",outlined:"",dense:"",rules:[e=>null!==e&&""!==e||"Points are required"],hint:"positive"===qa.value.type?"Positive number (e.g., 5)":"Negative number (e.g., -3)"},null,8,["modelValue","rules","hint"]),I(v,{modelValue:qa.value.icon,"onUpdate:modelValue":l[23]||(l[23]=e=>qa.value.icon=e),label:"Icon (Emoji)",outlined:"",dense:"",hint:"Optional emoji, e.g., â­ ðŸŽ‰ âš ï¸ ðŸš«"},null,8,["modelValue"])]),_:1}),I(c,{align:"right",class:"q-px-md q-pb-md"},{default:E(()=>[$(I(s,{flat:"",label:"Cancel"},null,512),[[p]]),I(s,{color:"primary",label:Ma.value?"Update":"Create",onClick:st,loading:La.value},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),I(i,{modelValue:$a.value,"onUpdate:modelValue":l[26]||(l[26]=e=>$a.value=e),maximized:""},{default:E(()=>[I(Y,{students:ra.value,"saved-layouts":Qa.value,"editing-layout":Ta.value,onSave:lt,onDelete:at,onClose:l[25]||(l[25]=e=>$a.value=!1)},null,8,["students","saved-layouts","editing-layout"])]),_:1},8,["modelValue"])]))}},[["__scopeId","data-v-3eb4fdd9"]]);export{ia as default};
