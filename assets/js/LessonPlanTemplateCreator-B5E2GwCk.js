import{p as e,u as l,d as a,g as t,n as s,Q as o,m as u,aD as d,b as r}from"./app-Dccx8xF5.js";import{Q as i}from"./QSelect-aOnYle6d.js";import{Q as m}from"./QForm-Df8AW4W_.js";import{Q as n}from"./QPage-CVroUcdy.js";import{f as c,a as p,H as v,I as f,J as b,M as g,b as y,O as _,L as V,Q as q,F as x,U as j,V as T,x as S,Z as h}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./rtl-Cr6c3OOr.js";const Q={class:"row justify-center"},U={class:"col-12 col-md-8 col-lg-6"},F={class:"row q-col-gutter-md items-center"},P={class:"col-12 col-sm-5"},k={class:"col-12 col-sm-5"},w={class:"col-12 col-sm-2"},C={class:"row justify-end q-mt-lg"},L={class:"bg-grey-2 q-pa-md rounded-borders"},O=e({__name:"LessonPlanTemplateCreator",setup(e){const O=l(),I=c(""),J=c([]),M=c(!1),N=c(!1),A=c(!1),D=[{label:"Text Input",value:"text"},{label:"Text Area",value:"textarea"},{label:"Select Dropdown",value:"select"}],E=p(()=>JSON.stringify(J.value,null,2)),H=()=>{J.value.push({label:"",type:"text"})},K=async()=>{var e,l;if(!I.value||0===J.value.length)return void O.notify({type:"negative",message:"Please provide a template name and at least one field"});if(J.value.some(e=>!e.label.trim()))O.notify({type:"negative",message:"Please fill in all field labels"});else{M.value=!0;try{const e={name:I.value,structure:J.value};(await h.post("/api/lesson-plan-templates",e)).data.success&&(A.value=!0,R())}catch(a){console.error("Error saving template:",a),O.notify({type:"negative",message:(null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.message)||"Error saving template"})}finally{M.value=!1}}},R=()=>{I.value="",J.value=[],N.value=!1};return J.value=[{label:"Objective",type:"textarea"},{label:"Materials",type:"text"},{label:"Procedure",type:"textarea"}],(e,l)=>(f(),v(n,{class:"q-pa-md"},{default:b(()=>[g("div",Q,[g("div",U,[y(s,null,{default:b(()=>[y(a,null,{default:b(()=>[l[4]||(l[4]=g("div",{class:"text-h5 q-mb-md"},"Lesson Plan Template Creator",-1)),y(m,{onSubmit:K,class:"q-gutter-md"},{default:b(()=>[y(t,{modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=e=>I.value=e),label:"Template Name",filled:"",rules:[e=>!!e||"Template name is required"]},null,8,["modelValue","rules"]),l[2]||(l[2]=g("div",{class:"text-h6 q-mt-lg q-mb-md"},"Template Fields",-1)),(f(!0),V(x,null,q(J.value,(e,l)=>(f(),V("div",{key:l,class:"q-mb-md"},[y(s,{flat:"",bordered:""},{default:b(()=>[y(a,null,{default:b(()=>[g("div",F,[g("div",P,[y(t,{modelValue:e.label,"onUpdate:modelValue":l=>e.label=l,label:"Field Label",filled:"",rules:[e=>!!e||"Label is required"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),g("div",k,[y(i,{modelValue:e.type,"onUpdate:modelValue":l=>e.type=l,options:D,label:"Field Type",filled:"","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),g("div",w,[y(o,{color:"negative",icon:"delete",flat:"",round:"",onClick:e=>(e=>{J.value.splice(e,1)})(l)},null,8,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128)),y(o,{color:"primary",icon:"add",label:"Add Field",onClick:H,class:"q-mt-md"}),g("div",C,[y(o,{type:"submit",color:"positive",label:"Save Template",loading:M.value},null,8,["loading"])])]),_:1}),N.value?(f(),v(s,{key:0,class:"q-mt-lg"},{default:b(()=>[y(a,null,{default:b(()=>[l[3]||(l[3]=g("div",{class:"text-h6 q-mb-md"},"Template Structure (JSON)",-1)),g("pre",L,j(E.value),1)]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1})])]),y(r,{modelValue:A.value,"onUpdate:modelValue":l[1]||(l[1]=e=>A.value=e)},{default:b(()=>[y(s,null,{default:b(()=>[y(a,null,{default:b(()=>l[5]||(l[5]=[g("div",{class:"text-h6"},"Success",-1)])),_:1}),y(a,null,{default:b(()=>l[6]||(l[6]=[T(" Template saved successfully! ")])),_:1}),y(u,{align:"right"},{default:b(()=>[S(y(o,{flat:"",label:"OK",color:"primary"},null,512),[[d]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},[["__scopeId","data-v-6b7dcf9d"]]);export{O as default};
