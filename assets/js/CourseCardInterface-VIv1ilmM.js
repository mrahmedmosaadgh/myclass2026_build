import{r as e,u as l,R as s,f as a,Q as t,d as r,b as n,F as o,i,k as u,s as c,l as d,j as m,h as v}from"./app-DTyzyps1.js";import{Q as p}from"./QTree-D52xRDKK.js";import{Q as f}from"./QBadge-CkKjK8Tj.js";import{Q as y}from"./QSplitter-DyA4sTyd.js";import{f as h,a as x,N as g,J as _,O as k,F as w,R as q,y as b,I as C,K as $,b as L,V as j,Q,W as S}from"./vendor-BJyC5yAd.js";import"./offline-BzIlwqNM.js";import"./i18n-BDgsCcB6.js";import"./ui-DFn3cvMd.js";const V={class:"course-card-interface"},N={key:0,class:"q-pa-md"},I={class:"row q-col-gutter-md"},z={class:"text-h6"},U={class:"text-subtitle2 text-grey-7"},B={class:"row items-center"},F={class:"row items-center"},R={key:1},W={class:"q-pa-md bg-grey-2"},A={class:"row items-center"},J={class:"text-h5"},K={class:"text-subtitle1 text-grey-7"},O={class:"q-pa-md"},T={class:"row items-center q-mb-md"},D={class:"row items-center"},E={class:"q-pa-md"},G={key:0},H={class:"row items-center q-mb-md"},M={class:"text-h4 col"},P={key:0,class:"text-center q-mt-xl"},X={class:"text-grey-7 q-mt-md"},Y={key:0},Z={key:1},ee={key:1,class:"text-center q-mt-xl"},le=e({__name:"CourseCardInterface",props:{courses:{type:Array,default:()=>[]}},setup(e){const le=l(),se=h(25),ae=h(null),te=h(null),re=h(""),ne=h(!1),oe=x(()=>ae.value?ae.value.levels.map((e,l)=>{var s;return{id:`level-${e.id}-${l}`,name:e.name,displayName:`${e.order||l+1}. ${e.name}`,type:"level",children:(null==(s=e.sections)?void 0:s.map((s,a)=>({id:`section-${s.id}-${l}-${a}`,name:s.name,displayName:`${e.order||l+1}.${a+1}. ${s.name}`,type:"section",lessons:s.lessons||[],levelIndex:l,sectionIndex:a})))||[]}}):[]),ie=x(()=>{if(!re.value)return oe.value;const e=re.value.toLowerCase();return oe.value.map(l=>{if(l.name.toLowerCase().includes(e))return l;const s=l.children.filter(l=>{var s;if(l.name.toLowerCase().includes(e))return!0;return((null==(s=l.lessons)?void 0:s.filter(l=>l.name.toLowerCase().includes(e)||l.text&&l.text.toLowerCase().includes(e)))||[]).length>0});return s.length>0?{...l,children:s}:null}).filter(Boolean)}),ue=x(()=>{if(!te.value)return null;const e=me(te.value);return e&&"section"===e.type?{name:e.name,lessons:e.lessons||[],originalLessons:e.lessons||[]}:null}),ce=x(()=>{if(!ue.value)return[];let e=ue.value.originalLessons||[];if(re.value){const l=re.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(l)||e.text&&e.text.toLowerCase().includes(l))}return e}),de=e=>{var l;return(null==(l=e.levels)?void 0:l.reduce((e,l)=>{var s;return e+((null==(s=l.sections)?void 0:s.reduce((e,l)=>{var s;return e+((null==(s=l.lessons)?void 0:s.length)||0)},0))||0)},0))||0},me=e=>{for(const l of oe.value){if(l.id===e)return l;for(const s of l.children||[])if(s.id===e)return s}return null},ve=e=>{switch(e.type){case"level":return"folder";case"section":return"description";default:return"help_outline"}},pe=e=>{switch(e.type){case"level":return"primary";case"section":return"secondary";default:return"grey"}},fe=e=>{console.log("Selected node:",e)},ye=()=>{ne.value=!ne.value,ne.value||(re.value="")};return(l,h)=>(_(),g("div",V,[ae.value?(_(),g("div",R,[k("div",W,[k("div",A,[L(n,{flat:"",round:"",icon:"arrow_back",onClick:h[0]||(h[0]=e=>ae.value=null),class:"q-mr-md"}),k("div",null,[k("div",J,j(ae.value.name),1),k("div",K,j(ae.value.description),1)])])]),L(y,{modelValue:se.value,"onUpdate:modelValue":h[3]||(h[3]=e=>se.value=e),style:{height:"calc(100vh - 80px)"},limits:[20,50]},{before:$(()=>[L(o,{class:"fit"},{default:$(()=>[k("div",O,[k("div",T,[h[5]||(h[5]=k("h3",{class:"text-h5 col"},"Course Structure",-1)),L(n,{flat:"",round:"",icon:"search",onClick:ye,color:ne.value?"primary":"grey"},null,8,["color"])]),ne.value?(_(),C(v,{key:0,modelValue:re.value,"onUpdate:modelValue":h[1]||(h[1]=e=>re.value=e),placeholder:"Search levels, sections, and lessons...",dense:"",outlined:"",class:"q-mb-md",clearable:""},{prepend:$(()=>[L(t,{name:"search"})]),_:1},8,["modelValue"])):Q("",!0),L(p,{nodes:ie.value,"node-key":"id","label-key":"name","children-key":"children",selected:te.value,"onUpdate:selected":[h[2]||(h[2]=e=>te.value=e),fe],"default-expand-all":""},{"default-header":$(e=>[k("div",D,[L(t,{name:ve(e.node),size:"20px",class:"q-mr-sm",color:pe(e.node)},null,8,["name","color"]),k("span",null,j(e.node.displayName||e.node.name),1)])]),_:1},8,["nodes","selected"])])]),_:1})]),after:$(()=>[L(o,{class:"fit"},{default:$(()=>[k("div",E,[ue.value?(_(),g("div",G,[k("div",H,[k("h2",M,j(ue.value.name),1),re.value?(_(),C(f,{key:0,color:"primary",class:"q-ml-sm"},{default:$(()=>{var e;return[S(j(ce.value.length)+" of "+j((null==(e=ue.value.originalLessons)?void 0:e.length)||0)+" lessons ",1)]}),_:1})):Q("",!0)]),L(i,{bordered:"",separator:""},{default:$(()=>[(_(!0),g(w,null,q(ce.value,(e,l)=>b((_(),C(m,{key:l,clickable:"",class:"q-py-md"},{default:$(()=>[L(u,{avatar:""},{default:$(()=>[L(c,{color:"primary","text-color":"white"},{default:$(()=>[S(j(l+1),1)]),_:2},1024)]),_:2},1024),L(u,null,{default:$(()=>[L(d,{class:"text-subtitle1"},{default:$(()=>[S(j(e.name),1)]),_:2},1024),e.text?(_(),C(d,{key:0,caption:""},{default:$(()=>[S(j(e.text),1)]),_:2},1024)):Q("",!0)]),_:2},1024),L(u,{side:""},{default:$(()=>[L(n,{flat:"",round:"",icon:"play_arrow",color:"primary",onClick:l=>(e=>{le.notify({type:"positive",message:`Starting lesson: ${e.name}`,position:"top"})})(e)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[s]])),128))]),_:1}),ce.value&&0!==ce.value.length?Q("",!0):(_(),g("div",P,[L(t,{name:"info",size:"48px",color:"grey-5"}),k("p",X,[re.value?(_(),g("span",Y,'No lessons match "'+j(re.value)+'"',1)):(_(),g("span",Z,"No lessons available in this section"))])]))])):(_(),g("div",ee,[L(t,{name:"touch_app",size:"48px",color:"grey-5"}),h[6]||(h[6]=k("p",{class:"text-grey-7 q-mt-md"},"Select a section to view lessons",-1))]))])]),_:1})]),_:1},8,["modelValue"])])):(_(),g("div",N,[h[4]||(h[4]=k("div",{class:"text-center q-mb-xl"},[k("h1",{class:"text-h4 q-mb-md"},"Select a Course"),k("p",{class:"text-subtitle1 text-grey-7"},"Choose a course to view its structure and lessons")],-1)),k("div",I,[(_(!0),g(w,null,q(e.courses,e=>(_(),g("div",{key:e.id,class:"col-12 col-md-6 col-lg-4"},[b((_(),C(r,{class:"course-card cursor-pointer",onClick:l=>(e=>{ae.value=e,te.value=null,re.value=""})(e)},{default:$(()=>[L(a,null,{default:$(()=>[k("div",z,j(e.name),1),k("div",U,j(e.description),1)]),_:2},1024),L(a,null,{default:$(()=>{var l;return[k("div",B,[L(t,{name:"layers",class:"q-mr-sm"}),k("span",null,j((null==(l=e.levels)?void 0:l.length)||0)+" levels",1)]),k("div",F,[L(t,{name:"description",class:"q-mr-sm"}),k("span",null,j(de(e))+" lessons",1)])]}),_:2},1024)]),_:2},1032,["onClick"])),[[s]])]))),128))])]))]))}},[["__scopeId","data-v-9d352f36"]]);export{le as default};
