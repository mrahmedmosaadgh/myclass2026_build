import e from"./TaskTreeRow-D8XmiODE.js";import{f as t,a,k as r,N as s,J as d,R as o,V as i,F as l,Q as n,I as g}from"./vendor-BWKGNkNB.js";import"./app-Dtv5Fi9L.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const y={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},p={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"},k={class:"flex items-center gap-2"},u={key:0,class:"text-center py-12"},x={key:1,class:"overflow-x-auto"},c={class:"min-w-full"},b={class:"bg-white dark:bg-gray-800 divide-y divide-gray-100 dark:divide-gray-700"},m={__name:"TaskTree",props:{tasks:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},viewMode:{type:String,default:"tree"}},emits:["edit","delete","add-subtask","move-task","update-status","update-priority","inline-update","toggle-view-mode"],setup(m,{emit:v}){const h=m,f=v,w=t(new Set),T=a(()=>{if("flat"===h.viewMode)return h.tasks;const e=[],t=new Map;return h.tasks.forEach(e=>{t.set(e.id,e)}),h.tasks.forEach(a=>{let r=!0,s=a;for(;s.parent_id;){const e=t.get(s.parent_id);if(e&&!w.value.has(e.id)){r=!1;break}s=e||{parent_id:null}}r&&e.push(a)}),e});r(()=>h.tasks,e=>{e.length>0&&e.forEach(e=>{0===e.depth&&w.value.add(e.id)})},{immediate:!0});const M=e=>{w.value.has(e)?w.value.delete(e):w.value.add(e)},j=()=>{h.tasks.forEach(e=>{w.value.add(e.id)})},E=()=>{w.value.clear()},A=()=>{f("toggle-view-mode")},C=e=>{f("move-task",e)},_=e=>{f("update-status",e)},S=e=>{f("update-priority",e)},U=e=>{f("inline-update",e)};return(t,a)=>(d(),s("div",y,[o("div",p,[a[3]||(a[3]=o("h2",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Task Tree",-1)),o("div",k,[o("button",{onClick:A,class:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-200"},i("tree"===m.viewMode?"Flat View":"Tree View"),1),o("button",{onClick:j,class:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-200"}," Expand All "),o("button",{onClick:E,class:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-gray-700 dark:text-gray-200"}," Collapse All ")])]),m.loading||0!==m.tasks.length?(d(),s("div",x,[o("table",c,[a[5]||(a[5]=o("thead",{class:"bg-gray-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700"},[o("tr",null,[o("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Task "),o("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Due Date "),o("th",{class:"px-4 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"}," Actions ")])],-1)),o("tbody",b,[(d(!0),s(l,null,n(T.value,r=>(d(),g(e,{key:r.id,task:r,expanded:w.value.has(r.id),"view-mode":m.viewMode,"all-tasks":m.tasks,onToggleExpand:M,onEdit:a[0]||(a[0]=e=>t.$emit("edit",e)),onDelete:a[1]||(a[1]=e=>t.$emit("delete",e)),onAddSubtask:a[2]||(a[2]=e=>t.$emit("add-subtask",e)),onMoveTask:C,onUpdateStatus:_,onUpdatePriority:S,onInlineUpdate:U},null,8,["task","expanded","view-mode","all-tasks"]))),128))])])])):(d(),s("div",u,a[4]||(a[4]=[o("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),o("h3",{class:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100"},"No tasks found",-1),o("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},"Get started by creating a new task.",-1)])))]))}};export{m as default};
