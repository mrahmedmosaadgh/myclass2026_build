import{a as e,f as a,L as l,I as r,b as s,M as o,y as t,a3 as i,H as n,O as d,U as m,J as c,V as u,F as p,Z as y,_ as v}from"./vendor-CUZ9QTQV.js";import{_ as b}from"./PrimaryButton-DNYxrPcC.js";import{_ as g}from"./Pagination-CZ87PeIC.js";import{_ as h}from"./DataTable-CQiV1Hx1.js";import{_ as j}from"./FormModal-Cax_cAfN.js";import"./LucideIcon-BIJr1cpK.js";import"./createLucideIcon-D8qi68V_.js";import"./align-right-BZZ7ajs4.js";import"./underline-o77cex9c.js";import"./image-odJN2dKV.js";import"./printer-D7revZzT.js";import"./Modal-u_d6OKbQ.js";import"./app-Buylb2AA.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";import"./SecondaryButton-BH3tlEGv.js";const f={class:"py-12"},x={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},k={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},_={class:"flex justify-between mb-6"},w="Classrooms",S="/admin/classroom",A={__name:"Index",props:{records:Object,schools:Array,stages:Array,grades:Array},setup(A){const C=A,q=[{name:"name",label:"Name",type:"text",required:!0},{name:"capacity",label:"Capacity",type:"number",required:!0,min:1},{name:"school_id",label:"School",type:"select",required:!0,options:e(()=>C.schools.map(e=>({value:e.id,label:e.name})))},{name:"stage_id",label:"Stage",type:"select",required:!0,options:e(()=>C.stages.map(e=>({value:e.id,label:e.name})))},{name:"grade_id",label:"Grade",type:"select",required:!0,options:e(()=>C.grades.map(e=>({value:e.id,label:e.name})))}],I=[{key:"name",label:"Name"},{key:"capacity",label:"Capacity"},{key:"school.name",label:"School"},{key:"stage.name",label:"Stage"},{key:"grade.name",label:"Grade"},{key:"actions",label:"Actions"}],$=a(!1),D=a(null),F=e(()=>C.records.data),G=e(()=>C.records.links),L=(e=null)=>{D.value=e,$.value=!0},M=()=>{$.value=!1,D.value=null},N=a(!1),P=()=>{v.reload({only:["records"],preserveScroll:!0,preserveState:!0})},T=async({form:e,onSuccess:a,onError:l})=>{var r,s,o;if(N.value)return;N.value=!0;const t=null==(r=D.value)?void 0:r.id,i=t?`${S}/${t}`:S;try{await y.post(i,{...t&&{_method:"PUT"},...e}),a(),M(),P()}catch(n){(null==(o=null==(s=n.response)?void 0:s.data)?void 0:o.errors)?l(n.response.data.errors):l({error:["An unexpected error occurred"]})}finally{N.value=!1}},U=e=>{confirm("Are you sure you want to delete this classroom?")&&y.delete(`${S}/${e.id}`).then(e=>{e.data.message&&alert(e.data.message),P()}).catch(e=>{console.error("Deletion error:",e),alert("An error occurred while deleting the record.")})};return(e,a)=>(r(),l(p,null,[s(t(i),{title:w}),o("div",f,[o("div",x,[o("div",k,[o("div",_,[o("h2",{class:"text-2xl font-bold"},m(w)),s(b,{onClick:a[0]||(a[0]=e=>L())},{default:c(()=>a[1]||(a[1]=[u("Add New")])),_:1})]),s(h,{columns:I,items:F.value,loading:!1,onEdit:L,onDelete:U},null,8,["items"]),G.value?(r(),n(g,{key:0,links:G.value},null,8,["links"])):d("",!0)])])]),s(j,{show:$.value,title:"Classroom",fields:q,editing:D.value,onClose:M,onSubmitted:T},null,8,["show","editing"])],64))}};export{A as default};
