import{r as e,u as a,b as s,g as l,Q as t,d as o,f as r,G as i,c,o as n,e as u,aS as d}from"./app-BxJhpxku.js";import{Q as m}from"./QSpinnerDots-DZPL0uRa.js";import{Q as p}from"./QSpace-BD6HDuXW.js";import{Q as v}from"./QPageContainer-2NxTLZlF.js";import{Q as f}from"./QLayout-DdBIq4J5.js";import g from"./SingleCoursePreview-B0AL9TT5.js";import{f as h,o as y,af as x,I as _,J as b,K as w,b as k,R as j,N as q,W as Q,V as C,F as S,Q as z,O as R,y as F}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./QTree-D-pi1QE4.js";import"./QSplitter-BhBW5l9t.js";const V={class:"q-pa-md"},D={class:"row items-center q-mb-md"},I={class:"col-auto"},P={key:0,class:"text-center q-pa-xl"},T={key:3,class:"row q-col-gutter-md"},H={class:"text-h6"},L={class:"text-subtitle2 text-grey-7"},N={class:"q-mt-md"},O={class:"row q-gutter-sm"},$={class:"text-h6"},E=e({__name:"TeacherDashboard",setup(e){const E=a(),G=h([]),J=h(!1),K=h(null),M=h(!1),U=h(null),W=async()=>{J.value=!0,K.value=null;try{const e=await fetch("/course-management/api/teacher/courses"),a=await e.json();if(!a.success)throw new Error(a.message||"Failed to load courses");G.value=a.data}catch(e){K.value=e.message||"Failed to load your courses",E.notify({type:"negative",message:K.value,position:"top"})}finally{J.value=!1}};return y(()=>{W()}),(e,a)=>{const h=x("Head");return b(),_(f,{view:"hHh lpR fFf"},{default:w(()=>[k(h,{title:"teacher|dashboard"}),k(v,null,{default:w(()=>[j("div",V,[j("div",D,[a[1]||(a[1]=j("div",{class:"col"},[j("h1",{class:"text-h4 q-mb-none"},"Teacher Dashboard"),j("p",{class:"text-subtitle1 text-grey-7"},"Manage your assigned courses")],-1)),j("div",I,[k(s,{color:"primary",icon:"refresh",label:"Refresh",onClick:W,loading:J.value},null,8,["loading"])])]),J.value?(b(),q("div",P,[k(m,{size:"50px",color:"primary"}),a[2]||(a[2]=j("p",{class:"q-mt-md"},"Loading your courses...",-1))])):K.value?(b(),_(l,{key:1,class:"bg-negative text-white q-mb-md"},{avatar:w(()=>[k(t,{name:"error"})]),action:w(()=>[k(s,{flat:"",color:"white",label:"Retry",onClick:W})]),default:w(()=>[Q(" "+C(K.value)+" ",1)]),_:1})):G.value.length?(b(),q("div",T,[(b(!0),q(S,null,z(G.value,e=>(b(),q("div",{key:e.id,class:"col-12 col-md-6 col-lg-4"},[k(o,{class:"course-card"},{default:w(()=>[k(r,null,{default:w(()=>[j("div",H,C(e.name),1),j("div",L,C(e.description),1),j("div",N,[a[5]||(a[5]=j("div",{class:"text-caption"},"Structure:",-1)),j("div",O,[(b(!0),q(S,null,z(e.levels.slice(0,3),e=>(b(),_(i,{key:e.id,size:"sm",color:"primary","text-color":"white"},{default:w(()=>[Q(C(e.title),1)]),_:2},1024))),128)),e.levels.length>3?(b(),_(i,{key:0,size:"sm",color:"grey","text-color":"white"},{default:w(()=>[Q(" +"+C(e.levels.length-3)+" more ",1)]),_:2},1024)):R("",!0)])])]),_:2},1024),k(c),k(n,{align:"right"},{default:w(()=>[k(s,{flat:"",color:"primary",icon:"preview",label:"Preview Course",onClick:a=>(e=>{U.value=e,M.value=!0})(e)},null,8,["onClick"]),k(s,{flat:"",color:"secondary",icon:"open_in_new",label:"Open Interface",onClick:a=>(e=>{window.open(`/course-management/teachers/preview-course?course_id=${e.id}`,"_blank")})(e)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))])):(b(),_(o,{key:2,class:"text-center q-pa-xl"},{default:w(()=>[k(t,{name:"school",size:"64px",color:"grey-5"}),a[3]||(a[3]=j("p",{class:"text-h6 q-mt-md"},"No courses assigned",-1)),a[4]||(a[4]=j("p",{class:"text-grey-7"},"Contact your administrator to get assigned to courses",-1))]),_:1})),k(u,{modelValue:M.value,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),maximized:""},{default:w(()=>[k(o,null,{default:w(()=>[k(r,{class:"row items-center q-pb-none"},{default:w(()=>{var e;return[j("div",$,C(null==(e=U.value)?void 0:e.name),1),k(p),F(k(s,{icon:"close",flat:"",round:"",dense:""},null,512),[[d]])]}),_:1}),k(r,{style:{height:"calc(100vh - 60px)",padding:"0"}},{default:w(()=>[U.value?(b(),_(g,{key:0,"course-id":U.value.id,"course-data":U.value},null,8,["course-id","course-data"])):R("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})]),_:1})}}},[["__scopeId","data-v-d5454b79"]]);export{E as default};
