import{o as e,u as s,d as t,c as a,ba as i,m as l,Q as u}from"./app-CqJgtQaN.js";import{Q as o}from"./QBadge-Coi-CloS.js";import{Q as n}from"./QSpace-1qvgFvrB.js";import{f as v,a as r,o as c,e as d,M as _,J as q,N as z,Q as m,V as p,b as f,K as b,I as h,F as y,R as g,U as k,z as Q,$ as w,_ as C}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const I={class:"quiz-test"},x={class:"quiz-test__header"},S={class:"quiz-test__header-content"},j={class:"quiz-test__title"},M={class:"quiz-test__progress"},T={key:0,class:"quiz-test__timer"},F={key:0,class:"quiz-test__container"},N={class:"quiz-test__question-container"},$={class:"quiz-test__question-header"},R={class:"quiz-test__question-number"},D=["innerHTML"],H={class:"quiz-test__options"},A=["onClick"],B={class:"quiz-test__option-radio"},E={class:"quiz-test__option-label"},J={class:"quiz-test__option-text"},L={class:"quiz-test__navigation"},V={class:"quiz-test__sidebar"},Y={class:"quiz-test__question-grid"},K=["onClick"],O={key:1,class:"quiz-test__results"},P={class:"quiz-test__results-stats"},U={class:"quiz-test__stat"},G={class:"quiz-test__stat-value"},W={class:"quiz-test__stat"},X={class:"quiz-test__stat-value"},Z={class:"quiz-test__results-actions"},ee=e({__name:"QuizTest copy 2",props:{quizId:Number},setup(e){const ee=s(),se=e,te=v({name:"",questions:[],time_limit_minutes:null}),ae=v(0),ie=v({}),le=v(null),ue=v(!1),oe=v(0),ne=v(0),ve=v(null);let re=null;const ce=r(()=>{var e;return(null==(e=te.value.questions)?void 0:e[ae.value])||{}}),de=()=>{re=setInterval(()=>{oe.value--,oe.value<=0&&fe()},1e3)},_e=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,qe=()=>{le.value&&(ie.value[ae.value]=le.value)},ze=()=>{le.value=ie.value[ae.value]||null},me=()=>{var e;qe(),ae.value<((null==(e=te.value.questions)?void 0:e.length)||0)-1&&(ae.value++,ze())},pe=()=>{qe(),ae.value>0&&(ae.value--,ze())},fe=async()=>{qe(),ne.value=Math.floor((Date.now()-ve.value)/1e3),re&&clearInterval(re);let e=0;te.value.questions.forEach((s,t)=>{var a;const i=ie.value[t],l=null==(a=s.options)?void 0:a.find(e=>e.is_correct);i===(null==l?void 0:l.id)&&e++});const s=Math.round(e/te.value.questions.length*100);sessionStorage.setItem("quizResults",JSON.stringify({quizId:se.quizId,quizName:te.value.name,answers:ie.value,questions:te.value.questions,score:s,correctAnswers:e,totalQuestions:te.value.questions.length,timeTaken:ne.value}));try{ue.value=!0,ee.notify({type:"positive",message:"Quiz submitted successfully!",icon:"check"})}catch(t){console.error("Failed to submit quiz:",t),ee.notify({type:"negative",message:"Failed to submit quiz",icon:"error"})}},be=()=>{w.visit(`/quizzes/${se.quizId}/results`)};return c(()=>{(async()=>{try{const e=await C.get(`/api/quizzes/${se.quizId}`);te.value=e.data,te.value.time_limit_minutes&&(oe.value=60*te.value.time_limit_minutes,de()),ve.value=Date.now(),ze()}catch(e){console.error("Failed to load quiz:",e),ee.notify({type:"negative",message:"Failed to load quiz",icon:"error"})}})()}),d(()=>{re&&clearInterval(re)}),(e,s)=>{var v,r;return q(),_("div",I,[z("div",x,[z("div",S,[z("h1",j,p(te.value.name),1),z("div",M," Question "+p(ae.value+1)+" of "+p((null==(v=te.value.questions)?void 0:v.length)||0),1)]),te.value.time_limit_minutes&&!ue.value?(q(),_("div",T,[f(t,{name:"schedule",size:"20px"}),z("span",null,p(_e(oe.value)),1)])):m("",!0)]),ue.value?(q(),_("div",O,[f(l,{class:"quiz-test__results-card"},{default:b(()=>[f(a,{class:"text-center"},{default:b(()=>{var e;return[f(t,{name:"check_circle",size:"80px",color:"positive"}),s[4]||(s[4]=z("h2",null,"Quiz Completed!",-1)),s[5]||(s[5]=z("p",{class:"quiz-test__results-message"}," You've completed the quiz. Your answers have been submitted. ",-1)),z("div",P,[z("div",U,[z("div",G,p((null==(e=te.value.questions)?void 0:e.length)||0),1),s[2]||(s[2]=z("div",{class:"quiz-test__stat-label"},"Questions Answered",-1))]),z("div",W,[z("div",X,p(_e(ne.value)),1),s[3]||(s[3]=z("div",{class:"quiz-test__stat-label"},"Time Taken",-1))])]),z("div",Z,[f(u,{flat:"",label:"Back to Dashboard",icon:"arrow_back",onClick:s[0]||(s[0]=e=>Q(w).visit("/quizzes"))}),f(u,{unelevated:"",color:"primary",label:"View Results",icon:"assessment",onClick:be})])]}),_:1})]),_:1})])):(q(),_("div",F,[z("div",N,[f(l,{class:"quiz-test__question-card"},{default:b(()=>[f(a,null,{default:b(()=>{return[z("div",$,[z("div",R," Question "+p(ae.value+1),1),ce.value.difficulty?(q(),h(o,{key:0,color:(e=ce.value.difficulty,{Easy:"positive",Medium:"warning",Hard:"negative"}[e]||"info"),label:ce.value.difficulty},null,8,["color","label"])):m("",!0)]),z("div",{class:"quiz-test__question-text",innerHTML:ce.value.question_text},null,8,D),z("div",H,[(q(!0),_(y,null,g(ce.value.options,(e,s)=>(q(),_("div",{key:e.id,class:k(["quiz-test__option",{"quiz-test__option--selected":le.value===e.id}]),onClick:s=>{return t=e.id,void(le.value=t);var t}},[z("div",B,[f(i,{"model-value":le.value,val:e.id,color:"primary"},null,8,["model-value","val"])]),z("div",E,p(String.fromCharCode(65+s)),1),z("div",J,p(e.option_text),1)],10,A))),128))])];var e}),_:1})]),_:1}),z("div",L,[f(u,{flat:"",label:"Previous",icon:"arrow_back",disable:0===ae.value,onClick:pe},null,8,["disable"]),f(n),ae.value<((null==(r=te.value.questions)?void 0:r.length)||0)-1?(q(),h(u,{key:0,unelevated:"",color:"primary",label:"Next","icon-right":"arrow_forward",disable:!le.value,onClick:me},null,8,["disable"])):(q(),h(u,{key:1,unelevated:"",color:"positive",label:"Submit Quiz","icon-right":"check",disable:!le.value,onClick:fe},null,8,["disable"]))])]),z("div",V,[f(l,null,{default:b(()=>[f(a,null,{default:b(()=>[s[1]||(s[1]=z("h4",null,"Questions",-1)),z("div",Y,[(q(!0),_(y,null,g(te.value.questions,(e,s)=>(q(),_("div",{key:e.id,class:k(["quiz-test__question-nav-item",{"quiz-test__question-nav-item--current":s===ae.value,"quiz-test__question-nav-item--answered":void 0!==ie.value[s]}]),onClick:e=>(e=>{qe(),ae.value=e,ze()})(s)},p(s+1),11,K))),128))])]),_:1})]),_:1})])]))])}}},[["__scopeId","data-v-afc198ac"]]);export{ee as default};
