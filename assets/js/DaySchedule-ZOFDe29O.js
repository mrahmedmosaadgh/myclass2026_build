import{r as e,t as l,b as a,k as d,h as o,m as s,j as t,i}from"./app-NYt77MEb.js";import{Q as n}from"./QBadge-BeBayzBo.js";import{f as r,k as u,N as m,J as p,R as c,b as f,K as _,W as v,F as b,Q as V,I as y,V as g,U as S}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const k={class:"day-schedule"},U={class:"my-2"},h={class:"periods-list"},q={class:"flex flex-col gap-2"},x={class:"flex items-center gap-4"},C={class:"flex items-center gap-1 w-24"},w={class:"text-caption text-grey-8"},T={class:"flex items-center gap-4 q-pl-md border-t q-pt-sm"},j={class:"flex gap-2"},E={class:"actions mt-4"},$=e({__name:"DaySchedule",props:{periods:{type:Array,default:()=>[]},dayCode:{type:String,required:!0},timeSlots:{type:Array,required:!0},defaultStartTime:{type:String,default:"08:00"},defaultEndTime:{type:String,default:"08:45"}},emits:["update:periods"],setup(e,{emit:$}){const A=e,R=$,B=r([...A.periods]),P=()=>{const e=B.value.filter(e=>!e.period_code.includes("break")).length+1;B.value.push(I(`${A.dayCode}p${e}`)),F()},Q=()=>{const e=B.value.filter(e=>e.period_code.includes("break")).length+1;B.value.push(I(`break${e}`)),F()},F=()=>{R("update:periods",B.value)},I=e=>({label:e.includes("break")?`Break ${e.replace("break","")}`:`Period ${e.replace(A.dayCode+"p","")}`,period_code:e,sound_start:"",sound_before_end_5_min:"",sound_end:"",timeSlots:[{from:A.defaultStartTime,to:A.defaultEndTime,active:!0}]});return u(()=>A.periods,e=>{B.value=[...e]},{deep:!0}),(e,r)=>(p(),m("div",k,[c("div",U,[f(a,{icon:"add_alarm",color:"primary",class:"m-2",dense:"",onClick:r[0]||(r[0]=e=>(B.value.forEach(e=>{e.timeSlots.push({from:A.defaultStartTime,to:A.defaultEndTime,active:!0})}),void F()))},{default:_(()=>[f(l,null,{default:_(()=>r[2]||(r[2]=[v("Add Time Slot")])),_:1})]),_:1}),f(a,{icon:"delete",color:"negative",dense:"",onClick:r[1]||(r[1]=e=>(()=>{var e;const l=(null==(e=B.value[0])?void 0:e.timeSlots.length)-1;0!==l?(B.value.forEach(e=>{e.timeSlots.splice(l,1)}),F()):$q.notify({type:"warning",message:"Cannot remove the primary time slot"})})())},{default:_(()=>[f(l,null,{default:_(()=>r[3]||(r[3]=[v("Remove Time Slot")])),_:1})]),_:1})]),c("div",h,[f(i,{bordered:"",separator:""},{default:_(()=>[(p(!0),m(b,null,V(B.value,(e,i)=>(p(),y(t,{key:i},{default:_(()=>[f(d,null,{default:_(()=>[c("div",q,[c("div",x,[f(o,{modelValue:e.label,"onUpdate:modelValue":l=>e.label=l,label:"Label",dense:"",class:"w-48",rules:[e=>!!e||"Label is required"]},{append:_(()=>[f(n,{color:"primary",class:"text-white"},{default:_(()=>[v(g(e.period_code),1)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","rules"])]),(p(!0),m(b,null,V(e.timeSlots,(e,l)=>(p(),m("div",{key:l,class:S(["flex items-center gap-4 q-pl-md",{"bg-grey-1 q-pa-sm rounded-borders":l>0}])},[c("div",C,[f(s,{modelValue:e.active,"onUpdate:modelValue":l=>e.active=l,dense:"",class:"q-mr-sm"},null,8,["modelValue","onUpdate:modelValue"]),c("span",w,"Slot "+g(l+1),1)]),f(o,{modelValue:e.from,"onUpdate:modelValue":l=>e.from=l,type:"time",label:"From",dense:"",class:"w-32",rules:[e=>0!==l||(!!e||"Required")],disable:!e.active,outlined:""},null,8,["modelValue","onUpdate:modelValue","rules","disable"]),f(o,{modelValue:e.to,"onUpdate:modelValue":l=>e.to=l,type:"time",label:"To",dense:"",class:"w-32",rules:[e=>0!==l||(!!e||"Required")],disable:!e.active,outlined:""},null,8,["modelValue","onUpdate:modelValue","rules","disable"])],2))),128)),c("div",T,[f(o,{modelValue:e.sound_start,"onUpdate:modelValue":l=>e.sound_start=l,label:"Start Sound",dense:"",class:"w-32",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),f(o,{modelValue:e.sound_before_end_5_min,"onUpdate:modelValue":l=>e.sound_before_end_5_min=l,label:"5min Before",dense:"",class:"w-32",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),f(o,{modelValue:e.sound_end,"onUpdate:modelValue":l=>e.sound_end=l,label:"End Sound",dense:"",class:"w-32",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),c("div",j,[f(a,{icon:"delete",color:"negative",flat:"",dense:"",onClick:e=>(e=>{B.value.splice(e,1),F()})(i)},{default:_(()=>[f(l,null,{default:_(()=>r[4]||(r[4]=[v("Remove Period")])),_:1})]),_:2},1032,["onClick"])])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),c("div",E,[f(a,{color:"primary",label:"Add Period",onClick:P,icon:"add"}),f(a,{color:"secondary",label:"Add Break",onClick:Q,icon:"coffee",class:"ml-2"})])]))}},[["__scopeId","data-v-4506f5d1"]]);export{$ as default};
