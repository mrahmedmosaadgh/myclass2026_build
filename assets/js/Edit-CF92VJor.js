import{r as e,u as s,f as l,b as r,c as a,d as o,h as t,G as u,i as d,j as n,k as i,Q as c,l as m}from"./app-CmR0nRZC.js";import{Q as v}from"./QForm-BUVwCwef.js";import{r as f,f as p,a as _,I as b,J as g,K as h,R as y,b as C,V as q,W as x,$ as w}from"./vendor-BWKGNkNB.js";import{_ as j}from"./AppLayout-B3PyevP7.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const k={class:"q-pa-md"},V={class:"row items-center justify-between"},S={class:"q-gutter-sm"},U={class:"row q-col-gutter-md"},E={class:"col-12 col-md-8"},L={class:"q-mb-md"},I={class:"q-mb-md"},Q={class:"col-12 col-md-4"},$={class:"course-preview"},z={class:"text-h6 text-primary"},D={class:"text-caption text-grey-7 q-mt-xs"},F={class:"q-mt-md"},G={class:"row justify-end q-gutter-sm"},N=e({__name:"Edit",props:{course:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(e){const N=e,O=s(),P=f({name:N.course.name,description:N.course.description||""}),A=p(!1),B=_(()=>N.course.levels?N.course.levels.reduce((e,s)=>{var l;return e+((null==(l=s.sections)?void 0:l.length)||0)},0):0),J=_(()=>N.course.levels?N.course.levels.reduce((e,s)=>s.sections?e+s.sections.reduce((e,s)=>{var l;return e+((null==(l=s.lessons)?void 0:l.length)||0)},0):e,0):0),K=()=>{A.value=!0,w.put(route("course-management.courses.update",N.course.id),P,{onSuccess:()=>{O.notify({type:"positive",message:"Course updated successfully!",icon:"check_circle"})},onError:e=>{O.notify({type:"negative",message:"Please check the form for errors.",icon:"error"})},onFinish:()=>{A.value=!1}})};return(s,f)=>(g(),b(j,{title:"Edit Course"},{default:h(()=>[y("div",k,[C(o,{flat:"",bordered:""},{default:h(()=>[C(l,null,{default:h(()=>[y("div",V,[f[4]||(f[4]=y("div",null,[y("div",{class:"text-h6"},"Edit Course"),y("div",{class:"text-subtitle2"},"Update course information.")],-1)),y("div",S,[C(r,{flat:"",color:"grey-7",icon:"arrow_back",label:"Back to Course",onClick:f[0]||(f[0]=l=>s.$inertia.visit(s.route("course-management.courses.show",e.course.id)))})])])]),_:1}),C(a),C(v,{onSubmit:K,class:"q-pa-md"},{default:h(()=>[y("div",U,[y("div",E,[C(o,{flat:"",bordered:""},{default:h(()=>[C(l,null,{default:h(()=>[f[5]||(f[5]=y("div",{class:"text-subtitle1 q-mb-md"},"Course Information",-1)),y("div",L,[C(t,{modelValue:P.name,"onUpdate:modelValue":f[1]||(f[1]=e=>P.name=e),label:"Course Name *",outlined:"",error:!!e.errors.name,"error-message":e.errors.name,placeholder:"e.g., Grade 5 Mathematics"},null,8,["modelValue","error","error-message"])]),y("div",I,[C(t,{modelValue:P.description,"onUpdate:modelValue":f[2]||(f[2]=e=>P.description=e),label:"Course Description",outlined:"",type:"textarea",rows:"4",error:!!e.errors.description,"error-message":e.errors.description,placeholder:"Describe what this course covers..."},null,8,["modelValue","error","error-message"])])]),_:1})]),_:1})]),y("div",Q,[C(o,{flat:"",bordered:""},{default:h(()=>[C(l,null,{default:h(()=>[f[6]||(f[6]=y("div",{class:"text-subtitle1 q-mb-md"},"Course Preview",-1)),y("div",$,[y("div",z,q(P.name||"Course Name"),1),y("div",D,q(P.description||"Course description will appear here..."),1),y("div",F,[C(u,{size:"sm",color:"blue-1","text-color":"blue-8",icon:"layers"},{default:h(()=>{var s;return[x(q((null==(s=e.course.levels)?void 0:s.length)||0)+" Levels ",1)]}),_:1}),C(u,{size:"sm",color:"green-1","text-color":"green-8",icon:"menu_book",class:"q-ml-xs"},{default:h(()=>[x(q(B.value)+" Sections ",1)]),_:1})])])]),_:1})]),_:1}),C(o,{flat:"",bordered:"",class:"q-mt-md"},{default:h(()=>[C(l,null,{default:h(()=>[f[8]||(f[8]=y("div",{class:"text-subtitle1 q-mb-md"},"Course Stats",-1)),C(d,{dense:""},{default:h(()=>[C(n,null,{default:h(()=>[C(i,{avatar:""},{default:h(()=>[C(c,{name:"layers",color:"blue"})]),_:1}),C(i,null,{default:h(()=>[C(m,null,{default:h(()=>{var s;return[x(q((null==(s=e.course.levels)?void 0:s.length)||0)+" Levels",1)]}),_:1})]),_:1})]),_:1}),C(n,null,{default:h(()=>[C(i,{avatar:""},{default:h(()=>[C(c,{name:"menu_book",color:"green"})]),_:1}),C(i,null,{default:h(()=>[C(m,null,{default:h(()=>[x(q(B.value)+" Sections",1)]),_:1})]),_:1})]),_:1}),C(n,null,{default:h(()=>[C(i,{avatar:""},{default:h(()=>[C(c,{name:"school",color:"orange"})]),_:1}),C(i,null,{default:h(()=>[C(m,null,{default:h(()=>[x(q(J.value)+" Lessons",1)]),_:1})]),_:1})]),_:1}),C(n,null,{default:h(()=>[C(i,{avatar:""},{default:h(()=>[C(c,{name:"person",color:"purple"})]),_:1}),C(i,null,{default:h(()=>[C(m,null,{default:h(()=>{var s;return[x(q((null==(s=e.course.creator)?void 0:s.name)||"Unknown"),1)]}),_:1}),C(m,{caption:""},{default:h(()=>f[7]||(f[7]=[x("Creator")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),C(a,{class:"q-my-md"}),y("div",G,[C(r,{flat:"",label:"Cancel",color:"grey-7",onClick:f[3]||(f[3]=l=>s.$inertia.visit(s.route("course-management.courses.show",e.course.id)))}),C(r,{type:"submit",label:"Update Course",color:"primary",icon:"save",loading:A.value},null,8,["loading"])])]),_:1})]),_:1})])]),_:1}))}},[["__scopeId","data-v-5414ebea"]]);export{N as default};
