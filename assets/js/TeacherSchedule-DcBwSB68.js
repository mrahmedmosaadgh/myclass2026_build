import{o as e,u as l,bk as a,Q as t}from"./app-BB4Fw2oM.js";import{a as o,M as r,J as s,N as i,W as n,S as d,V as c,U as u,a3 as p,f as y,k as v,o as g,z as m,I as f,b as h,F as b,R as x,Q as I,K as _}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const C=e({__name:"TodayIndicator",props:{label:{type:String,default:"Today"},position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},size:{type:String,default:"small",validator:e=>["small","medium","large"].includes(e)},color:{type:String,default:null},textColor:{type:String,default:null},customClass:{type:String,default:""}},setup(e){const l=e,a=o(()=>{const e={};return l.color&&(e.backgroundColor=l.color),l.textColor&&(e.color=l.textColor),e}),t=o(()=>{if(l.color){const e={};return e.borderRightColor=l.color,e}return{}});return(l,o)=>(s(),r("div",{class:u(["today-indicator",[e.position?`position-${e.position}`:"",e.size?`size-${e.size}`:"",e.customClass]]),style:d(a.value)},[i("div",{class:"indicator-triangle",style:d(t.value)},null,4),n(" "+c(e.label),1)],6))}},[["__scopeId","data-v-659a7607"]]),S=e({__name:"Indicator_left",props:{label:{type:String,default:"Today"},direction:{type:String,default:"left"},label_class:{type:String,default:"Today"},position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},size:{type:String,default:"small",validator:e=>["small","medium","large"].includes(e)},color:{type:String,default:null},textColor:{type:String,default:null},customClass:{type:String,default:""}},setup(e){const l=e,a=o(()=>{const e={};return l.color&&(e.backgroundColor=l.color),l.textColor&&(e.color=l.textColor),e});return o(()=>{if(l.color){const e={};return e.borderRightColor=l.color,e}return{}}),(l,t)=>(s(),r("div",{class:u(["indicator-red p-0 m-0",[e.label_class,"left"==e.direction?"indicator-l    triangle-color-"+e.color:"indicator-r triangle-color-"+e.color,e.customClass]]),style:d(a.value)},c(e.label),7))}},[["__scopeId","data-v-019b86e3"]]),k={class:"schedule-container22 p-4 -my-8"},w={key:0,class:"loading-indicator"},T={key:1},j={class:"schedule-grid22 slide-up-animation"},z={class:"header-row"},$={class:"teacher-header bg-blue-500 relative"},D=["onClick"],N={class:"schedule-body22"},q={class:"period-label"},R={class:"classroom"},F=e({__name:"TeacherSchedule",props:{teacherId:{type:Number,required:!0},schoolId:{type:Number,required:!0},days:{type:Array,default:()=>["Sunday","Monday","Tuesday","Wednesday","Thursday"].map((e,l)=>({name:e,originalIndex:l}))},periods:{type:Number,default:8}},setup(e){const F=e,M=l(),Q=a(),{loading:W}=p(Q),A=y(null),E=y(""),J=y(!0),K=y(null),L=()=>(new Date).getDay(),P=e=>e.originalIndex===L(),U=o(()=>{const e=L();return F.days.some(l=>l.originalIndex===e)}),V=()=>{const e=L(),l=F.days.find(l=>l.originalIndex===e);l&&(K.value=l.originalIndex,J.value=!1,G.value=!G.value,J.value=!!G.value)};o(()=>F.days.map(e=>({label:e.name,value:e.originalIndex})));const B=o(()=>{if(J.value)return F.days;if(null!==K.value){const e=F.days.find(e=>e.originalIndex===K.value);return e?[e]:F.days}return F.days}),G=y(!0);v(()=>F.teacherId,(e,l)=>{e&&e!==l&&H()});const H=()=>{F.schoolId&&F.teacherId?(W.value=!0,axios.get(route("teacher.schedule.data",{school_id:F.schoolId,teacher_id:F.teacherId})).then(e=>{A.value=e.data.teacher_data,E.value=e.data.teacher_name||`Teacher #${F.teacherId}`,M.notify({type:"positive",message:"Schedule loaded successfully"})}).catch(e=>{console.error("Error loading teacher schedule:",e),M.notify({type:"negative",message:"Failed to load teacher schedule"})}).finally(()=>{W.value=!1})):M.notify({type:"negative",message:"School ID and Teacher ID are required"})},O=(e,l)=>{if(!A.value)return null;const a=`d${e+1}p${l+1}`;return A.value[a]||null},X=(e,l)=>{const a=O(e,l);return{"has-content":!!a,"empty-cell":!a}},Y=(e,l)=>{const a=O(e,l);return a?{backgroundColor:a.c_bg||"#dbeafe",color:a.c_text||"#000000"}:{}};return g(()=>{var e;H(),K.value=(null==(e=F.days[0])?void 0:e.originalIndex)||0}),(l,a)=>(s(),r("div",k,[m(W)?(s(),r("div",w,"Loading schedule...")):(s(),r("div",T,[a[1]||(a[1]=i("div",{class:"filter-controls mb-2"},[i("div",{class:"flex items-center justify-between bg-gray-400"},[i("div",{class:"text-lg font-medium"},[i("div",{class:"bg-white relative"})])])],-1)),i("div",j,[i("div",z,[i("div",$,[(s(),f(S,{key:0,class:"text-xl",label:`${E.value}`,direction:"left",position:"top-right",label_class:"w-fit  whitespace-nowrap    text-white px-4  -my-6  rounded  text-xs p-1    ",color:"blue"},null,8,["label"])),h(t,{color:"primary",label:"Today",size:"sm",dense:"",class:"today-btn",onClick:V,disable:!U.value},null,8,["disable"]),a[0]||(a[0]=n(" Period "))]),(s(!0),r(b,null,x(B.value,(e,l)=>(s(),r("div",{key:e.name,class:u(["day-header22 relative overflow-visible",P(e)?"bg-blue-600":"bg-gray-400"]),onClick:e=>{return a=l,G.value=!G.value,void(null!==a&&(K.value=a,J.value=!!G.value));var a}},[h(t,null,{default:_(()=>[n(c(e.name),1)]),_:2},1024),P(e)?(s(),f(C,{key:0,label:"Today",position:"top-right",color:"#19a232",textColor:"white"})):I("",!0)],10,D))),128))]),i("div",N,[(s(!0),r(b,null,x(e.periods,e=>(s(),r("div",{key:e,class:"period-row22"},[i("div",q,c(e),1),(s(!0),r(b,null,x(B.value,l=>(s(),r("div",{key:l.name,class:u(["period-cell22 relative",[X(l.originalIndex,e-1),{"today-cell":P(l)}]])},[O(l.originalIndex,e-1)?(s(),r("div",{key:0,class:"cell-content22",style:d(Y(l.originalIndex,e-1))},[n(c(O(l.originalIndex,e-1).subject_cute)+" ",1),i("div",R,c(O(l.originalIndex,e-1).classroom),1)],4)):I("",!0)],2))),128))]))),128))])])]))]))}},[["__scopeId","data-v-cfaa1eb9"]]);export{F as default};
