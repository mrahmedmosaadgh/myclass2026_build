import{r as e,f as l,c as o,h as a,Q as s,m as t,o as n,b as i,d as r,t as c,N as d}from"./app-NYt77MEb.js";import{Q as u}from"./QSelect-BfJwO5J-.js";import{Q as m}from"./QFile-BEOSbbju.js";import{Q as p}from"./QColor-DUpnYnSv.js";import{Q as g}from"./QPopupProxy-D_WI4dZp.js";import{f as v,a as _,a7 as b,k as f,_ as h,I as y,J as V,K as k,R as w,b as S,z as q,N as C,O as x,Q as U,S as j,F as L,W as Q,U as F,V as P,$ as B}from"./vendor-BWKGNkNB.js";import{_ as z}from"./AppLayout-B3PyevP7.js";import{c as R}from"./copy-to-clipboard-Cbg2MyIt.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";import"./use-file-Dybg95Ls.js";import"./QSlider-ChpGyxM_.js";import"./QTabs-45Jpg9MO.js";import"./QTab-CNcPvLWz.js";import"./QTabPanels-Dlj2xpDM.js";import"./use-panel-Dhvl0CfT.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-BWcMUP58.js";const A={class:"q-pa-md"},E={class:"row q-col-gutter-md"},I={class:"col-12 col-md-6"},N={class:"q-mb-md"},$={key:0,class:"q-mt-sm"},D=["src"],T={class:"q-mb-md"},J={key:0,class:"q-mt-sm"},K=["src"],G={class:"q-mb-md"},H={class:"row q-gutter-xs q-mt-xs"},O=["onClick"],W={class:"q-mb-md"},M={class:"row q-gutter-xs q-mt-xs"},X=["onClick"],Y={class:"q-mb-md"},Z={class:"row q-gutter-xs q-mt-xs"},ee=["onClick"],le={class:"q-mb-md"},oe={class:"col-12 col-md-6"},ae={class:"preview-content"},se={key:0,class:"preview-logo"},te=["src"],ne={class:"preview-school-name"},ie={class:"preview-form"},re=e({__name:"SchoolBrandingSettings",props:{schools:Array},setup(e){const re=e,ce=v(re.schools.length>0?re.schools[0].id:null),de=_(()=>re.schools.find(e=>e.id===ce.value)),ue=b({school_name_en:"",school_name_ar:"",school_slug:"",colors:{primary:"#6366f1",secondary:"#8b5cf6",accent:"#ec4899"},login_page_settings:{show_particles:!0,animation_style:"fade",card_style:"glassmorphism"}}),me=v(null),pe=v(null),ge=v(null),ve=v(null),_e=v(""),be=["#6366f1","#8b5cf6","#ec4899","#f43f5e","#ef4444","#f97316","#f59e0b","#eab308","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6"];function fe(e){const l=e.branding||{};ue.school_name_en=l.school_name_en||e.name||"",ue.school_name_ar=l.school_name_ar||e.name_ar||"",ue.school_slug=l.school_slug||e.school_slug||"",ue.colors=l.colors||ue.colors,ue.login_page_settings=l.login_page_settings||ue.login_page_settings,ge.value=e.logo_url,ve.value=e.background_url,function(){if(!ce.value)return;h.get(route("admin.school-branding.login-link",ce.value)).then(e=>{_e.value=e.data.url})}()}function he(e){if(me.value=e,e){const l=new FileReader;l.onload=e=>{ge.value=e.target.result},l.readAsDataURL(e),function(){if(!me.value)return;const e=new FormData;e.append("logo",me.value),B.post(route("admin.school-branding.upload-logo",ce.value),e,{preserveScroll:!0,onSuccess:e=>{d.create({type:"positive",message:"Logo uploaded successfully",position:"top"});const l=e.props.schools.find(e=>e.id===ce.value);l&&(ge.value=l.logo_url)},onError:e=>{d.create({type:"negative",message:e.logo||"Failed to upload logo",position:"top"})}})}()}}function ye(e){if(pe.value=e,e){const l=new FileReader;l.onload=e=>{ve.value=e.target.result},l.readAsDataURL(e),function(){if(!pe.value)return;const e=new FormData;e.append("background",pe.value),B.post(route("admin.school-branding.upload-background",ce.value),e,{preserveScroll:!0,onSuccess:e=>{d.create({type:"positive",message:"Background uploaded successfully",position:"top"});const l=e.props.schools.find(e=>e.id===ce.value);l&&(ve.value=l.background_url)},onError:e=>{d.create({type:"negative",message:e.background||"Failed to upload background",position:"top"})}})}()}}function Ve(){ue.put(route("admin.school-branding.update",ce.value),{preserveScroll:!0,onSuccess:e=>{d.create({type:"positive",message:"Branding settings saved successfully",position:"top"});const l=e.props.schools.find(e=>e.id===ce.value);l&&fe(l)},onError:()=>{d.create({type:"negative",message:"Failed to save branding settings",position:"top"})}})}function ke(){R(_e.value).then(()=>{d.create({type:"positive",message:"Login link copied to clipboard!",position:"top",icon:"content_copy"})}).catch(()=>{d.create({type:"negative",message:"Failed to copy link",position:"top"})})}return f(ce,e=>{const l=re.schools.find(l=>l.id===e);l&&fe(l)}),de.value&&fe(de.value),(d,v)=>(V(),y(z,{title:"School Branding Settings"},{default:k(()=>[w("div",A,[w("div",E,[w("div",I,[S(r,{class:"q-mb-md"},{default:k(()=>[S(l,null,{default:k(()=>v[15]||(v[15]=[w("div",{class:"text-h6"},"School Branding Settings",-1),w("div",{class:"text-subtitle2 text-grey-7"},"Customize your school's login page",-1)])),_:1}),S(o),S(l,null,{default:k(()=>[S(u,{modelValue:ce.value,"onUpdate:modelValue":v[0]||(v[0]=e=>ce.value=e),options:e.schools,"option-value":"id","option-label":"name","emit-value":"","map-options":"",label:"Select School",outlined:"",class:"q-mb-md"},null,8,["modelValue","options"]),S(a,{modelValue:q(ue).school_name_en,"onUpdate:modelValue":v[1]||(v[1]=e=>q(ue).school_name_en=e),label:"School Name (English)",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),S(a,{modelValue:q(ue).school_name_ar,"onUpdate:modelValue":v[2]||(v[2]=e=>q(ue).school_name_ar=e),label:"School Name (Arabic)",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),S(a,{modelValue:q(ue).school_slug,"onUpdate:modelValue":v[3]||(v[3]=e=>q(ue).school_slug=e),label:"School URL Slug",outlined:"",hint:"URL-safe identifier (e.g., al-noor-school)",class:"q-mb-md"},null,8,["modelValue"]),w("div",N,[v[16]||(v[16]=w("div",{class:"text-subtitle2 q-mb-sm"},"School Logo",-1)),S(m,{modelValue:me.value,"onUpdate:modelValue":[v[4]||(v[4]=e=>me.value=e),he],label:"Upload Logo",outlined:"",accept:"image/jpeg,image/png,image/svg+xml","max-file-size":"2097152"},{prepend:k(()=>[S(s,{name:"image"})]),_:1},8,["modelValue"]),ge.value?(V(),C("div",$,[w("img",{src:ge.value,class:"logo-preview",alt:"Logo Preview"},null,8,D)])):x("",!0)]),w("div",T,[v[17]||(v[17]=w("div",{class:"text-subtitle2 q-mb-sm"},"Background Image",-1)),S(m,{modelValue:pe.value,"onUpdate:modelValue":[v[5]||(v[5]=e=>pe.value=e),ye],label:"Upload Background",outlined:"",accept:"image/jpeg,image/png,image/webp","max-file-size":"5242880"},{prepend:k(()=>[S(s,{name:"wallpaper"})]),_:1},8,["modelValue"]),ve.value?(V(),C("div",J,[w("img",{src:ve.value,class:"background-preview",alt:"Background Preview"},null,8,K)])):x("",!0)]),w("div",G,[v[18]||(v[18]=w("div",{class:"text-subtitle2 q-mb-sm"},"Primary Color",-1)),S(a,{modelValue:q(ue).colors.primary,"onUpdate:modelValue":v[7]||(v[7]=e=>q(ue).colors.primary=e),outlined:"",rules:["anyColor"]},{append:k(()=>[S(s,{name:"colorize",class:"cursor-pointer"},{default:k(()=>[S(g,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:k(()=>[S(p,{modelValue:q(ue).colors.primary,"onUpdate:modelValue":v[6]||(v[6]=e=>q(ue).colors.primary=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),w("div",H,[(V(),C(L,null,U(be,e=>w("div",{key:e,class:"color-preset",style:j({backgroundColor:e}),onClick:l=>q(ue).colors.primary=e},null,12,O)),64))])]),w("div",W,[v[19]||(v[19]=w("div",{class:"text-subtitle2 q-mb-sm"},"Secondary Color",-1)),S(a,{modelValue:q(ue).colors.secondary,"onUpdate:modelValue":v[9]||(v[9]=e=>q(ue).colors.secondary=e),outlined:"",rules:["anyColor"]},{append:k(()=>[S(s,{name:"colorize",class:"cursor-pointer"},{default:k(()=>[S(g,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:k(()=>[S(p,{modelValue:q(ue).colors.secondary,"onUpdate:modelValue":v[8]||(v[8]=e=>q(ue).colors.secondary=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),w("div",M,[(V(),C(L,null,U(be,e=>w("div",{key:e,class:"color-preset",style:j({backgroundColor:e}),onClick:l=>q(ue).colors.secondary=e},null,12,X)),64))])]),w("div",Y,[v[20]||(v[20]=w("div",{class:"text-subtitle2 q-mb-sm"},"Accent Color",-1)),S(a,{modelValue:q(ue).colors.accent,"onUpdate:modelValue":v[11]||(v[11]=e=>q(ue).colors.accent=e),outlined:"",rules:["anyColor"]},{append:k(()=>[S(s,{name:"colorize",class:"cursor-pointer"},{default:k(()=>[S(g,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:k(()=>[S(p,{modelValue:q(ue).colors.accent,"onUpdate:modelValue":v[10]||(v[10]=e=>q(ue).colors.accent=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),w("div",Z,[(V(),C(L,null,U(be,e=>w("div",{key:e,class:"color-preset",style:j({backgroundColor:e}),onClick:l=>q(ue).colors.accent=e},null,12,ee)),64))])]),w("div",le,[v[21]||(v[21]=w("div",{class:"text-subtitle2 q-mb-sm"},"Login Page Style",-1)),S(u,{modelValue:q(ue).login_page_settings.card_style,"onUpdate:modelValue":v[12]||(v[12]=e=>q(ue).login_page_settings.card_style=e),options:["glassmorphism","solid","gradient"],outlined:"",label:"Card Style"},null,8,["modelValue"])]),S(t,{modelValue:q(ue).login_page_settings.show_particles,"onUpdate:modelValue":v[13]||(v[13]=e=>q(ue).login_page_settings.show_particles=e),label:"Show Particle Effects"},null,8,["modelValue"])]),_:1}),S(o),S(n,{align:"right"},{default:k(()=>[S(i,{label:"Save Settings",color:"primary",onClick:Ve,loading:q(ue).processing},null,8,["loading"])]),_:1})]),_:1}),S(r,null,{default:k(()=>[S(l,null,{default:k(()=>[v[23]||(v[23]=w("div",{class:"text-h6 q-mb-md"},"School Login Link",-1)),S(a,{modelValue:_e.value,"onUpdate:modelValue":v[14]||(v[14]=e=>_e.value=e),outlined:"",readonly:"",label:"Login URL"},{append:k(()=>[S(i,{flat:"",round:"",dense:"",icon:"content_copy",onClick:ke},{default:k(()=>[S(c,null,{default:k(()=>v[22]||(v[22]=[Q("Copy to clipboard")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),w("div",oe,[S(r,{class:"preview-card"},{default:k(()=>[S(l,null,{default:k(()=>[v[26]||(v[26]=w("div",{class:"text-h6 q-mb-md"},"Live Preview",-1)),w("div",{class:"preview-container",style:j({backgroundImage:ve.value?`url(${ve.value})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center"})},[w("div",{class:"preview-overlay",style:j({background:`linear-gradient(135deg, ${q(ue).colors.primary}CC 0%, ${q(ue).colors.secondary}CC 100%)`})},null,4),w("div",ae,[w("div",{class:F(["preview-login-card",`card-style-${q(ue).login_page_settings.card_style}`])},[ge.value?(V(),C("div",se,[w("img",{src:ge.value,alt:"School Logo"},null,8,te)])):x("",!0),w("div",ne,P(q(ue).school_name_en||"School Name"),1),w("div",ie,[v[24]||(v[24]=w("div",{class:"preview-input"},null,-1)),v[25]||(v[25]=w("div",{class:"preview-input"},null,-1)),w("div",{class:"preview-button",style:j({backgroundColor:q(ue).colors.primary})}," Login ",4)])],2)])],4)]),_:1})]),_:1})])])])]),_:1}))}},[["__scopeId","data-v-9bafe7bc"]]);export{re as default};
