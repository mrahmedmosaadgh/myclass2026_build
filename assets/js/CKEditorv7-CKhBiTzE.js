import{r as e}from"./index-DTdDyFNb.js";import{f as t,k as n,A as r,N as o,J as a,b as i,z as c}from"./vendor-nQjeLEvd.js";var l,s={exports:{}};
/*! For license information please see ckeditor.js.LICENSE.txt */function u(){return l?s.exports:(l=1,self,t=e=>(()=>{var t={594:t=>{t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};r.d(o,{default:()=>y});var a,i=r(594);function c(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function l(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}function s(e,t){return"CKEDITOR"in window?Promise.resolve(CKEDITOR):"string"!=typeof e||e.length<1?Promise.reject(new TypeError("CKEditor URL must be a non-empty string.")):(a||(a=s.scriptLoader(e).then(function(e){return t&&t(e),e})),a)}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function f(e,t,n){return r=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t,"string"),(t="symbol"==u(r)?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var r}s.scriptLoader=function(e){return new Promise(function(t,n){var r,o,i,s,u;r=e,o=function(e){return a=void 0,e?n(e):window.CKEDITOR?void t(CKEDITOR):n(new Error("Script loaded from editorUrl doesn't provide CKEDITOR namespace."))},s=document.head||document.getElementsByTagName("head")[0],u=document.createElement("script"),"function"==typeof o&&(i=o,o={}),o=o||{},i=i||function(){},u.type=o.type||"text/javascript",u.charset=o.charset||"utf8",u.async=!("async"in o)||!!o.async,u.src=r,o.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(u,o.attrs),o.text&&(u.text=String(o.text)),("onload"in u?c:l)(u,i),u.onload||c(u,i),s.appendChild(u)})};const p={name:"ckeditor",render:function(){return(0,i.h)("div",{},[(0,i.h)(this.tagName)])},props:{modelValue:{type:String,default:""},type:{type:String,default:"classic",validator:function(e){return["classic","inline"].includes(e)}},editorUrl:{type:String,default:"https://cdn.ckeditor.com/4.22.1/standard-all/ckeditor.js"},config:{type:Object,default:function(){}},tagName:{type:String,default:"textarea"},readOnly:{type:Boolean,default:null},throttle:{type:Number,default:80}},mounted:function(){var e=this;s(this.editorUrl,function(t){e.$emit("namespaceloaded",t)}).then(function(){if(!e.$_destroyed){var t=e.prepareConfig(),n="inline"===e.type?"inline":"replace",r=e.$el.firstElementChild;CKEDITOR[n](r,t)}}).catch(function(e){console.log("[ckeditor.js] Error while loading namespace from integrations package",e)})},data:function(){return{readyEmitted:!1}},beforeDestroy:function(){this.instance&&this.instance.destroy(),this.$_destroyed=!0},watch:{modelValue:function(e){this.instance&&this.instance.getData()!==e&&this.instance.setData(e)},readOnly:function(e){this.instance&&this.instance.setReadOnly(e)}},methods:{prepareConfig:function(){var e=this,t=this.config?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.config):{};t.on=t.on||{},void 0===t.delayIfDetached&&(t.delayIfDetached=!0),null!==this.readOnly&&(t.readOnly=this.readOnly),t.hasOwnProperty("versionCheck")||(t.versionCheck=!1);var n=t.on.instanceReady;return t.on.instanceReady=function(t){e.instance=t.editor,e.$nextTick().then(function(){e.prepareComponentData(),n&&n(t)})},t},prepareComponentData:function(){var e=this,t=this.modelValue;this.instance.fire("lockSnapshot"),this.instance.setData(t,{callback:function(){e.$_setUpEditorEvents();var n=e.instance.getData();t!==n?(e.readyEmitted||(e.$emit("ready",e.instance),e.readyEmitted=!0),e.$emit("update:modelValue",n)):e.readyEmitted||(e.$emit("ready",e.instance),e.readyEmitted=!0),e.instance.fire("unlockSnapshot")}})},$_setUpEditorEvents:function(){var e=this,t=this.instance,n=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(){clearTimeout(n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];n=setTimeout(e.bind.apply(e,[r].concat(a)),t)}}(function(n){var r=t.getData();e.modelValue!==r&&e.$emit("update:modelValue",r,n,t)},this.throttle);t.on("change",n),t.on("focus",function(n){e.$emit("focus",n,t)}),t.on("blur",function(n){e.$emit("blur",n,t)})}}},y={install:function(e){e.component("ckeditor",p)},component:p};return o.default})(),s.exports=t(e()));var t}var d=u();const f={class:"editor-wrapper"},p={__name:"CKEditorv7",props:{modelValue:{type:String,default:""},locale:{type:String,default:"en"},placeholder:{type:String,default:"Start typing..."},readOnly:{type:Boolean,default:!1},height:{type:String,default:"300px"}},emits:["update:modelValue","ready","change","blur","focus","error"],setup(e,{emit:l}){const s=e,u=t(s.modelValue),p=t(null);return n(()=>s.modelValue,e=>{e!==u.value&&(u.value=e)}),n(()=>s.readOnly,e=>{p.value&&(p.value.isReadOnly=e)}),r(()=>{p.value&&p.value.destroy().catch(e=>console.error("Error destroying editor:",e))}),(e,t)=>(a(),o("div",f,[i(c(d.CKEditor),{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e)},null,8,["modelValue"])]))}};export{p as default};
