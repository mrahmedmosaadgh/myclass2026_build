import{o as e,u as l,c as a,f as t,m as s,Q as o,l as u,aP as d,b as r}from"./app-C-NJhdpe.js";import{Q as i}from"./QSelect-B3f0Rrq3.js";import{Q as m}from"./QForm-CqbXDoyt.js";import{Q as n}from"./QPage-BEppkzfh.js";import{f as c,a as p,H as v,I as f,J as b,M as y,b as g,O as _,L as V,Q as q,F as x,U as j,V as T,x as h,Z as Q}from"./vendor-CUZ9QTQV.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";import"./rtl-Cr6c3OOr.js";const S={class:"row justify-center"},U={class:"col-12 col-md-8 col-lg-6"},P={class:"row q-col-gutter-md items-center"},F={class:"col-12 col-sm-5"},O={class:"col-12 col-sm-5"},k={class:"col-12 col-sm-2"},w={class:"row justify-end q-mt-lg"},C={class:"bg-grey-2 q-pa-md rounded-borders"},L=e({__name:"LessonPlanTemplateCreator",setup(e){const L=l(),I=c(""),J=c([]),N=c(!1),A=c(!1),E=c(!1),M=[{label:"Text Input",value:"text"},{label:"Text Area",value:"textarea"},{label:"Select Dropdown",value:"select"}],D=p(()=>JSON.stringify(J.value,null,2)),H=()=>{J.value.push({label:"",type:"text"})},K=async()=>{var e,l;if(!I.value||0===J.value.length)return void L.notify({type:"negative",message:"Please provide a template name and at least one field"});if(J.value.some(e=>!e.label.trim()))L.notify({type:"negative",message:"Please fill in all field labels"});else{N.value=!0;try{const e={name:I.value,structure:J.value};(await Q.post("/api/lesson-plan-templates",e)).data.success&&(E.value=!0,Z())}catch(a){console.error("Error saving template:",a),L.notify({type:"negative",message:(null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.message)||"Error saving template"})}finally{N.value=!1}}},Z=()=>{I.value="",J.value=[],A.value=!1};return J.value=[{label:"Objective",type:"textarea"},{label:"Materials",type:"text"},{label:"Procedure",type:"textarea"}],(e,l)=>(f(),v(n,{class:"q-pa-md"},{default:b(()=>[y("div",S,[y("div",U,[g(s,null,{default:b(()=>[g(a,null,{default:b(()=>[l[4]||(l[4]=y("div",{class:"text-h5 q-mb-md"},"Lesson Plan Template Creator",-1)),g(m,{onSubmit:K,class:"q-gutter-md"},{default:b(()=>[g(t,{modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=e=>I.value=e),label:"Template Name",filled:"",rules:[e=>!!e||"Template name is required"]},null,8,["modelValue","rules"]),l[2]||(l[2]=y("div",{class:"text-h6 q-mt-lg q-mb-md"},"Template Fields",-1)),(f(!0),V(x,null,q(J.value,(e,l)=>(f(),V("div",{key:l,class:"q-mb-md"},[g(s,{flat:"",bordered:""},{default:b(()=>[g(a,null,{default:b(()=>[y("div",P,[y("div",F,[g(t,{modelValue:e.label,"onUpdate:modelValue":l=>e.label=l,label:"Field Label",filled:"",rules:[e=>!!e||"Label is required"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),y("div",O,[g(i,{modelValue:e.type,"onUpdate:modelValue":l=>e.type=l,options:M,label:"Field Type",filled:"","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),y("div",k,[g(o,{color:"negative",icon:"delete",flat:"",round:"",onClick:e=>(e=>{J.value.splice(e,1)})(l)},null,8,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128)),g(o,{color:"primary",icon:"add",label:"Add Field",onClick:H,class:"q-mt-md"}),y("div",w,[g(o,{type:"submit",color:"positive",label:"Save Template",loading:N.value},null,8,["loading"])])]),_:1}),A.value?(f(),v(s,{key:0,class:"q-mt-lg"},{default:b(()=>[g(a,null,{default:b(()=>[l[3]||(l[3]=y("div",{class:"text-h6 q-mb-md"},"Template Structure (JSON)",-1)),y("pre",C,j(D.value),1)]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1})])]),g(r,{modelValue:E.value,"onUpdate:modelValue":l[1]||(l[1]=e=>E.value=e)},{default:b(()=>[g(s,null,{default:b(()=>[g(a,null,{default:b(()=>l[5]||(l[5]=[y("div",{class:"text-h6"},"Success",-1)])),_:1}),g(a,null,{default:b(()=>l[6]||(l[6]=[T(" Template saved successfully! ")])),_:1}),g(u,{align:"right"},{default:b(()=>[h(g(o,{flat:"",label:"OK",color:"primary"},null,512),[[d]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},[["__scopeId","data-v-6b7dcf9d"]]);export{L as default};
