import{aN as e,aO as l,f as t,o as a,N as o,J as n,Q as r,V as u,O as s,F as d,R as i}from"./vendor-nQjeLEvd.js";const p={class:"w-full relative"},c={key:0,class:"p-0 absolute -top-2 -right-4 text-xs text-gray-500 border-2 rounded-full px-2"},y={key:1,class:"p-0"},v={key:2,class:"p-0"},f=["value"],b={value:""},g=["value","selected"],m={__name:"FilterSelectV2",props:e({options:{type:Array,default:()=>[]},valueKey:{type:String,default:"id"},labelKey:{type:[String,Array],default:"name"},labelSeparator:{type:String,default:" - "},labelFormatter:{type:Function,default:null},placeholder:{type:String,default:"Select an option"},defaultSelectedIndex:{type:Number,default:null},label_only:{type:Boolean,default:!1}},{modelValue:{},modelModifiers:{},object:{},objectModifiers:{}}),emits:["update:modelValue","update:object"],setup(e){const m=l(e,"modelValue"),S=l(e,"object"),x=t(!1),K=t(null),h=e;a(()=>{(()=>{try{if(!h.options||!Array.isArray(h.options)||0===h.options.length)return;if(null===h.defaultSelectedIndex||h.defaultSelectedIndex<0||h.defaultSelectedIndex>=h.options.length)return;const e=h.options[h.defaultSelectedIndex];e&&e[h.valueKey]&&(m.value=e[h.valueKey],S.value=e,K.value=F(e))}catch(e){console.error("Error setting default selection:",e)}})()});const F=e=>h.labelFormatter?(K.value=h.labelFormatter(e),h.labelFormatter(e)):"string"==typeof h.labelKey?e[h.labelKey]:Array.isArray(h.labelKey)?h.labelKey.map(l=>l.split(".").reduce((e,l)=>null==e?void 0:e[l],e)).filter(Boolean).join(h.labelSeparator):"";return(l,t)=>(n(),o("div",p,[x.value?(n(),o("div",c,u(e.options.length),1)):r("",!0),e.label_only?(n(),o("div",y,u(K.value),1)):(n(),o("div",v,[e.options&&e.options.length>0?(n(),o("select",{key:0,onMouseenter:t[0]||(t[0]=e=>x.value=!0),onMouseleave:t[1]||(t[1]=e=>x.value=!1),value:m.value,onInput:t[2]||(t[2]=e=>{return l=e.target.value,void(m.value=l);var l}),onChange:t[3]||(t[3]=e=>(e=>{const l=h.options.find(l=>l[h.valueKey]==e)||null;S.value=l})(e.target.value)),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[s("option",b,u(e.placeholder),1),(n(!0),o(d,null,i(e.options,(l,t)=>(n(),o("option",{key:l[e.valueKey],value:l[e.valueKey],selected:t===e.defaultSelectedIndex},u(F(l)),9,g))),128))],40,f)):r("",!0)]))]))}};export{m as _};
