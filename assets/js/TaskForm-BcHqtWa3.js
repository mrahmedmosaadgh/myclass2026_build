import{r as t,f as e,a as s,o as i,L as r,I as a,M as l,U as o,x as d,O as n,V as u,ab as c,S as p,aa as m,$ as b}from"./vendor-DNM7Y6Xn.js";const y={class:"p-6"},g={class:"flex justify-between items-center mb-6"},x={class:"text-xl font-semibold text-gray-900"},f={key:0,class:"mt-1 text-sm text-red-600"},v={key:0,class:"mt-1 text-sm text-red-600"},k={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},h={key:0,class:"mt-1 text-sm text-red-600"},w={key:0,class:"mt-1 text-sm text-red-600"},_=["min"],C={key:0,class:"mt-1 text-sm text-red-600"},T={class:"flex justify-end gap-3 pt-6 border-t border-gray-200"},E=["disabled"],j={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},q={__name:"TaskForm",props:{task:{type:Object,default:null},isEditing:{type:Boolean,default:!1}},emits:["save","cancel"],setup(q,{emit:D}){const S=q,U=D,V=t({title:"",description:"",status:"pending",priority:"medium",due_date:""}),I=t({title:"",description:"",status:"",priority:"",due_date:""}),M=e(!1),O=s(()=>(new Date).toISOString().split("T")[0]),L=s(()=>V.title.trim().length>0&&V.status&&V.priority&&!Object.values(I).some(t=>t));i(()=>{S.isEditing&&S.task&&(V.title=S.task.title||"",V.description=S.task.description||"",V.status=S.task.status||"pending",V.priority=S.task.priority||"medium",V.due_date=S.task.due_date||"")});const P=()=>(I.title="",V.title.trim()?V.title.length>255&&(I.title="Title must be less than 255 characters"):I.title="Title is required",I.status="",V.status?["pending","in_progress","completed"].includes(V.status)||(I.status="Invalid status selected"):I.status="Status is required",I.priority="",V.priority?["low","medium","high"].includes(V.priority)||(I.priority="Invalid priority selected"):I.priority="Priority is required",(()=>{if(I.due_date="",V.due_date){const t=new Date(V.due_date),e=new Date;e.setHours(0,0,0,0),isNaN(t.getTime())?I.due_date="Invalid date format":!S.isEditing&&t<e&&(I.due_date="Due date cannot be in the past")}})(),!Object.values(I).some(t=>t)),z=async()=>{if(P()){M.value=!0;try{const t={title:V.title.trim(),description:V.description.trim()||null,status:V.status,priority:V.priority,due_date:V.due_date||null};U("save",t)}catch(t){console.error("Form submission error:",t)}finally{M.value=!1}}};return(t,e)=>(a(),r("div",y,[l("div",g,[l("h2",x,o(q.isEditing?"Edit Task":"Create New Task"),1),l("button",{onClick:e[0]||(e[0]=e=>t.$emit("cancel")),class:"text-gray-400 hover:text-gray-600 transition-colors"},e[7]||(e[7]=[l("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("form",{onSubmit:b(z,["prevent"]),class:"space-y-6"},[l("div",null,[e[8]||(e[8]=l("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},[u(" Title "),l("span",{class:"text-red-500"},"*")],-1)),d(l("input",{id:"title","onUpdate:modelValue":e[1]||(e[1]=t=>V.title=t),type:"text",required:"",maxlength:"255",placeholder:"Enter task title...",class:p(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",I.title?"border-red-300":"border-gray-300"])},null,2),[[c,V.title]]),I.title?(a(),r("p",f,o(I.title),1)):n("",!0)]),l("div",null,[e[9]||(e[9]=l("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Description ",-1)),d(l("textarea",{id:"description","onUpdate:modelValue":e[2]||(e[2]=t=>V.description=t),rows:"4",placeholder:"Enter task description...",class:p(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-vertical",I.description?"border-red-300":"border-gray-300"])},null,2),[[c,V.description]]),I.description?(a(),r("p",v,o(I.description),1)):n("",!0)]),l("div",k,[l("div",null,[e[11]||(e[11]=l("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"},[u(" Status "),l("span",{class:"text-red-500"},"*")],-1)),d(l("select",{id:"status","onUpdate:modelValue":e[3]||(e[3]=t=>V.status=t),required:"",class:p(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",I.status?"border-red-300":"border-gray-300"])},e[10]||(e[10]=[l("option",{value:"pending"},"Pending",-1),l("option",{value:"in_progress"},"In Progress",-1),l("option",{value:"completed"},"Completed",-1)]),2),[[m,V.status]]),I.status?(a(),r("p",h,o(I.status),1)):n("",!0)]),l("div",null,[e[13]||(e[13]=l("label",{for:"priority",class:"block text-sm font-medium text-gray-700 mb-2"},[u(" Priority "),l("span",{class:"text-red-500"},"*")],-1)),d(l("select",{id:"priority","onUpdate:modelValue":e[4]||(e[4]=t=>V.priority=t),required:"",class:p(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",I.priority?"border-red-300":"border-gray-300"])},e[12]||(e[12]=[l("option",{value:"low"},"Low",-1),l("option",{value:"medium"},"Medium",-1),l("option",{value:"high"},"High",-1)]),2),[[m,V.priority]]),I.priority?(a(),r("p",w,o(I.priority),1)):n("",!0)])]),l("div",null,[e[14]||(e[14]=l("label",{for:"due_date",class:"block text-sm font-medium text-gray-700 mb-2"}," Due Date ",-1)),d(l("input",{id:"due_date","onUpdate:modelValue":e[5]||(e[5]=t=>V.due_date=t),type:"date",min:q.isEditing?void 0:O.value,class:p(["w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",I.due_date?"border-red-300":"border-gray-300"])},null,10,_),[[c,V.due_date]]),I.due_date?(a(),r("p",C,o(I.due_date),1)):n("",!0),e[15]||(e[15]=l("p",{class:"mt-1 text-sm text-gray-500"}," Leave empty if no due date is required ",-1))]),l("div",T,[l("button",{type:"button",onClick:e[6]||(e[6]=e=>t.$emit("cancel")),class:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"}," Cancel "),l("button",{type:"submit",disabled:M.value||!L.value,class:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[M.value?(a(),r("svg",j,e[16]||(e[16]=[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):n("",!0),u(" "+o(M.value?"Saving...":q.isEditing?"Update Task":"Create Task"),1)],8,E)])],32)]))}};export{q as default};
