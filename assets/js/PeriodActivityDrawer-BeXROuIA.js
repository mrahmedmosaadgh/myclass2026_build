import{o as e,u as a,m as t,c as l,Q as s,B as o,aE as r,k as n,bp as i,f as d,b as u}from"./app-BB4Fw2oM.js";import{Q as c}from"./QSelect-BImwntZk.js";import{f as v,M as p,J as m,L as g,a as h,o as y,A as f,N as b,Q as w,b as x,U as k,V as _,an as F,K as j,F as S,R as A,W as I,y as D,ac as T,a0 as q,z as E,_ as C,k as V,O as $,I as M,$ as O}from"./vendor-DuKqz2x4.js";import R from"./StudentRecordsGrid-BTJvVdSF.js";import N from"./purify.es-C2Ba6vpb.js";import{k as P}from"./katex-BXKQVcz-.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./rtl-Cr6c3OOr.js";import"./QTab-BFa-NGCD.js";import"./QTabs-CG-V162G.js";import"./QBadge-BkpTfeZ_.js";import"./QTabPanel-BKNysMBn.js";import"./use-panel-DoNmfVmh.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanels-ewjb0pYP.js";const z={__name:"OpenAiCaller",props:{apiKey:{type:String,default:"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"},model:{type:String,default:"gpt-4o-mini"},maxTokens:{type:Number,default:1e3},temperature:{type:Number,default:.7},store:{type:Boolean,default:!0}},emits:["success","error"],setup(e,{expose:a,emit:t}){const l=e,s=t,o=v(null),r=v(!1),n=v(null),i=v(0),d=v(0),u=async(e,a={},t=0)=>{var c;if(!e||!Array.isArray(e)||0===e.length)return void(n.value="Messages are required and must be an array");const v=a.apiKey||l.apiKey;if(!v)return void(n.value="OpenAI API key is required");0===t&&(r.value=!0,n.value=null,d.value=0),await(async()=>{const e=Date.now()-i.value;if(e<1e3){const a=1e3-e;await new Promise(e=>setTimeout(e,a))}i.value=Date.now()})();const p={model:a.model||l.model,messages:e,max_tokens:a.maxTokens||l.maxTokens,temperature:a.temperature||l.temperature,store:void 0!==a.store?a.store:l.store};try{const l=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify(p)});if(429===l.status){const s=parseInt(l.headers.get("Retry-After")||"20");if(t<3){const l=1e3*s||(e=>Math.min(1e3*Math.pow(2,e),3e4))(t);return console.log(`Rate limited. Retrying in ${l/1e3} seconds...`),await new Promise(e=>setTimeout(e,l)),u(e,a,t+1)}throw new Error("Rate limit exceeded. Maximum retries reached.")}if(!l.ok){const e=await l.json();throw new Error((null==(c=e.error)?void 0:c.message)||`API request failed with status ${l.status}`)}const r=await l.json();return o.value=r,s("success",r),r}catch(m){throw n.value=m.message||"An error occurred",s("error",m),m}finally{(0===t||t>=3)&&(r.value=!1)}},c=()=>{o.value=null,n.value=null};return a({sendRequest:u,reset:c,response:o,loading:r,error:n}),(e,a)=>(m(),p("div",null,[g(e.$slots,"default",{response:o.value,loading:r.value,error:n.value,sendRequest:u,reset:c})]))}},L={class:"p-4 max-w-2xl mx-auto"},B={class:"flex justify-between items-center mb-4"},U={class:"flex items-center space-x-3"},K={class:"flex items-center space-x-2"},J={class:"flex items-center space-x-2"},Q={key:0,class:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg"},Y={class:"mb-4 space-y-3"},X={class:"flex justify-between items-center mb-1"},H={class:"font-semibold"},G={key:0,class:"flex space-x-2"},Z=["onClick"],W=["onClick"],ee=["innerHTML"],ae={key:1},te=["onSubmit"],le={class:"relative"},se=["disabled"],oe={key:0,class:"text-sm text-red-500 animate-pulse flex items-center"},re={key:0,class:"text-gray-600 italic"},ne={class:"flex justify-between items-center"},ie={key:0,class:"text-red-500 text-sm"},de=["disabled"],ue='You are a Socratic tutor who guides students with encouraging questions rather than direct answers.\n\nIMPORTANT GUIDELINES:\n1. Use emojis frequently to create a friendly atmosphere (âœ¨, ðŸ§ , ðŸ¤”, ðŸ’¡, ðŸ‘, ðŸŒŸ, ðŸ”, etc.)\n2. Start responses with encouraging phrases like "Great question!", "You\'re on the right track!", "I like how you\'re thinking about this!"\n3. Instead of giving answers, ask guiding questions that lead students to discover solutions themselves\n4. Acknowledge effort and progress with praise like "Excellent effort!" or "You\'re making great progress!"\n5. For math problems, offer hints about the approach rather than calculations\n6. Break complex problems into smaller steps with guiding questions for each step\n7. If a student is stuck, provide a small hint and encourage them to try again\n8. End your responses with motivational phrases like "You can do this!" or "I believe in you!"\n\nYour goal is to cultivate independent thinking while keeping students motivated and engaged.',ce="You are a helpful assistant.",ve=e({__name:"OpenAiCaller_use",setup(e){const a=v(""),t=v([]),l=v({}),s=v(!1),o=v(!1),r=window.speechSynthesis,n=v(null),i=v(!1),d=v(null),u=v(""),c=()=>{if(d.value||(()=>{try{const e=window.SpeechRecognition||window.webkitSpeechRecognition;return e?(d.value=new e,d.value.continuous=!0,d.value.interimResults=!0,d.value.lang="en-US",d.value.onresult=e=>{let t="",l="";for(let a=e.resultIndex;a<e.results.length;a++){const s=e.results[a][0].transcript;e.results[a].isFinal?t+=s:l+=s}u.value=l,t&&(a.value+=(a.value?" ":"")+t)},d.value.onend=()=>{i.value?d.value.start():u.value=""},d.value.onerror=e=>{console.error("Speech recognition error",e.error),i.value=!1,u.value=""},!0):(console.warn("Speech recognition not supported in this browser"),!1)}catch(e){return console.error("Error initializing speech recognition:",e),!1}})())if(i.value)d.value.stop(),i.value=!1,u.value="";else try{d.value.start(),i.value=!0}catch(e){console.error("Error starting speech recognition:",e),alert("Could not start speech recognition. Please try again.")}else alert("Speech recognition is not supported in your browser.")},g=()=>{if(s.value=!s.value,t.value.length>0){const e=t.value.filter(e=>"user"===e.role);t.value=[{role:"system",content:s.value?ue:ce},...e],l.value={}}else t.value=[{role:"system",content:s.value?ue:ce}]},C=()=>{o.value=!o.value,!o.value&&n.value&&(r.cancel(),n.value=null)},V=e=>{if(!e)return;r.speaking&&r.cancel();const a=e.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/\\\((.*?)\\\)/g,"").replace(/\\\[(.*?)\\\]/g,"").replace(/\\frac\{(.*?)\}\{(.*?)\}/g,"$1 divided by $2").replace(/[\u{1F600}-\u{1F64F}\u{1F300}-\u{1F5FF}\u{1F680}-\u{1F6FF}\u{1F700}-\u{1F77F}\u{1F780}-\u{1F7FF}\u{1F800}-\u{1F8FF}\u{1F900}-\u{1F9FF}\u{1FA00}-\u{1FA6F}\u{1FA70}-\u{1FAFF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}]/gu,"").replace(/\s+/g," ").trim(),t=new SpeechSynthesisUtterance(a);t.lang="en-US",t.rate=1,t.pitch=1;const l=r.getVoices(),s=l.find(e=>("en-US"===e.lang||"en-GB"===e.lang)&&(e.name.includes("Google")||e.name.includes("Natural")||e.name.includes("Female")||e.name.includes("Samantha")));if(s)t.voice=s;else{const e=l.find(e=>"en-US"===e.lang||"en-GB"===e.lang);e&&(t.voice=e)}n.value=t,r.speak(t)},$=h(()=>t.value.filter(e=>"system"!==e.role)),M=e=>e&&(e.includes("\\(")||e.includes("\\)")||e.includes("\\frac")||e.includes("**Question")),O=e=>{if(!e)return"";try{let a=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>");return a=a.replace(/\*(.*?)\*/g,"<em>$1</em>"),a=a.replace(/(\d+\.\s+)(?!<)/g,'<div class="mt-2 font-semibold">$1</div>'),a=a.replace(/\\\((.*?)\\\)/g,(e,a)=>{try{return P.renderToString(a.trim(),{throwOnError:!1,displayMode:!1,strict:!1})}catch(t){return console.warn("KaTeX rendering error:",t),e}}),a=a.replace(/\n/g,"<br>"),N.sanitize(a)}catch(a){return console.error("Error in renderKaTeX:",a),e||""}},R=e=>{if(e.choices&&e.choices.length>0){const s=t.value.length,o=e.choices[0].message.content;t.value.push({role:"assistant",content:o}),M(o)&&(l.value[s]=O(o)),V(o),a.value=""}},ve=e=>{console.error("OpenAI API error:",e)};return y(()=>{(async()=>{if(!window.katex)try{const e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css",document.head.appendChild(e);const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js",a.async=!0,await new Promise((e,t)=>{a.onload=e,a.onerror=t,document.head.appendChild(a)}),console.log("KaTeX loaded successfully")}catch(e){console.error("Failed to load KaTeX:",e)}})(),t.value=[{role:"system",content:s.value?ue:ce}]}),y(()=>{r.getVoices(),r.onvoiceschanged=()=>{r.getVoices()}}),f(()=>{r.speaking&&r.cancel()}),(e,n)=>(m(),p("div",L,[b("div",B,[n[3]||(n[3]=b("h2",{class:"text-xl font-semibold"},"AI Chat",-1)),b("div",U,[b("div",K,[n[1]||(n[1]=b("span",{class:"text-sm text-gray-600"},"Read Aloud:",-1)),b("button",{onClick:C,class:k(["px-3 py-1 rounded-full text-sm font-medium transition-colors",o.value?"bg-purple-500 text-white":"bg-gray-200 text-gray-700"])},_(o.value?"ON":"OFF"),3)]),b("div",J,[n[2]||(n[2]=b("span",{class:"text-sm text-gray-600"},"BrainSpark Mode:",-1)),b("button",{onClick:g,class:k(["px-3 py-1 rounded-full text-sm font-medium transition-colors",s.value?"bg-green-500 text-white":"bg-gray-200 text-gray-700"])},_(s.value?"ON":"OFF"),3)])])]),s.value?(m(),p("div",Q,n[4]||(n[4]=[F('<div class="flex items-start" data-v-7c1d50a7><div class="flex-shrink-0 pt-0.5" data-v-7c1d50a7><svg class="h-5 w-5 text-green-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" data-v-7c1d50a7><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" data-v-7c1d50a7></path></svg></div><div class="ml-3" data-v-7c1d50a7><p class="text-sm text-green-700" data-v-7c1d50a7><strong data-v-7c1d50a7>BrainSpark Mode Activated! âœ¨</strong> I&#39;ll guide your thinking with helpful questions instead of giving away answers. Let&#39;s discover solutions together! </p></div></div>',1)]))):w("",!0),x(z,{apiKey:E("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"),ref:"aiCaller",onSuccess:R,onError:ve},{default:j(({loading:e,error:o,sendRequest:d})=>[b("div",Y,[(m(!0),p(S,null,A($.value,(e,a)=>(m(),p("div",{key:a,class:k(["p-3 rounded relative","user"===e.role?"bg-gray-100":"bg-blue-50"])},[b("div",X,[b("div",H,_("user"===e.role?"You":"AI"),1),"assistant"===e.role?(m(),p("div",G,[b("button",{onClick:a=>{return t=e.content,r.speaking&&r.cancel(),void V(t);var t},class:"text-xs px-2 py-1 bg-purple-500 text-white rounded hover:bg-purple-600 flex items-center",title:"Listen to this response"},n[5]||(n[5]=[b("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.414a5 5 0 001.414 1.414m0 0l-2.828 2.828m0 0a9 9 0 010-12.728m2.828 2.828a5 5 0 00-1.414 1.414m0 0L3 21"})],-1),I(" Listen ")]),8,Z),M(e.content)?(m(),p("button",{key:0,onClick:s=>((e,a=null)=>{if(l.value[e])l.value[e]=null;else{var s=t.value[e];null!==a&&(s=a);let o=s.content;o=o.replace(/(\d+\.\s+\*\*.*?\*\*):(?:\s*)(-\s+.*?)(?=\d+\.|$)/gs,(e,a,t)=>`<div class="mb-3"><strong>${a.replace(/\*\*/g,"")}</strong>${t}</div>`),o=o.replace(/(-\s+.*?)(?=(?:-\s+)|(?:\d+\.)|$)/g,'<div class="ml-4 mb-1">$1</div>'),o=o.replace(/(\d+\.\s+\*\*.*?\*\*)/g,'<div class="font-bold mt-3">$1</div>'),o=o.replace(/(Example:.*?)(?=(?:-\s+)|(?:\d+\.)|$)/g,'<div class="ml-4 italic text-gray-600">$1</div>'),l.value[e]=O(o)}})(a,e),class:"text-xs px-2 py-1 bg-blue-500 text-white rounded hover:bg-blue-600"},_(l.value[a]?"Plain Text":"Math"),9,W)):w("",!0)])):w("",!0)]),"assistant"===e.role&&M(e.content)&&l.value[a]?(m(),p("div",{key:0,innerHTML:l.value[a],class:"katex-preview"},null,8,ee)):(m(),p("div",ae,_(e.content),1))],2))),128))]),b("form",{onSubmit:q(e=>(async e=>{if(a.value.trim()){t.value.push({role:"user",content:a.value.trim()});try{t.value.some(e=>"system"===e.role)||t.value.unshift({role:"system",content:s.value?ue:ce}),await e(t.value)}catch(o){console.error("Failed to get AI response:",o)}}})(d),["prevent"]),class:"space-y-2"},[b("div",le,[D(b("textarea",{"onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),class:"w-full border rounded p-2 min-h-[100px] pr-10",placeholder:"Type your message here or click the microphone to speak...",disabled:e||i.value},null,8,se),[[T,a.value]]),b("button",{type:"button",onClick:c,class:k(["absolute right-2 bottom-2 p-2 rounded-full transition-colors",i.value?"bg-red-500 text-white animate-pulse":"bg-gray-200 hover:bg-gray-300 text-gray-700"]),title:"Toggle voice input"},n[6]||(n[6]=[b("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[b("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})],-1)]),2)]),i.value?(m(),p("div",oe,[n[7]||(n[7]=b("span",{class:"mr-2"},"Listening...",-1)),u.value?(m(),p("span",re,_(u.value),1)):w("",!0)])):w("",!0),b("div",ne,[o?(m(),p("div",ie,_(o),1)):w("",!0),b("button",{type:"submit",class:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded",disabled:e||i.value||!a.value.trim()},_(e?"Sending...":"Send"),9,de)])],40,te)]),_:1},8,["apiKey"])]))}},[["__scopeId","data-v-7c1d50a7"]]),pe={class:"row items-center"},me={class:"col"},ge={class:"text-h6"},he={class:"text-subtitle2"},ye={class:"col-auto"},fe={key:0,class:"q-pa-lg flex flex-center"},be={key:1},we={key:0,class:"q-pa-md"},xe={key:1},ke={class:"row items-center justify-between q-mb-md"},_e={key:0,class:"q-pa-md flex flex-center"},Fe={key:1,class:"text-center q-pa-md"},je={key:2},Se={class:"q-pa-md"},Ae=e({__name:"PeriodActivityDrawer",props:{modelValue:Boolean,periodData:Object,calendarDate:String},emits:["update:modelValue"],setup(e,{emit:g}){var y;C.defaults.headers.common["X-CSRF-TOKEN"]=null==(y=document.querySelector('meta[name="csrf-token"]'))?void 0:y.getAttribute("content"),C.defaults.withCredentials=!0;const f=a(),k=e,F=g,A=h({get:()=>k.modelValue,set:e=>{F("update:modelValue",e)}}),I=v(!1),D=v(!1),T=v(!1),q=v(null),E=v([]),N=v([]);v("attendance");const P=v(null),z=[{label:"Completed",value:"completed"},{label:"Cancelled",value:"cancelled"},{label:"Modified",value:"modified"},{label:"Event Affected",value:"event_affected"}],L=v([]);V(()=>A.value,e=>{e&&B()});const B=async()=>{var e,a,t,l,s;if(k.periodData&&k.calendarDate){I.value=!0;try{console.log("Loading period activity for:",{schedule_id:k.periodData.schedule_id,calendar_date:k.calendarDate,classroom_id:k.periodData.classroom_id});const t=await C.get("/api/period-activities",{params:{schedule_id:k.periodData.schedule_id,calendar_date:k.calendarDate,classroom_id:k.periodData.classroom_id,teacher_id:null==(a=null==(e=$().props.auth.user)?void 0:e.teacher)?void 0:a.id}});console.log("Period activity response:",t.data),t.data&&t.data.records?(Array.isArray(t.data.records.data)&&t.data.records.data.length>0?q.value=t.data.records.data[0]:Array.isArray(t.data.records)&&t.data.records.length>0?q.value=t.data.records[0]:q.value=null,t.data.student_records?N.value=t.data.student_records:await K()):t.data&&t.data.period_activity?(q.value=t.data.period_activity,t.data.student_records?N.value=t.data.student_records:await K()):(q.value=null,N.value=[])}catch(o){console.error("Error loading period activity:",o),console.error("Error details:",(null==(t=o.response)?void 0:t.data)||o.message),f.notify({color:"negative",message:`Failed to load period activity data: ${(null==(s=null==(l=o.response)?void 0:l.data)?void 0:s.message)||o.message}`,icon:"error"}),q.value=null}finally{I.value=!1}}},U=async()=>{var e,a,t,l,s;D.value=!0;try{const t=null==(a=null==(e=$().props.auth.user)?void 0:e.teacher)?void 0:a.id;if(!t)throw new Error("Teacher ID not found");const l=await C.post("/api/period-activities",{schedule_id:k.periodData.schedule_id,calendar_id:k.periodData.calendar_id,teacher_id:t,teacher_present:!0,period_status:"completed",calendar_date:k.calendarDate});console.log("Created period activity:",l.data),q.value=l.data,f.notify({color:"positive",message:"Period activity created successfully",icon:"check"}),await K()}catch(o){console.error("Error creating period activity:",o),console.error("Error details:",(null==(t=o.response)?void 0:t.data)||o.message),f.notify({color:"negative",message:`Failed to create period activity: ${(null==(s=null==(l=o.response)?void 0:l.data)?void 0:s.message)||o.message}`,icon:"error"})}finally{D.value=!1}},K=async()=>{var e,a,t,l;if(null==(e=q.value)?void 0:e.id){T.value=!0;try{console.log("Loading student records for period activity:",q.value.id);const e=await C.get(`/api/period-activities/${q.value.id}/student-records`);console.log("Student records response:",e.data),e.data&&Array.isArray(e.data)&&e.data.length>0?(N.value=e.data,E.value=e.data.map(e=>({id:e.student_id,name:e.name}))):(console.log("No student records found"),N.value=[])}catch(s){console.error("Error loading student records:",s),console.error("Error details:",(null==(a=s.response)?void 0:a.data)||s.message),f.notify({color:"negative",message:`Failed to load student records: ${(null==(l=null==(t=s.response)?void 0:t.data)?void 0:l.message)||s.message}`,icon:"error"})}finally{T.value=!1}}else console.log("No period activity ID available, cannot load student records")},J=e=>{const a=N.value.findIndex(a=>a.id===e.id);-1!==a&&N.value.splice(a,1,{...N.value[a],...e})},Q=async e=>{var a,t,l,s;if(null==(a=q.value)?void 0:a.id)try{const a=await C.put(`/api/period-activities/${q.value.id}/student-records/${e.id}`,e);console.log("Student record saved:",a.data);const t=N.value.findIndex(a=>a.id===e.id);-1!==t&&N.value.splice(t,1,a.data)}catch(o){console.error("Error saving student record:",o),console.error("Error details:",(null==(t=o.response)?void 0:t.data)||o.message),f.notify({color:"negative",message:`Failed to save student record: ${(null==(s=null==(l=o.response)?void 0:l.data)?void 0:s.message)||o.message}`,icon:"error"})}else console.error("No period activity ID available")},Y=async()=>{var e,a,t,l;if(null==(e=q.value)?void 0:e.id){D.value=!0;try{console.log("Saving period activity:",q.value);const e=await C.put(`/api/period-activities/${q.value.id}`,{...q.value,updated_by:void 0});console.log("Period activity saved:",e.data),q.value=e.data,console.log("Saving student records:",N.value);const a=await C.put(`/api/period-activities/${q.value.id}/student-records/batch`,{records:N.value});console.log("Student records saved:",a.data),f.notify({color:"positive",message:"Period activity saved successfully",icon:"check"})}catch(s){console.error("Error saving period activity:",s),console.error("Error details:",(null==(a=s.response)?void 0:a.data)||s.message),f.notify({color:"negative",message:`Failed to save period activity: ${(null==(l=null==(t=s.response)?void 0:t.data)?void 0:l.message)||s.message}`,icon:"error"})}finally{D.value=!1}}else console.error("No period activity ID available")};V(()=>[k.periodData,k.calendarDate,A.value],([e,a,t])=>{e&&a&&t&&B()},{immediate:!0}),V(q,e=>{(null==e?void 0:e.id)&&0===N.value.length&&K()}),V(A,e=>{e&&(P.value=null,q.value=null,N.value=[],E.value=[],B())});const X=()=>{var e;(null==(e=q.value)?void 0:e.id)&&O.visit(`/my-class/teacher/student-records/${q.value.id}`,{method:"get",preserveState:!1})};return(a,v)=>(m(),p(S,null,[x(ve),x(u,{modelValue:A.value,"onUpdate:modelValue":v[6]||(v[6]=e=>A.value=e),persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down",class:"period-activity-dialog"},{default:j(()=>[x(t,{class:"full-height"},{default:j(()=>[x(l,{class:"bg-primary text-white"},{default:j(()=>{var a,t,l,o;return[b("div",pe,[b("div",me,[b("div",ge,_(null==(a=e.periodData)?void 0:a.subject)+" - "+_(null==(t=e.periodData)?void 0:t.classroom),1),b("div",he,_(e.calendarDate)+" | "+_(null==(l=e.periodData)?void 0:l.from)+" - "+_(null==(o=e.periodData)?void 0:o.to),1)]),b("div",ye,[x(s,{flat:"",round:"",dense:"",icon:"close",onClick:v[0]||(v[0]=e=>A.value=!1)})])])]}),_:1}),x(l,{class:"q-pa-none"},{default:j(()=>[x(o,{style:{height:"calc(100vh - 70px)"}},{default:j(()=>[I.value?(m(),p("div",fe,[x(r,{color:"primary",size:"3em"})])):(m(),p("div",be,[q.value?(m(),p("div",xe,[x(t,{flat:"",bordered:"",class:"q-ma-md"},{default:j(()=>[x(l,null,{default:j(()=>[v[8]||(v[8]=b("div",{class:"text-h6"},"Teacher Information",-1)),x(n,{modelValue:q.value.teacher_present,"onUpdate:modelValue":v[1]||(v[1]=e=>q.value.teacher_present=e),label:"Teacher Present"},null,8,["modelValue"]),q.value.teacher_present?w("",!0):(m(),M(c,{key:0,modelValue:q.value.teacher_substitute_id,"onUpdate:modelValue":v[2]||(v[2]=e=>q.value.teacher_substitute_id=e),options:L.value,label:"Substitute Teacher",outlined:"",class:"q-mt-sm"},null,8,["modelValue","options"]))]),_:1})]),_:1}),x(t,{flat:"",bordered:"",class:"q-ma-md"},{default:j(()=>[x(l,null,{default:j(()=>[v[9]||(v[9]=b("div",{class:"text-h6"},"Period Status",-1)),x(i,{modelValue:q.value.period_status,"onUpdate:modelValue":v[3]||(v[3]=e=>q.value.period_status=e),options:z,color:"primary"},null,8,["modelValue"])]),_:1})]),_:1}),x(t,{flat:"",bordered:"",class:"q-ma-md"},{default:j(()=>[x(l,null,{default:j(()=>[v[10]||(v[10]=b("div",{class:"text-h6"},"Notes",-1)),x(d,{modelValue:q.value.lesson_notes,"onUpdate:modelValue":v[4]||(v[4]=e=>q.value.lesson_notes=e),type:"textarea",label:"Lesson Notes",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),x(d,{modelValue:q.value.improvement_notes,"onUpdate:modelValue":v[5]||(v[5]=e=>q.value.improvement_notes=e),type:"textarea",label:"Improvement Notes",outlined:""},null,8,["modelValue"])]),_:1})]),_:1}),x(t,{flat:"",bordered:"",class:"q-ma-md"},{default:j(()=>[x(l,null,{default:j(()=>[b("div",ke,[v[11]||(v[11]=b("div",{class:"text-h6"},"Student Records",-1)),N.value.length>0?(m(),M(s,{key:0,color:"primary",outline:"",icon:"open_in_new",label:"Open Full View",onClick:X})):w("",!0)]),T.value?(m(),p("div",_e,[x(r,{color:"primary",size:"2em"})])):N.value.length?(m(),p("div",je,[x(R,{students:N.value,loading:T.value,"onUpdate:student":J,onSaveStudent:Q},null,8,["students","loading"])])):(m(),p("div",Fe,[v[12]||(v[12]=b("p",null,"No student records found for this class",-1)),x(s,{color:"primary",label:"Load Student Records",onClick:K})]))]),_:1})]),_:1}),b("div",Se,[x(s,{color:"primary",label:"Save",onClick:Y,class:"full-width",loading:D.value},null,8,["loading"])])])):(m(),p("div",we,[x(t,{flat:"",bordered:""},{default:j(()=>[x(l,{class:"text-center"},{default:j(()=>[v[7]||(v[7]=b("p",{class:"text-h6"},"No period activity record exists for this period",-1)),x(s,{color:"primary",label:"Create Period Activity",onClick:U,loading:D.value},null,8,["loading"])]),_:1})]),_:1})]))]))]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}},[["__scopeId","data-v-346a8642"]]);export{Ae as default};
