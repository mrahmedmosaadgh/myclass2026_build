import{f as e,p as a,h as l,j as t,k as s,s as o,l as r,b as u,d as n}from"./app-DlLesFGi.js";import{Q as i}from"./QSelect-BTh0khse.js";import{Q as p}from"./QForm-CDvMxBSt.js";import{f as d,I as m,J as v,K as c,R as f,b as g,N as b,O as _,ag as y,ah as h,W as j,V as x,z as C,$ as V}from"./vendor-BWKGNkNB.js";import{_ as w}from"./AppLayout-B3PyevP7.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";const q={class:"py-12"},A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},N={key:0},U={class:"flex justify-end q-mt-lg"},Q={__name:"Create",props:{users:{type:Array,default:()=>[]}},setup(Q){const S=window.route,F=d(!1),G=d(""),P=d([]),k=d(!1),z=e=>{if(!e)return"primary";const a=["primary","secondary","accent","positive","negative","info","warning"];return a[e.split("").reduce((e,a)=>e+a.charCodeAt(0),0)%a.length]},I=()=>{k.value=!0;const e=F.value?P.value.map(e=>e.id):[P.value.id];V.post(S("conversations.store"),{user_ids:e,name:F.value?G.value:null},{onFinish:()=>{k.value=!1}})};return(d,V)=>(v(),m(w,{title:"New Conversation"},{header:c(()=>V[3]||(V[3]=[f("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," New Conversation ",-1)])),default:c(()=>[f("div",q,[f("div",A,[g(n,{flat:"",bordered:""},{default:c(()=>[g(e,null,{default:c(()=>[V[4]||(V[4]=f("div",{class:"text-h5 q-mb-md"},"Start a New Conversation",-1)),g(p,{onSubmit:I,class:"q-gutter-md"},{default:c(()=>[f("div",null,[g(a,{modelValue:F.value,"onUpdate:modelValue":V[0]||(V[0]=e=>F.value=e),label:"Create a group chat",color:"primary"},null,8,["modelValue"])]),F.value?(v(),b("div",N,[g(l,{modelValue:G.value,"onUpdate:modelValue":V[1]||(V[1]=e=>G.value=e),label:"Group Name",rules:[e=>!!e||"Group name is required"]},null,8,["modelValue","rules"])])):_("",!0),f("div",null,[g(i,{modelValue:P.value,"onUpdate:modelValue":V[2]||(V[2]=e=>P.value=e),options:Q.users,"option-label":"name","option-value":e=>e.id,label:F.value?"Add Participants":"Select User",multiple:F.value,"use-chips":"",rules:[e=>e.length>0||"Please select at least one user"]},{option:c(e=>[g(t,y(h(e.itemProps)),{default:c(()=>[g(s,{avatar:""},{default:c(()=>[g(o,{color:z(e.opt.name)},{default:c(()=>{return[j(x((a=e.opt.name,a?a.split(" ").map(e=>e[0]).join("").toUpperCase():"?")),1)];var a}),_:2},1032,["color"])]),_:2},1024),g(s,null,{default:c(()=>[g(r,null,{default:c(()=>[j(x(e.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","option-value","label","multiple","rules"])]),f("div",U,[g(u,{flat:"",color:"negative",label:"Cancel",to:C(S)("conversations.index"),class:"q-mr-sm"},null,8,["to"]),g(u,{type:"submit",color:"primary",label:"Create Conversation",loading:k.value},null,8,["loading"])])]),_:1})]),_:1})]),_:1})])])]),_:1}))}};export{Q as default};
