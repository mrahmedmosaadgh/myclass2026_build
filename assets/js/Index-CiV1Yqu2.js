import{c as e,Q as t,m as a,d as s,g as o,R as r,h as n,A as i,i as l,j as d}from"./app-BB4Fw2oM.js";import{Q as c}from"./QBadge-BkpTfeZ_.js";import{_ as m}from"./AppLayout-OZsHDu4T.js";import{I as u,J as p,K as y,N as f,b as g,M as _,z as v,R as x,y as h,Q as b,W as w,V as k,F as j}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const C={class:"py-12"},Q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},S={key:0,class:"text-center py-8"},A={key:0,class:"text-grey-7 text-caption"},D={key:0},L={__name:"Index",props:{conversations:{type:Array,default:()=>[]}},setup(L){const N=window.route,q=e=>{const t=new Date(e),a=new Date-t;return a<864e5?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):a<6048e5?t.toLocaleDateString([],{weekday:"short"}):t.toLocaleDateString([],{month:"short",day:"numeric"})},z=e=>{if(!e)return"primary";const t=["primary","secondary","accent","positive","negative","info","warning"];return t[e.split("").reduce((e,t)=>e+t.charCodeAt(0),0)%t.length]};return(I,R)=>(p(),u(m,{title:"Conversations"},{header:y(()=>R[0]||(R[0]=[f("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Conversations ",-1)])),default:y(()=>[f("div",C,[f("div",Q,[g(a,{flat:"",bordered:"",class:"q-mb-md"},{default:y(()=>[g(e,{class:"flex justify-between items-center"},{default:y(()=>[R[1]||(R[1]=f("div",{class:"text-h5"},"Your Conversations",-1)),g(t,{color:"primary",to:v(N)("conversations.create"),icon:"add",label:"New Conversation"},null,8,["to"])]),_:1})]),_:1}),0===L.conversations.length?(p(),_("div",S,[g(s,{name:"chat",size:"4em",color:"grey-5"}),R[2]||(R[2]=f("div",{class:"text-h6 q-mt-md"},"No conversations yet",-1)),R[3]||(R[3]=f("div",{class:"text-grey-7 q-mb-md"},"Start a new conversation to chat with someone",-1)),g(t,{color:"primary",to:v(N)("conversations.create"),label:"Start a Conversation"},null,8,["to"])])):(p(),u(o,{key:1,bordered:"",separator:"",class:"rounded-borders"},{default:y(()=>[(p(!0),_(j,null,x(L.conversations,e=>h((p(),u(n,{key:e.id,to:v(N)("conversations.show",e.id),clickable:""},{default:y(()=>[g(l,{avatar:""},{default:y(()=>[e.is_group?(p(),u(i,{key:0},{default:y(()=>[g(s,{name:"group",size:"md"})]),_:1})):(p(),u(i,{key:1,color:z(e.name)},{default:y(()=>{return[w(k((t=e.name,t?t.split(" ").map(e=>e[0]).join("").toUpperCase():"?")),1)];var t}),_:2},1032,["color"]))]),_:2},1024),g(l,null,{default:y(()=>[g(d,{class:"flex justify-between"},{default:y(()=>[f("span",null,k(e.name),1),e.latest_message?(p(),_("span",A,k(q(e.latest_message.created_at)),1)):b("",!0)]),_:2},1024),e.latest_message?(p(),u(d,{key:0,caption:"",lines:"1"},{default:y(()=>[e.latest_message.is_mine?(p(),_("span",D,"You: ")):b("",!0),w(" "+k(e.latest_message.body),1)]),_:2},1024)):(p(),u(d,{key:1,caption:""},{default:y(()=>R[4]||(R[4]=[f("span",{class:"text-grey-7"},"No messages yet",-1)])),_:1}))]),_:2},1024),e.unread_count>0?(p(),u(l,{key:0,side:""},{default:y(()=>[g(c,{color:"primary",rounded:""},{default:y(()=>[w(k(e.unread_count),1)]),_:2},1024)]),_:2},1024)):b("",!0)]),_:2},1032,["to"])),[[r]])),128))]),_:1}))])])]),_:1}))}};export{L as default};
