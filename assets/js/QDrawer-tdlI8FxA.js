import{D as e,aZ as a,T as o,a_ as l,U as i,O as t,E as n,aV as r,a$ as u,b0 as s,at as v,b1 as d,aB as c,V as p,S as m}from"./app-B77gjd5a.js";import{p as f,q as h,f as b,a as w,k as y,n as q,o as g,A as k,y as x,h as B}from"./vendor-DuKqz2x4.js";const S=e({name:"QDrawer",inheritAttrs:!1,props:{...l,...o,side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},noMiniAnimation:Boolean,breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean},emits:[...a,"onLayout","miniState"],setup(e,{slots:a,emit:o,attrs:l}){const S=f(),{proxy:{$q:T}}=S,$=i(e,T),{preventBodyScroll:O}=d(),{registerTimeout:C,removeTimeout:W}=t(),A=h(r,n);if(A===n)return console.error("QDrawer needs to be child of QLayout"),n;let _,L,M=null;const V=b("mobile"===e.behavior||"desktop"!==e.behavior&&A.totalWidth.value<=e.breakpoint),z=w(()=>!0===e.mini&&!0!==V.value),F=w(()=>!0===z.value?e.miniWidth:e.width),I=b(!0===e.showIfAbove&&!1===V.value||!0===e.modelValue),D=w(()=>!0!==e.persistent&&(!0===V.value||!0===le.value));function Q(e,a){if(R(),!1!==e&&A.animate(),he(0),!0===V.value){const e=A.instances[Y.value];!0===(null==e?void 0:e.belowBreakpoint)&&e.hide(!1),be(1),!0!==A.isContainer.value&&O(!0)}else be(0),!1!==e&&we(!1);C(()=>{!1!==e&&we(!0),!0!==a&&o("show",e)},150)}function j(e,a){U(),!1!==e&&A.animate(),be(0),he(X.value*F.value),ge(),!0!==a?C(()=>{o("hide",e)},150):W()}const{show:H,hide:N}=u({showing:I,hideOnRouteChange:D,handleShow:Q,handleHide:j}),{addToHistory:R,removeFromHistory:U}=s(I,N,D),E={belowBreakpoint:V,hide:N},P=w(()=>"right"===e.side),X=w(()=>(!0===T.lang.rtl?-1:1)*(!0===P.value?1:-1)),Z=b(0),G=b(!1),J=b(!1),K=b(F.value*X.value),Y=w(()=>!0===P.value?"left":"right"),ee=w(()=>!0===I.value&&!1===V.value&&!1===e.overlay?!0===e.miniToOverlay?e.miniWidth:F.value:0),ae=w(()=>!0===e.overlay||!0===e.miniToOverlay||-1!==A.view.value.indexOf(P.value?"R":"L")||!0===T.platform.is.ios&&!0===A.isContainer.value),oe=w(()=>!1===e.overlay&&!0===I.value&&!1===V.value),le=w(()=>!0===e.overlay&&!0===I.value&&!1===V.value),ie=w(()=>"fullscreen q-drawer__backdrop"+(!1===I.value&&!1===G.value?" hidden":"")),te=w(()=>({backgroundColor:`rgba(0,0,0,${.4*Z.value})`})),ne=w(()=>!0===P.value?"r"===A.rows.value.top[2]:"l"===A.rows.value.top[0]),re=w(()=>!0===P.value?"r"===A.rows.value.bottom[2]:"l"===A.rows.value.bottom[0]),ue=w(()=>{const e={};return!0===A.header.space&&!1===ne.value&&(!0===ae.value?e.top=`${A.header.offset}px`:!0===A.header.space&&(e.top=`${A.header.size}px`)),!0===A.footer.space&&!1===re.value&&(!0===ae.value?e.bottom=`${A.footer.offset}px`:!0===A.footer.space&&(e.bottom=`${A.footer.size}px`)),e}),se=w(()=>{const e={width:`${F.value}px`,transform:`translateX(${K.value}px)`};return!0===V.value?e:Object.assign(e,ue.value)}),ve=w(()=>"q-drawer__content fit "+(!0!==A.isContainer.value?"scroll":"overflow-auto")),de=w(()=>`q-drawer q-drawer--${e.side}`+(!0===J.value?" q-drawer--mini-animate":"")+(!0===e.bordered?" q-drawer--bordered":"")+(!0===$.value?" q-drawer--dark q-dark":"")+(!0===G.value?" no-transition":!0===I.value?"":" q-layout--prevent-focus")+(!0===V.value?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":" q-drawer--"+(!0===z.value?"mini":"standard")+(!0===ae.value||!0!==oe.value?" fixed":"")+(!0===e.overlay||!0===e.miniToOverlay?" q-drawer--on-top":"")+(!0===ne.value?" q-drawer--top-padding":""))),ce=w(()=>{const a=!0===T.lang.rtl?e.side:Y.value;return[[v,ye,void 0,{[a]:!0,mouse:!0}]]}),pe=w(()=>{const a=!0===T.lang.rtl?Y.value:e.side;return[[v,qe,void 0,{[a]:!0,mouse:!0}]]}),me=w(()=>{const a=!0===T.lang.rtl?Y.value:e.side;return[[v,qe,void 0,{[a]:!0,mouse:!0,mouseAllDir:!0}]]});function fe(){var a,o;a=V,o="mobile"===e.behavior||"desktop"!==e.behavior&&A.totalWidth.value<=e.breakpoint,a.value!==o&&(a.value=o)}function he(e){void 0===e?q(()=>{e=!0===I.value?0:F.value,he(X.value*e)}):(!0!==A.isContainer.value||!0!==P.value||!0!==V.value&&Math.abs(e)!==F.value||(e+=X.value*A.scrollbarWidth.value),K.value=e)}function be(e){Z.value=e}function we(e){const a=!0===e?"remove":!0!==A.isContainer.value?"add":"";""!==a&&document.body.classList[a]("q-body--drawer-toggle")}function ye(e){if(!1!==I.value)return;const a=F.value,o=c(e.distance.x,0,a);if(!0===e.isFinal){return!0===o>=Math.min(75,a)?H():(A.animate(),be(0),he(X.value*a)),void(G.value=!1)}he((!0===T.lang.rtl?!0!==P.value:P.value)?Math.max(a-o,0):Math.min(0,o-a)),be(c(o/a,0,1)),!0===e.isFirst&&(G.value=!0)}function qe(a){if(!0!==I.value)return;const o=F.value,l=a.direction===e.side,i=(!0===T.lang.rtl?!0!==l:l)?c(a.distance.x,0,o):0;if(!0===a.isFinal){return!0===Math.abs(i)<Math.min(75,o)?(A.animate(),be(1),he(0)):N(),void(G.value=!1)}he(X.value*i),be(c(1-i/o,0,1)),!0===a.isFirst&&(G.value=!0)}function ge(){O(!1),we(!0)}function ke(a,o){A.update(e.side,a,o)}function xe(a,o){ke("size",!0===a?e.miniWidth:o)}return y(V,a=>{!0===a?(_=I.value,!0===I.value&&N(!1)):!1===e.overlay&&"mobile"!==e.behavior&&!1!==_&&(!0===I.value?(he(0),be(0),ge()):H(!1))}),y(()=>e.side,(e,a)=>{A.instances[a]===E&&(A.instances[a]=void 0,A[a].space=!1,A[a].offset=0),A.instances[e]=E,A[e].size=F.value,A[e].space=oe.value,A[e].offset=ee.value}),y(A.totalWidth,()=>{!0!==A.isContainer.value&&!0===document.qScrollPrevented||fe()}),y(()=>e.behavior+e.breakpoint,fe),y(A.isContainer,e=>{!0===I.value&&O(!0!==e),!0===e&&fe()}),y(A.scrollbarWidth,()=>{he(!0===I.value?0:void 0)}),y(ee,e=>{ke("offset",e)}),y(oe,e=>{o("onLayout",e),ke("space",e)}),y(P,()=>{he()}),y(F,a=>{he(),xe(e.miniToOverlay,a)}),y(()=>e.miniToOverlay,e=>{xe(e,F.value)}),y(()=>T.lang.rtl,()=>{he()}),y(()=>e.mini,()=>{e.noMiniAnimation||!0===e.modelValue&&(!function(){null!==M&&clearTimeout(M),S.proxy&&S.proxy.$el&&S.proxy.$el.classList.add("q-drawer--mini-animate");J.value=!0,M=setTimeout(()=>{var e,a;M=null,J.value=!1,null==(a=null==(e=null==S?void 0:S.proxy)?void 0:e.$el)||a.classList.remove("q-drawer--mini-animate")},150)}(),A.animate())}),y(z,e=>{o("miniState",e)}),A.instances[e.side]=E,xe(e.miniToOverlay,F.value),ke("space",oe.value),ke("offset",ee.value),!0===e.showIfAbove&&!0!==e.modelValue&&!0===I.value&&void 0!==e["onUpdate:modelValue"]&&o("update:modelValue",!0),g(()=>{o("onLayout",oe.value),o("miniState",z.value),_=!0===e.showIfAbove;const a=()=>{(!0===I.value?Q:j)(!1,!0)};0===A.totalWidth.value?L=y(A.totalWidth,()=>{L(),L=void 0,!1===I.value&&!0===e.showIfAbove&&!1===V.value?H(!1):a()}):q(a)}),k(()=>{null==L||L(),null!==M&&(clearTimeout(M),M=null),!0===I.value&&ge(),A.instances[e.side]===E&&(A.instances[e.side]=void 0,ke("size",0),ke("offset",0),ke("space",!1))}),()=>{const o=[];!0===V.value&&(!1===e.noSwipeOpen&&o.push(x(B("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),ce.value)),o.push(p("div",{ref:"backdrop",class:ie.value,style:te.value,"aria-hidden":"true",onClick:N},void 0,"backdrop",!0!==e.noSwipeBackdrop&&!0===I.value,()=>me.value)));const i=!0===z.value&&void 0!==a.mini,t=[B("div",{...l,key:""+i,class:[ve.value,l.class]},!0===i?a.mini():m(a.default))];return!0===e.elevated&&!0===I.value&&t.push(B("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),o.push(p("aside",{ref:"content",class:de.value,style:se.value},t,"contentclose",!0!==e.noSwipeClose&&!0===V.value,()=>pe.value)),B("div",{class:"q-drawer-container"},o)}}});export{S as Q};
