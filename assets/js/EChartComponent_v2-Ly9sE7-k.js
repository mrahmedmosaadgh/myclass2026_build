import{a8 as e,a9 as t,_ as o,J as n,L as r,aa as a,ab as i,ac as s,ad as d,ae as l,af as u,a6 as h,ag as p,ah as c,ai as f,aj as g,ak as m,al as y,am as v,G as x,an as _,O as N,k as T,ao as w,r as I,ap as b,Q as L,v as D,aq as M,M as S,ar as A,I as C,W as R,as as E,at as P,au as z,p as B,A as O,av as X,aw as Y,ax as k,ay as H,az as V,R as G,aA as Z,aB as j,S as W,u as U,E as q,i as F,a as J,b as Q,c as $,d as K,e as ee,f as te}from"./install-65hH5QZq.js";import{r as oe}from"./app-DTyzyps1.js";import{S as ne,i as re,a as ae}from"./install-CA5zXcCl.js";import{f as ie,a as se,N as de,J as le,O as ue,b as he,Q as pe,V as ce,z as fe}from"./vendor-BJyC5yAd.js";import"./offline-BzIlwqNM.js";import"./i18n-BDgsCcB6.js";import"./ui-DFn3cvMd.js";var ge="\0_ec_interaction_mutex";function me(e,t){return!!function(e){return e[ge]||(e[ge]={})}(e)[t]}e({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},t);var ye=function(e){function t(t){var o=e.call(this)||this;o._zr=t;var i=n(o._mousedownHandler,o),s=n(o._mousemoveHandler,o),d=n(o._mouseupHandler,o),l=n(o._mousewheelHandler,o),u=n(o._pinchHandler,o);return o.enable=function(e,o){this.disable(),this._opt=r(a(o)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",i),t.on("mousemove",s),t.on("mouseup",d)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",l),t.on("pinch",u))},o.disable=function(){t.off("mousedown",i),t.off("mousemove",s),t.off("mouseup",d),t.off("mousewheel",l),t.off("pinch",u)},o}return o(t,e),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!i(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var o=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,o,n)&&(this._x=o,this._y=n,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&_e("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!me(this._zr,"globalPan")){var t=e.offsetX,o=e.offsetY,n=this._x,r=this._y,a=t-n,i=o-r;this._x=t,this._y=o,this._opt.preventDefaultMouseMove&&s(e.event),xe(this,"pan","moveOnMouseMove",e,{dx:a,dy:i,oldX:n,oldY:r,newX:t,newY:o,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){i(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var t=_e("zoomOnMouseWheel",e,this._opt),o=_e("moveOnMouseWheel",e,this._opt),n=e.wheelDelta,r=Math.abs(n),a=e.offsetX,i=e.offsetY;if(0!==n&&(t||o)){if(t){var s=r>3?1.4:r>1?1.2:1.1;ve(this,"zoom","zoomOnMouseWheel",e,{scale:n>0?s:1/s,originX:a,originY:i,isAvailableBehavior:null})}if(o){var d=Math.abs(n);ve(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(n>0?1:-1)*(d>3?.4:d>1?.15:.05),originX:a,originY:i,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){me(this._zr,"globalPan")||ve(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(d);function ve(e,t,o,n,r){e.pointerChecker&&e.pointerChecker(n,r.originX,r.originY)&&(s(n.event),xe(e,t,o,n,r))}function xe(e,t,o,r,a){a.isAvailableBehavior=n(_e,null,o,r),e.trigger(t,a)}function _e(e,t,o){var n=o[e];return!e||n&&(!l(n)||t.event[n+"Key"])}var Ne={axisPointer:1,tooltip:1,brush:1};var Te=c,we=function(e){function t(t){var o=e.call(this)||this;return o.type="view",o.dimensions=["x","y"],o._roamTransformable=new u,o._rawTransformable=new u,o.name=t,o}return o(t,e),t.prototype.setBoundingRect=function(e,t,o,n){return this._rect=new h(e,t,o,n),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,t,o,n){this._transformTo(e,t,o,n),this._viewRect=new h(e,t,o,n)},t.prototype._transformTo=function(e,t,o,n){var r=this.getBoundingRect(),a=this._rawTransformable;a.transform=r.calculateTransform(new h(e,t,o,n));var i=a.parent;a.parent=null,a.decomposeTransform(),a.parent=i,this._updateTransform()},t.prototype.setCenter=function(e,t){e&&(this._center=[p(e[0],t.getWidth()),p(e[1],t.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,o=this.getDefaultCenter(),n=this.getCenter(),r=this.getZoom();n=c([],n,e),o=c([],o,e),t.originX=n[0],t.originY=n[1],t.x=o[0]-n[0],t.y=o[1]-n[1],t.scaleX=t.scaleY=r,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),f(this.transform||(this.transform=[]),t.transform||g()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],m(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,t=this._roamTransformable,o=new u;return o.transform=t.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,t,o){var n=t?this._rawTransform:this.transform;return o=o||[],n?Te(o,e,n):y(o,e)},t.prototype.pointToData=function(e){var t=this.invTransform;return t?Te([],e,t):[e[0],e[1]]},t.prototype.convertToPixel=function(e,t,o){var n=Ie(t);return n===this?n.dataToPoint(o):null},t.prototype.convertFromPixel=function(e,t,o){var n=Ie(t);return n===this?n.pointToData(o):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(u);function Ie(e){var t=e.seriesModel;return t?t.coordinateSystem:null}function be(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function Le(e,t){var o=e.isExpand?e.children:[],n=e.parentNode.children,r=e.hierNode.i?n[e.hierNode.i-1]:null;if(o.length){!function(e){var t=e.children,o=t.length,n=0,r=0;for(;--o>=0;){var a=t[o];a.hierNode.prelim+=n,a.hierNode.modifier+=n,r+=a.hierNode.change,n+=a.hierNode.shift+r}}(e);var a=(o[0].hierNode.prelim+o[o.length-1].hierNode.prelim)/2;r?(e.hierNode.prelim=r.hierNode.prelim+t(e,r),e.hierNode.modifier=e.hierNode.prelim-a):e.hierNode.prelim=a}else r&&(e.hierNode.prelim=r.hierNode.prelim+t(e,r));e.parentNode.hierNode.defaultAncestor=function(e,t,o,n){if(t){for(var r=e,a=e,i=a.parentNode.children[0],s=t,d=r.hierNode.modifier,l=a.hierNode.modifier,u=i.hierNode.modifier,h=s.hierNode.modifier;s=Ae(s),a=Ce(a),s&&a;){r=Ae(r),i=Ce(i),r.hierNode.ancestor=e;var p=s.hierNode.prelim+h-a.hierNode.prelim-l+n(s,a);p>0&&(Ee(Re(s,e,o),e,p),l+=p,d+=p),h+=s.hierNode.modifier,l+=a.hierNode.modifier,d+=r.hierNode.modifier,u+=i.hierNode.modifier}s&&!Ae(r)&&(r.hierNode.thread=s,r.hierNode.modifier+=h-d),a&&!Ce(i)&&(i.hierNode.thread=a,i.hierNode.modifier+=l-u,o=e)}return o}(e,r,e.parentNode.hierNode.defaultAncestor||n[0],t)}function De(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function Me(e){return arguments.length?e:Pe}function Se(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function Ae(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function Ce(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function Re(e,t,o){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:o}function Ee(e,t,o){var n=o/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=o,t.hierNode.modifier+=o,t.hierNode.prelim+=o,e.hierNode.change+=n}function Pe(e,t){return e.parentNode===t.parentNode?1:2}var ze=function(){return function(){this.parentPoint=[],this.childPoints=[]}}(),Be=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ze},t.prototype.buildPath=function(e,t){var o=t.childPoints,n=o.length,r=t.parentPoint,a=o[0],i=o[n-1];if(1===n)return e.moveTo(r[0],r[1]),void e.lineTo(a[0],a[1]);var s=t.orient,d="TB"===s||"BT"===s?0:1,l=1-d,u=p(t.forkPosition,1),h=[];h[d]=r[d],h[l]=r[l]+(i[l]-r[l])*u,e.moveTo(r[0],r[1]),e.lineTo(h[0],h[1]),e.moveTo(a[0],a[1]),h[d]=a[d],e.lineTo(h[0],h[1]),h[d]=i[d],e.lineTo(h[0],h[1]),e.lineTo(i[0],i[1]);for(var c=1;c<n-1;c++){var f=o[c];e.moveTo(f[0],f[1]),h[d]=f[d],e.lineTo(h[0],h[1])}},t}(C),Oe=function(e){function t(){var o=null!==e&&e.apply(this,arguments)||this;return o.type=t.type,o._mainGroup=new x,o}return o(t,e),t.prototype.init=function(e,t){this._controller=new ye(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,t,o){var n=e.getData(),r=e.layoutInfo,a=this._mainGroup;"radial"===e.get("layout")?(a.x=r.x+r.width/2,a.y=r.y+r.height/2):(a.x=r.x,a.y=r.y),this._updateViewCoordSys(e,o),this._updateController(e,t,o);var i=this._data;n.diff(i).add(function(t){Xe(n,t)&&Ye(n,t,null,a,e)}).update(function(t,o){var r=i.getItemGraphicEl(o);Xe(n,t)?Ye(n,t,r,a,e):r&&Ve(i,o,r,a,e)}).remove(function(t){var o=i.getItemGraphicEl(t);o&&Ve(i,t,o,a,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&n.eachItemGraphicEl(function(t,n){t.off("click").on("click",function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:n})})}),this._data=n},t.prototype._updateViewCoordSys=function(e,t){var o=e.getData(),n=[];o.each(function(e){var t=o.getItemLayout(e);!t||isNaN(t.x)||isNaN(t.y)||n.push([+t.x,+t.y])});var r=[],a=[];_(n,r,a);var i=this._min,s=this._max;a[0]-r[0]===0&&(r[0]=i?i[0]:r[0]-1,a[0]=s?s[0]:a[0]+1),a[1]-r[1]===0&&(r[1]=i?i[1]:r[1]-1,a[1]=s?s[1]:a[1]+1);var d=e.coordinateSystem=new we;d.zoomLimit=e.get("scaleLimit"),d.setBoundingRect(r[0],r[1],a[0]-r[0],a[1]-r[1]),d.setCenter(e.get("center"),t),d.setZoom(e.get("zoom")),this.group.attr({x:d.x,y:d.y,scaleX:d.scaleX,scaleY:d.scaleY}),this._min=r,this._max=a},t.prototype._updateController=function(e,t,o){var n=this,r=this._controller,a=this._controllerHost,i=this.group;r.setPointerChecker(function(t,n,r){var a=i.getBoundingRect();return a.applyTransform(i.transform),a.contain(n,r)&&!function(e,t,o){var n=t.getComponentByElement(e.topTarget),r=n&&n.coordinateSystem;return n&&n!==o&&!Ne.hasOwnProperty(n.mainType)&&r&&r.model!==o}(t,o,e)}),r.enable(e.get("roam")),a.zoomLimit=e.get("scaleLimit"),a.zoom=e.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",function(t){!function(e,t,o){var n=e.target;n.x+=t,n.y+=o,n.dirty()}(a,t.dx,t.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:t.dx,dy:t.dy})}).on("zoom",function(t){!function(e,t,o,n){var r=e.target,a=e.zoomLimit,i=e.zoom=e.zoom||1;if(i*=t,a){var s=a.min||0,d=a.max||1/0;i=Math.max(Math.min(d,i),s)}var l=i/e.zoom;e.zoom=i,r.x-=(o-r.x)*(l-1),r.y-=(n-r.y)*(l-1),r.scaleX*=l,r.scaleY*=l,r.dirty()}(a,t.scale,t.originX,t.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:t.scale,originX:t.originX,originY:t.originY}),n._updateNodeAndLinkScale(e),o.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var t=e.getData(),o=this._getNodeGlobalScale(e);t.eachItemGraphicEl(function(e,t){e.setSymbolScale(o)})},t.prototype._getNodeGlobalScale=function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var o=this._nodeScaleRatio,n=t.scaleX||1;return((t.getZoom()-1)*o+1)/n},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(N);function Xe(e,t){var o=e.getItemLayout(t);return o&&!isNaN(o.x)&&!isNaN(o.y)}function Ye(e,t,o,n,a){var i=!o,s=e.tree.getNodeByDataIndex(t),d=s.getModel(),l=s.getVisual("style").fill,u=!1===s.isExpand&&0!==s.children.length?l:"#fff",h=e.tree.root,p=s.parentNode===h?s:s.parentNode||s,c=e.getItemGraphicEl(p.dataIndex),f=p.getLayout(),g=c?{x:c.__oldX,y:c.__oldY,rawX:c.__radialOldRawX,rawY:c.__radialOldRawY}:f,m=s.getLayout();i?((o=new ne(e,t,null,{symbolInnerColor:u,useNameLabel:!0})).x=g.x,o.y=g.y):o.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),o.__radialOldRawX=o.__radialRawX,o.__radialOldRawY=o.__radialRawY,o.__radialRawX=m.rawX,o.__radialRawY=m.rawY,n.add(o),e.setItemGraphicEl(t,o),o.__oldX=o.x,o.__oldY=o.y,T(o,{x:m.x,y:m.y},a);var y=o.getSymbolPath();if("radial"===a.get("layout")){var v=h.children[0],x=v.getLayout(),_=v.children.length,N=void 0,D=void 0;if(m.x===x.x&&!0===s.isExpand&&v.children.length){var C={x:(v.children[0].getLayout().x+v.children[_-1].getLayout().x)/2,y:(v.children[0].getLayout().y+v.children[_-1].getLayout().y)/2};(N=Math.atan2(C.y-x.y,C.x-x.x))<0&&(N=2*Math.PI+N),(D=C.x<x.x)&&(N-=Math.PI)}else(N=Math.atan2(m.y-x.y,m.x-x.x))<0&&(N=2*Math.PI+N),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(D=m.x<x.x)&&(N-=Math.PI):(D=m.x>x.x)||(N-=Math.PI);var R=D?"left":"right",E=d.getModel("label"),P=E.get("rotate"),z=P*(Math.PI/180),B=y.getTextContent();B&&(y.setTextConfig({position:E.get("position")||R,rotation:null==P?-N:z,origin:"center"}),B.setStyle("verticalAlign","middle"))}var O=d.get(["emphasis","focus"]),X="relative"===O?w(s.getAncestorsIndices(),s.getDescendantIndices()):"ancestor"===O?s.getAncestorsIndices():"descendant"===O?s.getDescendantIndices():null;X&&(I(o).focus=X),function(e,t,o,n,a,i,s,d){var l=t.getModel(),u=e.get("edgeShape"),h=e.get("layout"),p=e.getOrient(),c=e.get(["lineStyle","curveness"]),f=e.get("edgeForkPosition"),g=l.getModel("lineStyle").getLineStyle(),m=n.__edge;if("curve"===u)t.parentNode&&t.parentNode!==o&&(m||(m=n.__edge=new M({shape:Ge(h,p,c,a,a)})),T(m,{shape:Ge(h,p,c,i,s)},e));else if("polyline"===u&&"orthogonal"===h&&t!==o&&t.children&&0!==t.children.length&&!0===t.isExpand){for(var y=t.children,v=[],x=0;x<y.length;x++){var _=y[x].getLayout();v.push([_.x,_.y])}m||(m=n.__edge=new Be({shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]],orient:p,forkPosition:f}})),T(m,{shape:{parentPoint:[s.x,s.y],childPoints:v}},e)}m&&("polyline"!==u||t.isExpand)&&(m.useStyle(r({strokeNoScale:!0,fill:null},g)),S(m,l,"lineStyle"),A(m),d.add(m))}(a,s,h,o,g,f,m,n),o.__edge&&(o.onHoverStateChange=function(t){if("blur"!==t){var n=s.parentNode&&e.getItemGraphicEl(s.parentNode.dataIndex);n&&n.hoverState===b||L(o.__edge,t)}})}function ke(e,t,o,n,r){var a=He(t.tree.root,e),i=a.source,s=a.sourceLayout,d=t.getItemGraphicEl(e.dataIndex);if(d){var l=t.getItemGraphicEl(i.dataIndex).__edge,u=d.__edge||(!1===i.isExpand||1===i.children.length?l:void 0),h=n.get("edgeShape"),p=n.get("layout"),c=n.get("orient"),f=n.get(["lineStyle","curveness"]);u&&("curve"===h?D(u,{shape:Ge(p,c,f,s,s),style:{opacity:0}},n,{cb:function(){o.remove(u)},removeOpt:r}):"polyline"===h&&"orthogonal"===n.get("layout")&&D(u,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},n,{cb:function(){o.remove(u)},removeOpt:r}))}}function He(e,t){for(var o,n=t.parentNode===e?t:t.parentNode||t;null==(o=n.getLayout());)n=n.parentNode===e?n:n.parentNode||n;return{source:n,sourceLayout:o}}function Ve(e,t,o,n,r){var a=e.tree.getNodeByDataIndex(t),i=He(e.tree.root,a).sourceLayout,s={duration:r.get("animationDurationUpdate"),easing:r.get("animationEasingUpdate")};D(o,{x:i.x+1,y:i.y+1},r,{cb:function(){n.remove(o),e.setItemGraphicEl(t,null)},removeOpt:s}),o.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:s}),a.children.forEach(function(t){ke(t,e,n,r,s)}),ke(a,e,n,r,s)}function Ge(e,t,o,n,r){var a,i,s,d,l,u,h,p;if("radial"===e){l=n.rawX,h=n.rawY,u=r.rawX,p=r.rawY;var c=Se(l,h),f=Se(l,h+(p-h)*o),g=Se(u,p+(h-p)*o),m=Se(u,p);return{x1:c.x||0,y1:c.y||0,x2:m.x||0,y2:m.y||0,cpx1:f.x||0,cpy1:f.y||0,cpx2:g.x||0,cpy2:g.y||0}}return l=n.x,h=n.y,u=r.x,p=r.y,"LR"!==t&&"RL"!==t||(a=l+(u-l)*o,i=h,s=u+(l-u)*o,d=p),"TB"!==t&&"BT"!==t||(a=l,i=h+(p-h)*o,s=u,d=p+(h-p)*o),{x1:l,y1:h,x2:u,y2:p,cpx1:a,cpy1:i,cpx2:s,cpy2:d}}var Ze=z();function je(e,t){if(Ze(n=this).mainData===n){var o=B({},Ze(this).datas);o[this.dataType]=t,Je(t,o,e)}else Qe(t,this.dataType,Ze(this).mainData,e);var n;return t}function We(e,t){return e.struct&&e.struct.update(),t}function Ue(e,t){return R(Ze(t).datas,function(o,n){o!==t&&Qe(o.cloneShallow(),n,t,e)}),t}function qe(e){var t=Ze(this).mainData;return null==e||null==t?t:Ze(t).datas[e]}function Fe(){var e=Ze(this).mainData;return null==e?[{data:e}]:O(X(Ze(e).datas),function(t){return{type:t,data:Ze(e).datas[t]}})}function Je(e,t,o){Ze(e).datas={},R(t,function(t,n){Qe(t,n,e,o)})}function Qe(e,t,o,n){Ze(o).datas[t]=e,Ze(e).mainData=o,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=qe,e.getLinkedDataAll=Fe}var $e=function(){function e(e,t){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=e||"",this.hostTree=t}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(e,t,o){G(e)&&(o=t,t=e,e=null),l(e=e||{})&&(e={order:e});var n,r=e.order||"preorder",a=this[e.attr||"children"];"preorder"===r&&(n=t.call(o,this));for(var i=0;!n&&i<a.length;i++)a[i].eachNode(e,t,o);"postorder"===r&&t.call(o,this)},e.prototype.updateDepthAndHeight=function(e){var t=0;this.depth=e;for(var o=0;o<this.children.length;o++){var n=this.children[o];n.updateDepthAndHeight(e+1),n.height>t&&(t=n.height)}this.height=t+1},e.prototype.getNodeById=function(e){if(this.getId()===e)return this;for(var t=0,o=this.children,n=o.length;t<n;t++){var r=o[t].getNodeById(e);if(r)return r}},e.prototype.contains=function(e){if(e===this)return!0;for(var t=0,o=this.children,n=o.length;t<n;t++){var r=o[t].contains(e);if(r)return r}},e.prototype.getAncestors=function(e){for(var t=[],o=e?this:this.parentNode;o;)t.push(o),o=o.parentNode;return t.reverse(),t},e.prototype.getAncestorsIndices=function(){for(var e=[],t=this;t;)e.push(t.dataIndex),t=t.parentNode;return e.reverse(),e},e.prototype.getDescendantIndices=function(){var e=[];return this.eachNode(function(t){e.push(t.dataIndex)}),e},e.prototype.getValue=function(e){var t=this.hostTree.data;return t.getStore().get(t.getDimensionIndex(e||"value"),this.dataIndex)},e.prototype.setLayout=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(e,t){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},e.prototype.getVisual=function(e){return this.hostTree.data.getItemVisual(this.dataIndex,e)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var e=this.parentNode.children,t=0;t<e.length;++t)if(e[t]===this)return t;return-1}return-1},e.prototype.isAncestorOf=function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},e.prototype.isDescendantOf=function(e){return e!==this&&e.isAncestorOf(this)},e}(),Ke=function(){function e(e){this.type="tree",this._nodes=[],this.hostModel=e}return e.prototype.eachNode=function(e,t,o){this.root.eachNode(e,t,o)},e.prototype.getNodeByDataIndex=function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},e.prototype.getNodeById=function(e){return this.root.getNodeById(e)},e.prototype.update=function(){for(var e=this.data,t=this._nodes,o=0,n=t.length;o<n;o++)t[o].dataIndex=-1;for(o=0,n=e.count();o<n;o++)t[e.getRawIndex(o)].dataIndex=o},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,o,n){var r=new e(o),a=[],i=1;!function e(t,o){var n=t.value;i=Math.max(i,Y(n)?n.length:1),a.push(t);var s=new $e(k(t.name,""),r);o?function(e,t){var o=t.children;if(e.parentNode===t)return;o.push(e),e.parentNode=t}(s,o):r.root=s,r._nodes.push(s);var d=t.children;if(d)for(var l=0;l<d.length;l++)e(d[l],s)}(t),r.root.updateDepthAndHeight(0);var s,d,l,u=H(a,{coordDimensions:["value"],dimensionsCount:i}).dimensions,h=new V(u,o);return h.initData(a),n&&n(h),d=(s={mainData:h,struct:r,structAttr:"tree"}).mainData,(l=s.datas)||(l={main:d},s.datasAttr={main:"data"}),s.datas=s.mainData=null,Je(d,l,s),R(l,function(e){R(d.TRANSFERABLE_METHODS,function(t){e.wrapMethod(t,E(je,s))})}),d.wrapMethod("cloneShallow",E(Ue,s)),R(d.CHANGABLE_METHODS,function(e){d.wrapMethod(e,E(We,s))}),P(l[d.dataType]===d),r.update(),r},e}();var et=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasSymbolVisual=!0,t.ignoreStyleOnData=!0,t}return o(t,e),t.prototype.getInitialData=function(e){var t={name:e.name,children:e.data},o=e.leaves||{},n=new Z(o,this,this.ecModel),r=Ke.createTree(t,this,function(e){e.wrapMethod("getItemModel",function(e,t){var o=r.getNodeByDataIndex(t);return o&&o.children.length&&o.isExpand||(e.parentModel=n),e})});var a=0;r.eachNode("preorder",function(e){e.depth>a&&(a=e.depth)});var i=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:a;return r.root.eachNode("preorder",function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=i}),r.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,t,o){for(var n=this.getData().tree,r=n.root.children[0],a=n.getNodeByDataIndex(e),i=a.getValue(),s=a.name;a&&a!==r;)s=a.parentNode.name+"."+s,a=a.parentNode;return j("nameValue",{name:s,value:i,noValue:isNaN(i)||null==i})},t.prototype.getDataParams=function(t){var o=e.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return o.treeAncestors=function(e,t){for(var o=[];e;){var n=e.dataIndex;o.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return o.reverse(),o}(n,this),o.collapsed=!n.isExpand,o},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(W);function tt(e,t){for(var o,n=[e];o=n.pop();)if(t(o),o.isExpand){var r=o.children;if(r.length)for(var a=r.length-1;a>=0;a--)n.push(r[a])}}function ot(e,t){e.eachSeriesByType("tree",function(e){!function(e,t){var o=function(e,t){return v(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}(e,t);e.layoutInfo=o;var n=e.get("layout"),r=0,a=0,i=null;"radial"===n?(r=2*Math.PI,a=Math.min(o.height,o.width)/2,i=Me(function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth})):(r=o.width,a=o.height,i=Me());var s=e.getData().tree.root,d=s.children[0];if(d){!function(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var o,n,r=[t];o=r.pop();)if(n=o.children,o.isExpand&&n.length)for(var a=n.length-1;a>=0;a--){var i=n[a];i.hierNode={defaultAncestor:null,ancestor:i,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(i)}}(s),function(e,t,o){for(var n,r=[e],a=[];n=r.pop();)if(a.push(n),n.isExpand){var i=n.children;if(i.length)for(var s=0;s<i.length;s++)r.push(i[s])}for(;n=a.pop();)t(n,o)}(d,Le,i),s.hierNode.modifier=-d.hierNode.prelim,tt(d,De);var l=d,u=d,h=d;tt(d,function(e){var t=e.getLayout().x;t<l.getLayout().x&&(l=e),t>u.getLayout().x&&(u=e),e.depth>h.depth&&(h=e)});var p=l===u?1:i(l,u)/2,c=p-l.getLayout().x,f=0,g=0,m=0,y=0;if("radial"===n)f=r/(u.getLayout().x+p+c),g=a/(h.depth-1||1),tt(d,function(e){m=(e.getLayout().x+c)*f,y=(e.depth-1)*g;var t=Se(m,y);e.setLayout({x:t.x,y:t.y,rawX:m,rawY:y},!0)});else{var x=e.getOrient();"RL"===x||"LR"===x?(g=a/(u.getLayout().x+p+c),f=r/(h.depth-1||1),tt(d,function(e){y=(e.getLayout().x+c)*g,m="LR"===x?(e.depth-1)*f:r-(e.depth-1)*f,e.setLayout({x:m,y:y},!0)})):"TB"!==x&&"BT"!==x||(f=r/(u.getLayout().x+p+c),g=a/(h.depth-1||1),tt(d,function(e){m=(e.getLayout().x+c)*f,y="TB"===x?(e.depth-1)*g:a-(e.depth-1)*g,e.setLayout({x:m,y:y},!0)}))}}}(e,t)})}function nt(e){e.eachSeriesByType("tree",function(e){var t=e.getData();t.tree.eachNode(function(e){var o=e.getModel().getModel("itemStyle").getItemStyle(),n=t.ensureUniqueItemVisual(e.dataIndex,"style");B(n,o)})})}function rt(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var o=e.dataIndex,n=t.getData().tree.getNodeByDataIndex(o);n.isExpand=!n.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t,o){t.eachComponent({mainType:"series",subType:"tree",query:e},function(t){var n=function(e,t,o,n){var r=e.getZoom(),a=e.getCenter(),i=t.zoom,s=e.projectedToPoint?e.projectedToPoint(a):e.dataToPoint(a);if(null!=t.dx&&null!=t.dy&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(be(e,s),n)),null!=i){e.scaleX*=i,e.scaleY*=i;var d=(t.originX-e.x)*(i-1),l=(t.originY-e.y)*(i-1);e.x-=d,e.y-=l,e.updateTransform(),e.setCenter(be(e,s),n),e.setZoom(i*r)}return{center:e.getCenter(),zoom:e.getZoom()}}(t.coordinateSystem,e,0,o);t.setCenter&&t.setCenter(n.center),t.setZoom&&t.setZoom(n.zoom)})})}function at(e){e.registerChartView(Oe),e.registerSeriesModel(et),e.registerLayout(ot),e.registerVisual(nt),rt(e)}const it={class:"w-full p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-md"},st={class:"flex justify-between items-center mb-4"},dt={key:0,class:"text-lg font-semibold text-gray-900 dark:text-white"},lt=oe({__name:"EChartComponent_v2",props:{title:{type:String,default:""},type:{type:String,default:"line"},labels:{type:Array,default:()=>[]},datasets:{type:Array,required:!0},customOptions:{type:Object,default:()=>({})}},setup(e){U([F,at,J,re,Q,ae,$,K,ee,te]);const t=e,o=ie(null),n=se(()=>"tree"===t.type?{tooltip:{trigger:"item",triggerOn:"mousemove"},series:[{type:"tree",data:t.datasets,top:"5%",left:"10%",bottom:"5%",right:"20%",symbol:"circle",symbolSize:10,edgeShape:"polyline",edgeForkPosition:"63%",initialTreeDepth:-1,lineStyle:{width:2,color:"#4f46e5"},label:{backgroundColor:"#fff",borderColor:"#ddd",borderWidth:1,borderRadius:6,padding:6,position:"left",verticalAlign:"middle",align:"right",fontSize:14,formatter:function(e){return`{icon|${e.data.icon||"ðŸ“„"}} ${e.name}`},rich:{icon:{fontSize:16,lineHeight:20}}},leaves:{label:{position:"right",verticalAlign:"middle",align:"left"}},emphasis:{focus:"descendant"},expandAndCollapse:!0,animationDuration:800,animationDurationUpdate:800,animationEasing:"bounceOut"}],...t.customOptions}:{tooltip:{trigger:"axis"},legend:{top:"bottom"},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",data:t.labels},yAxis:{type:"value"},series:t.datasets.map(e=>({...e,type:t.type})),...t.customOptions}),r=()=>{if(o.value)try{const e=o.value.chart;if(e&&"function"==typeof e.getDataURL){const t=e.getDataURL({pixelRatio:2,backgroundColor:"#fff"}),o=document.createElement("a");o.href=t,o.download="chart-export.png",o.click()}else console.error("Chart instance does not have getDataURL method")}catch(e){console.error("Error downloading chart:",e)}};return(t,a)=>(le(),de("div",it,[ue("div",st,[e.title?(le(),de("h2",dt,ce(e.title),1)):pe("",!0),ue("button",{onClick:r,class:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded-md shadow"}," Download as Image ")]),he(fe(q),{ref_key:"chartRef",ref:o,option:n.value,autoresize:"",style:{height:"600px"}},null,8,["option"])]))}},[["__scopeId","data-v-f747f723"]]);export{lt as default};
