import{f as e,a as t,L as o,I as l,b as r,y as s,a3 as a,J as i,F as m}from"./vendor-CUZ9QTQV.js";import{_ as n}from"./AppLayout-ClCiCQFL.js";import u from"./import_reusable-CeIXlhzl.js";import{o as p,u as c}from"./app-Buylb2AA.js";import"./QStepper-nNlmrtss.js";import"./use-panel-B1dc8KLj.js";import"./use-render-cache-CmTcazfP.js";import"./QMarkupTable-Cd9X66xB.js";import"./QTable-BmRSX4cl.js";import"./QSelect-CcTxzM62.js";import"./rtl-Cr6c3OOr.js";import"./QLinearProgress-B7jHdoB9.js";import"./use-fullscreen-DO2N8akv.js";import"./QBadge-Dt5ch-CZ.js";import"./ImportExcel-CWpQIPxJ.js";import"./Modal-u_d6OKbQ.js";import"./xlsx-cMC2LkxH.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";const d=p({__name:"Index",setup(p){const d=c(),f=e(1),b=e(!1);e(!1);const v=e(null),_=e(null),j=e([]);e([]);const y=e(0),g=e(0),w=route("import_students.import.validate"),x=route("import_students.import.process"),I=["number classroom full_name columns are required",'Section column is optional (will use "General" if empty)',"Duplicate full_name will be skipped","Courses, levels, and sections will be created if they don't exist","Order will be assigned automatically"],k=[["number","classroom","full_name"],["number","classroom","full_name"],["number","classroom","full_name"]],Q=[{key:"number",label:"number",required:!1},{key:"classroom",label:"classroom",required:!0},{key:"full_name",label:"full_name",required:!0}],h=[{name:"number",label:"number",field:"number",align:"center"},{name:"classroom",label:"classroom",field:"classroom",align:"left"},{name:"full_name",label:"full_name",field:"full_name",align:"left"}];t(()=>0===g.value?0:y.value/g.value);const C=e=>{var t;v.value=e,e.fileData&&(j.value=e.fileData.map((e,t)=>({index:t+2,...e}))),f.value=3,d.notify({type:"positive",message:"File validation successful!",caption:`${(null==(t=e.stats)?void 0:t.valid_rows)||0} valid rows found`,icon:"check_circle"})},S=e=>{v.value=null,d.notify({type:"negative",message:"File validation failed",caption:e.message||"Please check your file format",icon:"error"})},P=e=>{var t;_.value=e.stats,b.value=!0,d.notify({type:"positive",message:"Import completed successfully!",caption:`${(null==(t=e.stats)?void 0:t.lessons_created)||0} lessons imported`,icon:"check_circle"})},q=e=>{d.notify({type:"negative",message:"Import failed",caption:e.message||"Please try again",icon:"error"})};return(e,t)=>(l(),o(m,null,[r(s(a),{title:"Import Courses"}),r(n,{title:"Import Courses"},{default:i(()=>[r(u,{"validate-url":s(w),"import-url":s(x),"undo-url":"","import-columns":Q,"full-preview-columns":h,"button-text":"Choose Excel File","preview-title":"Course Import Preview","confirm-button-text":"Confirm & Start Import","template-route":e.route("import_students.import.template"),"back-route":e.route("import_students.import.index"),"view-route":e.route("import_students.import.index"),notes:I,"sample-rows":k,onValidationSuccess:C,onValidationError:S,onImportSuccess:P,onImportError:q},null,8,["validate-url","import-url","template-route","back-route","view-route"])]),_:1})],64))}},[["__scopeId","data-v-f0cb409a"]]);export{d as default};
