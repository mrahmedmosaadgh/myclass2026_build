import{f as e,Q as a,b as l,c as t,h as o,m as d,t as s,o as u,d as n,e as r,aS as m}from"./app-4gpSDtVV.js";import{Q as i}from"./QSpace-BaiVAeLS.js";import{Q as p}from"./QSelect-Dgk9Cshp.js";import{Q as c}from"./QForm-B3HUaoek.js";import{u as v}from"./schoolData-CWFtmgnE.js";import{a as _,f as y,k as f,I as b,J as V,K as h,b as g,R as j,y as w,W as C,V as S,a0 as k,O as U}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";const x={class:"text-h6"},q={__name:"ScheduleCopyForm",props:{modelValue:{type:Boolean,default:!1},editData:{type:Object,default:null},schools:{type:Array,default:()=>[]},academicYears:{type:Array,default:()=>[]},semesters:{type:Array,default:()=>[]},loadingSchools:{type:Boolean,default:!1},loadingYears:{type:Boolean,default:!1},loadingSemesters:{type:Boolean,default:!1},saving:{type:Boolean,default:!1}},emits:["update:modelValue","submit"],setup(q,{emit:A}){const D=v(),I=q,Q=A,B=_({get:()=>I.modelValue,set:e=>Q("update:modelValue",e)}),N=_(()=>{var e;return!!(null==(e=I.editData)?void 0:e.id)}),Y=[{label:"Draft",value:"draft"},{label:"Pending",value:"pending"},{label:"Active",value:"active"},{label:"Archived",value:"archived"}],E=()=>({name:"",description:"",school_id:D.schoolId||null,academic_year_id:D.academicYearId||null,semester_id:D.semesterId||null,week_number:null,copy_date:null,status:"draft",notes:"",auto_generate:!0}),F=y(E());f(()=>I.editData,e=>{F.value=e?{...E(),...e,copy_date:e.copy_date?e.copy_date.split("T")[0]:null}:E()},{immediate:!0}),f(B,e=>{e?N.value||(F.value.school_id=D.schoolId||F.value.school_id,F.value.academic_year_id=D.academicYearId||F.value.academic_year_id,F.value.semester_id=D.semesterId||F.value.semester_id):F.value=E()});const O=()=>{F.value.name&&Q("submit",{...F.value,isEdit:N.value})};return(v,_)=>(V(),b(r,{modelValue:B.value,"onUpdate:modelValue":_[7]||(_[7]=e=>B.value=e),persistent:""},{default:h(()=>[g(n,{style:{"min-width":"500px","max-width":"600px"}},{default:h(()=>[g(e,{class:"row items-center q-pb-none"},{default:h(()=>[j("div",x,[g(a,{name:N.value?"edit":"add_circle",class:"q-mr-sm"},null,8,["name"]),C(" "+S(N.value?"Edit Schedule Copy":"Create Schedule Copy"),1)]),g(i),w(g(l,{icon:"close",flat:"",round:"",dense:""},null,512),[[m]])]),_:1}),g(t,{class:"q-my-md"}),g(e,{class:"q-pt-none"},{default:h(()=>[g(c,{onSubmit:k(O,["prevent"]),class:"q-gutter-md"},{default:h(()=>[g(o,{modelValue:F.value.name,"onUpdate:modelValue":_[0]||(_[0]=e=>F.value.name=e),label:"Copy Name *",outlined:"",dense:"",rules:[e=>!!e||"Name is required"]},{prepend:h(()=>[g(a,{name:"label"})]),_:1},8,["modelValue","rules"]),g(o,{modelValue:F.value.description,"onUpdate:modelValue":_[1]||(_[1]=e=>F.value.description=e),label:"Description",outlined:"",dense:"",type:"textarea",rows:"2"},{prepend:h(()=>[g(a,{name:"description"})]),_:1},8,["modelValue"]),g(o,{modelValue:F.value.week_number,"onUpdate:modelValue":_[2]||(_[2]=e=>F.value.week_number=e),modelModifiers:{number:!0},label:"Starting Week Number",outlined:"",dense:"",type:"number",min:"1",max:"52"},{prepend:h(()=>[g(a,{name:"view_week"})]),_:1},8,["modelValue"]),g(o,{modelValue:F.value.copy_date,"onUpdate:modelValue":_[3]||(_[3]=e=>F.value.copy_date=e),label:"Copy Date",outlined:"",dense:"",type:"date"},{prepend:h(()=>[g(a,{name:"event"})]),_:1},8,["modelValue"]),N.value?(V(),b(p,{key:0,modelValue:F.value.status,"onUpdate:modelValue":_[4]||(_[4]=e=>F.value.status=e),options:Y,label:"Status",outlined:"",dense:"","emit-value":"","map-options":""},{prepend:h(()=>[g(a,{name:"flag"})]),_:1},8,["modelValue"])):U("",!0),g(o,{modelValue:F.value.notes,"onUpdate:modelValue":_[5]||(_[5]=e=>F.value.notes=e),label:"Notes",outlined:"",dense:"",type:"textarea",rows:"2"},{prepend:h(()=>[g(a,{name:"note"})]),_:1},8,["modelValue"]),N.value?U("",!0):(V(),b(d,{key:1,modelValue:F.value.auto_generate,"onUpdate:modelValue":_[6]||(_[6]=e=>F.value.auto_generate=e),label:"Auto-generate schedule entries from subject-teacher assignments",color:"primary"},{default:h(()=>[g(s,null,{default:h(()=>_[8]||(_[8]=[C(" Creates schedule records based on classes_per_week for each subject-teacher assignment ")])),_:1})]),_:1},8,["modelValue"]))]),_:1})]),_:1}),g(t),g(u,{align:"right",class:"q-pa-md"},{default:h(()=>[w(g(l,{flat:"",label:"Cancel",color:"grey"},null,512),[[m]]),g(l,{label:N.value?"Update":"Create",color:"primary",loading:q.saving,onClick:O},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{q as default};
