import{Q as e}from"./QSelect-CmlFFsWs.js";import{f as l,Q as o,n as a,k as t,bp as u}from"./app-tFXAu5dG.js";import{f as d,k as s,N as i,J as n,b as r,Q as m,O as v,F as c,R as p}from"./vendor-nQjeLEvd.js";import"./rtl-Cr6c3OOr.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";const V={class:"q-pa-md column gap-md"},b={key:0,class:"q-pa-sm bg-grey-2 rounded-borders"},y={class:"row items-center q-gutter-sm"},f={class:"row q-mt-sm q-col-gutter-sm"},q=["src"],x={key:1,class:"q-pa-sm bg-blue-1 rounded-borders"},g={key:0},k={key:1},U={key:2},w={class:"row justify-between q-mt-lg"},S={__name:"11SlideEditor",props:{modelValue:Object},emits:["update:modelValue","save"],setup(S,{emit:h}){const O=S,j=h,C=d(JSON.parse(JSON.stringify(O.modelValue||{}))),N=d(""),T=d(null),Q=[{label:"Video Slide",value:"video"},{label:"Question Slide",value:"question"}],J=[{label:"Multiple Choice",value:"multiple"},{label:"True / False",value:"truefalse"},{label:"Open Ended",value:"open"}];s(()=>O.modelValue,e=>{e&&(C.value=JSON.parse(JSON.stringify(e)))},{deep:!0}),s(C,e=>{j("update:modelValue",e)},{deep:!0});const R=()=>{var e,l;(null==(l=null==(e=C.value.video)?void 0:e.src)?void 0:l.startsWith("http"))&&(N.value=C.value.video.src)},E=()=>{const e=document.createElement("input");e.type="file",e.accept="video/*",e.onchange=e=>{const l=e.target.files[0];if(l){const e=URL.createObjectURL(l);N.value=e,C.value.video.src=l.name,C.value.video.file=l}},e.click()},M=()=>{const e=T.value,{end:l,autoNext:o}=C.value.video;e&&l&&e.currentTime>=l&&(e.pause(),o&&j("nextSlide"))},_=()=>{C.value.question.options.push({text:"",correct:!1})},F=()=>{if("video"===C.value.type){const e=T.value;e&&(e.currentTime=C.value.video.start||0,e.play())}else if("question"===C.value.type){const e=C.value.question;if(!e||!e.text)return void alert("No question text defined yet.");alert(`Question Preview:\n${e.text}`)}},L=()=>{j("save",C.value)};return(d,s)=>(n(),i("div",V,[r(e,{modelValue:C.value.type,"onUpdate:modelValue":s[0]||(s[0]=e=>C.value.type=e),options:Q,label:"Slide Type",dense:"",filled:"",class:"q-mb-md"},null,8,["modelValue"]),"video"===C.value.type?(n(),i("div",b,[v("div",y,[r(l,{modelValue:C.value.video.src,"onUpdate:modelValue":s[1]||(s[1]=e=>C.value.video.src=e),label:"Video URL or local path",dense:"",filled:"",class:"col",onChange:R},null,8,["modelValue"]),r(o,{flat:"",dense:"",icon:"upload",color:"primary",onClick:E,title:"Select local video file"})]),v("div",f,[r(l,{modelValue:C.value.video.start,"onUpdate:modelValue":s[2]||(s[2]=e=>C.value.video.start=e),modelModifiers:{number:!0},type:"number",label:"Start (sec)",dense:"",outlined:"",class:"col"},null,8,["modelValue"]),r(l,{modelValue:C.value.video.end,"onUpdate:modelValue":s[3]||(s[3]=e=>C.value.video.end=e),modelModifiers:{number:!0},type:"number",label:"End (sec)",dense:"",outlined:"",class:"col"},null,8,["modelValue"])]),r(a,{modelValue:C.value.video.autoNext,"onUpdate:modelValue":s[4]||(s[4]=e=>C.value.video.autoNext=e),label:"Move to next slide automatically after video ends",color:"primary",class:"q-mt-md"},null,8,["modelValue"]),N.value?(n(),i("video",{key:0,ref_key:"videoRef",ref:T,src:N.value,controls:"",class:"q-mt-md rounded-borders shadow-2",style:{width:"100%","max-height":"400px"},onTimeupdate:M},null,40,q)):m("",!0)])):"question"===C.value.type?(n(),i("div",x,[r(l,{modelValue:C.value.question.text,"onUpdate:modelValue":s[5]||(s[5]=e=>C.value.question.text=e),label:"Question Text",autogrow:"",dense:"",filled:"",class:"q-mb-sm"},null,8,["modelValue"]),r(e,{modelValue:C.value.question.type,"onUpdate:modelValue":s[6]||(s[6]=e=>C.value.question.type=e),options:J,label:"Question Type",dense:"",filled:"",class:"q-mb-sm"},null,8,["modelValue"]),"multiple"===C.value.question.type?(n(),i("div",g,[(n(!0),i(c,null,p(C.value.question.options,(e,a)=>(n(),i("div",{key:a,class:"row items-center q-gutter-sm q-mb-xs"},[r(l,{modelValue:e.text,"onUpdate:modelValue":l=>e.text=l,label:"Option",dense:"",filled:"",class:"col"},null,8,["modelValue","onUpdate:modelValue"]),r(t,{modelValue:e.correct,"onUpdate:modelValue":l=>e.correct=l,label:"Correct",color:"green"},null,8,["modelValue","onUpdate:modelValue"]),r(o,{flat:"",round:"",icon:"delete",color:"red",onClick:e=>(e=>{C.value.question.options.splice(e,1)})(a)},null,8,["onClick"])]))),128)),r(o,{flat:"",icon:"add",label:"Add Option",color:"primary",onClick:_})])):m("",!0),"truefalse"===C.value.question.type?(n(),i("div",k,[r(u,{modelValue:C.value.question.correct,"onUpdate:modelValue":s[7]||(s[7]=e=>C.value.question.correct=e),options:[{label:"True",value:!0},{label:"False",value:!1}],color:"primary",inline:""},null,8,["modelValue"])])):m("",!0),"open"===C.value.question.type?(n(),i("div",U,[r(l,{modelValue:C.value.question.answer,"onUpdate:modelValue":s[8]||(s[8]=e=>C.value.question.answer=e),label:"Correct Answer",dense:"",filled:""},null,8,["modelValue"])])):m("",!0)])):m("",!0),v("div",w,[r(o,{icon:"play_arrow",label:"Preview",color:"primary",onClick:F}),r(o,{icon:"save",label:"Save Slide",color:"green",onClick:L})])]))}};export{S as default};
