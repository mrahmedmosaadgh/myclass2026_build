import{o as e,u as i,c as o,Q as l,m as a,aE as s,f as t}from"./app-ggGwxJON.js";import{Q as n}from"./QTable-D7jFdT1k.js";import{r}from"./resumeApi-B78eCB5a.js";import d from"./QuestionForm-CaV_Vv_C.js";import m from"./AnswerForm-BfvRVutX.js";import c from"./Demo-63fuUgla.js";import{f as u,r as p,o as f,N as g,J as v,b,I as j,Q as w,K as Q,W as y,O as k,V as C}from"./vendor-nQjeLEvd.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";import"./QMarkupTable-BbwJTHXP.js";import"./QSelect-DOo83gJW.js";import"./rtl-Cr6c3OOr.js";import"./QLinearProgress-DJHuJoTJ.js";import"./use-fullscreen-DuZ9ifcT.js";import"./QEditor-DGZB5jNX.js";import"./QForm-BTggRcrz.js";import"./QCircularProgress-RDu5MLfe.js";import"./use-file-DI0zIHNI.js";import"./ResumeQuestionsManager-W0kDPvx5.js";import"./QSpace-DKhB4IlP.js";import"./QInnerLoading-BjYWvaSD.js";import"./QTd-D6gdMIVj.js";import"./QBadge-DVUbh_5M.js";import"./resumeApi-kVCRLr_P.js";import"./QuestionForm-DUfkl60X.js";import"./AnswerForm-D7oROvyc.js";import"./QFile-Rpz0ixFy.js";import"./QuestionDetailsDialog-BpFnx6XN.js";import"./QSpinnerDots-xIVaxwwk.js";import"./AnswerCard-DsWVK0Me.js";import"./CommentsSection-l1dZ8M2h.js";import"./TextToSpeechButton-C-llMCD3.js";import"./VoicePlayer-BhehqfX1.js";import"./VoiceRecorderDialog-C0W4wigr.js";import"./AnswerFormDialog-BmruwMqr.js";import"./GeminiPrompt-CDRbv7bg.js";import"./QBtnToggle-CO55A_1i.js";const q={class:"q-pa-md"},A=e({__name:"ResumeQuestionsManager",setup(e){const A=i(),V=u([]),_=p({}),h=u(!1),D=p({}),F=p({visible:!1,message:"",color:"positive"}),I=[{name:"title",label:"Title",field:"title",align:"left"},{name:"type",label:"Type",field:"type",align:"left"},{name:"category",label:"Category",field:"category",align:"left"},{name:"language",label:"Language",field:"language",align:"left"},{name:"actions",label:"Actions",field:"actions",align:"right"}],T=[{name:"user",label:"User",field:"user_id",align:"left"},{name:"answer",label:"Answer",field:"answer_text",align:"left"},{name:"media",label:"Media",field:"media_links",align:"left"},{name:"actions",label:"Actions",field:"actions",align:"right"}],S=p({visible:!1,data:null}),x=p({visible:!1,data:null,questionId:null});function M(e,i="positive"){F.message=e,F.color=i,F.visible=!0}async function P(){h.value=!0;try{V.value=await r.getQuestions()}catch(e){M("Failed to load questions","negative")}finally{h.value=!1}}async function R(e){D[e]=!0;try{_[e]=await r.getAnswers(e)}catch(i){M("Failed to load answers","negative")}finally{D[e]=!1}}function U(e=null){S.data=e?{...e}:null,S.visible=!0}function O(){S.visible=!1,P()}function B(){x.visible=!1,x.questionId&&R(x.questionId)}return f(P),(e,i)=>(v(),g("div",q,[b(a,null,{default:Q(()=>[b(o,null,{default:Q(()=>[i[4]||(i[4]=y(" wwapp2 ")),b(c),i[5]||(i[5]=k("div",{class:"text-h5"},"Resume Questions Manager",-1)),b(l,{color:"primary",label:"Add Question",onClick:i[0]||(i[0]=e=>U()),class:"q-mb-md"}),b(n,{rows:V.value,columns:I,"row-key":"id",loading:h.value,expand:!0,onRequest:P},{"body-cell-actions":Q(e=>[b(l,{flat:"",icon:"edit",onClick:i=>{U(e.row)}},null,8,["onClick"]),b(l,{flat:"",icon:"delete",color:"negative",onClick:i=>{return o=e.row,void A.dialog({title:"Confirm",message:"Delete this question?",cancel:!0,persistent:!0}).onOk(async()=>{try{await r.deleteQuestion(o.id),P(),M("Question deleted")}catch(e){M("Delete failed","negative")}});var o}},null,8,["onClick"]),b(l,{flat:"",icon:"list",color:"secondary",onClick:i=>{return o=e.key,void(_[o]||R(o));var o}},null,8,["onClick"])]),"body-row-expand":Q(e=>[b(n,{rows:_[e.row.id]||[],columns:T,"row-key":"id",loading:D[e.row.id]},{"body-cell-actions":Q(i=>[b(l,{flat:"",icon:"edit",onClick:o=>{return l=e.row.id,a=i.row,x.data={...a},x.questionId=l,void(x.visible=!0);var l,a}},null,8,["onClick"]),b(l,{flat:"",icon:"delete",color:"negative",onClick:o=>{return l=e.row.id,a=i.row,void A.dialog({title:"Confirm",message:"Delete this answer?",cancel:!0,persistent:!0}).onOk(async()=>{try{await r.deleteAnswer(a.id),R(l),M("Answer deleted")}catch(e){M("Delete failed","negative")}});var l,a}},null,8,["onClick"])]),top:Q(()=>[b(l,{color:"primary",label:"Add Answer",onClick:i=>{return o=e.row.id,x.data=null,x.questionId=o,void(x.visible=!0);var o}},null,8,["onClick"])]),_:2},1032,["rows","loading"])]),_:1},8,["rows","loading"])]),_:1})]),_:1}),b(d,{modelValue:S.visible,"onUpdate:modelValue":i[1]||(i[1]=e=>S.visible=e),question:S.data,onSave:O},null,8,["modelValue","question"]),b(m,{modelValue:x.visible,"onUpdate:modelValue":i[2]||(i[2]=e=>x.visible=e),answer:x.data,"question-id":x.questionId,onSave:B},null,8,["modelValue","answer","question-id"]),h.value?(v(),j(s,{key:0,color:"primary",size:"2em"})):w("",!0),b(t,{modelValue:F.visible,"onUpdate:modelValue":i[3]||(i[3]=e=>F.visible=e),color:F.color},{default:Q(()=>[y(C(F.message),1)]),_:1},8,["modelValue","color"])]))}},[["__scopeId","data-v-2f32a1ec"]]);export{A as default};
