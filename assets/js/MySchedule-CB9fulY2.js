import{p as e,u as s,e as a,n as l}from"./app-Dccx8xF5.js";import{Q as t}from"./QSpinnerDots-VYKIYOSs.js";import{f as r,a as c,o,ac as i,L as n,I as d,b as u,M as m,y,H as v,O as p,V as b,U as h,J as g,F as k,Q as w,Z as x,R as S,_ as j}from"./vendor-EI0FRBVb.js";import f from"./WeeklyPlanMenu-Di4ZDZ76.js";import{u as _}from"./i18n-BbKXhR_S.js";import"./offline-BzIlwqNM.js";import"./ui-B__oX9pK.js";import"./QTab-BJCUrT4L.js";import"./QTabs-4quOvtr1.js";import"./rtl-Cr6c3OOr.js";import"./QSpace-BWA-UIs7.js";import"./WeeklySystemGuide-BabyjmoO.js";import"./QTabPanel-QxVdoii7.js";import"./use-panel-DP2_LoYb.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanels-DiqDdK2g.js";import"./MainSchoolData-CuN1ASv5.js";import"./QBadge-BoQNzKR2.js";import"./schoolData-BnE_O2cp.js";import"./SchoolSettingsDialog-DzTf8i5r.js";import"./QSelect-aOnYle6d.js";import"./QForm-Df8AW4W_.js";const Q={class:"q-pa-md"},q={class:"row items-center q-mb-lg"},D={class:"col"},P={class:"q-ma-none text-weight-bold"},$={class:"text-grey-7 q-mb-none"},z={key:0,class:"row justify-center q-pa-xl"},M={class:"text-h6 text-grey-7 q-mt-md"},T={class:"text-grey-6"},C={key:2,class:"timetable-container"},H={class:"grid-row header-row"},I={class:"grid-cell period-header"},F={class:"period-number"},B=["onClick"],E={class:"card-content"},J={class:"subject"},K={class:"classroom"},O={key:1,class:"free-period text-caption text-grey-5"},R={class:"row q-gutter-lg justify-center"},W={class:"text-center"},Z={class:"text-h4 text-primary"},G={class:"text-caption text-grey-7"},L={class:"text-center"},N={class:"text-h4 text-secondary"},U={class:"text-caption text-grey-7"},V={class:"text-center"},A={class:"text-h4 text-accent"},X={class:"text-caption text-grey-7"},Y=e({__name:"MySchedule",setup(e){const{t:Y}=_(),ee=s(),se=r([]),ae=r(!1),le=c(()=>[{value:1,label:Y("weeklyPlans.fullDays.1")},{value:2,label:Y("weeklyPlans.fullDays.2")},{value:3,label:Y("weeklyPlans.fullDays.3")},{value:4,label:Y("weeklyPlans.fullDays.4")},{value:5,label:Y("weeklyPlans.fullDays.5")}]),te=[1,2,3,4,5,6,7,8],re=c(()=>{const e={};return se.value.forEach(s=>{const a=`${s.day}-${s.period_number}`;e[a]=s}),e}),ce=c(()=>se.value.length),oe=c(()=>new Set(se.value.map(e=>{var s;return null==(s=e.cst)?void 0:s.classroom_id})).size),ie=c(()=>new Set(se.value.map(e=>{var s;return null==(s=e.cst)?void 0:s.subject_id})).size),ne=(e,s)=>re.value[`${e}-${s}`],de=(e,s)=>{const a=ne(e,s);return(null==a?void 0:a.cst)?{backgroundColor:a.cst.c_bg||"#e0e0e0",color:a.cst.c_text||"#333"}:{}};return o(()=>{(async()=>{ae.value=!0;try{const e=await x.get("/weekly-system/api/teacher/my-schedule");se.value=e.data.data||e.data||[]}catch(e){console.error("Error fetching schedule:",e),ee.notify({type:"negative",message:Y("weeklySystem.notifications.loadFailed")})}finally{ae.value=!1}})()}),(e,s)=>{const r=i("Head");return d(),n(k,null,[u(r,{title:y(Y)("weeklySystem.mySchedule.title")},null,8,["title"]),m("div",Q,[u(f),m("div",q,[m("div",D,[m("h4",P,[u(a,{name:"calendar_month",class:"q-mr-sm",color:"primary"}),b(" "+h(y(Y)("weeklySystem.mySchedule.title")),1)]),m("p",$,h(y(Y)("weeklySystem.mySchedule.subtitle")),1)])]),ae.value?(d(),n("div",z,[u(t,{size:"50px",color:"primary"})])):se.value.length?(d(),n("div",C,[m("div",H,[s[0]||(s[0]=m("div",{class:"grid-cell period-header"},null,-1)),(d(!0),n(k,null,w(le.value,e=>(d(),n("div",{key:e.value,class:"grid-cell day-header"},h(y(Y)(`weeklyPlans.shortDays.${e.value}`)),1))),128))]),(d(),n(k,null,w(te,e=>m("div",{key:e,class:"grid-row"},[m("div",I,[m("div",F,h(e),1)]),(d(!0),n(k,null,w(le.value,s=>{var l,t;return d(),n("div",{key:`${s.value}-${e}`,class:"grid-cell"},[ne(s.value,e)?(d(),n("div",{key:0,class:"schedule-card",style:S(de(s.value,e)),onClick:a=>((e,s)=>{const a=ne(e,s);a&&j.visit("/my_table_mnger/weekly_system/teacher/my-weekly-plans",{data:{schedule_id:a.id}})})(s.value,e)},[m("div",E,[m("div",J,h(null==(l=ne(s.value,e).cst)?void 0:l.subject_name),1),m("div",K,[u(a,{name:"meeting_room",size:"xs"}),b(" "+h(null==(t=ne(s.value,e).cst)?void 0:t.classroom_name),1)])])],12,B)):(d(),n("div",O,h(y(Y)("weeklySystem.mySchedule.free")),1))])}),128))])),64))])):(d(),v(l,{key:1,flat:"",bordered:"",class:"text-center q-pa-xl"},{default:g(()=>[u(a,{name:"event_busy",size:"64px",color:"grey-5"}),m("p",M,h(y(Y)("weeklySystem.schoolBrowser.noDataTitle")),1),m("p",T,h(y(Y)("weeklySystem.mySchedule.emptyState")),1)]),_:1})),se.value.length?(d(),v(l,{key:3,flat:"",bordered:"",class:"q-mt-lg q-pa-md"},{default:g(()=>[m("div",R,[m("div",W,[m("div",Z,h(ce.value),1),m("div",G,h(y(Y)("weeklySystem.mySchedule.totalClasses")),1)]),m("div",L,[m("div",N,h(oe.value),1),m("div",U,h(y(Y)("weeklySystem.mySchedule.classrooms")),1)]),m("div",V,[m("div",A,h(ie.value),1),m("div",X,h(y(Y)("weeklySystem.mySchedule.subjects")),1)])])]),_:1})):p("",!0)])],64)}}},[["__scopeId","data-v-bd704b76"]]);export{Y as default};
