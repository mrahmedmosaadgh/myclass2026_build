import{o as e,Q as a,m as d,p as s,aP as l,b as r}from"./app-B9g134Ig.js";import{Q as i}from"./QSpace-DtKzCIdL.js";import{Q as t}from"./QBar-ynupNde5.js";import o from"./ScheduleGrid-qd4Q2ded.js";import{f as u,k as c,N as p,J as n,b as m,K as y,y as f,I as h,Q as v,W as b,O as I,V as S,S as j}from"./vendor-nQjeLEvd.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";import"./QSlider-BZkf3jan.js";import"./ScheduleGridControls-Drv1LY3B.js";const x={key:0},C=e({__name:"DragDropScheduleTable",props:{schoolId:{type:[String,Number],required:!0},scheduleCopyId:{type:[String,Number],required:!0},teachers:{type:Array,required:!0,default:()=>[]},days:{type:Array,required:!1,default:()=>["Sunday","Monday","Tuesday","Wednesday","Thursday"]},periods:{type:Number,required:!0,default:8},initialSchedule:{type:Array,default:()=>[]}},emits:["schedule-change"],setup(e,{emit:C}){const _=e,g=u(!0),k=u(!0),Q=u([]),A=()=>{var e;(null==(e=_.initialSchedule)?void 0:e.length)>0?Q.value=_.teachers.map((e,a)=>_.days.map((e,d)=>{var s;const l=(null==(s=_.initialSchedule[a])?void 0:s[d])||[];return Array(_.periods).fill().map((e,s)=>l[s]||{id:`empty-${a}-${d}-${s}`,empty:!0})})):Q.value=_.teachers.map((e,a)=>_.days.map((e,d)=>Array(_.periods).fill().map((e,s)=>({id:`empty-${a}-${d}-${s}`,empty:!0}))))},$=({teacherIndex:e,dayIndex:a,periodIndex:d})=>{},q=e=>{if(!e||e.empty)return"#f8f9fa";const a=["#e3f2fd","#e8f5e9","#fff3e0","#fce4ec","#f3e5f5"];return a[e.subject?e.subject.charCodeAt(0)%a.length:0]};return A(),c(()=>_.teachers,A),c(()=>_.days,A),c(()=>_.periods,A),(u,c)=>(n(),p("div",null,[m(a,{label:"Maximized",color:"primary",onClick:c[0]||(c[0]=e=>g.value=!0)}),m(r,{modelValue:g.value,"onUpdate:modelValue":c[2]||(c[2]=e=>g.value=e),persistent:"",maximized:k.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:y(()=>[m(d,{class:""},{default:y(()=>[m(t,null,{default:y(()=>[m(i),m(a,{dense:"",flat:"",icon:"minimize",onClick:c[1]||(c[1]=e=>k.value=!1),disable:!k.value},{default:y(()=>[k.value?(n(),h(s,{key:0,class:"bg-white text-primary"},{default:y(()=>c[3]||(c[3]=[b("Minimize")])),_:1})):v("",!0)]),_:1},8,["disable"]),f((n(),h(a,{dense:"",flat:"",icon:"close"},{default:y(()=>[m(s,{class:"bg-white text-primary"},{default:y(()=>c[4]||(c[4]=[b("Close")])),_:1})]),_:1})),[[l]])]),_:1}),m(o,{schoolId:e.schoolId,scheduleCopyId:e.scheduleCopyId,teachers:e.teachers,days:["Sunday","Monday","Tuesday","Wednesday","Thursday"],periods:e.periods,"schedule-data":Q.value,onCellClick:$},{cell:y(({teacherIndex:e,dayIndex:a,periodIndex:d,item:s})=>[I("div",{class:"schedule-cell",style:j({backgroundColor:q(s)})},[s.empty?v("",!0):(n(),p("div",x,[I("div",null,"P"+S(d+1)+": "+S(s.subject||"Free"),1),I("div",null,S(s.class||""),1),b(" "+S(e)+" "+S(a),1)]))],4)]),_:1},8,["schoolId","scheduleCopyId","teachers","periods","schedule-data"])]),_:1})]),_:1},8,["modelValue","maximized"])]))}},[["__scopeId","data-v-1bb6b9d4"]]);export{C as default};
