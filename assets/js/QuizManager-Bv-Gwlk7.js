import{f as e,a as t,o as l,L as a,I as s,M as o,O as i,x as r,V as n,F as u,Q as d,$ as c,U as p,Z as m,ab as v,aa as g,S as f,af as x,_ as b}from"./vendor-EI0FRBVb.js";const y={class:"min-h-screen bg-gray-50 py-8"},h={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},w={class:"mb-6 flex justify-between items-center"},k={class:"flex gap-4"},z={key:0,class:"text-center py-12"},_={key:1,class:"grid gap-6 md:grid-cols-2 lg:grid-cols-3"},q={class:"flex justify-between items-start mb-4"},C={class:"flex-1"},V={class:"text-lg font-semibold text-gray-900 mb-1"},j={class:"text-sm text-gray-600 line-clamp-2"},M={class:"space-y-2 mb-4 text-sm text-gray-600"},U={class:"flex items-center gap-2"},Q={key:0,class:"flex items-center gap-2"},A={key:1,class:"flex items-center gap-2"},S={class:"flex gap-2"},B=["onClick"],F=["onClick"],L=["onClick"],$={key:2,class:"text-center py-12 bg-white rounded-lg shadow"},D={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},E={class:"p-6"},N={class:"flex justify-between items-center mb-6"},H={class:"text-2xl font-bold text-gray-900"},P={class:"grid grid-cols-2 gap-4"},O={class:"space-y-2"},G={class:"flex items-center gap-2"},I={class:"flex items-center gap-2"},T={class:"flex items-center gap-2"},Z={class:"flex gap-3 pt-4"},J=["disabled"],K={__name:"QuizManager",setup(K){const R=e([]),W=e(!0),X=e(""),Y=e(""),ee=e(!1),te=e(null),le=e(!1),ae=e({name:"",description:"",status:"draft",time_limit_minutes:null,shuffle_questions:!1,shuffle_options:!1,allow_review:!0,school_id:1}),se=t(()=>{let e=R.value;return X.value&&(e=e.filter(e=>e.name.toLowerCase().includes(X.value.toLowerCase()))),Y.value&&(e=e.filter(e=>e.status===Y.value)),e}),oe=async()=>{try{W.value=!0;const e=await m.get("/api/quizzes");e.data.quizzes?R.value=e.data.quizzes:R.value=Array.isArray(e.data)?e.data:[]}catch(e){console.error("Failed to load quizzes:",e),alert("Failed to load quizzes. Please try again.")}finally{W.value=!1}},ie=()=>{te.value=null,ae.value={name:"",description:"",status:"draft",time_limit_minutes:null,shuffle_questions:!1,shuffle_options:!1,allow_review:!0,school_id:1},ee.value=!0},re=()=>{ee.value=!1,te.value=null},ne=async()=>{try{le.value=!0,te.value?await m.put(`/api/quizzes/${te.value.id}`,ae.value):await m.post("/api/quizzes",ae.value),await oe(),re()}catch(e){console.error("Failed to save quiz:",e),alert("Failed to save quiz. Please try again.")}finally{le.value=!1}};return l(()=>{oe()}),(e,t)=>(s(),a("div",y,[o("div",h,[t[28]||(t[28]=o("div",{class:"mb-8"},[o("h1",{class:"text-3xl font-bold text-gray-900"},"Quiz Management"),o("p",{class:"mt-2 text-sm text-gray-600"},"Create and manage quizzes for your lessons")],-1)),o("div",w,[o("div",k,[r(o("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>X.value=e),type:"text",placeholder:"Search quizzes...",class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"},null,512),[[v,X.value]]),r(o("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>Y.value=e),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},t[9]||(t[9]=[o("option",{value:""},"All Status",-1),o("option",{value:"active"},"Active",-1),o("option",{value:"draft"},"Draft",-1),o("option",{value:"archived"},"Archived",-1)]),512),[[g,Y.value]])]),o("button",{onClick:ie,class:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2"},t[10]||(t[10]=[o("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),n(" Create Quiz ")]))]),W.value?(s(),a("div",z,t[11]||(t[11]=[o("div",{class:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1),o("p",{class:"mt-4 text-gray-600"},"Loading quizzes...",-1)]))):se.value.length>0?(s(),a("div",_,[(s(!0),a(u,null,d(se.value,e=>{return s(),a("div",{key:e.id,class:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow p-6"},[o("div",q,[o("div",C,[o("h3",V,p(e.name),1),o("p",j,p(e.description||"No description"),1)]),o("span",{class:f([(l=e.status,{active:"bg-green-100 text-green-800",draft:"bg-yellow-100 text-yellow-800",archived:"bg-gray-100 text-gray-800"}[l]||"bg-gray-100 text-gray-800"),"px-2 py-1 text-xs font-medium rounded-full"])},p(e.status),3)]),o("div",M,[o("div",U,[t[12]||(t[12]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",null,p(e.questions_count||0)+" questions",1)]),e.time_limit_minutes?(s(),a("div",Q,[t[13]||(t[13]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),o("span",null,p(e.time_limit_minutes)+" minutes",1)])):i("",!0),e.grade?(s(),a("div",A,[t[14]||(t[14]=o("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})],-1)),o("span",null,p(e.grade.name),1)])):i("",!0)]),o("div",S,[o("button",{onClick:t=>(e=>{te.value=e,ae.value={name:e.name,description:e.description||"",status:e.status,time_limit_minutes:e.time_limit_minutes,shuffle_questions:e.shuffle_questions||!1,shuffle_options:e.shuffle_options||!1,allow_review:!1!==e.allow_review,school_id:e.school_id},ee.value=!0})(e),class:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium"}," Edit ",8,B),o("button",{onClick:t=>(e=>{b.visit(`/quiz-builder/${e.id}`)})(e),class:"flex-1 px-4 py-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm font-medium"}," View ",8,F),o("button",{onClick:t=>(async e=>{if(confirm(`Are you sure you want to delete "${e.name}"?`))try{await m.delete(`/api/quizzes/${e.id}`),await oe()}catch(t){console.error("Failed to delete quiz:",t),alert("Failed to delete quiz. Please try again.")}})(e),class:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-medium"}," Delete ",8,L)])]);var l}),128))])):(s(),a("div",$,[t[16]||(t[16]=o("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),t[17]||(t[17]=o("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No quizzes found",-1)),t[18]||(t[18]=o("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new quiz.",-1)),o("div",{class:"mt-6"},[o("button",{onClick:ie,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"},t[15]||(t[15]=[o("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),n(" Create Quiz ")]))])])),ee.value?(s(),a("div",{key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:c(re,["self"])},[o("div",D,[o("div",E,[o("div",N,[o("h2",H,p(te.value?"Edit Quiz":"Create New Quiz"),1),o("button",{onClick:re,class:"text-gray-400 hover:text-gray-600"},t[19]||(t[19]=[o("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),o("form",{onSubmit:c(ne,["prevent"]),class:"space-y-4"},[o("div",null,[t[20]||(t[20]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quiz Name *",-1)),r(o("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>ae.value.name=e),type:"text",required:"",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter quiz name"},null,512),[[v,ae.value.name]])]),o("div",null,[t[21]||(t[21]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),r(o("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>ae.value.description=e),rows:"3",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter quiz description"},null,512),[[v,ae.value.description]])]),o("div",P,[o("div",null,[t[23]||(t[23]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),r(o("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>ae.value.status=e),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"},t[22]||(t[22]=[o("option",{value:"draft"},"Draft",-1),o("option",{value:"active"},"Active",-1),o("option",{value:"archived"},"Archived",-1)]),512),[[g,ae.value.status]])]),o("div",null,[t[24]||(t[24]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Time Limit (minutes)",-1)),r(o("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>ae.value.time_limit_minutes=e),type:"number",min:"1",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Optional"},null,512),[[v,ae.value.time_limit_minutes,void 0,{number:!0}]])])]),o("div",O,[o("label",G,[r(o("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>ae.value.shuffle_questions=e),type:"checkbox",class:"rounded"},null,512),[[x,ae.value.shuffle_questions]]),t[25]||(t[25]=o("span",{class:"text-sm text-gray-700"},"Shuffle questions",-1))]),o("label",I,[r(o("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>ae.value.shuffle_options=e),type:"checkbox",class:"rounded"},null,512),[[x,ae.value.shuffle_options]]),t[26]||(t[26]=o("span",{class:"text-sm text-gray-700"},"Shuffle answer options",-1))]),o("label",T,[r(o("input",{"onUpdate:modelValue":t[8]||(t[8]=e=>ae.value.allow_review=e),type:"checkbox",class:"rounded"},null,512),[[x,ae.value.allow_review]]),t[27]||(t[27]=o("span",{class:"text-sm text-gray-700"},"Allow students to review answers",-1))])]),o("div",Z,[o("button",{type:"button",onClick:re,class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"}," Cancel "),o("button",{type:"submit",disabled:le.value,class:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"},p(le.value?"Saving...":te.value?"Update Quiz":"Create Quiz"),9,J)])],32)])])])):i("",!0)])]))}};export{K as default};
