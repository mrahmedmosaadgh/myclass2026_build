import{r as e}from"./app-Dtv5Fi9L.js";import{f as a,k as o,o as l,e as r,N as t,J as n,R as u,O as i,V as s,U as d}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const v={key:0,class:"loading-overlay"},y={key:1,class:"error-overlay"},p={class:"error-message"},c={class:"play-button"},g={key:0,viewBox:"0 0 24 24",class:"play-icon"},m={key:1,viewBox:"0 0 24 24",class:"pause-icon"},f=e({__name:"youtube_VideoPlayer",props:{videoUrl:{type:String,required:!0},autoplay:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},controls:{type:Boolean,default:!0},loop:{type:Boolean,default:!1},startAt:{type:Number,default:0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"}},setup(e){const f=e,b=a(null),w=a(null),h=a(!0),V=a(!1),T=a("Error loading video"),Y=a(!1),k=`youtube-player-${Date.now()}`,E=()=>{const e=(e=>{if(!e)return null;const a=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^\?&"'>]+)/,/^([^\?&"'>]+)$/];for(const o of a){const a=e.match(o);if(a&&a[1])return a[1]}return null})(f.videoUrl);if(!e)return V.value=!0,T.value="Invalid YouTube URL",void(h.value=!1);if(V.value=!1,h.value=!0,window.YT)I(e);else{const a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";const o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(a,o),window.onYouTubeIframeAPIReady=I.bind(null,e)}},I=e=>{b.value&&b.value.destroy();try{b.value=new YT.Player(k,{height:f.height,width:f.width,videoId:e,playerVars:{autoplay:f.autoplay?1:0,controls:f.controls?1:0,mute:f.muted?1:0,loop:f.loop?1:0,start:f.startAt,modestbranding:1,rel:0,showinfo:0,enablejsapi:1,playsinline:1,origin:window.location.origin},events:{onReady:B,onStateChange:N,onError:P}})}catch(a){console.error("Error creating YouTube player:",a),V.value=!0,T.value="Error initializing player",h.value=!1}},B=e=>{h.value=!1,f.autoplay&&e.target.playVideo()},N=e=>{Y.value=e.data===YT.PlayerState.PLAYING},P=e=>{h.value=!1,V.value=!0;T.value={2:"Invalid video ID",5:"HTML5 player error",100:"Video not found or removed",101:"Video owner does not allow embedding",150:"Video owner does not allow embedding"}[e.data]||"Error loading video"},S=()=>{if(b.value)try{b.value.getPlayerState()===YT.PlayerState.PLAYING?(b.value.pauseVideo(),Y.value=!1):(b.value.playVideo(),Y.value=!0)}catch(e){console.error("Error toggling play/pause:",e)}},_=()=>{E()};return o(()=>f.videoUrl,e=>{e&&E()}),l(()=>{E()}),r(()=>{if(b.value)try{b.value.destroy()}catch(e){console.error("Error destroying YouTube player:",e)}}),(e,a)=>(n(),t("div",{class:d(["youtube-player-container",{loading:h.value,error:V.value}])},[u("div",{class:"youtube-player",ref_key:"playerContainer",ref:w},[h.value?(n(),t("div",v,a[0]||(a[0]=[u("div",{class:"loading-spinner"},null,-1)]))):i("",!0),V.value?(n(),t("div",y,[u("div",p,[a[1]||(a[1]=u("div",{class:"error-icon"},"⚠️",-1)),u("div",null,s(T.value),1),u("button",{onClick:_,class:"retry-button"},"Retry")])])):i("",!0),u("div",{id:k}),h.value||V.value?i("",!0):(n(),t("div",{key:2,class:d(["player-overlay",{playing:Y.value}]),onClick:S},[u("div",c,[Y.value?(n(),t("svg",m,a[3]||(a[3]=[u("path",{fill:"currentColor",d:"M14,19H18V5H14M6,19H10V5H6V19Z"},null,-1)]))):(n(),t("svg",g,a[2]||(a[2]=[u("path",{fill:"currentColor",d:"M8,5.14V19.14L19,12.14L8,5.14Z"},null,-1)])))])],2))],512)],2))}},[["__scopeId","data-v-dc8da849"]]);export{f as default};
