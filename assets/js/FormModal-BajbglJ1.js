import e from"./Modal-CWt6JMcT.js";import{f as l,a,k as t,N as o,J as s,W as n,b as i,V as r,K as d,R as u,a0 as c,F as m,Q as p,O as g,y as f,ab as v}from"./vendor-BWKGNkNB.js";import"./PrimaryButton-DVJXOzHH.js";import"./SecondaryButton-WaufSYeJ.js";const y={class:"p-6"},b={class:"text-lg font-medium text-gray-900"},h={class:"space-y-6"},x={key:0,class:"flex items-center"},k=["id","checked","onChange"],w=["for"],q={key:0,class:"ml-2 text-sm text-gray-500"},S=["for"],j={key:0,class:"text-red-500"},C=["value","onInput","type","id","min","required","placeholder"],$=["id","onUpdate:modelValue","required"],B={value:""},E=["value"],A={key:2,class:"mt-1 text-sm text-red-600"},I={class:"mt-6 flex justify-end"},O=["disabled"],V=["disabled"],_={__name:"FormModal",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},fields:{type:Array,required:!0},editing:{type:[Object,null],default:null},errors:{type:Object,default:()=>({})},submitting:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"}},emits:["close","submitted"],setup(_,{emit:F}){const M=_,N=F,U=l({}),W=l({}),z=l(!1),J=a(()=>M.fields.map(e=>{var l;return{type:"text",required:!1,placeholder:"",...e,options:Array.isArray(e.options)?e.options:(null==(l=e.options)?void 0:l.value)||[]}})),K=()=>{const e={};M.fields.forEach(l=>{var a,t,o,s,n;M.editing?e[l.name]=null!=(t=null!=(a=M.editing[l.name])?a:l.default)?t:"":"checkbox"===l.type?e[l.name]=null!=(o=l.default)&&o:"select"===l.type?e[l.name]=null!=(s=l.default)?s:"":e[l.name]=null!=(n=l.default)?n:""}),console.log("Initialized form with values:",e),U.value=e,W.value={}};t(()=>M.show,e=>{console.log("Show changed:",e),e&&K()},{immediate:!0}),t(()=>M.editing,e=>{console.log("Editing changed:",e),M.show&&K()},{deep:!0});const P=()=>{z.value||(z.value=!0,N("submitted",{form:U.value,onSuccess:()=>{z.value=!1,z.value||(N("close"),W.value={})},onError:e=>{z.value=!1,W.value=e}}))};return(l,a)=>(s(),o(m,null,[n(" form:"+r(M)+" ",1),i(e,{"max-width":"6xl",show:_.show,closeable:!z.value,persistent:z.value,loading:z.value,onClose:a[1]||(a[1]=e=>l.$emit("close"))},{default:d(()=>[u("div",y,[u("h2",b,r(M.editing?`Edit ${M.title}`:`Create New ${M.title}`),1),u("form",{onSubmit:c(P,["prevent"]),class:"mt-6"},[u("div",h,[(s(!0),o(m,null,p(J.value,e=>(s(),o("div",{key:e.name,class:"mb-4"},["checkbox"===e.type?(s(),o("div",x,[u("input",{id:e.name,checked:U.value[e.name],onChange:l=>U.value[e.name]=l.target.checked,type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,k),u("label",{for:e.name,class:"ml-2 block text-sm text-gray-900"},r(e.label),9,w),e.help?(s(),o("span",q,r(e.help),1)):g("",!0)])):(s(),o(m,{key:1},[u("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[n(r(e.label)+" ",1),e.required?(s(),o("span",j,"*")):g("",!0)],8,S),["text","number","date"].includes(e.type)?(s(),o("input",{key:0,value:U.value[e.name],onInput:l=>U.value[e.name]=l.target.value,type:e.type,id:e.name,min:e.min,required:e.required,placeholder:e.placeholder,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,40,C)):g("",!0),"select"===e.type?f((s(),o("select",{key:1,id:e.name,"onUpdate:modelValue":l=>U.value[e.name]=l,required:e.required,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[u("option",B,r(e.placeholder||`Select ${e.label}`),1),(s(!0),o(m,null,p(e.options,e=>(s(),o("option",{key:e.value,value:e.value},r(e.label),9,E))),128))],8,$)),[[v,U.value[e.name]]]):g("",!0),W.value[e.name]?(s(),o("div",A,r(W.value[e.name]),1)):g("",!0)],64))]))),128))]),u("div",I,[u("button",{type:"button",class:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",disabled:z.value,onClick:a[0]||(a[0]=e=>l.$emit("close"))}," Cancel ",8,O),u("button",{type:"submit",class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md text-sm text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",disabled:z.value},r(z.value?"Saving...":"Save"),9,V)])],32)])]),_:1},8,["show","closeable","persistent","loading"])],64))}};export{_ as default};
