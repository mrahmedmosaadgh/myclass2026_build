import{r as e,u as a,b as t,d as s,f as l,o as r,aS as o,e as i,g as d,Q as c,p as n,c as m}from"./app-CWAnT6CT.js";import{Q as u}from"./QBadge-D8mJvg-f.js";import{f as p,N as v,J as x,b as g,R as b,z as f,a4 as y,I as h,K as w,y as _,W as q,F as j,Q as k,O as C,V as Q,_ as S,$ as I}from"./vendor-BWKGNkNB.js";import T from"./YearForm-BmHXmEOz.js";import V from"./SemesterCard-CKaKizTq.js";import A from"./MissingDaysList-mfO_pk-q.js";import E from"./CalendarPreview-B2IO16qk.js";import{E as z}from"./ExcelManager-B4HMmPU4.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./QSpace-DC5Rdnaf.js";import"./QForm-BHNk-Zcq.js";import"./QSpinnerGears-BYFMA45F.js";import"./QTab-BMD61nU3.js";import"./QTabs-BXUhAxYJ.js";import"./rtl-Cr6c3OOr.js";import"./QTabPanel-16_gtepn.js";import"./use-panel-BQUWxHno.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanels-BZNF5OxK.js";import"./QFile-BGzsU6UY.js";import"./use-file-rwSz7DzT.js";import"./QTable-CegydSFg.js";import"./QMarkupTable-2zMPstj6.js";import"./QSelect-5P1Qxg14.js";import"./QLinearProgress-DmE3hCo3.js";import"./use-fullscreen-6qPmzoi_.js";import"./QTr-DBwnEDz3.js";import"./xlsx-BHXqx-YI.js";const Y={class:"q-pa-lg"},U={class:"q-mb-xl"},D={class:"row items-center q-mb-sm"},F={class:"col-auto"},M={class:"row q-gutter-sm"},P={class:"q-mb-md"},N={key:0,class:"q-gutter-y-xl"},W={class:"row items-end justify-between q-mb-lg"},J={class:"col"},R={class:"row items-center q-mb-sm q-gutter-sm"},G={class:"text-h4 text-weight-black q-ma-none q-mb-sm"},L={class:"row items-center q-gutter-md text-grey-7"},O={class:"row items-center q-gutter-xs"},$={class:"text-weight-bold"},B={class:"row items-center q-gutter-xs"},K={class:"text-weight-bold"},X={class:"col-auto"},H={class:"row q-gutter-md"},Z={class:"text-h4 text-weight-black"},ee={class:"text-h4 text-weight-black"},ae={class:"row q-col-gutter-md q-mb-lg"},te={class:"col"},se={class:"text-subtitle2 text-blue-2"},le=e({__name:"Index",props:{academicYears:Array},setup(e){const le=a(),re=p(!1),oe=p(!1),ie=p([{date:"2025-09-01",semester:1,status:1,status_label:"Work Day",week_number:1,event:"",notes:""},{date:"2025-09-02",semester:1,status:1,status_label:"Work Day",week_number:1,event:"",notes:""},{date:"2025-09-03",semester:1,status:0,status_label:"Day Off",week_number:1,event:"Weekend",notes:""}]),de=e=>e.semesters.reduce((e,a)=>e+a.calendar_count,0),ce=p(!1),ne=p(null),me=()=>{ce.value=!1,ne.value=null},ue=async e=>{var a,t,s,l;try{const s=(await S.post(route("admin.academic_calendar.import"),{data:e})).data.results,l=(null==(a=s.success)?void 0:a.length)||0,r=(null==(t=s.errors)?void 0:t.length)||0;l>0&&le.notify({message:`Successfully imported ${l} calendar records.`,color:"positive",position:"top"}),r>0&&(le.notify({message:`${r} errors occurred during import. Check console for details.`,color:"warning",position:"top"}),console.log("Import errors:",s.errors)),I.reload({preserveScroll:!0})}catch(r){le.notify({message:"Import failed: "+((null==(l=null==(s=r.response)?void 0:s.data)?void 0:l.message)||r.message),color:"negative",position:"top"})}},pe=e=>{le.notify({message:"Calendar data exported successfully!",color:"positive",position:"top"})};return(a,p)=>(x(),v(j,null,[g(f(y),{title:"Academic Calendar Management"}),b("div",Y,[b("div",U,[b("div",D,[p[6]||(p[6]=b("div",{class:"col-auto"},[b("div",{style:{width:"6px",height:"40px",background:"#1976d2","border-radius":"3px"},class:"q-mr-md"})],-1)),p[7]||(p[7]=b("div",{class:"col"},[b("h1",{class:"text-h3 text-weight-bold q-ma-none"},"Academic Calendar")],-1)),b("div",F,[b("div",M,[g(t,{color:"primary",icon:"add",label:"New Academic Year",onClick:p[0]||(p[0]=e=>re.value=!0),unelevated:"",size:"md"}),g(t,{color:"secondary",icon:"import_export",label:"Import/Export",onClick:p[1]||(p[1]=e=>oe.value=!0),unelevated:"",size:"md"})])])]),p[8]||(p[8]=b("p",{class:"text-grey-7 text-weight-medium q-ma-none"},"Manage academic years, semesters, and daily calendar records with precision.",-1))]),g(i,{modelValue:re.value,"onUpdate:modelValue":p[3]||(p[3]=e=>re.value=e),persistent:""},{default:w(()=>[g(s,{style:{"min-width":"600px"}},{default:w(()=>[g(l,{class:"bg-primary text-white"},{default:w(()=>p[9]||(p[9]=[b("div",{class:"text-h6"},"Create New Academic Year",-1)])),_:1}),g(l,null,{default:w(()=>[g(T,{onCreated:p[2]||(p[2]=e=>re.value=!1)})]),_:1}),g(r,{align:"right"},{default:w(()=>[_(g(t,{flat:"",label:"Close",color:"primary"},null,512),[[o]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),g(i,{modelValue:oe.value,"onUpdate:modelValue":p[4]||(p[4]=e=>oe.value=e),maximized:""},{default:w(()=>[g(s,null,{default:w(()=>[g(l,{class:"bg-secondary text-white row items-center"},{default:w(()=>[p[10]||(p[10]=b("div",{class:"col"},[b("div",{class:"text-h6"},"Import/Export Calendar Data"),b("div",{class:"text-caption"},"Upload Excel files to bulk import calendar records or export existing data")],-1)),_(g(t,{flat:"",round:"",dense:"",icon:"close"},null,512),[[o]])]),_:1}),g(l,{class:"q-pa-lg"},{default:w(()=>[b("div",P,[g(d,{class:"bg-blue-1 text-blue-9 rounded-borders"},{avatar:w(()=>[g(c,{name:"info",color:"blue-9"})]),default:w(()=>[p[11]||(p[11]=b("strong",null,"Semester Column:",-1)),p[12]||(p[12]=q(' Use semester numbers only (1, 2, 3, 4) instead of "Semester 1", "Semester 2", etc. '))]),_:1})]),g(z,{"export-data":ie.value,"export-file-name":"calendar_data.xlsx","initial-tab":"import",onImportedJson:ue,onExported:pe},null,8,["export-data"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e.academicYears.length>0?(x(),v("div",N,[(x(!0),v(j,null,k(e.academicYears,a=>(x(),v("div",{key:a.id},[g(s,{flat:"",bordered:"",class:"q-pa-md q-mb-lg"},{default:w(()=>[b("div",W,[b("div",J,[b("div",R,[g(n,{"model-value":a.active,"onUpdate:modelValue":e=>(e=>{I.put(route("admin.academic_calendar.year.toggle",e.id),{},{preserveScroll:!0})})(a),color:"primary",size:"lg","checked-icon":"check","unchecked-icon":"clear"},null,8,["model-value","onUpdate:modelValue"]),g(u,{color:a.active?"primary":"grey-5","text-color":a.active?"white":"grey-8",class:"text-weight-bold"},{default:w(()=>[q(Q(a.active?"âœ“ ACTIVE":"INACTIVE")+" YEAR ",1)]),_:2},1032,["color","text-color"])]),b("h2",G,Q(a.name),1),b("div",L,[b("div",O,[g(c,{name:"event",size:"sm"}),b("span",$,Q(a.start_date.split("T")[0]),1)]),g(c,{name:"arrow_forward",size:"xs"}),b("div",B,[b("span",K,Q(a.end_date.split("T")[0]),1)])])]),b("div",X,[b("div",H,[g(s,{flat:"",bordered:"",class:"q-pa-md text-center",style:{"min-width":"120px"}},{default:w(()=>[p[13]||(p[13]=b("div",{class:"text-caption text-grey-6 text-weight-bold"},"SEMESTERS",-1)),b("div",Z,Q(a.semesters.length),1)]),_:2},1024),g(s,{flat:"",bordered:"",class:"q-pa-md text-center",style:{"min-width":"120px"}},{default:w(()=>[p[14]||(p[14]=b("div",{class:"text-caption text-grey-6 text-weight-bold"},"TOTAL DAYS",-1)),b("div",ee,Q(de(a)),1)]),_:2},1024),g(t,{onClick:e=>(e=>{ne.value=e,ce.value=!0})(a),color:"primary",unelevated:"",icon:"visibility",label:"Preview Calendar",class:"text-weight-bold",size:"md"},null,8,["onClick"])])])])]),_:2},1024),b("div",ae,[(x(!0),v(j,null,k(a.semesters,e=>(x(),v("div",{key:e.id,class:"col-12 col-md-6 col-xl-3"},[g(V,{semester:e},null,8,["semester"])]))),128))]),g(A,{yearId:a.id},null,8,["yearId"]),e.academicYears.length>1?(x(),h(m,{key:0,class:"q-my-xl"})):C("",!0)]))),128))])):(x(),h(s,{key:1,flat:"",bordered:"",class:"q-pa-xl text-center"},{default:w(()=>[g(c,{name:"event",size:"80px",color:"grey-4",class:"q-mb-md"}),p[15]||(p[15]=b("h3",{class:"text-h5 text-weight-black q-mb-sm"},"No Academic Years Found",-1)),p[16]||(p[16]=b("p",{class:"text-grey-6 text-weight-medium q-mb-lg",style:{"max-width":"500px","margin-left":"auto","margin-right":"auto"}}," Start by creating an academic year. We'll automatically generate the standard four semesters for you. ",-1))]),_:1})),g(i,{modelValue:ce.value,"onUpdate:modelValue":p[5]||(p[5]=e=>ce.value=e),maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:w(()=>[g(s,null,{default:w(()=>[g(l,{class:"bg-primary text-white row items-center q-pb-md"},{default:w(()=>{var e;return[b("div",te,[p[17]||(p[17]=b("div",{class:"text-h5 text-weight-bold"},"Calendar Preview",-1)),b("div",se,Q(null==(e=ne.value)?void 0:e.name),1)]),g(t,{flat:"",round:"",dense:"",icon:"close",onClick:me})]}),_:1}),g(l,{class:"q-pa-lg",style:{"max-height":"calc(100vh - 100px)","overflow-y":"auto"}},{default:w(()=>[ne.value?(x(),h(E,{key:0,yearId:ne.value.id},null,8,["yearId"])):C("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}},[["__scopeId","data-v-2a8bc127"]]);export{le as default};
