import e from"./timeline-CKvjraeH.js";import{f as t,k as l,a as o,r as i,L as r,I as s,O as n,M as a,b as u,U as d,x as m,ab as c}from"./vendor-EI0FRBVb.js";import"./UpcomingEvents-3B94ge5Y.js";import"./UpcomingEvent-DayksCYl.js";import"./CurrentEventCard-gBV_Wkw7.js";import"./EventCard-B5kS4pcB.js";import"./EventTimingBadge-DzuL_nr9.js";import"./EventDurationBadge-B7eTQR5C.js";import"./app-BzjXrVp9.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";const f={class:"p-6"},p={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},v={class:"bg-white rounded-lg p-6 w-full max-w-md"},b={class:"text-lg font-semibold mb-4"},g={class:"space-y-4"},x={class:"flex gap-4"},y={class:"flex-1"},w={class:"flex-1"},h=["min"],j={class:"mt-6 flex justify-end gap-3"},E={class:"mb-4 flex justify-between items-center"},k={class:"text-xl font-bold"},C={__name:"timeline_main",props:{title:{type:String,default:""},events:{type:Array,default:()=>[]}},emits:["update:events"],setup(C,{emit:U}){const D=C,A=U,T=e=>{const t=new Date,[l,o]=e.split(":");return t.setHours(parseInt(l),parseInt(o),0,0),t},V=t([...D.events]);l(()=>D.events,e=>{V.value=[...e]},{deep:!0});const I=o(()=>{const e=[...V.value].sort((e,t)=>T(e.from)-T(t.from));return e.map(t=>{const l=T(t.from),o=T(t.to),i=e.filter(e=>{if(e.id===t.id)return!1;const i=T(e.from),r=T(e.to);return l<r&&o>i}),r=i.length>0?i.length:0,s=Math.max(r+1,1);return{...t,column:r,totalColumns:s,startTime:l,endTime:o}})}),M=t(!1),S=t(null),$=i({title:"",description:"",from:"",to:""}),_=()=>{$.title="",$.description="",$.from="",$.to=""},B=()=>{M.value=!1,S.value=null,_()},N=()=>{_(),M.value=!0},O=e=>{S.value=e,$.title=e.title,$.description=e.description,$.from=e.from,$.to=e.to,M.value=!0},P=()=>{if(!$.title.trim()||!$.from||!$.to)return void alert("Please fill in all required fields");if($.from>=$.to)return void alert("End time must be after start time");const e=T($.from),t=T($.to),l=V.value.find(l=>{var o;if((null==(o=S.value)?void 0:o.id)===l.id)return!1;const i=T(l.from),r=T(l.to);return e<r&&t>i});if(l&&!confirm(`There is already an event "${l.title}" from ${l.from} to ${l.to}. Do you want to schedule anyway?`))return;const o={title:$.title,description:$.description,from:$.from,to:$.to};let i;i=S.value?V.value.map(e=>e.id===S.value.id?{...e,...o}:e):[...V.value,{id:Date.now(),...o}],V.value=i,A("update:events",i),B()},q=e=>{if(confirm("Are you sure you want to delete this event?")){const t=V.value.filter(t=>t.id!==e.id);V.value=t,A("update:events",t)}};return(t,l)=>(s(),r("div",f,[M.value?(s(),r("div",p,[a("div",v,[a("h3",b,d(S.value?"Edit Event":"Add New Event"),1),a("div",g,[a("div",null,[l[4]||(l[4]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Title",-1)),m(a("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>$.title=e),type:"text",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,$.title]])]),a("div",null,[l[5]||(l[5]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),m(a("textarea",{"onUpdate:modelValue":l[1]||(l[1]=e=>$.description=e),class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,$.description]])]),a("div",x,[a("div",y,[l[6]||(l[6]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"From",-1)),m(a("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>$.from=e),type:"time",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,$.from]])]),a("div",w,[l[7]||(l[7]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"To",-1)),m(a("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>$.to=e),type:"time",min:$.from,class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,h),[[c,$.to]])])])]),a("div",j,[a("button",{onClick:B,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),a("button",{onClick:P,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"},d(S.value?"Update":"Add"),1)])])])):n("",!0),a("div",E,[a("h2",k,d(C.title||"Daily Schedule"),1),a("button",{onClick:N,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," Add Event ")]),u(e,{events:I.value,onAdd:N,onEdit:O,onDelete:q},null,8,["events"])]))}};export{C as default};
