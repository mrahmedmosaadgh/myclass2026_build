import{_ as e}from"./InputError-DdTJQJTB.js";import{_ as a}from"./InputLabel-xbg9A3mj.js";import{_ as s}from"./PrimaryButton-BUJknf5C.js";import{_ as l}from"./SecondaryButton-VyNp8kIv.js";import{f as t,k as o,o as i,e as d,a as r,L as n,O as m,I as u,M as c,U as p,$ as b,F as f,Q as v,H as y,b as g,J as x,V as h,x as w,aa as k,S as _}from"./vendor-DNM7Y6Xn.js";const q={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},j={class:"p-6"},S={class:"text-lg font-medium text-gray-900"},I={class:"space-y-6"},C={key:0,class:"flex items-center"},E=["id","checked","onChange","disabled"],L={key:0,class:"text-red-500"},B=["id","onUpdate:modelValue","required","disabled"],O={value:""},U=["value"],V=["id","value","onInput","required","disabled","rows","placeholder"],A=["id","type","value","onInput","required","disabled","min","max","maxlength","placeholder"],F={class:"mt-6 flex justify-end space-x-3"},M={__name:"FormModal7",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},fields:{type:Array,required:!0},form:{type:Object,required:!0},errors:{type:Object,default:()=>({})},submitting:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},options:{type:Object,required:!0,validator:e=>e&&"object"==typeof e}},emits:["close","submit","update:form"],setup(M,{emit:P}){const W=P,z=t(null),D=M;t({school_id:"",name:"",description:"",active:!0,copy_date:null,academic_year_id:"",semester_id:"",week_number:null,status:"draft",metadata:null,notes:""});const H=t({...D.form});o(()=>D.form,e=>{H.value={...e}},{deep:!0}),o(()=>D.show,e=>{e&&(H.value={...D.form})});const J=(e,a)=>{H.value[e]=a,W("update:form",{...H.value})},Q=()=>{W("submit",{form:H.value,onSuccess:()=>{R()},onError:e=>{}})},R=()=>{W("close")},Y=e=>{"Escape"===e.key&&D.show&&!D.submitting&&R()};i(()=>{document.addEventListener("keydown",Y)}),d(()=>{document.removeEventListener("keydown",Y)});const $=r(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"}[D.maxWidth])),G=r(()=>D.fields.map(e=>{var a,s,l;let t=e.options;if("select"===e.type)switch(e.name){case"status":t=(null==(a=D.options.statuses)?void 0:a.map(e=>({value:e.id||e.value,label:e.name||e.label})))||[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"archived",label:"Archived"}];break;case"school_id":t=(null==(s=D.options.schools)?void 0:s.map(e=>({value:e.id,label:e.name})))||[];break;case"academic_year_id":t=(null==(l=D.options.academicYears)?void 0:l.map(e=>({value:e.id,label:e.name})))||[]}return{type:"text",required:!1,placeholder:"",...e,options:t||[]}}));return(t,o)=>M.show?(u(),n("div",q,[c("div",{class:"fixed inset-0 transform transition-all",onClick:o[0]||(o[0]=e=>!M.submitting&&R())},o[1]||(o[1]=[c("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),c("div",{ref_key:"modalRef",ref:z,class:_(["mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:mx-auto",$.value])},[c("div",j,[c("h2",S,p(M.title),1),c("form",{onSubmit:b(Q,["prevent"]),class:"mt-6"},[c("div",I,[(u(!0),n(f,null,v(G.value,s=>(u(),n("div",{key:s.name,class:"mb-4"},["checkbox"===s.type?(u(),n("div",C,[c("input",{id:s.name,type:"checkbox",checked:H.value[s.name],onChange:e=>J(s.name,e.target.checked),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:M.submitting},null,40,E),g(a,{for:s.name,class:"ml-2"},{default:x(()=>[h(p(s.label),1)]),_:2},1032,["for"])])):(u(),n(f,{key:1},[g(a,{for:s.name},{default:x(()=>[h(p(s.label)+" ",1),s.required?(u(),n("span",L,"*")):m("",!0)]),_:2},1032,["for"]),"select"===s.type?w((u(),n("select",{key:0,id:s.name,"onUpdate:modelValue":e=>H.value[s.name]=e,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:s.required,disabled:M.submitting},[c("option",O,"Select "+p(s.label),1),(u(!0),n(f,null,v(s.options,e=>(u(),n("option",{key:e.value,value:e.value},p(e.label),9,U))),128))],8,B)),[[k,H.value[s.name]]]):"textarea"===s.type?(u(),n("textarea",{key:1,id:s.name,value:H.value[s.name],onInput:e=>J(s.name,e.target.value),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:s.required,disabled:M.submitting,rows:s.rows||3,placeholder:s.placeholder},null,40,V)):(u(),n("input",{key:2,id:s.name,type:s.type,value:H.value[s.name],onInput:e=>J(s.name,e.target.value),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:s.required,disabled:M.submitting,min:s.min,max:s.max,maxlength:s.maxLength,placeholder:s.placeholder},null,40,A))],64)),M.errors[s.name]?(u(),y(e,{key:2,message:M.errors[s.name],class:"mt-2"},null,8,["message"])):m("",!0)]))),128))]),c("div",F,[g(l,{type:"button",onClick:R,disabled:M.submitting},{default:x(()=>o[2]||(o[2]=[h(" Cancel ")])),_:1},8,["disabled"]),g(s,{type:"submit",disabled:M.submitting,class:_({"opacity-75 cursor-not-allowed":M.submitting})},{default:x(()=>[h(p(M.submitting?"Saving...":"Save"),1)]),_:1},8,["disabled","class"])])],32)])],2)])):m("",!0)}};export{M as default};
