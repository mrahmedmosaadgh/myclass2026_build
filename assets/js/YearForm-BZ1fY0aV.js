import{Q as e}from"./QSpace-qzKo_-If.js";import{C as a,d as t,g as l,Q as s,n as d}from"./app-BzjXrVp9.js";import{Q as o}from"./QForm-qY0qTz8Q.js";import{a6 as r,H as n,I as m,J as i,b as c,M as u,V as p,$ as f,y as _,L as g,O as b,U as v}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";const x={class:"col-12 col-md-4"},V={class:"col-12 col-md-4"},y={class:"col-12 col-md-4"},S={class:"row q-col-gutter-sm"},q={class:"col"},w={class:"col-auto"},h={key:0,class:"text-negative text-caption q-mt-xs"},j={__name:"YearForm",emits:["created"],setup(j,{emit:Y}){const $=Y,Q=r({start_date:"",end_date:"",name:""}),F=()=>{if(Q.start_date){const e=new Date(Q.start_date).getFullYear();if(Q.name&&Q.name!==`${e-1}-${e}`&&Q.name!==`${e}-${e+1}`||(Q.name=`${e}-${e+1}`),!Q.end_date){const e=new Date(Q.start_date);e.setFullYear(e.getFullYear()+1),Q.end_date=e.toISOString().split("T")[0]}}},D=()=>{Q.post(route("admin.academic_calendar.year.store"),{onSuccess:()=>{Q.reset(),$("created")}})};return(r,j)=>(m(),n(d,{flat:"",bordered:"",class:"q-mb-xl"},{default:i(()=>[c(t,{class:"row items-center q-pb-none"},{default:i(()=>[j[4]||(j[4]=u("div",{class:"text-h6 text-weight-bold"},"New Academic Year",-1)),c(e),c(a,{size:"sm",color:"grey-3","text-color":"grey-8",dense:""},{default:i(()=>j[3]||(j[3]=[p("SETTINGS")])),_:1})]),_:1}),c(t,null,{default:i(()=>[c(o,{onSubmit:f(D,["prevent"]),class:"row q-col-gutter-md"},{default:i(()=>[u("div",x,[c(l,{modelValue:_(Q).start_date,"onUpdate:modelValue":j[0]||(j[0]=e=>_(Q).start_date=e),type:"date",label:"Start Date",filled:"",dense:"",onChange:F,rules:[e=>!!e||"Required"]},null,8,["modelValue","rules"])]),u("div",V,[c(l,{modelValue:_(Q).end_date,"onUpdate:modelValue":j[1]||(j[1]=e=>_(Q).end_date=e),type:"date",label:"End Date",filled:"",dense:"",rules:[e=>!!e||"Required"]},null,8,["modelValue","rules"])]),u("div",y,[u("div",S,[u("div",q,[c(l,{modelValue:_(Q).name,"onUpdate:modelValue":j[2]||(j[2]=e=>_(Q).name=e),label:"Year Name",placeholder:"e.g. 2025-2026",filled:"",dense:"",class:"text-mono",rules:[e=>!!e||"Required"]},null,8,["modelValue","rules"])]),u("div",w,[c(s,{type:"submit",color:"primary",unelevated:"",loading:_(Q).processing,disable:_(Q).processing,icon:"add",label:"Create Year",class:"full-height text-weight-bold"},null,8,["loading","disable"])])]),_(Q).errors.name?(m(),g("div",h,v(_(Q).errors.name),1)):b("",!0)])]),_:1})]),_:1})]),_:1}))}};export{j as default};
