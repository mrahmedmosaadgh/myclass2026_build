import{u as e,c as l,Q as a,m as o,f as t,k as r,l as n,aP as i,b as s}from"./app-B77gjd5a.js";import{Q as d}from"./QTd-Cd1TbwhN.js";import{Q as u}from"./QTable-Dzgz30xz.js";import{Q as m}from"./QPagination-ZwCMST1R.js";import{Q as c}from"./QSelect-DB_tK-Lk.js";import{Q as p}from"./QForm-BQsH4F1U.js";import{a as b,f,r as v,af as y,M as g,J as V,b as k,N as q,K as x,I as j,Q as h,a0 as _,V as Q,F as U,R as w,y as C,a7 as P}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./QMarkupTable-xKG6mM4A.js";import"./QLinearProgress-B9hMkhRG.js";import"./use-fullscreen-Cf3Zl1YN.js";import"./rtl-Cr6c3OOr.js";const S={class:"py-12"},E={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},M={class:"row items-center justify-between q-mb-md"},T={__name:"Index",props:{records:Object,options:Object},setup(T){const N=e(),$=T,F=b(()=>{var e;return(null==(e=$.records)?void 0:e.data)||[]}),O=b(()=>{var e;return(null==(e=$.records)?void 0:e.links)||null}),A=f(1),D=f(!1),I=f(!1),R=f(null),B=v({}),H=[{name:"sequence",label:"Sequence",field:"sequence",sortable:!0,align:"left"},{name:"code",label:"Code",field:"code",sortable:!0,align:"left"},{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"from",label:"From",field:"from",sortable:!0,align:"left"},{name:"to",label:"To",field:"to",sortable:!0,align:"left"},{name:"main",label:"Main",field:"main",sortable:!0,align:"center",format:e=>e?"✓":"✗"},{name:"actions",label:"Actions",field:"actions",align:"center"}],J=[{name:"school_id",label:"School",type:"select",required:!0,options:b(()=>{var e,l;return(null==(l=null==(e=$.options)?void 0:e.schools)?void 0:l.map(e=>({value:e.id,label:e.name})))||[]})},{name:"code",label:"Code",type:"number",required:!0,min:1},{name:"sequence",label:"Sequence",type:"number",required:!0,min:1},{name:"name",label:"Name",type:"text"},{name:"main",label:"Main",type:"checkbox"},{name:"time_before",label:"Time Before (minutes)",type:"number",min:0},{name:"from",label:"From",type:"time"},{name:"to",label:"To",type:"time"},{name:"notes",label:"Notes",type:"textarea"}],K=(e=null)=>{R.value=e,Object.keys(B).forEach(e=>{delete B[e]}),e&&J.forEach(l=>{void 0!==e[l.name]&&(B[l.name]=e[l.name])}),I.value=!0},L=()=>{R.value=null,I.value=!1},z=e=>{e&&(window.location.href=route("period-details.index",{page:e}))};return(e,b)=>{const f=y("Head");return V(),g(U,null,[k(f,{title:"Period Details"}),q("div",S,[q("div",E,[k(o,{flat:"",bordered:"",class:"q-mb-md"},{default:x(()=>[k(l,null,{default:x(()=>[q("div",M,[b[4]||(b[4]=q("div",{class:"text-h5"},"Period Details",-1)),k(a,{color:"primary",icon:"add",label:"Add New",onClick:b[0]||(b[0]=e=>K())})]),k(u,{rows:F.value,columns:H,loading:D.value,"row-key":"id",flat:"",bordered:""},{"body-cell-actions":x(e=>[k(d,{props:e},{default:x(()=>[k(a,{icon:"edit",color:"primary",flat:"",dense:"",onClick:_(l=>K(e.row),["stop"])},null,8,["onClick"]),k(a,{icon:"delete",color:"negative",flat:"",dense:"",onClick:_(l=>{return a=e.row,void N.dialog({title:"Confirm",message:"Are you sure you want to delete this period detail?",cancel:!0,persistent:!0}).onOk(()=>{D.value=!0,P().delete(route("period-details.destroy",a.id),{onSuccess:()=>{N.notify({color:"positive",message:"Period detail deleted successfully",icon:"check"}),D.value=!1},onError:()=>{N.notify({color:"negative",message:"Error deleting period detail",icon:"error"}),D.value=!1}})});var a},["stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]),O.value&&O.value.last_page?(V(),j(m,{key:0,modelValue:A.value,"onUpdate:modelValue":[b[1]||(b[1]=e=>A.value=e),z],max:O.value.last_page||1,class:"q-mt-md"},null,8,["modelValue","max"])):h("",!0)]),_:1})]),_:1}),k(s,{modelValue:I.value,"onUpdate:modelValue":b[3]||(b[3]=e=>I.value=e),persistent:""},{default:x(()=>[k(o,{style:{"min-width":"500px"}},{default:x(()=>[k(l,null,{default:x(()=>[q("div",{class:"text-h6"},Q("Period Detail"))]),_:1}),k(l,null,{default:x(()=>[k(p,{class:"q-gutter-md"},{default:x(()=>[(V(),g(U,null,w(J,e=>q("div",{key:e.name},["text"===e.type?(V(),j(t,{key:0,modelValue:B[e.name],"onUpdate:modelValue":l=>B[e.name]=l,label:e.label,rules:e.required?[l=>!!l||`${e.label} is required`]:[],outlined:""},null,8,["modelValue","onUpdate:modelValue","label","rules"])):"number"===e.type?(V(),j(t,{key:1,modelValue:B[e.name],"onUpdate:modelValue":l=>B[e.name]=l,modelModifiers:{number:!0},label:e.label,type:"number",rules:e.required?[l=>!!l||`${e.label} is required`]:[],min:e.min,outlined:""},null,8,["modelValue","onUpdate:modelValue","label","rules","min"])):"textarea"===e.type?(V(),j(t,{key:2,modelValue:B[e.name],"onUpdate:modelValue":l=>B[e.name]=l,label:e.label,type:"textarea",rules:e.required?[l=>!!l||`${e.label} is required`]:[],outlined:""},null,8,["modelValue","onUpdate:modelValue","label","rules"])):"time"===e.type?(V(),j(t,{key:3,modelValue:B[e.name],"onUpdate:modelValue":l=>B[e.name]=l,label:e.label,type:"time",rules:e.required?[l=>!!l||`${e.label} is required`]:[],outlined:""},null,8,["modelValue","onUpdate:modelValue","label","rules"])):"checkbox"===e.type?(V(),j(r,{key:4,modelValue:B[e.name],"onUpdate:modelValue":l=>B[e.name]=l,label:e.label},null,8,["modelValue","onUpdate:modelValue","label"])):"select"===e.type?(V(),j(c,{key:5,modelValue:B[e.name],"onUpdate:modelValue":l=>B[e.name]=l,options:e.options,label:e.label,rules:e.required?[l=>!!l||`${e.label} is required`]:[],"emit-value":"","map-options":"",outlined:""},null,8,["modelValue","onUpdate:modelValue","options","label","rules"])):h("",!0)])),64))]),_:1})]),_:1}),k(n,{align:"right"},{default:x(()=>[C(k(a,{flat:"",label:"Cancel",color:"grey",onClick:L},null,512),[[i]]),k(a,{flat:"",label:"Save",color:"primary",onClick:b[2]||(b[2]=e=>{return l=B,D.value=!0,void(R.value?P(l).put(route("period-details.update",R.value.id),{onSuccess:()=>{N.notify({color:"positive",message:"Period detail updated successfully",icon:"check"}),L(),D.value=!1},onError:()=>{N.notify({color:"negative",message:"Error updating period detail",icon:"error"}),D.value=!1}}):P(l).post(route("period-details.store"),{onSuccess:()=>{N.notify({color:"positive",message:"Period detail created successfully",icon:"check"}),L(),D.value=!1},onError:()=>{N.notify({color:"negative",message:"Error creating period detail",icon:"error"}),D.value=!1}}));var l})})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])],64)}}};export{T as default};
