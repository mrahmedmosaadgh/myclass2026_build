import{Q as e}from"./QSpace-DLpWPxtA.js";import{f as l,b as a,t,G as o,d as s,o as u,aS as i,e as n}from"./app-CmR0nRZC.js";import{Q as r}from"./QSelect-CiD02PIi.js";import{Q as d}from"./QTd-BfUBupf2.js";import{Q as c}from"./QBadge-BkyG8a2n.js";import{Q as m}from"./QTable-twXUsOYs.js";import{Q as p}from"./QPagination-BFrQrhnm.js";import{r as f,f as b,a as v,N as _,J as y,b as j,K as g,I as q,O as w,R as Q,W as V,V as h,y as x,$ as k}from"./vendor-BWKGNkNB.js";import{s as C}from"./i18n-B0T1C7j3.js";import S from"./QuQuestionDisplay-BmGwdFAK.js";import D from"./QuQuestionForm-DYxLktqm.js";import U from"./QuAIGeneratorDialog-GDE98eQs.js";import"./offline-BzIlwqNM.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";import"./QMarkupTable-D7EQqc1V.js";import"./QLinearProgress-CQupa4Ep.js";import"./use-fullscreen-DVo7i5vz.js";import"./katex-DjUCNC-N.js";import"./katex-BXKQVcz-.js";import"./QForm-BUVwCwef.js";import"./QStepperNavigation-DxpGK3kM.js";import"./QStepper-BgYcKVtw.js";import"./use-panel-CkLmuBWI.js";import"./use-render-cache-CmTcazfP.js";const A={class:"q-pa-md"},T={class:"row items-center"},B={class:"row q-gutter-md"},I={class:"text-subtitle2"},L={class:"row justify-center"},z={__name:"QuQuestionList",props:{questions:Object,subjects:Array,filters:Object},setup(z){var G,P,F,M,N;const O=z,R=f({subject_id:(null==(G=O.filters)?void 0:G.subject_id)||(O.subjects.length>0?O.subjects[0].id:null),difficulty:(null==(P=O.filters)?void 0:P.difficulty)||null,bloom_level:(null==(F=O.filters)?void 0:F.bloom_level)||null,question_type:(null==(M=O.filters)?void 0:M.question_type)||null}),E=b(O.questions.current_page),J=b(!1),K=b(!1),W=b(!1),$=b(!1),H=b(null),X=b(null),Y=["easy","medium","hard"],Z=["remember","understand","apply","analyze","evaluate","create"],ee=[{value:"mcq",label:"Multiple Choice"},{value:"true_false",label:"True/False"},{value:"short",label:"Short Answer"},{value:"long",label:"Long Answer"}],le=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"question_text",label:"Question",field:"question_text",align:"left"},{name:"subject",label:"Subject",field:"subject",align:"left"},{name:"question_type",label:"Type",field:"question_type",align:"center"},{name:"difficulty",label:"Difficulty",field:"difficulty",align:"center"},{name:"bloom_level",label:"Bloom Level",field:"bloom_level",align:"center"},{name:"marks",label:"Marks",field:"marks",align:"center"},{name:"actions",label:"Actions",align:"center"}],ae=v(()=>({page:O.questions.current_page,rowsPerPage:O.questions.per_page,rowsNumber:O.questions.total})),te=()=>{k.get(C("qu-questions.index"),R,{preserveState:!0,preserveScroll:!0})},oe=e=>{k.get(C("qu-questions.index",{...R,page:e}),{},{preserveState:!0,preserveScroll:!0})};!(null==(N=O.filters)?void 0:N.subject_id)&&R.subject_id&&te();const se=e=>{oe(e.pagination.page)},ue=()=>{k.delete(C("qu-questions.destroy",X.value.id),{onSuccess:()=>{K.value=!1,X.value=null}})},ie=()=>{W.value=!1,k.reload({only:["questions"]})};return(f,b)=>(y(),_("div",A,[j(s,null,{default:g(()=>[j(l,null,{default:g(()=>[Q("div",T,[b[12]||(b[12]=Q("div",{class:"text-h5"},"Question Bank",-1)),j(e),j(a,{color:"secondary",label:"AI Generate",icon:"auto_awesome",onClick:b[0]||(b[0]=e=>$.value=!0),class:"q-mr-sm"},{default:g(()=>[j(t,null,{default:g(()=>b[11]||(b[11]=[V("Generate questions using AI")])),_:1})]),_:1}),j(a,{color:"primary",label:"Create Question",icon:"add",onClick:b[1]||(b[1]=e=>W.value=!0)})])]),_:1}),j(l,null,{default:g(()=>[Q("div",B,[j(r,{modelValue:R.subject_id,"onUpdate:modelValue":[b[2]||(b[2]=e=>R.subject_id=e),te],options:z.subjects,"option-value":"id","option-label":"name",label:"Subject",clearable:"","emit-value":"","map-options":"",style:{"min-width":"200px"}},null,8,["modelValue","options"]),j(r,{modelValue:R.difficulty,"onUpdate:modelValue":[b[3]||(b[3]=e=>R.difficulty=e),te],options:Y,label:"Difficulty",clearable:"",style:{"min-width":"150px"}},null,8,["modelValue"]),j(r,{modelValue:R.bloom_level,"onUpdate:modelValue":[b[4]||(b[4]=e=>R.bloom_level=e),te],options:Z,label:"Bloom Level",clearable:"",style:{"min-width":"150px"}},null,8,["modelValue"]),j(r,{modelValue:R.question_type,"onUpdate:modelValue":[b[5]||(b[5]=e=>R.question_type=e),te],options:ee,"option-value":"value","option-label":"label",label:"Question Type",clearable:"","emit-value":"","map-options":"",style:{"min-width":"150px"}},null,8,["modelValue"])])]),_:1}),j(l,null,{default:g(()=>[j(m,{rows:z.questions.data,columns:le,"row-key":"id",flat:"",bordered:"",pagination:ae.value,onRequest:se},{"body-cell-question_text":g(e=>[j(d,{props:e},{default:g(()=>{return[Q("div",I,h((l=e.row.question_text,a=60,l&&l.length>a?l.substring(0,a)+"...":l)),1)];var l,a}),_:2},1032,["props"])]),"body-cell-subject":g(e=>[j(d,{props:e},{default:g(()=>[j(o,{dense:"",color:"primary","text-color":"white"},{default:g(()=>{var l;return[V(h(null==(l=e.row.subject)?void 0:l.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-difficulty":g(e=>[j(d,{props:e},{default:g(()=>{return[j(c,{color:(l=e.row.difficulty,{easy:"green",medium:"orange",hard:"red"}[l]||"grey"),label:e.row.difficulty},null,8,["color","label"])];var l}),_:2},1032,["props"])]),"body-cell-bloom_level":g(e=>[j(d,{props:e},{default:g(()=>{return[e.row.bloom_level?(y(),q(o,{key:0,dense:"",icon:(l=e.row.bloom_level,{remember:"psychology",understand:"lightbulb",apply:"build",analyze:"analytics",evaluate:"fact_check",create:"auto_awesome"}[l]||"help"),color:"purple-3"},{default:g(()=>{return[V(h((l=e.row.bloom_level,l?l.charAt(0).toUpperCase()+l.slice(1):"")),1)];var l}),_:2},1032,["icon"])):w("",!0)];var l}),_:2},1032,["props"])]),"body-cell-actions":g(e=>[j(d,{props:e},{default:g(()=>[j(a,{flat:"",dense:"",round:"",color:"primary",icon:"visibility",onClick:l=>{return a=e.row,H.value=a,void(J.value=!0);var a}},{default:g(()=>[j(t,null,{default:g(()=>b[13]||(b[13]=[V("View")])),_:1})]),_:2},1032,["onClick"]),j(a,{flat:"",dense:"",round:"",color:"primary",icon:"edit",onClick:l=>{return a=e.row,void k.visit(C("qu-questions.edit",a.id));var a}},{default:g(()=>[j(t,null,{default:g(()=>b[14]||(b[14]=[V("Edit")])),_:1})]),_:2},1032,["onClick"]),j(a,{flat:"",dense:"",round:"",color:"negative",icon:"delete",onClick:l=>{return a=e.row,X.value=a,void(K.value=!0);var a}},{default:g(()=>[j(t,null,{default:g(()=>b[15]||(b[15]=[V("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]),_:1}),z.questions.last_page>1?(y(),q(l,{key:0,class:"q-pt-none"},{default:g(()=>[Q("div",L,[j(p,{modelValue:E.value,"onUpdate:modelValue":[b[6]||(b[6]=e=>E.value=e),oe],max:z.questions.last_page,"max-pages":7,"direction-links":"","boundary-links":""},null,8,["modelValue","max"])])]),_:1})):w("",!0)]),_:1}),j(n,{modelValue:J.value,"onUpdate:modelValue":b[7]||(b[7]=e=>J.value=e)},{default:g(()=>[j(s,{style:{"min-width":"500px"}},{default:g(()=>[j(l,null,{default:g(()=>b[16]||(b[16]=[Q("div",{class:"text-h6"},"Question Details",-1)])),_:1}),H.value?(y(),q(l,{key:0},{default:g(()=>[j(S,{question:H.value},null,8,["question"])]),_:1})):w("",!0),j(u,{align:"right"},{default:g(()=>[x(j(a,{flat:"",label:"Close",color:"primary"},null,512),[[i]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),j(n,{modelValue:K.value,"onUpdate:modelValue":b[8]||(b[8]=e=>K.value=e)},{default:g(()=>[j(s,null,{default:g(()=>[j(l,null,{default:g(()=>b[17]||(b[17]=[Q("div",{class:"text-h6"},"Confirm Delete",-1)])),_:1}),j(l,null,{default:g(()=>b[18]||(b[18]=[V(" Are you sure you want to delete this question? ")])),_:1}),j(u,{align:"right"},{default:g(()=>[x(j(a,{flat:"",label:"Cancel",color:"primary"},null,512),[[i]]),j(a,{flat:"",label:"Delete",color:"negative",onClick:ue})]),_:1})]),_:1})]),_:1},8,["modelValue"]),j(n,{modelValue:W.value,"onUpdate:modelValue":b[9]||(b[9]=e=>W.value=e),maximized:""},{default:g(()=>[j(s,null,{default:g(()=>[j(l,{class:"row items-center q-pb-none"},{default:g(()=>[b[19]||(b[19]=Q("div",{class:"text-h6"},"Create Question",-1)),j(e),x(j(a,{icon:"close",flat:"",round:"",dense:""},null,512),[[i]])]),_:1}),j(l,null,{default:g(()=>[j(D,{subjects:z.subjects,"selected-subject-id":R.subject_id,onSuccess:ie},null,8,["subjects","selected-subject-id"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),j(U,{modelValue:$.value,"onUpdate:modelValue":b[10]||(b[10]=e=>$.value=e),"subject-id":R.subject_id,subjects:z.subjects,onSuccess:ie},null,8,["modelValue","subject-id","subjects"])]))}};export{z as default};
