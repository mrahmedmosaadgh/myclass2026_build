import{f as e,h as a,Q as l,aS as t,b as s,d as i}from"./app-CCwy2VVq.js";import{Q as o}from"./QSelect-DZElG_R-.js";import{Q as u}from"./QDate-BEBuUBSV.js";import{Q as d}from"./QPopupProxy-CBTgV3cf.js";import{Q as n}from"./QForm-C5vfISjA.js";import{f as r,a as p,o as m,I as c,J as f,K as v,b as _,R as k,V as b,y as V}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";import"./use-render-cache-CmTcazfP.js";import"./use-datetime-9sLoSloQ.js";import"./date-suPbXNFw.js";const j={class:"text-h6"},y={class:"row items-center justify-end"},w={class:"row justify-end q-mt-md"},Q={__name:"TaskForm",props:{task:{type:Object,required:!0},parentTasks:{type:Array,default:()=>[]},classifications:{type:Array,default:()=>[]}},emits:["save","cancel"],setup(Q,{emit:T}){const h=Q,D=T,q=r({id:h.task.id||null,title:h.task.title||"",description:h.task.description||"",parent_id:h.task.parent_id||null,classification:h.task.classification||null,due_date:h.task.due_date||null,completed_at:h.task.completed_at||null}),x=p(()=>h.parentTasks.filter(e=>{if(q.value.id===e.id)return!1;let a=e;for(;a.parent_id;){if(a.parent_id===q.value.id)return!1;const e=h.parentTasks.find(e=>e.id===a.parent_id);if(!e)break;a=e}return!0})),U=p(()=>[...new Set([...h.classifications,q.value.classification].filter(Boolean))]),S=()=>{D("save",{...q.value})};return m(()=>{q.value={id:h.task.id||null,title:h.task.title||"",description:h.task.description||"",parent_id:h.task.parent_id||null,classification:h.task.classification||null,due_date:h.task.due_date||null,completed_at:h.task.completed_at||null}}),(r,p)=>(f(),c(i,{style:{width:"500px","max-width":"80vw"}},{default:v(()=>[_(e,null,{default:v(()=>[k("div",j,b(Q.task.id?"Edit Task":"New Task"),1)]),_:1}),_(e,null,{default:v(()=>[_(n,{onSubmit:S,class:"q-gutter-md"},{default:v(()=>[_(a,{modelValue:q.value.title,"onUpdate:modelValue":p[0]||(p[0]=e=>q.value.title=e),label:"Title *",rules:[e=>!!e||"Title is required"],autofocus:""},null,8,["modelValue","rules"]),_(a,{modelValue:q.value.description,"onUpdate:modelValue":p[1]||(p[1]=e=>q.value.description=e),label:"Description",type:"textarea",rows:"3"},null,8,["modelValue"]),_(o,{modelValue:q.value.parent_id,"onUpdate:modelValue":p[2]||(p[2]=e=>q.value.parent_id=e),options:x.value,label:"Parent Task","option-value":"id","option-label":"title","emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"]),_(o,{modelValue:q.value.classification,"onUpdate:modelValue":p[3]||(p[3]=e=>q.value.classification=e),options:U.value,label:"Classification","use-input":"","input-debounce":"0","new-value-mode":"add-unique",clearable:""},null,8,["modelValue","options"]),_(a,{modelValue:q.value.due_date,"onUpdate:modelValue":p[5]||(p[5]=e=>q.value.due_date=e),label:"Due Date",clearable:""},{append:v(()=>[_(l,{name:"event",class:"cursor-pointer"},{default:v(()=>[_(d,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:v(()=>[_(u,{modelValue:q.value.due_date,"onUpdate:modelValue":p[4]||(p[4]=e=>q.value.due_date=e),mask:"YYYY-MM-DD"},{default:v(()=>[k("div",y,[V(_(s,{label:"Close",color:"primary",flat:""},null,512),[[t]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),k("div",w,[V(_(s,{label:"Cancel",color:"grey-7",flat:"",onClick:p[6]||(p[6]=e=>r.$emit("cancel"))},null,512),[[t]]),_(s,{label:"Save",type:"submit",color:"primary"})])]),_:1})]),_:1})]),_:1}))}};export{Q as default};
