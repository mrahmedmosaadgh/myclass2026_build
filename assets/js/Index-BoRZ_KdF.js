import{r as e,u as l,d as a,f as t,b as s,h as o,Q as r,c as n,H as i,t as u,e as c,s as d,o as m}from"./app-4gpSDtVV.js";import{Q as v}from"./QSelect-Dgk9Cshp.js";import{Q as p}from"./QSpinnerDots-BRGXnI5e.js";import{Q as f}from"./QTd-D1GV5G3N.js";import{Q as g}from"./QTable-Yrq9AmcZ.js";import{f as b,a as _,N as x,J as C,b as y,z as w,a4 as h,K as k,R as V,V as j,I as D,F as Q,Q as q,W as L,O as T,$ as A}from"./vendor-BWKGNkNB.js";import{_ as S}from"./AppLayout-B3PyevP7.js";import M from"./CourseCard-vqlRhFiW.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";import"./QMarkupTable-B_ExttGO.js";import"./QLinearProgress-CBrm9QWG.js";import"./use-fullscreen-BdF06Cx5.js";const U={class:"q-pa-md"},$={class:"row items-center justify-between"},N={class:"q-gutter-sm"},E={class:"col-12 col-sm-6 col-md-3"},I={class:"text-h5 text-bold text-blue-8"},P={class:"col-12 col-sm-6 col-md-3"},R={class:"text-h5 text-bold text-green-8"},z={class:"col-12 col-sm-6 col-md-3"},F={class:"text-h5 text-bold text-orange-8"},B={class:"col-12 col-sm-6 col-md-3"},G={class:"text-h5 text-bold text-purple-8"},H={class:"row q-col-gutter-md items-center"},J={class:"col-12 col-md-6"},K={class:"col-12 col-md-3"},O={class:"col-12 col-md-3"},W={key:0,class:"text-center q-pa-lg"},Z={key:1,class:"row q-col-gutter-md"},X={key:3,class:"text-center text-grey-7 q-pa-xl"},Y={class:"text-subtitle2"},ee=e({__name:"Index",props:{courses:{type:Array,required:!0}},setup(e){const ee=e,le=l(),ae=b(!1),te=b(""),se=b("created_at"),oe=b("grid"),re=b(!1),ne=b(null),ie=[{label:"Recently Created",value:"created_at"},{label:"Name (A-Z)",value:"name"},{label:"Most Levels",value:"levels_count"}],ue=[{label:"Grid View",value:"grid"},{label:"Table View",value:"table"}],ce=[{name:"name",label:"Course Name",field:"name",align:"left",sortable:!0},{name:"description",label:"Description",field:"description",align:"left"},{name:"levels_count",label:"Levels",field:e=>{var l;return(null==(l=e.levels)?void 0:l.length)||0},align:"center"},{name:"creator",label:"Created By",field:e=>{var l;return(null==(l=e.creator)?void 0:l.name)||"Unknown"},align:"left"},{name:"created_at",label:"Created",field:"created_at",align:"left",format:e=>new Date(e).toLocaleDateString()},{name:"actions",label:"Actions",align:"center"}],de=_(()=>{let e=ee.courses;if(te.value){const l=te.value.toLowerCase();e=e.filter(e=>{var a;return e.name.toLowerCase().includes(l)||(null==(a=e.description)?void 0:a.toLowerCase().includes(l))})}return e.sort((e,l)=>{var a,t;return"name"===se.value?e.name.localeCompare(l.name):"levels_count"===se.value?((null==(a=l.levels)?void 0:a.length)||0)-((null==(t=e.levels)?void 0:t.length)||0):new Date(l.created_at)-new Date(e.created_at)}),e}),me=_(()=>ee.courses.reduce((e,l)=>{var a;return e+((null==(a=l.levels)?void 0:a.length)||0)},0)),ve=_(()=>ee.courses.filter(e=>{var l;return(null==(l=e.levels)?void 0:l.length)>0}).length),pe=_(()=>{const e=new Date;return e.setDate(e.getDate()-7),ee.courses.filter(l=>new Date(l.created_at)>e).length}),fe=e=>{A.visit(route("course-management.courses.edit",e.id))},ge=e=>{ne.value=e,re.value=!0},be=()=>{ne.value&&A.delete(route("course-management.courses.destroy",ne.value.id),{onSuccess:()=>{le.notify({type:"positive",message:"Course deleted successfully.",icon:"check_circle"}),re.value=!1,ne.value=null},onError:()=>{le.notify({type:"negative",message:"Failed to delete course.",icon:"error"})}})};return(l,b)=>(C(),x(Q,null,[y(w(h),{title:"Course Management"}),y(S,{title:"Course Management"},{default:k(()=>[V("div",U,[y(a,{flat:"",bordered:""},{default:k(()=>[y(t,null,{default:k(()=>[V("div",$,[b[9]||(b[9]=V("div",null,[V("div",{class:"text-h6"},"Course Management"),V("div",{class:"text-subtitle2"},"Manage educational courses, levels, sections, and lessons.")],-1)),V("div",N,[y(s,{flat:"",color:"purple",icon:"person_add",label:"Assign Teachers",onClick:b[0]||(b[0]=e=>l.$inertia.visit(l.route("course-management.teachers.index")))}),y(s,{flat:"",color:"orange",icon:"upload",label:"Import Excel",onClick:b[1]||(b[1]=e=>l.$inertia.visit(l.route("course-management.import.index")))}),y(s,{color:"primary",icon:"add",label:"New Course",onClick:b[2]||(b[2]=e=>l.$inertia.visit(l.route("course-management.courses.create")))})])])]),_:1}),y(t,{class:"row q-col-gutter-md"},{default:k(()=>[V("div",E,[y(a,{class:"bg-blue-1 text-center"},{default:k(()=>[y(t,null,{default:k(()=>[V("div",I,j(e.courses.length),1),b[10]||(b[10]=V("div",{class:"text-subtitle2 text-grey-8"},"Total Courses",-1))]),_:1})]),_:1})]),V("div",P,[y(a,{class:"bg-green-1 text-center"},{default:k(()=>[y(t,null,{default:k(()=>[V("div",R,j(me.value),1),b[11]||(b[11]=V("div",{class:"text-subtitle2 text-grey-8"},"Total Levels",-1))]),_:1})]),_:1})]),V("div",z,[y(a,{class:"bg-orange-1 text-center"},{default:k(()=>[y(t,null,{default:k(()=>[V("div",F,j(ve.value),1),b[12]||(b[12]=V("div",{class:"text-subtitle2 text-grey-8"},"Active Courses",-1))]),_:1})]),_:1})]),V("div",B,[y(a,{class:"bg-purple-1 text-center"},{default:k(()=>[y(t,null,{default:k(()=>[V("div",G,j(pe.value),1),b[13]||(b[13]=V("div",{class:"text-subtitle2 text-grey-8"},"Recent Courses",-1))]),_:1})]),_:1})])]),_:1}),y(t,null,{default:k(()=>[V("div",H,[V("div",J,[y(o,{modelValue:te.value,"onUpdate:modelValue":b[3]||(b[3]=e=>te.value=e),outlined:"",dense:"",placeholder:"Search courses...",clearable:""},{prepend:k(()=>[y(r,{name:"search"})]),_:1},8,["modelValue"])]),V("div",K,[y(v,{modelValue:se.value,"onUpdate:modelValue":b[4]||(b[4]=e=>se.value=e),options:ie,outlined:"",dense:"",label:"Sort by","emit-value":"","map-options":""},null,8,["modelValue"])]),V("div",O,[y(v,{modelValue:oe.value,"onUpdate:modelValue":b[5]||(b[5]=e=>oe.value=e),options:ue,outlined:"",dense:"",label:"View","emit-value":"","map-options":""},null,8,["modelValue"])])])]),_:1}),y(n),y(t,null,{default:k(()=>[ae.value?(C(),x("div",W,[y(p,{color:"primary",size:"40px"}),b[14]||(b[14]=V("p",null,"Loading courses...",-1))])):"grid"===oe.value&&de.value.length>0?(C(),x("div",Z,[(C(!0),x(Q,null,q(de.value,e=>(C(),x("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[y(M,{course:e,onEdit:fe,onDelete:ge},null,8,["course"])]))),128))])):"table"===oe.value&&de.value.length>0?(C(),D(g,{key:2,rows:de.value,columns:ce,"row-key":"id",flat:"",bordered:"",pagination:{rowsPerPage:10}},{"body-cell-actions":k(e=>[y(f,{props:e},{default:k(()=>[y(i,{flat:""},{default:k(()=>[y(s,{flat:"",dense:"",color:"primary",icon:"visibility",onClick:a=>l.$inertia.visit(l.route("course-management.courses.show",e.row.id))},{default:k(()=>[y(u,null,{default:k(()=>b[15]||(b[15]=[L("View Course")])),_:1})]),_:2},1032,["onClick"]),y(s,{flat:"",dense:"",color:"orange",icon:"edit",onClick:l=>fe(e.row)},{default:k(()=>[y(u,null,{default:k(()=>b[16]||(b[16]=[L("Edit Course")])),_:1})]),_:2},1032,["onClick"]),y(s,{flat:"",dense:"",color:"negative",icon:"delete",onClick:l=>ge(e.row)},{default:k(()=>[y(u,null,{default:k(()=>b[17]||(b[17]=[L("Delete Course")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows"])):(C(),x("div",X,[y(r,{name:"school",size:"4em"}),b[18]||(b[18]=V("p",{class:"q-mt-md"},"No courses found matching your criteria.",-1)),y(s,{color:"primary",label:"Create First Course",onClick:b[6]||(b[6]=e=>l.$inertia.visit(l.route("course-management.courses.create")))})]))]),_:1})]),_:1})]),y(c,{modelValue:re.value,"onUpdate:modelValue":b[8]||(b[8]=e=>re.value=e),persistent:""},{default:k(()=>[y(a,null,{default:k(()=>[y(t,{class:"row items-center"},{default:k(()=>[y(d,{icon:"warning",color:"negative","text-color":"white"}),b[19]||(b[19]=V("span",{class:"q-ml-sm"},"Are you sure you want to delete this course?",-1))]),_:1}),ne.value?(C(),D(t,{key:0},{default:k(()=>[V("div",Y,"Course: "+j(ne.value.name),1),b[20]||(b[20]=V("div",{class:"text-caption text-grey-7"},"This action cannot be undone.",-1))]),_:1})):T("",!0),y(m,{align:"right"},{default:k(()=>[y(s,{flat:"",label:"Cancel",color:"primary",onClick:b[7]||(b[7]=e=>re.value=!1)}),y(s,{flat:"",label:"Delete",color:"negative",onClick:be})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64))}},[["__scopeId","data-v-c3e757fa"]]);export{ee as default};
