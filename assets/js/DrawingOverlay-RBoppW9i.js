import{o as e,d as a}from"./app-ggGwxJON.js";import o from"./DrawingCanvas-LPj7FZdV.js";import r from"./DrawingToolbar-CQouNTtJ.js";import{f as l,a as n,N as s,J as t,b as u,K as i,Q as v,W as p,V as d,B as g}from"./vendor-nQjeLEvd.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";import"./QBtnToggle-CO55A_1i.js";import"./QColor-Gten_QEt.js";import"./QSlider-rHpK1y__.js";import"./QTabs-DMYUh0Ok.js";import"./rtl-Cr6c3OOr.js";import"./QTab-Dz6RnWyq.js";import"./QTabPanels-BH2gx17B.js";import"./use-panel-BQ7QSG7B.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-DWPrbrYB.js";import"./QPopupProxy-B_TgS9uL.js";const c={class:"drawing-overlay-wrapper"},m={key:0,class:"drawing-mode-indicator"},w=e({__name:"DrawingOverlay",emits:["drawing-state-changed"],setup(e,{expose:w,emit:b}){const j=b,f=l(null),P=l(!1),k=l("pen"),Q=l("#FF0000"),T=l(3),h=l("transparent"),y=l(1),U=l(1),_=l(0),z=n(()=>{const e=window.location.pathname.match(/\/lesson-presentation\/student\/(\d+)/);return e?`drawing-lesson-${e[1]}`:"drawing-pages"}),C=()=>{P.value=!P.value,P.value||(h.value="transparent"),j("drawing-state-changed",P.value)},D=e=>{h.value=e},x=()=>{f.value&&f.value.undo()},N=()=>{_.value++},S=()=>{y.value>1&&y.value--},B=()=>{y.value++,f.value&&f.value.addNewPage(y.value),y.value>U.value&&(U.value=y.value)},M=()=>{U.value++,y.value=U.value,f.value&&f.value.addNewPage(y.value)},A=e=>{},F=e=>{e>U.value&&(U.value=e)};return w({toggleDrawing:C,isActive:P}),(e,l)=>(t(),s("div",c,[u(o,{ref_key:"canvasRef",ref:f,"is-active":P.value,"drawing-tool":k.value,"pen-color":Q.value,"pen-size":T.value,"background-color":h.value,"current-page":y.value,"clear-trigger":_.value,"storage-key":z.value,onStrokesUpdated:A,onPagesUpdated:F,onPageBackgroundChanged:D},null,8,["is-active","drawing-tool","pen-color","pen-size","background-color","current-page","clear-trigger","storage-key"]),u(r,{"is-active":P.value,"drawing-tool":k.value,"onUpdate:drawingTool":l[0]||(l[0]=e=>k.value=e),"pen-color":Q.value,"onUpdate:penColor":l[1]||(l[1]=e=>Q.value=e),"pen-size":T.value,"onUpdate:penSize":l[2]||(l[2]=e=>T.value=e),"background-color":h.value,"onUpdate:backgroundColor":l[3]||(l[3]=e=>h.value=e),"current-page":y.value,"total-pages":U.value,onToggle:C,onUndo:x,onClear:N,onPrevPage:S,onNextPage:B,onAddPage:M},null,8,["is-active","drawing-tool","pen-color","pen-size","background-color","current-page","total-pages"]),u(g,{name:"fade"},{default:i(()=>[P.value?(t(),s("div",m,[u(a,{name:"pen"===k.value?"brush":"cleaning_services",size:"sm",class:"q-mr-xs"},null,8,["name"]),p(" "+d("pen"===k.value?"Drawing Mode":"Eraser Mode")+" - Page "+d(y.value),1)])):v("",!0)]),_:1})]))}},[["__scopeId","data-v-61825dae"]]);export{w as default};
