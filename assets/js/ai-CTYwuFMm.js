import{f as e,L as a,I as s,b as l,V as o,M as r,O as t,F as n,Q as u,S as i,$ as d,x as p,ab as c,a1 as v,U as f,Z as b,n as y}from"./vendor-DNM7Y6Xn.js";import m from"./purify.es-C2Ba6vpb.js";import g from"./OpenAiChat-CIEMQZEv.js";import{p as x}from"./app-BXm70mdJ.js";import"./offline-BzIlwqNM.js";import"./i18n-CBOKL2HS.js";import"./ui-BP0GJNn5.js";const w={class:"flex flex-col h-full"},h=["innerHTML"],j={key:0,class:"animate-pulse bg-gray-50 rounded-lg p-4 max-w-3xl mx-auto"},_={class:"border-t p-4 bg-white"},S=["onKeydown","disabled"],k=["disabled"],I=x({__name:"ai",setup(x){const I=e([]),T=e(""),H=e(!1),K=e(null),L=e(null),M=async()=>{await y(),K.value&&(K.value.scrollTop=K.value.scrollHeight)},z=e=>{e.shiftKey||A()},A=async()=>{var e;const a=T.value.trim();if(a&&!H.value)try{H.value=!0,I.value.push({role:"user",content:m.sanitize(a)}),T.value="",await M();const e=await b.post("/api/ai-proxy",{text:a});e.data.output&&(I.value.push({role:"assistant",content:m.sanitize(e.data.output)}),await M())}catch(s){console.error("API Error:",s),I.value.push({role:"assistant",content:"Sorry, I encountered an error. Please try again."})}finally{H.value=!1,null==(e=L.value)||e.focus()}};return(e,b)=>(s(),a("div",w,[l(g),b[2]||(b[2]=o(" -----------------============------------- ")),b[3]||(b[3]=r("br",null,null,-1)),r("div",{class:"flex-1 overflow-y-auto p-4 space-y-4",ref_key:"messagesContainer",ref:K},[(s(!0),a(n,null,u(I.value,(e,l)=>(s(),a("div",{key:l,class:i(["rounded-lg p-4 max-w-3xl mx-auto","user"===e.role?"bg-blue-50":"bg-gray-50"])},[r("div",{class:"prose max-w-none",innerHTML:e.content},null,8,h)],2))),128)),H.value?(s(),a("div",j,b[1]||(b[1]=[r("div",{class:"h-4 bg-gray-200 rounded w-3/4"},null,-1)]))):t("",!0)],512),r("div",_,[r("form",{onSubmit:d(A,["prevent"]),class:"flex gap-2"},[p(r("textarea",{"onUpdate:modelValue":b[0]||(b[0]=e=>T.value=e),onKeydown:v(d(z,["prevent"]),["enter"]),ref_key:"inputField",ref:L,disabled:H.value,class:i(["flex-1 rounded-lg border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",{"opacity-50":H.value}]),rows:"2",placeholder:"Type your message..."},null,42,S),[[c,T.value]]),r("button",{type:"submit",disabled:H.value||!T.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"},f(H.value?"Sending...":"Send"),9,k)],32)])]))}},[["__scopeId","data-v-f11d8141"]]);export{I as default};
