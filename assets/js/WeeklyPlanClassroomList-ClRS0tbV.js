const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/html2pdf-XpwrmVpz.js","assets/js/vendor-CUZ9QTQV.js"])))=>i.map(i=>d[i]);
import{o as e,d as l,m as a,Q as s,p as t,b as n,_ as o,C as r}from"./app-Buylb2AA.js";import{Q as d}from"./QTd-B6OVqMbX.js";import{Q as i}from"./QBadge-Dt5ch-CZ.js";import{Q as c}from"./QEditor-Fz6VdeJ7.js";import{Q as u}from"./QTable-BmRSX4cl.js";import{Q as m,a as p}from"./QToolbar-BC_oHanJ.js";import y from"./StatusBadge-DM3cSt1q.js";import{u as w}from"./i18n-CP46N9fu.js";import{f as v,a as b,L as k,I as h,O as f,b as _,F as g,Q as x,M as P,U as j,y as C,J as L,V as M,$ as T,H as V,R as N}from"./vendor-CUZ9QTQV.js";import"./offline-BzIlwqNM.js";import"./ui-LrZmvB2D.js";import"./use-fullscreen-DO2N8akv.js";import"./QMarkupTable-Cd9X66xB.js";import"./QSelect-CcTxzM62.js";import"./rtl-Cr6c3OOr.js";import"./QLinearProgress-B7jHdoB9.js";const q={class:"classrooms-grid"},Q={class:"classroom-header bg-primary text-white q-pa-md"},H={class:"q-ma-none flex items-center q-gutter-sm"},z={key:0,class:"inline-edit-cell-vertical"},D={class:"editor-header"},E={class:"text-caption text-weight-medium q-ml-xs"},$={key:1},O={key:0,class:"text-info html-content"},B=["innerHTML"],U={key:1,class:"text-grey-5"},S={key:0,class:"inline-edit-cell-vertical"},R={class:"editor-header"},A={class:"text-caption text-weight-medium q-ml-xs"},F={key:1},I={key:0,class:"text-warning html-content"},W=["innerHTML"],J={key:1,class:"text-grey-5"},Z={key:0,class:"inline-edit-cell-vertical"},G={class:"editor-header"},K={class:"text-caption text-weight-medium q-ml-xs"},X={key:1},Y=["innerHTML"],ee={key:1,class:"text-grey-5"},le={key:0,class:"text-center q-pa-xl"},ae={class:"text-h6 text-grey-7 q-mt-md"},se={class:"text-grey-6"},te={class:"text-h2 y-12"},ne={class:"text-h6 text-grey-7"},oe={class:"no-print"},re={class:"mobile-cards-container q-pa-md"},de={class:"day-title"},ie={class:"mobile-day-table"},ce={class:"period-col"},ue={class:"subject-col"},me={class:"cw-col"},pe={class:"hw-notes-col"},ye={class:"period-cell"},we={class:"period-badge"},ve={class:"subject-cell"},be={class:"subject-text"},ke={class:"content-cell-mobile"},he=["innerHTML"],fe={key:1,class:"text-grey-5 text-center"},_e={class:"content-cell-mobile"},ge={key:0,class:"content-section"},xe={class:"content-label"},Pe=["innerHTML"],je={key:1,class:"content-section"},Ce={class:"content-label"},Le=["innerHTML"],Me={key:2,class:"text-grey-5 text-center"},Te=e({__name:"WeeklyPlanClassroomList",props:{plans:{type:Array,required:!0,default:()=>[]},days:{type:Object,required:!0},inlineEditMode:{type:Boolean,default:!1},copiedData:{type:Object,default:null},weekNumber:{type:[Number,String],default:1},semesterNumber:{type:[Number,String],default:1}},emits:["edit","save","paste"],setup(e,{expose:Te,emit:Ve}){const{t:Ne}=w(),qe=e,Qe=Ve,He=v(!1),ze=[["bold","italic","underline"],["link"],["unordered","ordered"],["undo","redo"]],De=b(()=>{const e={};return qe.plans.forEach(l=>{var a,s;const t=null==(s=null==(a=l.schedule)?void 0:a.cst)?void 0:s.classroom_name;e[t]||(e[t]={name:t,plans:[]}),e[t].plans.push({id:l.id,data:l})}),Object.values(e).forEach(e=>{e.plans.sort((e,l)=>{var a,s,t,n;const o=((null==(a=e.data.schedule)?void 0:a.day)||0)-((null==(s=l.data.schedule)?void 0:s.day)||0);return 0!==o?o:((null==(t=e.data.schedule)?void 0:t.period_number)||0)-((null==(n=l.data.schedule)?void 0:n.period_number)||0)})}),Object.values(e).sort((e,l)=>e.name.localeCompare(l.name))}),Ee=b(()=>{const e={};return qe.plans.forEach(l=>{var a;const s=null==(a=l.schedule)?void 0:a.day;e[s]||(e[s]={dayNumber:s,dayName:qe.days[s]||Ne(`weeklyPlans.fullDays.${s}`)||`Day ${s}`,plans:[]}),e[s].plans.push(l)}),Object.values(e).forEach(e=>{e.plans.sort((e,l)=>{var a,s;return((null==(a=e.schedule)?void 0:a.period_number)||0)-((null==(s=l.schedule)?void 0:s.period_number)||0)})}),Object.values(e).sort((e,l)=>e.dayNumber-l.dayNumber)}),$e=b(()=>[{name:"day",label:Ne("weeklyPlans.day"),field:e=>{var l,a;return qe.days[null==(l=e.data.schedule)?void 0:l.day]||Ne(`weeklyPlans.fullDays.${null==(a=e.data.schedule)?void 0:a.day}`)||"N/A"},align:"left"},{name:"period",label:Ne("weeklyPlans.period"),field:e=>{var l;return null==(l=e.data.schedule)?void 0:l.period_number},align:"center"},{name:"subject",label:Ne("weeklyPlans.subject"),field:e=>{var l,a;return null==(a=null==(l=e.data.schedule)?void 0:l.cst)?void 0:a.subject_name},align:"left"},{name:"status",label:Ne("weeklyPlans.status"),field:e=>e.data.status,align:"left"},{name:"cw",label:Ne("weeklyPlans.classwork"),field:e=>e.data.cw,align:"left"},{name:"hw",label:Ne("weeklyPlans.homework"),field:e=>e.data.hw,align:"left"},{name:"notes",label:Ne("weeklyPlans.notes"),field:e=>e.data.notes,align:"left"}]),Oe=()=>{window.print()},Be=async()=>{var e;const l=(await o(async()=>{const{default:e}=await import("./html2pdf-XpwrmVpz.js").then(e=>e.h);return{default:e}},__vite__mapDeps([0,1]))).default,a=document.querySelector(".mobile-cards-container");if(!a)return;const s={margin:[10,10],filename:`${((null==(e=De.value[0])?void 0:e.name)||"Weekly_Plans").replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_-]/g,"")}_Week_${qe.weekNumber}_Semester_${qe.semesterNumber}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,letterRendering:!0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"},pagebreak:{mode:["avoid-all","css","legacy"]}};l().set(s).from(a).save()},Ue=e=>{Qe("save",e)},Se=(e,l)=>{if(!qe.copiedData)return;const a=qe.copiedData[l];void 0!==a&&(e[l]=a,Qe("save",e))},Re=(e,l)=>{if(!e)return"";const a=e.replace(/<[^>]*>/g,"");if(a.length<=l)return e;return a.substring(0,l)+"..."};return Te({openMobilePrint:()=>{He.value=!0},downloadPDF:Be}),(o,w)=>(h(),k("div",q,[(h(!0),k(g,null,x(De.value,n=>(h(),k("div",{key:n.name,class:"classroom-card q-mb-lg"},[_(a,{flat:"",bordered:""},{default:L(()=>[P("div",Q,[P("h5",H,[_(l,{name:"meeting_room"}),M(" "+j(n.name)+" ",1),_(r,{dense:"",label:`${n.plans.length} ${C(Ne)("weeklyPlans.classes")}`,"text-color":"white"},null,8,["label"])])]),_(u,{flat:"",bordered:"",rows:n.plans,columns:$e.value,"row-key":"id",dense:"",class:"classroom-table",onRowClick:w[3]||(w[3]=(e,l)=>o.$emit("edit",l.data))},{"body-cell-day":L(l=>[_(d,{props:l},{default:L(()=>{var a;return[P("strong",null,j(e.days[null==(a=l.row.data.schedule)?void 0:a.day]||"N/A"),1)]}),_:2},1032,["props"])]),"body-cell-period":L(e=>[_(d,{props:e,class:"text-center"},{default:L(()=>{var l;return[_(i,{label:`P${null==(l=e.row.data.schedule)?void 0:l.period_number}`},null,8,["label"])]}),_:2},1032,["props"])]),"body-cell-subject":L(e=>[_(d,{props:e},{default:L(()=>{var l,a,s,t,n,o;return[P("span",{class:"subject-badge",style:N({backgroundColor:null==(a=null==(l=e.row.data.schedule)?void 0:l.cst)?void 0:a.c_bg,color:null==(t=null==(s=e.row.data.schedule)?void 0:s.cst)?void 0:t.c_text})},j(null==(o=null==(n=e.row.data.schedule)?void 0:n.cst)?void 0:o.subject_name),5)]}),_:2},1032,["props"])]),"body-cell-status":L(e=>[_(d,{props:e},{default:L(()=>[_(y,{status:e.row.data.status},null,8,["status"])]),_:2},1032,["props"])]),"body-cell-cw":L(a=>[_(d,{props:a,class:"content-preview",onClick:w[0]||(w[0]=T(()=>{},["stop"]))},{default:L(()=>{var n;return[e.inlineEditMode?(h(),k("div",z,[P("div",D,[_(l,{name:"school",size:"xs",color:"blue"}),P("span",E,j(C(Ne)("weeklyPlans.classwork")),1),(null==(n=e.copiedData)?void 0:n.cw)?(h(),V(s,{key:0,icon:"content_paste",size:"sm",flat:"",dense:"",color:"primary",onClick:e=>Se(a.row.data,"cw")},{default:L(()=>[_(t,null,{default:L(()=>[M(j(C(Ne)("weeklyPlans.teacher.pasteCw")),1)]),_:1})]),_:2},1032,["onClick"])):f("",!0)]),_(c,{modelValue:a.row.data.cw,"onUpdate:modelValue":e=>a.row.data.cw=e,"min-height":"5rem",toolbar:ze,onBlur:e=>Ue(a.row.data),class:"inline-editor"},null,8,["modelValue","onUpdate:modelValue","onBlur"])])):(h(),k("div",$,[a.row.data.cw?(h(),k("div",O,[_(l,{name:"school",size:"xs"}),P("span",{class:"q-ml-xs",innerHTML:Re(a.row.data.cw,50)},null,8,B)])):(h(),k("span",U,"-"))]))]}),_:2},1032,["props"])]),"body-cell-hw":L(a=>[_(d,{props:a,class:"content-preview",onClick:w[1]||(w[1]=T(()=>{},["stop"]))},{default:L(()=>{var n;return[e.inlineEditMode?(h(),k("div",S,[P("div",R,[_(l,{name:"home_work",size:"xs",color:"orange"}),P("span",A,j(C(Ne)("weeklyPlans.homework")),1),(null==(n=e.copiedData)?void 0:n.hw)?(h(),V(s,{key:0,icon:"content_paste",size:"sm",flat:"",dense:"",color:"primary",onClick:e=>Se(a.row.data,"hw")},{default:L(()=>[_(t,null,{default:L(()=>[M(j(C(Ne)("weeklyPlans.teacher.pasteHw")),1)]),_:1})]),_:2},1032,["onClick"])):f("",!0)]),_(c,{modelValue:a.row.data.hw,"onUpdate:modelValue":e=>a.row.data.hw=e,"min-height":"5rem",toolbar:ze,onBlur:e=>Ue(a.row.data),class:"inline-editor"},null,8,["modelValue","onUpdate:modelValue","onBlur"])])):(h(),k("div",F,[a.row.data.hw?(h(),k("div",I,[_(l,{name:"home_work",size:"xs"}),P("span",{class:"q-ml-xs",innerHTML:Re(a.row.data.hw,50)},null,8,W)])):(h(),k("span",J,"-"))]))]}),_:2},1032,["props"])]),"body-cell-notes":L(a=>[_(d,{props:a,class:"content-preview",onClick:w[2]||(w[2]=T(()=>{},["stop"]))},{default:L(()=>{var n;return[e.inlineEditMode?(h(),k("div",Z,[P("div",G,[_(l,{name:"note",size:"xs",color:"grey"}),P("span",K,j(C(Ne)("weeklyPlans.notes")),1),(null==(n=e.copiedData)?void 0:n.notes)?(h(),V(s,{key:0,icon:"content_paste",size:"sm",flat:"",dense:"",color:"primary",onClick:e=>Se(a.row.data,"notes")},{default:L(()=>[_(t,null,{default:L(()=>[M(j(C(Ne)("weeklyPlans.teacher.pasteNotes")),1)]),_:1})]),_:2},1032,["onClick"])):f("",!0)]),_(c,{modelValue:a.row.data.notes,"onUpdate:modelValue":e=>a.row.data.notes=e,"min-height":"5rem",toolbar:ze,onBlur:e=>Ue(a.row.data),class:"inline-editor"},null,8,["modelValue","onUpdate:modelValue","onBlur"])])):(h(),k("div",X,[a.row.data.notes?(h(),k("span",{key:0,class:"text-info html-content",innerHTML:Re(a.row.data.notes,40)},null,8,Y)):(h(),k("span",ee,"-"))]))]}),_:2},1032,["props"])]),_:2},1032,["rows","columns"])]),_:2},1024)]))),128)),De.value&&0!==De.value.length?f("",!0):(h(),k("div",le,[_(l,{name:"meeting_room",size:"64px",color:"grey-5"}),P("p",ae,j(C(Ne)("weeklyPlans.teacher.noClassrooms")),1),P("p",se,j(C(Ne)("weeklyPlans.teacher.selectToView")),1)])),_(n,{modelValue:He.value,"onUpdate:modelValue":w[5]||(w[5]=e=>He.value=e),maximized:""},{default:L(()=>[_(a,{class:"mobile-print-card"},{default:L(()=>[_(m,{class:"mobile-print-header sticky-top"},{default:L(()=>[_(p,{class:"text-center"},{default:L(()=>{var l;return[P("div",te,j((null==(l=De.value[0])?void 0:l.name)||C(Ne)("weeklyPlans.weeklyLearningPlan")),1),P("div",ne,j(C(Ne)("weeklyPlans.week"))+" "+j(e.weekNumber)+" - "+j(C(Ne)("weeklyPlans.semester"))+" "+j(e.semesterNumber),1)]}),_:1}),P("div",oe,[_(s,{icon:"picture_as_pdf",class:"mx-12",flat:"",round:"",dense:"",onClick:Be,color:"red-7"},{default:L(()=>[_(t,null,{default:L(()=>[M(j(C(Ne)("weeklyPlans.teacher.downloadPdf")),1)]),_:1})]),_:1}),_(s,{icon:"print",class:"mx-12",flat:"",round:"",dense:"",onClick:Oe},{default:L(()=>[_(t,null,{default:L(()=>[M(j(C(Ne)("weeklyPlans.print")),1)]),_:1})]),_:1}),_(s,{icon:"close",flat:"",round:"",dense:"",onClick:w[4]||(w[4]=e=>He.value=!1)},{default:L(()=>[_(t,null,{default:L(()=>[M(j(C(Ne)("common.close")||C(Ne)("weeklyPlans.close")||"Close"),1)]),_:1})]),_:1})])]),_:1}),P("div",re,[(h(!0),k(g,null,x(Ee.value,a=>(h(),k("div",{key:a.dayNumber,class:"day-group q-mb-lg"},[P("div",de,j(C(Ne)("weeklyPlans.week"))+" "+j(e.weekNumber)+" - "+j(a.dayName),1),P("table",ie,[P("thead",null,[P("tr",null,[P("th",ce,j(C(Ne)("weeklyPlans.period")),1),P("th",ue,j(C(Ne)("weeklyPlans.subject")),1),P("th",me,j(C(Ne)("weeklyPlans.classwork")),1),P("th",pe,j(C(Ne)("weeklyPlans.homework"))+" / "+j(C(Ne)("weeklyPlans.notes")),1)])]),P("tbody",null,[(h(!0),k(g,null,x(a.plans,e=>{var a,s,t;return h(),k("tr",{key:e.id},[P("td",ye,[P("div",we,j(null==(a=e.schedule)?void 0:a.period_number),1)]),P("td",ve,[P("div",be,j(null==(t=null==(s=e.schedule)?void 0:s.cst)?void 0:t.subject_name),1)]),P("td",ke,[e.cw?(h(),k("div",{key:0,class:"content-text",innerHTML:e.cw},null,8,he)):(h(),k("div",fe,"-"))]),P("td",_e,[e.hw?(h(),k("div",ge,[P("div",xe,[_(l,{name:"home_work",size:"xs",color:"orange"}),P("span",null,j(C(Ne)("weeklyPlans.teacher.hwLabel")),1)]),P("div",{class:"content-text",innerHTML:e.hw},null,8,Pe)])):f("",!0),e.notes?(h(),k("div",je,[P("div",Ce,[_(l,{name:"note",size:"xs",color:"grey-7"}),P("span",null,j(C(Ne)("weeklyPlans.teacher.notesLabel")),1)]),P("div",{class:"content-text",innerHTML:e.notes},null,8,Le)])):f("",!0),e.hw||e.notes?f("",!0):(h(),k("div",Me," - "))])])}),128))])])]))),128))])]),_:1})]),_:1},8,["modelValue"])]))}},[["__scopeId","data-v-41bd4b5e"]]);export{Te as default};
