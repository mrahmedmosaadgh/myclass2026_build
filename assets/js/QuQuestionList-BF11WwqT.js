import{Q as e}from"./QSpace-qzKo_-If.js";import{d as l,Q as a,q as t,C as o,n as s,m as u,aD as i,b as n}from"./app-BzjXrVp9.js";import{Q as r}from"./QSelect-CciNNEfD.js";import{Q as d}from"./QTd-DUSBgVC_.js";import{Q as c}from"./QBadge-D2ciqrkO.js";import{Q as m}from"./QTable-BcXT6C-J.js";import{Q as p}from"./QPagination-D1LOS2GP.js";import{r as b,f,a as v,L as _,I as y,b as j,J as g,H as q,O as Q,M as w,V,U as h,x,_ as k}from"./vendor-EI0FRBVb.js";import{s as C}from"./i18n-BbKXhR_S.js";import S from"./QuQuestionDisplay-BSB9hExp.js";import U from"./QuQuestionForm-CUu5LKXF.js";import D from"./QuAIGeneratorDialog-B79tdm2I.js";import"./offline-BzIlwqNM.js";import"./ui-B__oX9pK.js";import"./rtl-Cr6c3OOr.js";import"./QMarkupTable-_1wJRVO3.js";import"./QLinearProgress-L5RdawR6.js";import"./use-fullscreen-BnDnBhbA.js";import"./katex-BAATRBTg.js";import"./katex-BXKQVcz-.js";import"./QForm-qY0qTz8Q.js";import"./QStepperNavigation-DqX_2M3M.js";import"./QStepper-B0FvPoMm.js";import"./use-panel-DdQZ_Vdk.js";import"./use-render-cache-CmTcazfP.js";const A={class:"q-pa-md"},T={class:"row items-center"},L={class:"row q-gutter-md"},M={class:"text-subtitle2"},I={class:"row justify-center"},P={__name:"QuQuestionList",props:{questions:Object,subjects:Array,filters:Object},setup(P){var B,G,O,z,F;const N=P,R=b({subject_id:(null==(B=N.filters)?void 0:B.subject_id)||(N.subjects.length>0?N.subjects[0].id:null),difficulty:(null==(G=N.filters)?void 0:G.difficulty)||null,bloom_level:(null==(O=N.filters)?void 0:O.bloom_level)||null,question_type:(null==(z=N.filters)?void 0:z.question_type)||null}),E=f(N.questions.current_page),H=f(!1),J=f(!1),$=f(!1),K=f(!1),W=f(null),X=f(null),Y=["easy","medium","hard"],Z=["remember","understand","apply","analyze","evaluate","create"],ee=[{value:"mcq",label:"Multiple Choice"},{value:"true_false",label:"True/False"},{value:"short",label:"Short Answer"},{value:"long",label:"Long Answer"}],le=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"question_text",label:"Question",field:"question_text",align:"left"},{name:"subject",label:"Subject",field:"subject",align:"left"},{name:"question_type",label:"Type",field:"question_type",align:"center"},{name:"difficulty",label:"Difficulty",field:"difficulty",align:"center"},{name:"bloom_level",label:"Bloom Level",field:"bloom_level",align:"center"},{name:"marks",label:"Marks",field:"marks",align:"center"},{name:"actions",label:"Actions",align:"center"}],ae=v(()=>({page:N.questions.current_page,rowsPerPage:N.questions.per_page,rowsNumber:N.questions.total})),te=()=>{k.get(C("qu-questions.index"),R,{preserveState:!0,preserveScroll:!0})},oe=e=>{k.get(C("qu-questions.index",{...R,page:e}),{},{preserveState:!0,preserveScroll:!0})};!(null==(F=N.filters)?void 0:F.subject_id)&&R.subject_id&&te();const se=e=>{oe(e.pagination.page)},ue=()=>{k.delete(C("qu-questions.destroy",X.value.id),{onSuccess:()=>{J.value=!1,X.value=null}})},ie=()=>{$.value=!1,k.reload({only:["questions"]})};return(b,f)=>(y(),_("div",A,[j(s,null,{default:g(()=>[j(l,null,{default:g(()=>[w("div",T,[f[12]||(f[12]=w("div",{class:"text-h5"},"Question Bank",-1)),j(e),j(a,{color:"secondary",label:"AI Generate",icon:"auto_awesome",onClick:f[0]||(f[0]=e=>K.value=!0),class:"q-mr-sm"},{default:g(()=>[j(t,null,{default:g(()=>f[11]||(f[11]=[V("Generate questions using AI")])),_:1})]),_:1}),j(a,{color:"primary",label:"Create Question",icon:"add",onClick:f[1]||(f[1]=e=>$.value=!0)})])]),_:1}),j(l,null,{default:g(()=>[w("div",L,[j(r,{modelValue:R.subject_id,"onUpdate:modelValue":[f[2]||(f[2]=e=>R.subject_id=e),te],options:P.subjects,"option-value":"id","option-label":"name",label:"Subject",clearable:"","emit-value":"","map-options":"",style:{"min-width":"200px"}},null,8,["modelValue","options"]),j(r,{modelValue:R.difficulty,"onUpdate:modelValue":[f[3]||(f[3]=e=>R.difficulty=e),te],options:Y,label:"Difficulty",clearable:"",style:{"min-width":"150px"}},null,8,["modelValue"]),j(r,{modelValue:R.bloom_level,"onUpdate:modelValue":[f[4]||(f[4]=e=>R.bloom_level=e),te],options:Z,label:"Bloom Level",clearable:"",style:{"min-width":"150px"}},null,8,["modelValue"]),j(r,{modelValue:R.question_type,"onUpdate:modelValue":[f[5]||(f[5]=e=>R.question_type=e),te],options:ee,"option-value":"value","option-label":"label",label:"Question Type",clearable:"","emit-value":"","map-options":"",style:{"min-width":"150px"}},null,8,["modelValue"])])]),_:1}),j(l,null,{default:g(()=>[j(m,{rows:P.questions.data,columns:le,"row-key":"id",flat:"",bordered:"",pagination:ae.value,onRequest:se},{"body-cell-question_text":g(e=>[j(d,{props:e},{default:g(()=>{return[w("div",M,h((l=e.row.question_text,a=60,l&&l.length>a?l.substring(0,a)+"...":l)),1)];var l,a}),_:2},1032,["props"])]),"body-cell-subject":g(e=>[j(d,{props:e},{default:g(()=>[j(o,{dense:"",color:"primary","text-color":"white"},{default:g(()=>{var l;return[V(h(null==(l=e.row.subject)?void 0:l.name),1)]}),_:2},1024)]),_:2},1032,["props"])]),"body-cell-difficulty":g(e=>[j(d,{props:e},{default:g(()=>{return[j(c,{color:(l=e.row.difficulty,{easy:"green",medium:"orange",hard:"red"}[l]||"grey"),label:e.row.difficulty},null,8,["color","label"])];var l}),_:2},1032,["props"])]),"body-cell-bloom_level":g(e=>[j(d,{props:e},{default:g(()=>{return[e.row.bloom_level?(y(),q(o,{key:0,dense:"",icon:(l=e.row.bloom_level,{remember:"psychology",understand:"lightbulb",apply:"build",analyze:"analytics",evaluate:"fact_check",create:"auto_awesome"}[l]||"help"),color:"purple-3"},{default:g(()=>{return[V(h((l=e.row.bloom_level,l?l.charAt(0).toUpperCase()+l.slice(1):"")),1)];var l}),_:2},1032,["icon"])):Q("",!0)];var l}),_:2},1032,["props"])]),"body-cell-actions":g(e=>[j(d,{props:e},{default:g(()=>[j(a,{flat:"",dense:"",round:"",color:"primary",icon:"visibility",onClick:l=>{return a=e.row,W.value=a,void(H.value=!0);var a}},{default:g(()=>[j(t,null,{default:g(()=>f[13]||(f[13]=[V("View")])),_:1})]),_:2},1032,["onClick"]),j(a,{flat:"",dense:"",round:"",color:"primary",icon:"edit",onClick:l=>{return a=e.row,void k.visit(C("qu-questions.edit",a.id));var a}},{default:g(()=>[j(t,null,{default:g(()=>f[14]||(f[14]=[V("Edit")])),_:1})]),_:2},1032,["onClick"]),j(a,{flat:"",dense:"",round:"",color:"negative",icon:"delete",onClick:l=>{return a=e.row,X.value=a,void(J.value=!0);var a}},{default:g(()=>[j(t,null,{default:g(()=>f[15]||(f[15]=[V("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination"])]),_:1}),P.questions.last_page>1?(y(),q(l,{key:0,class:"q-pt-none"},{default:g(()=>[w("div",I,[j(p,{modelValue:E.value,"onUpdate:modelValue":[f[6]||(f[6]=e=>E.value=e),oe],max:P.questions.last_page,"max-pages":7,"direction-links":"","boundary-links":""},null,8,["modelValue","max"])])]),_:1})):Q("",!0)]),_:1}),j(n,{modelValue:H.value,"onUpdate:modelValue":f[7]||(f[7]=e=>H.value=e)},{default:g(()=>[j(s,{style:{"min-width":"500px"}},{default:g(()=>[j(l,null,{default:g(()=>f[16]||(f[16]=[w("div",{class:"text-h6"},"Question Details",-1)])),_:1}),W.value?(y(),q(l,{key:0},{default:g(()=>[j(S,{question:W.value},null,8,["question"])]),_:1})):Q("",!0),j(u,{align:"right"},{default:g(()=>[x(j(a,{flat:"",label:"Close",color:"primary"},null,512),[[i]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),j(n,{modelValue:J.value,"onUpdate:modelValue":f[8]||(f[8]=e=>J.value=e)},{default:g(()=>[j(s,null,{default:g(()=>[j(l,null,{default:g(()=>f[17]||(f[17]=[w("div",{class:"text-h6"},"Confirm Delete",-1)])),_:1}),j(l,null,{default:g(()=>f[18]||(f[18]=[V(" Are you sure you want to delete this question? ")])),_:1}),j(u,{align:"right"},{default:g(()=>[x(j(a,{flat:"",label:"Cancel",color:"primary"},null,512),[[i]]),j(a,{flat:"",label:"Delete",color:"negative",onClick:ue})]),_:1})]),_:1})]),_:1},8,["modelValue"]),j(n,{modelValue:$.value,"onUpdate:modelValue":f[9]||(f[9]=e=>$.value=e),maximized:""},{default:g(()=>[j(s,null,{default:g(()=>[j(l,{class:"row items-center q-pb-none"},{default:g(()=>[f[19]||(f[19]=w("div",{class:"text-h6"},"Create Question",-1)),j(e),x(j(a,{icon:"close",flat:"",round:"",dense:""},null,512),[[i]])]),_:1}),j(l,null,{default:g(()=>[j(U,{subjects:P.subjects,"selected-subject-id":R.subject_id,onSuccess:ie},null,8,["subjects","selected-subject-id"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),j(D,{modelValue:K.value,"onUpdate:modelValue":f[10]||(f[10]=e=>K.value=e),"subject-id":R.subject_id,subjects:P.subjects,onSuccess:ie},null,8,["modelValue","subject-id","subjects"])]))}};export{P as default};
