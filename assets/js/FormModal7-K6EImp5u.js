import{_ as e}from"./InputError-CPHDefI0.js";import{_ as a}from"./InputLabel-C_PsaydV.js";import{_ as s}from"./PrimaryButton-DNYxrPcC.js";import{_ as l}from"./SecondaryButton-BH3tlEGv.js";import{f as t,k as o,o as i,e as d,a as r,L as n,O as m,I as u,M as c,U as p,$ as b,F as f,Q as v,H as y,b as g,J as x,V as h,x as w,aa as k,S as _}from"./vendor-CUZ9QTQV.js";const q={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},j={class:"p-6"},S={class:"text-lg font-medium text-gray-900"},I={class:"space-y-6"},E={key:0,class:"flex items-center"},C=["id","checked","onChange","disabled"],L={key:0,class:"text-red-500"},B=["id","onUpdate:modelValue","required","disabled"],O={value:""},F=["value"],U=["id","value","onInput","required","disabled","rows","placeholder"],V=["id","type","value","onInput","required","disabled","min","max","maxlength","placeholder"],A={class:"mt-6 flex justify-end space-x-3"},D={__name:"FormModal7",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},fields:{type:Array,required:!0},form:{type:Object,required:!0},errors:{type:Object,default:()=>({})},submitting:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},options:{type:Object,required:!0,validator:e=>e&&"object"==typeof e}},emits:["close","submit","update:form"],setup(D,{emit:M}){const P=M,W=t(null),z=D;t({school_id:"",name:"",description:"",active:!0,copy_date:null,academic_year_id:"",semester_id:"",week_number:null,status:"draft",metadata:null,notes:""});const G=t({...z.form});o(()=>z.form,e=>{G.value={...e}},{deep:!0}),o(()=>z.show,e=>{e&&(G.value={...z.form})});const H=(e,a)=>{G.value[e]=a,P("update:form",{...G.value})},J=()=>{P("submit",{form:G.value,onSuccess:()=>{Q()},onError:e=>{}})},Q=()=>{P("close")},R=e=>{"Escape"===e.key&&z.show&&!z.submitting&&Q()};i(()=>{document.addEventListener("keydown",R)}),d(()=>{document.removeEventListener("keydown",R)});const Y=r(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"}[z.maxWidth])),$=r(()=>z.fields.map(e=>{var a,s,l;let t=e.options;if("select"===e.type)switch(e.name){case"status":t=(null==(a=z.options.statuses)?void 0:a.map(e=>({value:e.id||e.value,label:e.name||e.label})))||[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"archived",label:"Archived"}];break;case"school_id":t=(null==(s=z.options.schools)?void 0:s.map(e=>({value:e.id,label:e.name})))||[];break;case"academic_year_id":t=(null==(l=z.options.academicYears)?void 0:l.map(e=>({value:e.id,label:e.name})))||[]}return{type:"text",required:!1,placeholder:"",...e,options:t||[]}}));return(t,o)=>D.show?(u(),n("div",q,[c("div",{class:"fixed inset-0 transform transition-all",onClick:o[0]||(o[0]=e=>!D.submitting&&Q())},o[1]||(o[1]=[c("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),c("div",{ref_key:"modalRef",ref:W,class:_(["mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:mx-auto",Y.value])},[c("div",j,[c("h2",S,p(D.title),1),c("form",{onSubmit:b(J,["prevent"]),class:"mt-6"},[c("div",I,[(u(!0),n(f,null,v($.value,s=>(u(),n("div",{key:s.name,class:"mb-4"},["checkbox"===s.type?(u(),n("div",E,[c("input",{id:s.name,type:"checkbox",checked:G.value[s.name],onChange:e=>H(s.name,e.target.checked),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:D.submitting},null,40,C),g(a,{for:s.name,class:"ml-2"},{default:x(()=>[h(p(s.label),1)]),_:2},1032,["for"])])):(u(),n(f,{key:1},[g(a,{for:s.name},{default:x(()=>[h(p(s.label)+" ",1),s.required?(u(),n("span",L,"*")):m("",!0)]),_:2},1032,["for"]),"select"===s.type?w((u(),n("select",{key:0,id:s.name,"onUpdate:modelValue":e=>G.value[s.name]=e,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:s.required,disabled:D.submitting},[c("option",O,"Select "+p(s.label),1),(u(!0),n(f,null,v(s.options,e=>(u(),n("option",{key:e.value,value:e.value},p(e.label),9,F))),128))],8,B)),[[k,G.value[s.name]]]):"textarea"===s.type?(u(),n("textarea",{key:1,id:s.name,value:G.value[s.name],onInput:e=>H(s.name,e.target.value),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:s.required,disabled:D.submitting,rows:s.rows||3,placeholder:s.placeholder},null,40,U)):(u(),n("input",{key:2,id:s.name,type:s.type,value:G.value[s.name],onInput:e=>H(s.name,e.target.value),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:s.required,disabled:D.submitting,min:s.min,max:s.max,maxlength:s.maxLength,placeholder:s.placeholder},null,40,V))],64)),D.errors[s.name]?(u(),y(e,{key:2,message:D.errors[s.name],class:"mt-2"},null,8,["message"])):m("",!0)]))),128))]),c("div",A,[g(l,{type:"button",onClick:Q,disabled:D.submitting},{default:x(()=>o[2]||(o[2]=[h(" Cancel ")])),_:1},8,["disabled"]),g(s,{type:"submit",disabled:D.submitting,class:_({"opacity-75 cursor-not-allowed":D.submitting})},{default:x(()=>[h(p(D.submitting?"Saving...":"Save"),1)]),_:1},8,["disabled","class"])])],32)])],2)])):m("",!0)}};export{D as default};
