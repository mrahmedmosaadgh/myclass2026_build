import{a as e,f as a,N as l,J as s,b as o,O as r,z as t,a4 as i,I as n,Q as d,V as m,K as c,W as u,F as p,_ as b,$ as y}from"./vendor-BJyC5yAd.js";import{_ as v}from"./PrimaryButton-VxYbFNzZ.js";import{_ as g}from"./Pagination-DHDKPpmt.js";import{_ as h}from"./DataTable-BhjoT8_w.js";import{_ as f}from"./FormModal-DljUQcpE.js";import"./LucideIcon-B0gGlzx4.js";import"./createLucideIcon-a-HRSG4f.js";import"./printer-MKOkmkKr.js";import"./image-kFeW2ff6.js";import"./Modal-CxCPTite.js";import"./app-DTyzyps1.js";import"./offline-BzIlwqNM.js";import"./i18n-BDgsCcB6.js";import"./ui-DFn3cvMd.js";import"./SecondaryButton-C4Qwh3yJ.js";const j={class:"py-12"},x={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},_={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},k={class:"flex justify-between mb-6"},w="Classrooms",S="/admin/classroom",A={__name:"Index",props:{records:Object,schools:Array,stages:Array,grades:Array},setup(A){const C=A,q=[{name:"name",label:"Name",type:"text",required:!0},{name:"capacity",label:"Capacity",type:"number",required:!0,min:1},{name:"school_id",label:"School",type:"select",required:!0,options:e(()=>C.schools.map(e=>({value:e.id,label:e.name})))},{name:"stage_id",label:"Stage",type:"select",required:!0,options:e(()=>C.stages.map(e=>({value:e.id,label:e.name})))},{name:"grade_id",label:"Grade",type:"select",required:!0,options:e(()=>C.grades.map(e=>({value:e.id,label:e.name})))}],$=[{key:"name",label:"Name"},{key:"capacity",label:"Capacity"},{key:"school.name",label:"School"},{key:"stage.name",label:"Stage"},{key:"grade.name",label:"Grade"},{key:"actions",label:"Actions"}],I=a(!1),N=a(null),B=e(()=>C.records.data),D=e(()=>C.records.links),P=(e=null)=>{N.value=e,I.value=!0},E=()=>{I.value=!1,N.value=null},F=a(!1),G=()=>{y.reload({only:["records"],preserveScroll:!0,preserveState:!0})},L=async({form:e,onSuccess:a,onError:l})=>{var s,o,r;if(F.value)return;F.value=!0;const t=null==(s=N.value)?void 0:s.id,i=t?`${S}/${t}`:S;try{await b.post(i,{...t&&{_method:"PUT"},...e}),a(),E(),G()}catch(n){(null==(r=null==(o=n.response)?void 0:o.data)?void 0:r.errors)?l(n.response.data.errors):l({error:["An unexpected error occurred"]})}finally{F.value=!1}},M=e=>{confirm("Are you sure you want to delete this classroom?")&&b.delete(`${S}/${e.id}`).then(e=>{e.data.message&&alert(e.data.message),G()}).catch(e=>{console.error("Deletion error:",e),alert("An error occurred while deleting the record.")})};return(e,a)=>(s(),l(p,null,[o(t(i),{title:w}),r("div",j,[r("div",x,[r("div",_,[r("div",k,[r("h2",{class:"text-2xl font-bold"},m(w)),o(v,{onClick:a[0]||(a[0]=e=>P())},{default:c(()=>a[1]||(a[1]=[u("Add New")])),_:1})]),o(h,{columns:$,items:B.value,loading:!1,onEdit:P,onDelete:M},null,8,["items"]),D.value?(s(),n(g,{key:0,links:D.value},null,8,["links"])):d("",!0)])])]),o(f,{show:I.value,title:"Classroom",fields:q,editing:N.value,onClose:E,onSubmitted:L},null,8,["show","editing"])],64))}};export{A as default};
