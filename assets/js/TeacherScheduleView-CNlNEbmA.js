import{r as e,u as l,Q as a,h as t,j as s,k as o,l as i,m as u,p as r,b as n,d,t as m,f as c,e as p,s as v,o as f,aS as b}from"./app-DlLesFGi.js";import{Q as h}from"./QSelect-BTh0khse.js";import{Q as y}from"./QBadge-IdEcTs8C.js";import{Q as g,a as w}from"./QToolbar-CJXOhUim.js";import{Q as j}from"./QSpace-BK_PGLKv.js";import{a as _,f as k,N as V,J as x,b as S,R as Q,z as q,a4 as C,y as T,W as P,V as U,I as D,K as I,ag as A,ah as z,O as W,Y as F,F as O}from"./vendor-BWKGNkNB.js";import R from"./TimetableGrid-BZzP2f7A.js";import N from"./reward_sys-CIn6N6CT.js";import{u as M}from"./i18n-B0T1C7j3.js";import"./offline-BzIlwqNM.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";import"./TimetableCell-eXwVKfLu.js";import"./QBtnToggle-iboNob1y.js";import"./QTab-CYxYFXBq.js";import"./QTabs-BClcf-CB.js";import"./QTabPanel-DXa1fEFB.js";import"./use-panel-BqxRbB7W.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanels-CTgZWG49.js";import"./QuizMode-BeI1yfls.js";import"./QuizNumpad-BoO7KE-q.js";import"./PointsDisplaySettings-DPPzcAOY.js";import"./TimerRandomTools-DNUzQwdo.js";import"./QCircularProgress-DK0g-hyO.js";import"./ClassroomHelper-C1qKyV5s.js";import"./QTd-BU_S4ffH.js";import"./QTable-BIAJAIui.js";import"./QMarkupTable-CzIo4GGA.js";import"./QLinearProgress-CX6G9yBK.js";import"./use-fullscreen-BQHoXYBI.js";import"./StudentCard-CbFaRqLr.js";import"./AvatarManager-DLzJfNWg.js";import"./CameraCapture-Dpv7Dqyp.js";import"./QFile-Cve4lAri.js";import"./use-file-DHXgO9tP.js";import"./QImg-BzYsb9cL.js";import"./noise-WU7qH7c7.js";const $={class:"q-pa-md teacher-schedule-view"},B={class:"row items-center q-mb-lg justify-between print-hide"},Y={class:"col-auto"},K={class:"q-ma-none text-weight-bold"},E={class:"col-auto row q-gutter-sm print-hide"},G={class:"row q-gutter-sm items-center bg-amber-1 q-pa-sm rounded-borders q-mr-md"},H={class:"row q-gutter-sm"},J={class:"print-only text-center q-mb-lg"},L={key:0,class:"text-subtitle2 bg-white text-primary px-2 py-0.5 rounded shadow-sm opacity-90"},X={class:"w-full h-full"},Z={class:"fixed-bottom-right q-ma-md",style:{bottom:"20px",right:"20px","z-index":"9999",position:"fixed"}},ee={class:"q-ml-sm"},le=e({__name:"TeacherScheduleView",props:{teacher:{type:Object,required:!0},schedules:{type:Array,default:()=>[]},subjects:{type:Array,default:()=>[]},classrooms:{type:Array,default:()=>[]},readonly:{type:Boolean,default:!0}},setup(e){const le=e,{t:ae}=M(),te=_(()=>`${le.teacher.name} - Schedule`),se=k([]),oe=k([]),ie=k([]),ue=k(!0),re=k(localStorage.getItem("teacher-schedule-selected-date")||(new Date).toISOString().split("T")[0]),ne=k(parseInt(localStorage.getItem("teacher-schedule-selected-week"))||null),de=Array.from({length:17},(e,l)=>({label:`Week ${l+1}`,value:l+1})),me=_(()=>re.value&&ne.value),ce=()=>{re.value&&localStorage.setItem("teacher-schedule-selected-date",re.value),ne.value&&localStorage.setItem("teacher-schedule-selected-week",ne.value.toString())},pe=[{label:ae("weeklyPlans.fullDays.1"),value:1},{label:ae("weeklyPlans.fullDays.2"),value:2},{label:ae("weeklyPlans.fullDays.3"),value:3},{label:ae("weeklyPlans.fullDays.4"),value:4},{label:ae("weeklyPlans.fullDays.5"),value:5},{label:ae("weeklyPlans.fullDays.6"),value:6},{label:ae("weeklyPlans.fullDays.7"),value:7}],ve=_(()=>ie.value.length>0?ie.value:[1,2,3,4,5,6,7]),fe=()=>{window.print()},be=k(!1),he=k(null),ye=k(!1),ge=k(!1),we=k(!1),je=k(!1),_e=k(null),ke=l(),Ve=e=>{if(!re.value||!ne.value)return void ke.notify({message:"Please select both Date and Week before opening the Reward System",color:"warning",position:"top",icon:"warning",timeout:3e3});const l={...e,date:re.value,week:ne.value};if(he.value)return he.value.classroomId===l.classroomId&&he.value.period===l.period&&he.value.date===l.date?(be.value=!0,void(ge.value=!1)):(_e.value=l,void(je.value=!0));xe(l)},xe=e=>{he.value=e,ye.value=!0,be.value=!0,ge.value=!1},Se=()=>{ge.value=!0,ke.notify({icon:"stars",color:"amber",textColor:"black",message:"Session minimized. Click the floating button to restore.",position:"bottom-right",timeout:2500})},Qe=()=>{ge.value=!1,be.value=!0},qe=()=>{we.value=!0},Ce=()=>{be.value=!1,ge.value=!1,he.value=null,ye.value=!1},Te=()=>{he.value=null,setTimeout(()=>{xe(_e.value),_e.value=null},100)},Pe=e=>{var l,a,t,s,o,i;if(!e)return"";return`${(null==(t=null==(a=null==(l=e.schedule)?void 0:l.cst)?void 0:a.classroom)?void 0:t.name)||"Classroom"} - ${(null==(i=null==(o=null==(s=e.schedule)?void 0:s.cst)?void 0:o.subject)?void 0:i.name)||"Subject"} (P${e.period})`};return(l,_)=>(x(),V(O,null,[S(q(C),{title:te.value},null,8,["title"]),Q("div",$,[Q("div",B,[Q("div",Y,[Q("h4",K,[S(a,{name:"school",class:"q-mr-sm",color:"primary"}),P(" "+U(e.teacher.name),1)]),_[9]||(_[9]=Q("div",{class:"text-h6 text-grey-7 q-mt-sm"}," Teacher Schedule ",-1))]),Q("div",E,[Q("div",G,[S(a,{name:"event",color:"amber-8",size:"sm"}),S(t,{modelValue:re.value,"onUpdate:modelValue":[_[0]||(_[0]=e=>re.value=e),ce],type:"date",dense:"",outlined:"",label:"Select Date",style:{"min-width":"150px"},"bg-color":"white"},{prepend:I(()=>[S(a,{name:"event"})]),_:1},8,["modelValue"]),S(h,{modelValue:ne.value,"onUpdate:modelValue":[_[1]||(_[1]=e=>ne.value=e),ce],options:q(de),dense:"",outlined:"",label:"Select Week",style:{"min-width":"120px"},"bg-color":"white","emit-value":"","map-options":""},{prepend:I(()=>[S(a,{name:"calendar_view_week"})]),_:1},8,["modelValue","options"]),me.value?(x(),D(y,{key:1,color:"positive",class:"q-ml-sm"},{default:I(()=>_[11]||(_[11]=[P(" Ready ")])),_:1})):(x(),D(y,{key:0,color:"warning",class:"q-ml-sm"},{default:I(()=>_[10]||(_[10]=[P(" Select Date & Week ")])),_:1}))]),Q("div",H,[S(h,{modelValue:se.value,"onUpdate:modelValue":_[2]||(_[2]=e=>se.value=e),options:e.subjects,"option-value":"id","option-label":"name",multiple:"",dense:"",outlined:"",label:"Filter Subjects",style:{"min-width":"180px"},"emit-value":"","map-options":""},{option:I(({itemProps:e,opt:l,selected:a,toggleOption:t})=>[S(s,A(z(e)),{default:I(()=>[S(o,null,{default:I(()=>[S(i,null,{default:I(()=>[P(U(l.name),1)]),_:2},1024)]),_:2},1024),S(o,{side:""},{default:I(()=>[S(u,{"model-value":a,"onUpdate:modelValue":e=>t(l)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),S(h,{modelValue:oe.value,"onUpdate:modelValue":_[3]||(_[3]=e=>oe.value=e),options:e.classrooms,"option-value":"id","option-label":"name",multiple:"",dense:"",outlined:"",label:"Filter Classrooms",style:{"min-width":"180px"},"emit-value":"","map-options":""},{option:I(({itemProps:e,opt:l,selected:a,toggleOption:t})=>[S(s,A(z(e)),{default:I(()=>[S(o,null,{default:I(()=>[S(i,null,{default:I(()=>[P(U(l.name),1)]),_:2},1024)]),_:2},1024),S(o,{side:""},{default:I(()=>[S(u,{"model-value":a,"onUpdate:modelValue":e=>t(l)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),S(h,{modelValue:ie.value,"onUpdate:modelValue":_[4]||(_[4]=e=>ie.value=e),options:pe,multiple:"",dense:"",outlined:"",label:"Filter Days",style:{"min-width":"150px"},"emit-value":"","map-options":""},{option:I(({itemProps:e,opt:l,selected:a,toggleOption:t})=>[S(s,A(z(e)),{default:I(()=>[S(o,null,{default:I(()=>[S(i,null,{default:I(()=>[P(U(l.label),1)]),_:2},1024)]),_:2},1024),S(o,{side:""},{default:I(()=>[S(u,{"model-value":a,"onUpdate:modelValue":e=>t(l)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"]),S(r,{modelValue:ue.value,"onUpdate:modelValue":_[5]||(_[5]=e=>ue.value=e),label:"Full Names",dense:"",color:"primary"},null,8,["modelValue"])]),S(n,{color:"primary",icon:"print",label:"Print",outline:"",onClick:fe})])]),Q("div",J,[Q("h3",null,U(e.teacher.name)+" - Schedule",1),_[12]||(_[12]=Q("p",null,"Weekly Assignments",-1))]),S(d,{flat:"",bordered:""},{default:I(()=>[S(R,{schedules:e.schedules,readonly:!0,"show-classroom":!0,"hide-teacher":!0,"visible-days":ve.value,"filter-subject-ids":se.value,"filter-classroom-ids":oe.value,"show-full-name":ue.value,class:"teacher-grid",onOpenReward:Ve,"reward-system-disabled":!me.value},null,8,["schedules","visible-days","filter-subject-ids","filter-classroom-ids","show-full-name","reward-system-disabled"])]),_:1}),S(p,{modelValue:be.value,"onUpdate:modelValue":_[6]||(_[6]=e=>be.value=e),maximized:"",seamless:ge.value,"no-backdrop-dismiss":!0,"transition-show":"slide-up","transition-hide":"slide-down",persistent:!0},{default:I(()=>[T(S(d,{class:"flex flex-col"},{default:I(()=>[S(g,{class:"bg-primary text-white shadow-2"},{default:I(()=>[S(n,{flat:"",round:"",dense:"",icon:"stars",class:"q-mr-sm"}),S(w,{class:"flex items-center gap-2"},{default:I(()=>[_[13]||(_[13]=Q("span",{class:"text-weight-bold"},"Reward System",-1)),he.value?(x(),V("span",L,U(Pe(he.value)),1)):W("",!0)]),_:1}),S(j),_[15]||(_[15]=Q("div",{id:"dialog-header-actions",class:"row items-center q-mr-sm"},null,-1)),S(n,{flat:"",round:"",dense:"",icon:"remove",onClick:Se},{default:I(()=>[S(m,null,{default:I(()=>_[14]||(_[14]=[P("Minimize (Keep Session Active)")])),_:1})]),_:1}),S(n,{flat:"",round:"",dense:"",icon:"close",onClick:qe})]),_:1}),S(c,{class:"flex-1 overflow-auto q-pa-none bg-blue-50"},{default:I(()=>{var e,l,a,t,s,o;return[T(Q("div",X,[ye.value?(x(),D(N,{key:0,"classroom-id":(null==(e=he.value)?void 0:e.classroomId)||0,"subject-id":(null==(l=he.value)?void 0:l.subjectId)||0,period:(null==(a=he.value)?void 0:a.period)||0,date:(null==(t=he.value)?void 0:t.date)||"",week:(null==(s=he.value)?void 0:s.week)||0,"initial-tab":"string"==typeof(null==(o=he.value)?void 0:o.initialTab)?he.value.initialTab:"positive","is-dialog":!0},null,8,["classroom-id","subject-id","period","date","week","initial-tab"])):W("",!0)],512),[[F,he.value]])]}),_:1})]),_:1},512),[[F,!ge.value]])]),_:1},8,["modelValue","seamless"]),T(Q("div",Z,[S(n,{fab:"",color:"amber","text-color":"black",icon:"stars",class:"shadow-10",onClick:Qe},{default:I(()=>[S(m,{anchor:"center left",self:"center right"},{default:I(()=>[P(" Restore Session: "+U(Pe(he.value)),1)]),_:1}),S(y,{color:"red",floating:""},{default:I(()=>_[16]||(_[16]=[P("Active")])),_:1})]),_:1})],512),[[F,he.value&&ge.value]]),S(p,{modelValue:we.value,"onUpdate:modelValue":_[7]||(_[7]=e=>we.value=e),persistent:""},{default:I(()=>[S(d,null,{default:I(()=>[S(c,{class:"row items-center"},{default:I(()=>[S(v,{icon:"warning",color:"warning","text-color":"white"}),_[17]||(_[17]=Q("span",{class:"q-ml-sm"},"Are you sure you want to close the current session? Unsaved changes might be lost.",-1))]),_:1}),S(f,{align:"right"},{default:I(()=>[T(S(n,{flat:"",label:"Cancel",color:"primary"},null,512),[[b]]),T(S(n,{flat:"",label:"Close Session",color:"negative",onClick:Ce},null,512),[[b]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),S(p,{modelValue:je.value,"onUpdate:modelValue":_[8]||(_[8]=e=>je.value=e),persistent:""},{default:I(()=>[S(d,null,{default:I(()=>[S(c,{class:"row items-center"},{default:I(()=>[S(v,{icon:"swap_horiz",color:"primary","text-color":"white"}),Q("span",ee,[_[18]||(_[18]=P(" You have an active session for ")),Q("strong",null,U(Pe(he.value)),1),_[19]||(_[19]=P(". ")),_[20]||(_[20]=Q("br",null,null,-1)),_[21]||(_[21]=P(" Do you want to end it and start a new one for ")),Q("strong",null,U(Pe(_e.value)),1),_[22]||(_[22]=P("? "))])]),_:1}),S(f,{align:"right"},{default:I(()=>[T(S(n,{flat:"",label:"Cancel",color:"primary"},null,512),[[b]]),T(S(n,{flat:"",label:"Switch Session",color:"primary",onClick:Te},null,512),[[b]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}},[["__scopeId","data-v-25a86fde"]]);export{le as default};
