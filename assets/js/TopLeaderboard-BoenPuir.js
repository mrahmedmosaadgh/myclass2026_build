import{r as t,f as e,d as a,s as l}from"./app-DTyzyps1.js";import{a as s,N as o,Q as r,J as n,b as i,K as d,O as c,F as u,R as f,U as p,V as x}from"./vendor-BJyC5yAd.js";import"./offline-BzIlwqNM.js";import"./i18n-BDgsCcB6.js";import"./ui-DFn3cvMd.js";const m={key:0,class:"mb-6"},w={key:0,class:"text-center py-16"},g={key:1,class:"flex flex-col md:flex-row justify-center items-end gap-4 md:gap-8 min-h-[500px]"},h={class:"text-center mb-4 relative"},v={key:0,class:"text-8xl animate-bounce-slow drop-shadow-2xl filter brightness-125"},b={key:1,class:"text-7xl drop-shadow-xl opacity-90"},y={class:"p-6 text-center text-white relative z-10 flex-1 flex flex-col justify-between"},k={class:"text-3xl font-black italic tracking-wider mb-1 drop-shadow-md"},_={class:"flex-1 overflow-y-auto custom-scrollbar max-h-40 space-y-2 mt-4"},j=["src"],z={class:"text-left overflow-hidden min-w-0"},T={class:"font-bold text-sm truncate text-white"},B={class:"text-xs opacity-80 text-yellow-200"},R=t({__name:"TopLeaderboard",props:{students:{type:Array,default:()=>[]},studentBehaviors:{type:Object,default:()=>({})}},setup(t){const R=t,A=s(()=>{if(!R.students.length)return[];const t=R.students.map(t=>{const e=R.studentBehaviors[t.id]||{},a=(e.points_plus||0)-(e.points_minus||0);return{...t,total:a}}).filter(t=>t.total>0).sort((t,e)=>e.total-t.total),e=[];if(0===t.length)return[];let a={rank:1,total:t[0].total,students:[t[0]]};for(let l=1;l<t.length;l++){const s=t[l];s.total===a.total?a.students.push(s):(e.push(a),a={rank:e.length+1,total:s.total,students:[s]})}return e.push(a),e.slice(0,3)}),C=s(()=>{const t=A.value,e=t.find(t=>1===t.rank);return[t.find(t=>2===t.rank),e,t.find(t=>3===t.rank)].filter(Boolean)});function I(t){return 1===t?"bg-gradient-to-b from-yellow-400 via-yellow-500 to-yellow-700 border-yellow-300 shadow-yellow-500/50":2===t?"bg-gradient-to-b from-gray-300 via-gray-400 to-gray-600 border-gray-200 shadow-gray-500/50":3===t?"bg-gradient-to-b from-orange-400 via-orange-500 to-orange-700 border-orange-300 shadow-orange-500/50":""}function N(t){const e=["TH","ST","ND","RD"],a=t%100;return t+(e[(a-20)%10]||e[a]||e[0])}function O(t){const e=(t||"S").split(" ").map(t=>t[0]).slice(0,2).join("").toUpperCase();return`data:image/svg+xml,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><rect width="40" height="40" fill="#e2e8f0"/><text x="20" y="20" dy="6" text-anchor="middle" font-family="Arial" font-weight="bold" fill="#64748b">${e}</text></svg>`)}`}return(s,R)=>t.students.length?(n(),o("div",m,[i(a,{class:"shadow-2xl rounded-3xl overflow-hidden bg-gray-900 border-4 border-yellow-500 relative"},{default:d(()=>[R[4]||(R[4]=c("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[c("div",{class:"stars"}),c("div",{class:"twinkling"})],-1)),i(e,{class:"relative z-10 text-center py-8 bg-gradient-to-b from-transparent to-black/50"},{default:d(()=>R[0]||(R[0]=[c("h1",{class:"text-5xl md:text-7xl font-black tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-yellow-100 to-yellow-500 drop-shadow-lg animate-shine"}," ðŸ† CHAMPIONS ðŸ† ",-1),c("p",{class:"text-xl text-yellow-200 mt-2 font-bold tracking-widest uppercase opacity-80"},"Top 3 Ranks",-1)])),_:1}),i(e,{class:"p-4 md:p-8 relative z-10"},{default:d(()=>[0===A.value.length?(n(),o("div",w,R[1]||(R[1]=[c("p",{class:"text-3xl text-yellow-400 font-bold animate-pulse"}," The arena is empty... Who will rise? âš”ï¸ ",-1)]))):(n(),o("div",g,[(n(!0),o(u,null,f(C.value,(t,e)=>{return n(),o(u,{key:t.rank},[t?(n(),o("div",{key:0,class:p(["w-full md:w-1/3 flex flex-col transition-all duration-700",["podium-card",1===t.rank?" z-20  mb-40":2===t.rank?"order-2 md:order-1 z-10":"order-3 md:order-3 z-10"]])},[c("div",h,[1===t.rank?(n(),o("div",v,"ðŸ‘‘")):(n(),o("div",b,x((a=t.rank,1===a?"ðŸ¥‡":2===a?"ðŸ¥ˆ":3===a?"ðŸ¥‰":"")),1))]),c("div",{class:p(["relative rounded-2xl overflow-hidden border-4 shadow-2xl backdrop-blur-md flex-1 flex flex-col",I(t.rank)])},[R[3]||(R[3]=c("div",{class:"absolute inset-0 bg-gradient-to-tr from-white/0 via-white/20 to-white/0 w-[200%] h-full animate-shine-move pointer-events-none"},null,-1)),c("div",y,[c("div",null,[c("h2",k,x(N(t.rank)),1),R[2]||(R[2]=c("div",{class:"h-1 w-16 mx-auto bg-white/50 rounded-full mb-4"},null,-1))]),c("div",_,[(n(!0),o(u,null,f(t.students,t=>(n(),o("div",{key:t.id,class:"flex items-center gap-3 bg-white/10 rounded-lg p-2 backdrop-blur-sm"},[i(l,{size:"32px",class:"shadow-sm border border-white/30"},{default:d(()=>[c("img",{src:t.avatar||O(t.name)},null,8,j)]),_:2},1024),c("div",z,[c("div",T,x(t.name),1),c("div",B,x(t.total)+" pts",1)])]))),128))])])],2)],2)):r("",!0)],64);var a}),128))]))]),_:1})]),_:1})])):r("",!0)}},[["__scopeId","data-v-452a7df4"]]);export{R as default};
