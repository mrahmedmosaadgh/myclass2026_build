import{_ as e}from"./AppLayout-poNpMhjN.js";import{w as a,s,t,v as r,y as l,z as n,aV as o,x as u}from"./app-BXm70mdJ.js";import{f as i,a as c,o as d,e as g,L as m,I as v,M as b,S as p,U as f,O as x,x as y,ab as h,H as w,J as k,b as F,V as _}from"./vendor-DNM7Y6Xn.js";import"./offline-BzIlwqNM.js";import"./i18n-CBOKL2HS.js";import"./ui-BP0GJNn5.js";const D={class:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow"},T={class:"mb-4"},j={class:"flex items-center mb-2"},C={class:"text-sm text-gray-600 dark:text-gray-400"},R={class:"space-y-4"},E={class:"flex space-x-2"},I=["disabled"],L=["disabled"],U={key:0,class:"mt-2"},N={key:0,class:"mt-2 p-2 bg-gray-100 dark:bg-gray-700 rounded text-xs overflow-auto"},O={__name:"ConnectionTest",setup(e){const w=i(!1),k=i("Checking connection..."),F=i("Hello from Firebase test!"),_=i(!1),O=i(!1),S=i(null),A=i(null),V=i(null),W=c(()=>w.value?{text:"Connected",color:"bg-green-500"}:{text:"Disconnected",color:"bg-red-500"}),H=async()=>{if(w.value){_.value=!0,S.value=null;try{const e=s(t,"firebase_test/messages"),a=l(e);await n(a,{text:F.value,timestamp:u()}),S.value={success:!0,message:"Test message written successfully!"}}catch(e){console.error("Error writing test data:",e),S.value={success:!1,message:`Error writing data: ${e.message}`}}finally{_.value=!1}}else S.value={success:!1,message:"Cannot write data: Not connected to Firebase."}},J=async()=>{if(w.value){O.value=!0,A.value=null;try{const e=s(t,"firebase_test/messages"),a=await o(e);a.exists()?A.value={success:!0,message:"Data retrieved successfully!",data:a.val()}:A.value={success:!0,message:"No test messages found. Try writing some data first.",data:null}}catch(e){console.error("Error reading test data:",e),A.value={success:!1,message:`Error reading data: ${e.message}`}}finally{O.value=!1}}else A.value={success:!1,message:"Cannot read data: Not connected to Firebase."}};return d(()=>{V.value=s(t,".info/connected"),r(V.value,e=>{w.value=!0===e.val(),k.value=w.value?"Successfully connected to Firebase Realtime Database.":"Not connected to Firebase Realtime Database. Check your configuration."})}),g(()=>{V.value&&a(V.value)}),(e,a)=>(v(),m("div",D,[a[3]||(a[3]=b("h2",{class:"text-lg font-semibold mb-4"},"Firebase Connection Test",-1)),b("div",T,[b("div",j,[b("div",{class:p(["w-3 h-3 rounded-full mr-2",W.value.color])},null,2),b("span",null,f(W.value.text),1)]),b("p",C,f(k.value),1)]),b("div",R,[b("div",null,[a[1]||(a[1]=b("h3",{class:"font-medium mb-2"},"Test Write Operation",-1)),b("div",E,[y(b("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>F.value=e),type:"text",class:"flex-1 px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter a test message"},null,512),[[h,F.value]]),b("button",{onClick:H,class:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",disabled:_.value},f(_.value?"Writing...":"Write"),9,I)]),S.value?(v(),m("p",{key:0,class:p(["mt-2 text-sm",S.value.success?"text-green-600":"text-red-600"])},f(S.value.message),3)):x("",!0)]),b("div",null,[a[2]||(a[2]=b("h3",{class:"font-medium mb-2"},"Test Read Operation",-1)),b("button",{onClick:J,class:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",disabled:O.value},f(O.value?"Reading...":"Read Test Data"),9,L),A.value?(v(),m("div",U,[b("p",{class:p(["text-sm",A.value.success?"text-green-600":"text-red-600"])},f(A.value.message),3),A.value.data?(v(),m("pre",N,f(JSON.stringify(A.value.data,null,2)),1)):x("",!0)])):x("",!0)])])]))}},S={class:"py-12"},A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},V={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-xl sm:rounded-lg p-6"},W={class:"mt-8"},H={class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg"},J={class:"mb-2"},M={class:"mb-2"},$={__name:"Test",setup(a){const s=c(()=>{try{return{projectId:t._repoInternal.app.options.projectId,databaseURL:t._repoInternal.databaseURL,authDomain:t._repoInternal.app.options.authDomain}}catch(e){return console.error("Error getting Firebase config:",e),{projectId:"Error retrieving config",databaseURL:"Error retrieving config",authDomain:"Error retrieving config"}}});return(a,t)=>(v(),w(e,{title:"Firebase Test"},{header:k(()=>t[0]||(t[0]=[b("h2",{class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"}," Firebase Connection Test ",-1)])),default:k(()=>[b("div",S,[b("div",A,[b("div",V,[t[5]||(t[5]=b("p",{class:"mb-4 text-gray-600 dark:text-gray-400"}," This page allows you to test your Firebase connection and verify that read/write operations are working correctly. ",-1)),F(O),b("div",W,[t[4]||(t[4]=b("h3",{class:"text-lg font-medium mb-2"},"Firebase Configuration",-1)),b("div",H,[b("p",J,[t[1]||(t[1]=b("strong",null,"Project ID:",-1)),_(" "+f(s.value.projectId),1)]),b("p",M,[t[2]||(t[2]=b("strong",null,"Database URL:",-1)),_(" "+f(s.value.databaseURL),1)]),b("p",null,[t[3]||(t[3]=b("strong",null,"Auth Domain:",-1)),_(" "+f(s.value.authDomain),1)])])]),t[6]||(t[6]=b("div",{class:"mt-8"},[b("h3",{class:"text-lg font-medium mb-2"},"Firebase Security Rules"),b("p",{class:"mb-4 text-gray-600 dark:text-gray-400"},[_(" Make sure you've set up your Firebase security rules correctly. The test component requires read/write access to the "),b("code",null,"firebase_test"),_(" path. ")]),b("div",{class:"bg-gray-100 dark:bg-gray-700 p-4 rounded-lg overflow-auto"},[b("pre",{class:"text-xs"},'{\n  "rules": {\n    // Your existing rules...\n    \n    // Add this rule for testing\n    "firebase_test": {\n      ".read": true,\n      ".write": true\n    }\n  }\n}\n              ')])],-1))])])])]),_:1}))}};export{$ as default};
