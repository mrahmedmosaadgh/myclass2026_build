import{u as e,c as l,aF as t,Q as a,f as o,d as n,p as r,m as u,n as i,l as s,b as c}from"./app-BwCflFkV.js";import{Q as d}from"./QSelect-Cyosk05W.js";import{Q as m}from"./QTd-DftUN1Nv.js";import{Q as f}from"./QTable-C_EQBQcS.js";import{Q as v}from"./QForm-BCWodDs-.js";import{a0 as p,u as b,f as y,r as _,a as h,L as j,I as g,b as S,y as V,a3 as x,J as N,M as k,U as w,V as T,F as C,_ as q}from"./vendor-CUZ9QTQV.js";import{e as O}from"./exportHelper-DgqGG-tE.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";import"./rtl-Cr6c3OOr.js";import"./QMarkupTable-CFmFAA-C.js";import"./QLinearProgress-BKKQOFX1.js";import"./use-fullscreen-X4x-6n9-.js";import"./xlsx-cMC2LkxH.js";var U,Q,I,A,$,E,F,M,P,z,D,L,W,H,J,B,G,K,R,X,Y,Z,ee,le,te,ae,oe,ne;function re(){if(Q)return U;return Q=1,U=function(e){var l=typeof e;return null!=e&&("object"==l||"function"==l)}}function ue(){if(A)return I;A=1;var e="object"==typeof p&&p&&p.Object===Object&&p;return I=e}function ie(){if(E)return $;E=1;var e=ue(),l="object"==typeof self&&self&&self.Object===Object&&self,t=e||l||Function("return this")();return $=t}function se(){if(M)return F;M=1;var e=ie();return F=function(){return e.Date.now()}}function ce(){if(z)return P;z=1;var e=/\s/;return P=function(l){for(var t=l.length;t--&&e.test(l.charAt(t)););return t}}function de(){if(L)return D;L=1;var e=ce(),l=/^\s+/;return D=function(t){return t?t.slice(0,e(t)+1).replace(l,""):t}}function me(){if(H)return W;H=1;var e=ie().Symbol;return W=e}function fe(){if(B)return J;B=1;var e=me(),l=Object.prototype,t=l.hasOwnProperty,a=l.toString,o=e?e.toStringTag:void 0;return J=function(e){var l=t.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch(i){}var u=a.call(e);return r&&(l?e[o]=n:delete e[o]),u}}function ve(){if(K)return G;K=1;var e=Object.prototype.toString;return G=function(l){return e.call(l)}}function pe(){if(X)return R;X=1;var e=me(),l=fe(),t=ve(),a=e?e.toStringTag:void 0;return R=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?l(e):t(e)}}function be(){if(Z)return Y;return Z=1,Y=function(e){return null!=e&&"object"==typeof e}}function ye(){if(le)return ee;le=1;var e=pe(),l=be();return ee=function(t){return"symbol"==typeof t||l(t)&&"[object Symbol]"==e(t)}}function _e(){if(ae)return te;ae=1;var e=de(),l=re(),t=ye(),a=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,n=/^0o[0-7]+$/i,r=parseInt;return te=function(u){if("number"==typeof u)return u;if(t(u))return NaN;if(l(u)){var i="function"==typeof u.valueOf?u.valueOf():u;u=l(i)?i+"":i}if("string"!=typeof u)return 0===u?u:+u;u=e(u);var s=o.test(u);return s||n.test(u)?r(u.slice(2),s?2:8):a.test(u)?NaN:+u}}function he(){if(ne)return oe;ne=1;var e=re(),l=se(),t=_e(),a=Math.max,o=Math.min;return oe=function(n,r,u){var i,s,c,d,m,f,v=0,p=!1,b=!1,y=!0;if("function"!=typeof n)throw new TypeError("Expected a function");function _(e){var l=i,t=s;return i=s=void 0,v=e,d=n.apply(t,l)}function h(e){var l=e-f;return void 0===f||l>=r||l<0||b&&e-v>=c}function j(){var e=l();if(h(e))return g(e);m=setTimeout(j,function(e){var l=r-(e-f);return b?o(l,c-(e-v)):l}(e))}function g(e){return m=void 0,y&&i?_(e):(i=s=void 0,d)}function S(){var e=l(),t=h(e);if(i=arguments,s=this,f=e,t){if(void 0===m)return function(e){return v=e,m=setTimeout(j,r),p?_(e):d}(f);if(b)return clearTimeout(m),m=setTimeout(j,r),_(f)}return void 0===m&&(m=setTimeout(j,r)),d}return r=t(r)||0,e(u)&&(p=!!u.leading,c=(b="maxWait"in u)?a(t(u.maxWait)||0,r):c,y="trailing"in u?!!u.trailing:y),S.cancel=function(){void 0!==m&&clearTimeout(m),v=0,i=f=s=m=void 0},S.flush=function(){return void 0===m?d:g(l())},S},oe}const je=b(he()),ge={class:"row q-col-gutter-md q-mt-sm"},Se={class:"col-12 col-md-6"},Ve={class:"col-12 col-md-6"},xe={class:"text-h6"},Ne="Subjects Management",ke="/admin/subject",we={__name:"Index",props:{records:Object,schools:Array},setup(p){const b=p,U=e(),Q=y(!1),I=y(!1),A=y(null),$=y(!1),E=y(null),F=_({name:"",nour_name:"",school_id:null,active:!0,description:"",notes:""}),M=y({search:"",school_id:null,status:null}),P=h(()=>{var e;return(null==(e=b.records)?void 0:e.data)||[]});h(()=>{var e;return(null==(e=b.records)?void 0:e.current_page)||1});const z=h(()=>{var e;return(null==(e=b.records)?void 0:e.per_page)||10}),D=h(()=>[...b.schools.map(e=>({value:e.id,label:e.name}))]),L=[{name:"name",label:"Name",field:"name",align:"left"},{name:"nour_name",label:"Nour Name",field:"nour_name"},{name:"school",label:"School",field:e=>{var l;return null==(l=e.school)?void 0:l.name}},{name:"active",label:"Status",field:"active",format:e=>e?"Active":"Inactive"},{name:"actions",label:"Actions",field:"actions",align:"right"}],W=()=>{$.value=!0,q.get("/admin/subject",{...M.value,preserveState:!0,preserveScroll:!0,only:["records"]})},H=je(W,300),J=()=>{F.name="",F.nour_name="",F.school_id=null,F.active=!0,F.description="",F.notes=""},B=(e=null)=>{A.value=e,e?(F.name=e.name,F.nour_name=e.nour_name,F.school_id=e.school_id,F.active=e.active,F.description=e.description||"",F.notes=e.notes||""):J(),Q.value=!0},G=()=>{Q.value=!1,A.value=null,J()},K=()=>{E.value&&q.delete(`${ke}/${E.value.id}`,{onSuccess:()=>{U.notify({type:"positive",message:"Subject deleted successfully"}),I.value=!1,E.value=null},onError:()=>{U.notify({type:"negative",message:"Failed to delete subject"})}})},R=()=>{var e;const l=null==(e=A.value)?void 0:e.id,t=l?`${ke}/${l}`:ke;q[l?"put":"post"](t,F,{onSuccess:()=>{U.notify({type:"positive",message:`Subject ${l?"updated":"created"} successfully`}),G()},onError:e=>{Object.values(e).forEach(e=>{U.notify({type:"negative",message:e})})}})},X=()=>{U.dialog({title:"Import Subjects",message:"Import functionality coming soon!"})},Y=()=>{O({items:P.value,columns:[{key:"name",label:"Name"},{key:"nour_name",label:"Nour Name"},{key:"school.name",label:"School"},{key:"active",label:"Status"}],fileName:"subjects",sheetName:"Subjects"})};return(e,p)=>(g(),j(C,null,[S(V(x),{title:Ne}),S(u,{flat:"",class:"q-pa-md"},{default:N(()=>[S(l,null,{default:N(()=>[k("div",{class:"text-h5 text-weight-bold"},w(Ne))]),_:1}),S(l,null,{default:N(()=>[S(t,{spread:""},{default:N(()=>[S(a,{color:"primary",label:"Add Subject",icon:"add",onClick:B}),S(a,{color:"secondary",label:"Import",icon:"upload_file",onClick:X}),S(a,{color:"info",label:"Export",icon:"download",onClick:Y})]),_:1})]),_:1}),S(l,null,{default:N(()=>[S(o,{modelValue:M.value.search,"onUpdate:modelValue":p[0]||(p[0]=e=>M.value.search=e),label:"Search Subjects",clearable:"",onInput:V(H)},{prepend:N(()=>[S(n,{name:"search"})]),_:1},8,["modelValue","onInput"]),k("div",ge,[k("div",Se,[S(d,{modelValue:M.value.school_id,"onUpdate:modelValue":[p[1]||(p[1]=e=>M.value.school_id=e),W],options:D.value,label:"Filter by School","option-value":"value","option-label":"label","emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"])]),k("div",Ve,[S(d,{modelValue:M.value.status,"onUpdate:modelValue":[p[2]||(p[2]=e=>M.value.status=e),W],options:[{label:"Active",value:!0},{label:"Inactive",value:!1}],label:"Filter by Status","emit-value":"","map-options":"",clearable:""},null,8,["modelValue"])])])]),_:1}),S(l,null,{default:N(()=>[S(f,{rows:P.value,columns:L,loading:$.value,"row-key":"id",pagination:{rowsPerPage:z.value}},{"body-cell-actions":N(e=>[S(m,{props:e},{default:N(()=>[S(t,{flat:""},{default:N(()=>[S(a,{icon:"edit",color:"primary",size:"sm",onClick:l=>B(e.row),class:"q-mr-xs"},null,8,["onClick"]),S(a,{icon:"delete",color:"negative",size:"sm",onClick:l=>{return t=e.row,E.value=t,void(I.value=!0);var t},class:"q-mr-xs"},null,8,["onClick"]),S(a,{icon:"description",color:"info",size:"sm",onClick:l=>{return t=e.row,void q.get(route("admin.subject.lesson-plan-templates",t.id));var t},class:"q-mr-xs"},{default:N(()=>[S(r,null,{default:N(()=>p[10]||(p[10]=[T("Manage Lesson Plan Templates")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","loading","pagination"])]),_:1})]),_:1}),S(c,{modelValue:Q.value,"onUpdate:modelValue":p[7]||(p[7]=e=>Q.value=e),persistent:""},{default:N(()=>[S(u,{style:{"min-width":"500px"}},{default:N(()=>[S(l,null,{default:N(()=>[k("div",xe,w(A.value?"Edit":"Add")+" Subject",1)]),_:1}),S(l,null,{default:N(()=>[S(v,{onSubmit:R,class:"q-gutter-md"},{default:N(()=>[S(o,{modelValue:F.name,"onUpdate:modelValue":p[3]||(p[3]=e=>F.name=e),label:"Name",rules:[e=>!!e||"Name is required"],required:""},null,8,["modelValue","rules"]),S(o,{modelValue:F.nour_name,"onUpdate:modelValue":p[4]||(p[4]=e=>F.nour_name=e),label:"Nour Name",rules:[e=>!!e||"Nour Name is required"],required:""},null,8,["modelValue","rules"]),S(d,{modelValue:F.school_id,"onUpdate:modelValue":p[5]||(p[5]=e=>F.school_id=e),options:D.value,label:"School","option-value":"value","option-label":"label","emit-value":"","map-options":"",rules:[e=>!!e||"School is required"],required:""},null,8,["modelValue","options","rules"]),S(i,{modelValue:F.active,"onUpdate:modelValue":p[6]||(p[6]=e=>F.active=e),label:"Active"},null,8,["modelValue"]),S(s,{align:"right"},{default:N(()=>[S(a,{flat:"",label:"Cancel",color:"primary",onClick:G}),S(a,{label:"Save",type:"submit",color:"primary"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),S(c,{modelValue:I.value,"onUpdate:modelValue":p[9]||(p[9]=e=>I.value=e),persistent:""},{default:N(()=>[S(u,null,{default:N(()=>[S(l,null,{default:N(()=>p[11]||(p[11]=[k("div",{class:"text-h6"},"Delete Subject",-1)])),_:1}),S(l,null,{default:N(()=>p[12]||(p[12]=[T(" Are you sure you want to delete this subject? This action cannot be undone. ")])),_:1}),S(s,{align:"right"},{default:N(()=>[S(a,{flat:"",label:"Cancel",color:"primary",onClick:p[8]||(p[8]=e=>I.value=!1)}),S(a,{label:"Delete",color:"negative",onClick:K})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{we as default};
