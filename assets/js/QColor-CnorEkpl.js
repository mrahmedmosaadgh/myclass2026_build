import{I as e,ah as a,Y as r,Z as l,ax as o,ay as t,az as n,aA as u,an as i,Q as s,$ as c}from"./app-CCwy2VVq.js";import{Q as g}from"./QSlider-DH6dE6nH.js";import{Q as d}from"./QTabs-Ddh79dFw.js";import{Q as v}from"./QTab-Bsf5uinQ.js";import{Q as b}from"./QTabPanels-C7WMGDee.js";import{Q as p}from"./QTabPanel-D3EMF9t6.js";import{u as h}from"./use-render-cache-CmTcazfP.js";import{p as m,f,a as k,k as w,h as x,n as y}from"./vendor-BWKGNkNB.js";const M=/^rgb(a)?\((\d{1,3}),(\d{1,3}),(\d{1,3}),?([01]?\.?\d*?)?\)$/;function _({r:e,g:a,b:r,a:l}){const o=void 0!==l;if(e=Math.round(e),a=Math.round(a),r=Math.round(r),e>255||a>255||r>255||o&&l>100)throw new TypeError("Expected 3 numbers below 256 (and optionally one below 100)");return l=o?(256|Math.round(255*l/100)).toString(16).slice(1):"","#"+(r|a<<8|e<<16|1<<24).toString(16).slice(1)+l}function V({r:e,g:a,b:r,a:l}){return`rgb${void 0!==l?"a":""}(${e},${a},${r}${void 0!==l?","+l/100:""})`}function A(e){if("string"!=typeof e)throw new TypeError("Expected a string");3===(e=e.replace(/^#/,"")).length?e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:4===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);const a=parseInt(e,16);return e.length>6?{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:Math.round((255&a)/2.55)}:{r:a>>16,g:a>>8&255,b:255&a}}function q({h:e,s:a,v:r,a:l}){let o,t,n;a/=100,r/=100,e/=360;const u=Math.floor(6*e),i=6*e-u,s=r*(1-a),c=r*(1-i*a),g=r*(1-(1-i)*a);switch(u%6){case 0:o=r,t=g,n=s;break;case 1:o=c,t=r,n=s;break;case 2:o=s,t=r,n=g;break;case 3:o=s,t=c,n=r;break;case 4:o=g,t=s,n=r;break;case 5:o=r,t=s,n=c}return{r:Math.round(255*o),g:Math.round(255*t),b:Math.round(255*n),a:l}}function C({r:e,g:a,b:r,a:l}){const o=Math.max(e,a,r),t=Math.min(e,a,r),n=o-t,u=0===o?0:n/o,i=o/255;let s;switch(o){case t:s=0;break;case e:s=a-r+n*(a<r?6:0),s/=6*n;break;case a:s=r-e+2*n,s/=6*n;break;case r:s=e-a+4*n,s/=6*n}return{h:Math.round(360*s),s:Math.round(100*u),v:Math.round(100*i),a:l}}function B(e){if("string"!=typeof e)throw new TypeError("Expected a string");const a=e.replace(/ /g,""),r=M.exec(a);if(null===r)return A(a);const l={r:Math.min(255,parseInt(r[2],10)),g:Math.min(255,parseInt(r[3],10)),b:Math.min(255,parseInt(r[4],10))};if(r[1]){const e=parseFloat(r[5]);l.a=100*Math.min(1,!0===isNaN(e)?1:e)}return l}const S=["rgb(255,204,204)","rgb(255,230,204)","rgb(255,255,204)","rgb(204,255,204)","rgb(204,255,230)","rgb(204,255,255)","rgb(204,230,255)","rgb(204,204,255)","rgb(230,204,255)","rgb(255,204,255)","rgb(255,153,153)","rgb(255,204,153)","rgb(255,255,153)","rgb(153,255,153)","rgb(153,255,204)","rgb(153,255,255)","rgb(153,204,255)","rgb(153,153,255)","rgb(204,153,255)","rgb(255,153,255)","rgb(255,102,102)","rgb(255,179,102)","rgb(255,255,102)","rgb(102,255,102)","rgb(102,255,179)","rgb(102,255,255)","rgb(102,179,255)","rgb(102,102,255)","rgb(179,102,255)","rgb(255,102,255)","rgb(255,51,51)","rgb(255,153,51)","rgb(255,255,51)","rgb(51,255,51)","rgb(51,255,153)","rgb(51,255,255)","rgb(51,153,255)","rgb(51,51,255)","rgb(153,51,255)","rgb(255,51,255)","rgb(255,0,0)","rgb(255,128,0)","rgb(255,255,0)","rgb(0,255,0)","rgb(0,255,128)","rgb(0,255,255)","rgb(0,128,255)","rgb(0,0,255)","rgb(128,0,255)","rgb(255,0,255)","rgb(245,0,0)","rgb(245,123,0)","rgb(245,245,0)","rgb(0,245,0)","rgb(0,245,123)","rgb(0,245,245)","rgb(0,123,245)","rgb(0,0,245)","rgb(123,0,245)","rgb(245,0,245)","rgb(214,0,0)","rgb(214,108,0)","rgb(214,214,0)","rgb(0,214,0)","rgb(0,214,108)","rgb(0,214,214)","rgb(0,108,214)","rgb(0,0,214)","rgb(108,0,214)","rgb(214,0,214)","rgb(163,0,0)","rgb(163,82,0)","rgb(163,163,0)","rgb(0,163,0)","rgb(0,163,82)","rgb(0,163,163)","rgb(0,82,163)","rgb(0,0,163)","rgb(82,0,163)","rgb(163,0,163)","rgb(92,0,0)","rgb(92,46,0)","rgb(92,92,0)","rgb(0,92,0)","rgb(0,92,46)","rgb(0,92,92)","rgb(0,46,92)","rgb(0,0,92)","rgb(46,0,92)","rgb(92,0,92)","rgb(255,255,255)","rgb(205,205,205)","rgb(178,178,178)","rgb(153,153,153)","rgb(127,127,127)","rgb(102,102,102)","rgb(76,76,76)","rgb(51,51,51)","rgb(25,25,25)","rgb(0,0,0)"],I="M5 5 h10 v10 h-10 v-10 z",E=e({name:"QColor",props:{...r,...a,modelValue:String,defaultValue:String,defaultView:{type:String,default:"spectrum",validator:e=>["spectrum","tune","palette"].includes(e)},formatModel:{type:String,default:"auto",validator:e=>["auto","hex","rgb","hexa","rgba"].includes(e)},palette:Array,noHeader:Boolean,noHeaderTabs:Boolean,noFooter:Boolean,square:Boolean,flat:Boolean,bordered:Boolean,disable:Boolean,readonly:Boolean},emits:["update:modelValue","change"],setup(e,{emit:a}){const{proxy:r}=m(),{$q:M}=r,E=l(e,M),{getCache:$}=h(),Q=f(null),U=f(null),j=k(()=>"auto"===e.formatModel?null:-1!==e.formatModel.indexOf("hex")),T=k(()=>"auto"===e.formatModel?null:-1!==e.formatModel.indexOf("a")),O=f("auto"===e.formatModel?void 0===e.modelValue||null===e.modelValue||""===e.modelValue||e.modelValue.startsWith("#")?"hex":"rgb":e.formatModel.startsWith("hex")?"hex":"rgb"),R=f(e.defaultView),P=f(re(e.modelValue||e.defaultValue)),Y=k(()=>!0!==e.disable&&!0!==e.readonly),F=k(()=>void 0===e.modelValue||null===e.modelValue||""===e.modelValue||e.modelValue.startsWith("#")),H=k(()=>null!==j.value?j.value:F.value),W=k(()=>({type:"hidden",name:e.name,value:P.value[!0===H.value?"hex":"rgb"]})),G=u(W),N=k(()=>null!==T.value?T.value:void 0!==P.value.a),X=k(()=>({backgroundColor:P.value.rgb||"#000"})),z=k(()=>"q-color-picker__header-content q-color-picker__header-content--"+(void 0!==P.value.a&&P.value.a<65||function(e){if("string"!=typeof e&&(!e||void 0===e.r))throw new TypeError("Expected a string or a {r, g, b} object as color");const a="string"==typeof e?B(e):e,r=a.r/255,l=a.g/255,o=a.b/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(l<=.03928?l/12.92:Math.pow((l+.055)/1.055,2.4))+.0722*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))}(P.value)>.4?"light":"dark")),Z=k(()=>({background:`hsl(${P.value.h},100%,50%)`})),D=k(()=>({top:100-P.value.v+"%",[!0===M.lang.rtl?"right":"left"]:`${P.value.s}%`})),J=k(()=>void 0!==e.palette&&0!==e.palette.length?e.palette:S),K=k(()=>"q-color-picker"+(!0===e.bordered?" q-color-picker--bordered":"")+(!0===e.square?" q-color-picker--square no-border-radius":"")+(!0===e.flat?" q-color-picker--flat no-shadow":"")+(!0===e.disable?" disabled":"")+(!0===E.value?" q-color-picker--dark q-dark":"")),L=k(()=>!0===e.disable?{"aria-disabled":"true"}:{}),ee=k(()=>[[o,ie,void 0,{prevent:!0,stop:!0,mouse:!0}]]);function ae(e,r){P.value.hex=_(e),P.value.rgb=V(e),P.value.r=e.r,P.value.g=e.g,P.value.b=e.b,P.value.a=e.a;const l=P.value[!0===H.value?"hex":"rgb"];a("update:modelValue",l),!0===r&&a("change",l)}function re(a){const r=void 0!==T.value?T.value:"auto"===e.formatModel?null:-1!==e.formatModel.indexOf("a");if("string"!=typeof a||0===a.length||!0!==t.anyColor(a.replace(/ /g,"")))return{h:0,s:0,v:0,r:0,g:0,b:0,a:!0===r?100:void 0,hex:void 0,rgb:void 0};const l=B(a);return!0===r&&void 0===l.a&&(l.a=100),l.hex=_(l),l.rgb=V(l),Object.assign(l,C(l))}function le(e,a,r){const l=Q.value;if(null===l)return;const o=l.clientWidth,t=l.clientHeight,n=l.getBoundingClientRect();let u=Math.min(o,Math.max(0,e-n.left));!0===M.lang.rtl&&(u=o-u);const i=Math.min(t,Math.max(0,a-n.top)),s=Math.round(100*u/o),c=Math.round(100*Math.max(0,Math.min(1,-i/t+1))),g=q({h:P.value.h,s:s,v:c,a:!0===N.value?P.value.a:void 0});P.value.s=s,P.value.v=c,ae(g,r)}function oe(e,a){const r=Math.round(e),l=q({h:r,s:P.value.s,v:P.value.v,a:!0===N.value?P.value.a:void 0});P.value.h=r,ae(l,a)}function te(e){oe(e,!0)}function ne(e,a,l,o,t){if(void 0!==o&&i(o),!/^[0-9]+$/.test(e))return void(!0===t&&r.$forceUpdate());const n=Math.floor(Number(e));if(n<0||n>l)return void(!0===t&&r.$forceUpdate());const u={r:"r"===a?n:P.value.r,g:"g"===a?n:P.value.g,b:"b"===a?n:P.value.b,a:!0===N.value?"a"===a?n:P.value.a:void 0};if("a"!==a){const e=C(u);P.value.h=e.h,P.value.s=e.s,P.value.v=e.v}if(ae(u,t),!0!==t&&void 0!==(null==o?void 0:o.target.selectionEnd)){const e=o.target.selectionEnd;y(()=>{o.target.setSelectionRange(e,e)})}}function ue(e,a){let r;const l=e.target.value;if(i(e),"hex"===O.value){if(l.length!==(!0===N.value?9:7)||!/^#[0-9A-Fa-f]+$/.test(l))return!0;r=A(l)}else{let e;if(!l.endsWith(")"))return!0;if(!0!==N.value&&l.startsWith("rgb(")){if(e=l.substring(4,l.length-1).split(",").map(e=>parseInt(e,10)),3!==e.length||!/^rgb\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3}\)$/.test(l))return!0}else{if(!0!==N.value||!l.startsWith("rgba("))return!0;{if(e=l.substring(5,l.length-1).split(","),4!==e.length||!/^rgba\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/.test(l))return!0;for(let r=0;r<3;r++){const a=parseInt(e[r],10);if(a<0||a>255)return!0;e[r]=a}const a=parseFloat(e[3]);if(a<0||a>1)return!0;e[3]=a}}if(e[0]<0||e[0]>255||e[1]<0||e[1]>255||e[2]<0||e[2]>255||!0===N.value&&(e[3]<0||e[3]>1))return!0;r={r:e[0],g:e[1],b:e[2],a:!0===N.value?100*e[3]:void 0}}const o=C(r);if(P.value.h=o.h,P.value.s=o.s,P.value.v=o.v,ae(r,a),!0!==a){const a=e.target.selectionEnd;y(()=>{e.target.setSelectionRange(a,a)})}}function ie(e){e.isFinal?le(e.position.left,e.position.top,!0):se(e)}w(()=>e.modelValue,a=>{const r=re(a||e.defaultValue);r.hex!==P.value.hex&&(P.value=r)}),w(()=>e.defaultValue,a=>{if(!e.modelValue&&a){const e=re(a);e.hex!==P.value.hex&&(P.value=e)}});const se=n(e=>{le(e.position.left,e.position.top)},20);function ce(e){le(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset,!0)}function ge(e){le(e.pageX-window.pageXOffset,e.pageY-window.pageYOffset)}function de(e){null!==U.value&&(U.value.$el.style.opacity=e?1:0)}function ve(e){O.value=e}function be(e){R.value=e}function pe(){const e={ref:Q,class:"q-color-picker__spectrum non-selectable relative-position cursor-pointer"+(!0!==Y.value?" readonly":""),style:Z.value,...!0===Y.value?{onClick:ce,onMousedown:ge}:{}},a=[x("div",{style:{paddingBottom:"100%"}}),x("div",{class:"q-color-picker__spectrum-white absolute-full"}),x("div",{class:"q-color-picker__spectrum-black absolute-full"}),x("div",{class:"absolute",style:D.value},[void 0!==P.value.hex?x("div",{class:"q-color-picker__spectrum-circle"}):null])],r=[x(g,{class:"q-color-picker__hue non-selectable",modelValue:P.value.h,min:0,max:360,trackSize:"8px",innerTrackColor:"transparent",selectionColor:"transparent",readonly:!0!==Y.value,thumbPath:I,"onUpdate:modelValue":oe,onChange:te})];return!0===N.value&&r.push(x(g,{class:"q-color-picker__alpha non-selectable",modelValue:P.value.a,min:0,max:100,trackSize:"8px",trackColor:"white",innerTrackColor:"transparent",selectionColor:"transparent",trackImg:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAH0lEQVQoU2NkYGAwZkAFZ5G5jPRRgOYEVDeB3EBjBQBOZwTVugIGyAAAAABJRU5ErkJggg==",readonly:!0!==Y.value,hideSelection:!0,thumbPath:I,...$("alphaSlide",{"onUpdate:modelValue":e=>ne(e,"a",100),onChange:e=>ne(e,"a",100,void 0,!0)})})),[c("div",e,a,"spec",Y.value,()=>ee.value),x("div",{class:"q-color-picker__sliders"},r)]}function he(){return[x("div",{class:"row items-center no-wrap"},[x("div","R"),x(g,{modelValue:P.value.r,min:0,max:255,color:"red",dark:E.value,readonly:!0!==Y.value,...$("rSlide",{"onUpdate:modelValue":e=>ne(e,"r",255),onChange:e=>ne(e,"r",255,void 0,!0)})}),x("input",{value:P.value.r,maxlength:3,readonly:!0!==Y.value,onChange:i,...$("rIn",{onInput:e=>ne(e.target.value,"r",255,e),onBlur:e=>ne(e.target.value,"r",255,e,!0)})})]),x("div",{class:"row items-center no-wrap"},[x("div","G"),x(g,{modelValue:P.value.g,min:0,max:255,color:"green",dark:E.value,readonly:!0!==Y.value,...$("gSlide",{"onUpdate:modelValue":e=>ne(e,"g",255),onChange:e=>ne(e,"g",255,void 0,!0)})}),x("input",{value:P.value.g,maxlength:3,readonly:!0!==Y.value,onChange:i,...$("gIn",{onInput:e=>ne(e.target.value,"g",255,e),onBlur:e=>ne(e.target.value,"g",255,e,!0)})})]),x("div",{class:"row items-center no-wrap"},[x("div","B"),x(g,{modelValue:P.value.b,min:0,max:255,color:"blue",readonly:!0!==Y.value,dark:E.value,...$("bSlide",{"onUpdate:modelValue":e=>ne(e,"b",255),onChange:e=>ne(e,"b",255,void 0,!0)})}),x("input",{value:P.value.b,maxlength:3,readonly:!0!==Y.value,onChange:i,...$("bIn",{onInput:e=>ne(e.target.value,"b",255,e),onBlur:e=>ne(e.target.value,"b",255,e,!0)})})]),!0===N.value?x("div",{class:"row items-center no-wrap"},[x("div","A"),x(g,{modelValue:P.value.a,color:"grey",readonly:!0!==Y.value,dark:E.value,...$("aSlide",{"onUpdate:modelValue":e=>ne(e,"a",100),onChange:e=>ne(e,"a",100,void 0,!0)})}),x("input",{value:P.value.a,maxlength:3,readonly:!0!==Y.value,onChange:i,...$("aIn",{onInput:e=>ne(e.target.value,"a",100,e),onBlur:e=>ne(e.target.value,"a",100,e,!0)})})]):null]}function me(){return[x("div",{class:"row items-center q-color-picker__palette-rows"+(!0===Y.value?" q-color-picker__palette-rows--editable":"")},J.value.map(e=>x("div",{class:"q-color-picker__cube col-auto",style:{backgroundColor:e},...!0===Y.value?$("palette#"+e,{onClick:()=>{!function(e){const a=re(e),r={r:a.r,g:a.g,b:a.b,a:a.a};void 0===r.a&&(r.a=P.value.a),P.value.h=a.h,P.value.s=a.s,P.value.v=a.v,ae(r,!0)}(e)}}):{}})))]}return()=>{const a=[x(b,{modelValue:R.value,animated:!0},()=>[x(p,{class:"q-color-picker__spectrum-tab overflow-hidden",name:"spectrum"},pe),x(p,{class:"q-pa-md q-color-picker__tune-tab",name:"tune"},he),x(p,{class:"q-color-picker__palette-tab",name:"palette"},me)])];return void 0!==e.name&&!0!==e.disable&&G(a,"push"),!0!==e.noHeader&&a.unshift(function(){const a=[];return!0!==e.noHeaderTabs&&a.push(x(d,{class:"q-color-picker__header-tabs",modelValue:O.value,dense:!0,align:"justify","onUpdate:modelValue":ve},()=>[x(v,{label:"HEX"+(!0===N.value?"A":""),name:"hex",ripple:!1}),x(v,{label:"RGB"+(!0===N.value?"A":""),name:"rgb",ripple:!1})])),a.push(x("div",{class:"q-color-picker__header-banner row flex-center no-wrap"},[x("input",{class:"fit",value:P.value[O.value],...!0!==Y.value?{readonly:!0}:{},...$("topIn",{onInput:e=>{de(!0===ue(e))},onChange:i,onBlur:e=>{!0===ue(e,!0)&&r.$forceUpdate(),de(!1)}})}),x(s,{ref:U,class:"q-color-picker__error-icon absolute no-pointer-events",name:M.iconSet.type.negative})])),x("div",{class:"q-color-picker__header relative-position overflow-hidden"},[x("div",{class:"q-color-picker__header-bg absolute-full"}),x("div",{class:z.value,style:X.value},a)])}()),!0!==e.noFooter&&a.push(x("div",{class:"q-color-picker__footer relative-position overflow-hidden"},[x(d,{class:"absolute-full",modelValue:R.value,dense:!0,align:"justify","onUpdate:modelValue":be},()=>[x(v,{icon:M.iconSet.colorPicker.spectrum,name:"spectrum",ripple:!1}),x(v,{icon:M.iconSet.colorPicker.tune,name:"tune",ripple:!1}),x(v,{icon:M.iconSet.colorPicker.palette,name:"palette",ripple:!1})])])),x("div",{class:K.value,...L.value},a)}}});export{E as Q};
