import{Q as e}from"./QSpinnerDots-BY_P7fmL.js";import{Q as s}from"./QTab-DhKL91H_.js";import{Q as a}from"./QTabs-CDJ215OP.js";import{p as o,u as l,a as t,e as r,n as i}from"./app-BXm70mdJ.js";import{Q as m}from"./QTabPanel-sB32VrK8.js";import{Q as n}from"./QTabPanels-LFwTBPSC.js";import{u as c}from"./schoolData-lzO9rVwn.js";import{f as u,k as d,o as p,L as b,I as y,b as v,M as h,H as j,U as f,y as w,J as g,Z as x}from"./vendor-DNM7Y6Xn.js";import Q from"./WeeklyPlanMenu-CPPNbbnB.js";import S from"./SchoolOverview-DigAXyX8.js";import k from"./ClassroomHierarchy-CH9d5zPL.js";import T from"./AssignmentsTable-C1mNkDTj.js";import{u as _}from"./i18n-CBOKL2HS.js";import"./rtl-Cr6c3OOr.js";import"./offline-BzIlwqNM.js";import"./ui-BP0GJNn5.js";import"./use-panel-D2HepUiw.js";import"./use-render-cache-CmTcazfP.js";import"./QSpace-Bu8V-QDa.js";import"./WeeklySystemGuide-e9afDUCT.js";import"./MainSchoolData-poTNtOLu.js";import"./QBadge-ZzhN1X9C.js";import"./SchoolSettingsDialog-D2VgwIPk.js";import"./QSelect-CnZtzPIC.js";import"./QForm-DyZk5PSh.js";import"./QTd-BIxMTYzb.js";import"./QTable-rnEofRem.js";import"./QMarkupTable-Dmg3C5Wm.js";import"./QLinearProgress-Cix0cchl.js";import"./use-fullscreen-FlxrEg_V.js";const B={class:"q-pa-md"},q={class:"row items-center q-mb-md"},V={class:"col"},M={class:"text-h4 text-weight-bold text-primary"},A={class:"text-subtitle2 text-grey-7"},C={key:0,class:"row justify-center q-my-xl"},D={key:1},I={class:"text-h6 text-grey-7 q-mt-md"},P={class:"text-body2 text-grey-6"},z=o({__name:"SchoolBrowser",setup(o){const{t:z}=_(),H=l(),L=c(),U=u(null),F=u(!1),J=u("overview");return d(()=>L.hasAllContext,async e=>{e?await(async()=>{var e,s;if(L.schoolId){F.value=!0;try{const e=await x.get(route("weekly-system.api.school-data"),{params:{school_id:L.schoolId}});U.value=e.data}catch(a){H.notify({type:"negative",message:"Failed to load school data",caption:(null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.message)||a.message})}finally{F.value=!1}}else U.value=null})():U.value=null},{immediate:!0}),p(()=>{}),(o,l)=>(y(),b("div",B,[v(Q),h("div",q,[h("div",V,[h("div",M,f(w(z)("weeklySystem.schoolBrowser.title")),1),h("div",A,f(w(z)("weeklySystem.schoolBrowser.subtitle")),1)])]),F.value?(y(),b("div",C,[v(e,{color:"primary",size:"50px"})])):w(L).hasAllContext&&U.value?(y(),b("div",D,[v(a,{modelValue:J.value,"onUpdate:modelValue":l[0]||(l[0]=e=>J.value=e),dense:"",class:"text-grey-7 q-mb-md","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},{default:g(()=>[v(s,{name:"overview",icon:"dashboard",label:w(z)("weeklySystem.schoolBrowser.overviewTab")},null,8,["label"]),v(s,{name:"classrooms",icon:"class",label:w(z)("weeklySystem.schoolBrowser.classroomsTab")},null,8,["label"]),v(s,{name:"assignments",icon:"assignment",label:w(z)("weeklySystem.schoolBrowser.assignmentsTab")},null,8,["label"])]),_:1},8,["modelValue"]),v(t,{class:"q-mb-md"}),v(n,{modelValue:J.value,"onUpdate:modelValue":l[1]||(l[1]=e=>J.value=e),animated:""},{default:g(()=>[v(m,{name:"overview"},{default:g(()=>[v(S,{stats:U.value.stats||{},subjects:U.value.subjects||[],teachers:U.value.teachers||[]},null,8,["stats","subjects","teachers"])]),_:1}),v(m,{name:"classrooms"},{default:g(()=>[v(k,{hierarchy:U.value.hierarchy||[],assignments:U.value.assignments||[]},null,8,["hierarchy","assignments"])]),_:1}),v(m,{name:"assignments"},{default:g(()=>[v(T,{assignments:U.value.assignments||[]},null,8,["assignments"])]),_:1})]),_:1},8,["modelValue"])])):(y(),j(i,{key:2,flat:"",bordered:"",class:"q-pa-xl text-center"},{default:g(()=>[v(r,{name:"school",size:"80px",color:"grey-5"}),h("div",I,f(w(z)("weeklySystem.schoolBrowser.selectSchool")),1),h("div",P,f(w(z)("weeklySystem.schoolBrowser.selectSchoolHint")),1)]),_:1}))]))}},[["__scopeId","data-v-36b63738"]]);export{z as default};
