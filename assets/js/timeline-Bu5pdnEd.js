import e from"./UpcomingEvents-C1b7D3qy.js";import t from"./UpcomingEvent-CPdkleb2.js";import s from"./CurrentEventCard-Byvu7pXU.js";import r from"./EventCard-DcluCaZc.js";import{o as l}from"./app-tFXAu5dG.js";import{f as a,a as n,o,e as i,N as u,J as d,I as p,Q as m,b as c,O as v,F as g,R as b,an as f,V as x,S as h,U as y,K as w,C as j}from"./vendor-nQjeLEvd.js";import"./EventTimingBadge-BE2XMyBu.js";import"./EventDurationBadge-CD5yvF-P.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";const D={class:"timeline-outer-container"},N={class:"p-0 fixed top-10 left-0"},S={class:"relative",style:{height:"2880px"}},M={class:"absolute left-0 w-20 h-full select-none border-r border-gray-200 bg-white"},E={class:"absolute top-0 w-full flex items-center justify-end pr-2 h-6 bg-gray-50/40"},k={class:"text-sm font-semibold text-gray-600"},C={class:"absolute left-20 right-0 h-full"},H={class:"relative"},T={class:"absolute -left-20 -top-2.5 flex items-center justify-end w-16"},$={class:"text-sm font-semibold text-red-500"},_=l({__name:"timeline",props:{events:{type:Array,required:!0}},emits:["update:events","edit","delete","status-change"],setup(l,{emit:_}){const z=_,I=a(null),B=a(A()),R=a(F());let U=null;const O=l,Q=e=>{const[t,s]=e.from.split(":").map(Number),[r,l]=e.to.split(":").map(Number),a=60*t+s;return{top:2*a+"px",height:2*(60*r+l-a)+"px",width:95/e.totalColumns+"%",left:e.column*(95/e.totalColumns)+"%"}},q=e=>({"bg-blue-50/80 text-blue-700":"pending"===e,"bg-yellow-50/80 text-yellow-700":"in-progress"===e,"bg-green-50/80 text-green-700":"completed"===e});function A(){const e=new Date;return 120*e.getHours()+2*e.getMinutes()}function F(){return(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function J(){B.value=A(),R.value=F()}const K=()=>{var e,t;const s=B.value,r=(null==(e=I.value)?void 0:e.clientHeight)||0;null==(t=I.value)||t.scrollTo({top:s-r/2,behavior:"smooth"})},L=e=>{const t=new Date,[s,r]=e.from.split(":").map(Number),[l,a]=e.to.split(":").map(Number),n=new Date(t);n.setHours(s,r,0,0);const o=new Date(t);o.setHours(l,a,0,0);const i=n-t,u=o-t,d=Math.floor(i/6e4),p=Math.floor(u/6e4),m=Math.floor(u%6e4/1e3);if(d>0)return{type:"upcoming",text:`Starts in ${d} minutes`,color:"text-blue-600"};if(p>=0||0===p&&m>0){return{type:"in-progress",text:`${String(Math.max(0,p)).padStart(2,"0")}:${String(Math.max(0,m)).padStart(2,"0")} minutes left`,color:"text-green-600"}}return{type:"ended",text:"Ended",color:"text-gray-600",remove:!0}};n(()=>{const e=new Date;return O.events.some(t=>{const s=t.startTime,r=new Date(s.getTime()+6e4*t.duration);return e>=s&&e<=r})});const P=n(()=>{const e=new Date,t=60*e.getHours()+e.getMinutes()+e.getSeconds()/60;return O.events.find(e=>{const[s,r]=e.from.split(":").map(Number),[l,a]=e.to.split(":").map(Number);return t>=60*s+r&&t<60*l+a&&"completed"!==e.status})}),V=e=>{if(!e)return 0;const t=new Date,[s,r]=e.from.split(":").map(Number),[l,a]=e.to.split(":").map(Number),n=60*s+r,o=60*l+a-n,i=60*t.getHours()+t.getMinutes()-n;return Math.min(100,Math.max(0,i/o*100))};o(()=>{J(),O.events&&O.events.forEach(G),U=setInterval(()=>{J(),O.events&&(O.events.forEach(G),z("update:events",[...O.events]))},100),K()}),i(()=>{U&&clearInterval(U)});const G=e=>{const t=new Date,s=60*t.getHours()+t.getMinutes()+t.getSeconds()/60,[r,l]=e.from.split(":").map(Number),[a,n]=e.to.split(":").map(Number),o=60*r+l,i=60*a+n;e.status=s<o?"pending":s>=o&&s<i?"in-progress":"completed"},W=n(()=>{const e=new Date;return O.events.filter(t=>{const[s,r]=t.from.split(":").map(Number),l=new Date(e);return l.setHours(s,r,0,0),l>e}).sort((e,t)=>{const[s,r]=e.from.split(":").map(Number),[l,a]=t.from.split(":").map(Number);return 60*s+r-(60*l+a)}).slice(0,3)}),X=e=>{const t=new Date,s=60*t.getHours()+t.getMinutes(),[r,l]=e.to.split(":").map(Number);return s>=60*r+l};return(a,n)=>(d(),u("div",D,[P.value&&!X(P.value)?(d(),p(s,{key:0,event:P.value,currentTimeString:R.value,progress:V(P.value),"progress-bar-class":"bg-blue-500",onEdit:n[0]||(n[0]=e=>a.$emit("edit",e)),onStatusChange:n[1]||(n[1]=e=>a.$emit("status-change",e))},null,8,["event","currentTimeString","progress"])):m("",!0),c(e,{events:W.value},null,8,["events"]),v("div",N,[c(t,{events:W.value},null,8,["events"])]),v("button",{onClick:K,class:"fixed bottom-4 right-4 bg-blue-500 hover:bg-blue-600 text-white rounded-full p-3 shadow-lg z-50 transition-all duration-200"},n[4]||(n[4]=[v("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])),v("div",{class:"timeline-container",ref_key:"timelineRef",ref:I},[v("div",S,[v("div",M,[(d(),u(g,null,b(24,e=>v("div",{key:e,class:"relative h-[120px]"},[v("div",E,[v("span",k,x((e-1).toString().padStart(2,"0"))+":00 ",1)]),n[5]||(n[5]=f('<div class="absolute top-[30px] w-full flex items-center justify-end pr-2" data-v-6ef998c6><span class="text-xs text-gray-400" data-v-6ef998c6>15</span></div><div class="absolute top-[60px] w-full flex items-center justify-end pr-2" data-v-6ef998c6><span class="text-xs font-medium text-gray-500" data-v-6ef998c6>30</span></div><div class="absolute top-[90px] w-full flex items-center justify-end pr-2" data-v-6ef998c6><span class="text-xs text-gray-400" data-v-6ef998c6>45</span></div>',3))])),64))]),v("div",C,[(d(),u(g,null,b(24,e=>(d(),u(g,{key:e},[v("div",{class:y(["absolute w-full border-t",[e%6==0?"border-gray-400 border-t-2":"border-gray-300 border-t-[1.5px]","bg-gray-50/30"]]),style:h({top:120*(e-1)+"px",height:"2px"})},null,6),v("div",{class:y(["absolute w-full",[e%2==0?"bg-gray-50/30":"bg-transparent"]]),style:h({top:120*(e-1)+"px",height:"120px"})},null,6),v("div",{class:"absolute w-full border-t border-dashed border-gray-100",style:h({top:120*(e-1)+30+"px"})},null,4),v("div",{class:"absolute w-full border-t border-gray-200",style:h({top:120*(e-1)+60+"px"})},null,4),v("div",{class:"absolute w-full border-t border-dashed border-gray-100",style:h({top:120*(e-1)+90+"px"})},null,4)],64))),64)),v("div",{class:"absolute left-0 right-0 z-30 transition-all duration-1000",style:h({top:`${B.value}px`})},[v("div",H,[v("div",T,[v("span",$,x(R.value),1),n[6]||(n[6]=v("div",{class:"w-2 h-2 rounded-full bg-red-500 ml-2"},null,-1))]),n[7]||(n[7]=v("div",{class:"border-t-2 border-red-500 w-full"},null,-1))])],4),c(j,{name:"event",tag:"div",class:"relative"},{default:w(()=>[(d(!0),u(g,null,b(l.events,e=>{return d(),u("div",{key:e.id,class:y(["absolute rounded-lg transition-all duration-300 group",["hover:z-30",e.column>0?"ml-1":""]]),style:h(Q(e))},[c(r,{event:e,"status-class":(t=e.status,{"border-l-4 border-blue-400 hover:border-blue-500":"pending"===t,"border-l-4 border-yellow-400 hover:border-yellow-500":"in-progress"===t,"border-l-4 border-green-400 hover:border-green-500":"completed"===t}),"header-class":q(e.status),timing:L(e),onEdit:n[2]||(n[2]=e=>a.$emit("edit",e)),onDelete:n[3]||(n[3]=e=>a.$emit("delete",e))},null,8,["event","status-class","header-class","timing"])],6);var t}),128))]),_:1})])])],512)]))}},[["__scopeId","data-v-6ef998c6"]]);export{_ as default};
