import{_ as e}from"./LucideIcon-DP3BSI4t.js";import{p as a}from"./app-BzjXrVp9.js";import{f as t,L as o,I as l,O as i,M as n,$ as s,S as r,b as u,K as d,R as m}from"./vendor-EI0FRBVb.js";import"./createLucideIcon-APVJ2SH-.js";import"./align-right-CnRMXp62.js";import"./underline-PDlIMkNx.js";import"./image-CpjPXLZL.js";import"./printer-DTcC0fi8.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";const c=["title"],p=a({__name:"DraggableWrapper2",props:{modelValue:{type:Object,required:!0,default:()=>({x:0,y:0,visible:!0})},hideDragHandle:{type:Boolean,default:!1},showHandle:{type:Boolean,default:!1},dragIconName:{type:String,default:"move"},dragTitle:{type:String,default:"Drag to move"},constraints:{type:Object,default:()=>({minX:0,maxX:90,minY:0,maxY:90})}},emits:["update:modelValue","drag-start","drag-end","toggle-visibility"],setup(a,{emit:p}){const v=a,g=p,y=t(!1),f=t({x:0,y:0}),x=t({x:0,y:0}),b=t(null),h=e=>{e.preventDefault(),y.value=!0;const a=e.target.closest(".canvas-area")||document.querySelector(".canvas-area");b.value=a.getBoundingClientRect(),f.value={x:e.clientX,y:e.clientY},x.value={x:v.modelValue.x,y:v.modelValue.y},document.addEventListener("mousemove",j),document.addEventListener("mouseup",V),g("drag-start")},j=e=>{if(!y.value||!b.value)return;const a=e.clientX-f.value.x,t=e.clientY-f.value.y,o=a/b.value.width*100,l=t/b.value.height*100;let i=x.value.x+o,n=x.value.y+l;i=Math.max(v.constraints.minX,Math.min(v.constraints.maxX,i)),n=Math.max(v.constraints.minY,Math.min(v.constraints.maxY,n)),g("update:modelValue",{...v.modelValue,x:i,y:n})},V=()=>{y.value=!1,document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",V),g("drag-end")};return(t,p)=>(l(),o("div",{class:"draggable-wrapper group relative",style:m({left:`${a.modelValue.x}%`,top:`${a.modelValue.y}%`,position:"absolute",opacity:a.modelValue.visible?1:.3,transform:`scale(${a.modelValue.visible?1:.95})`,transition:"opacity 0.3s ease, transform 0.3s ease",zIndex:y.value?50:10})},[a.hideDragHandle?i("",!0):(l(),o("div",{key:0,onDblclick:p[0]||(p[0]=e=>t.$emit("toggle-visibility")),class:r(["absolute -top-2 -left-2 w-8 h-8 rounded-full flex items-center justify-center cursor-move z-50 transition-all duration-200",y.value?"bg-indigo-600":"bg-gray-500 hover:bg-gray-600",a.showHandle?"opacity-100":"opacity-0 group-hover:opacity-100"]),onMousedown:s(h,["stop"]),title:a.dragTitle},[u(e,{name:a.dragIconName,class:r(["w-4 h-4 text-white",{"animate-spin":y.value}])},null,8,["name","class"])],42,c)),n("div",{class:r(["draggable-content",{"pointer-events-none":y.value}])},[d(t.$slots,"default",{},void 0,!0)],2)],4))}},[["__scopeId","data-v-8216ed9f"]]);export{p as default};
