import{o as e,u as l,c as a,d as t,Q as o,f as s,m as n,b as i,p as r,l as d,aP as c,C as u}from"./app-B77gjd5a.js";import{Q as m}from"./QBadge-ZkvAqPBD.js";import{Q as p}from"./QSpace-Bk4F2b8L.js";import{Q as v}from"./QColor-wHZP5dke.js";import{Q as b}from"./QPopupProxy-DUcqDdBR.js";import{f,a as g,I as y,J as h,K as x,b as w,N as C,M as _,R as V,z as k,F as j,W as I,V as A,y as S,Q as U,S as T,o as P,af as M,_ as Q}from"./vendor-DuKqz2x4.js";import{d as z}from"./vuedraggable.umd-CABkNphu.js";import{Q as N}from"./QSelect-DB_tK-Lk.js";import{Q as E,a as G}from"./QStepper-ByYk8Nka.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./QSlider-DfH-qdFu.js";import"./QTabs-D_ZwIIJm.js";import"./rtl-Cr6c3OOr.js";import"./QTab-CnAf4tCv.js";import"./QTabPanels-B5JhG1n5.js";import"./use-panel-N2fkKyR_.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-B_PJ80R0.js";import"./index-DJPqu1_-.js";const q=[{label:"Elementary Science",subject:"Science",grade:"Elementary (K-5)",sections:5,instructions:"Focus on hands-on activities and exploration"},{label:"High School Math",subject:"Mathematics",grade:"High School (9-12)",sections:6,instructions:"Include problem-solving and real-world applications"},{label:"Middle School Language Arts",subject:"Language Arts",grade:"Middle School (6-8)",sections:5,instructions:"Balance reading, writing, and discussion activities"},{label:"Elementary General",subject:"General",grade:"Elementary (K-5)",sections:4,instructions:"Keep it simple and engaging for young learners"}];const O={class:"flex items-center justify-between"},R={class:"flex items-center gap-3"},L={class:"max-w-3xl mx-auto p-6"},F={class:"mb-6"},$={class:"flex flex-wrap gap-2"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},B={class:"flex justify-end gap-2"},K={class:"max-w-6xl mx-auto p-6"},D={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4"},H={class:"flex items-start gap-2"},Y={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},W={class:"flex items-center justify-between mb-2"},X={class:"whitespace-pre-wrap text-xs font-mono"},Z={class:"mt-4"},ee={class:"flex items-center justify-between mb-2"},le={class:"flex gap-2"},ae={class:"flex items-center justify-between mb-2"},te={class:"border rounded-lg overflow-hidden bg-white",style:{height:"400px"}},oe=["src"],se={key:1,class:"flex items-center justify-center h-full text-gray-400"},ne={class:"text-center"},ie={class:"flex justify-between gap-2 mt-6"},re={class:"mt-4"},de={class:"space-y-2"},ce={class:"max-w-4xl mx-auto p-6"},ue={class:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4"},me={class:"flex items-start gap-2"},pe={class:"relative mb-4"},ve={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4"},be={class:"flex items-start gap-2"},fe={class:"flex-1"},ge={class:"list-disc list-inside text-sm text-red-700 space-y-1"},ye={class:"flex justify-between gap-2"},he={class:"max-w-4xl mx-auto p-6"},xe={key:0,class:"space-y-4"},we={class:"text-lg font-semibold"},Ce={class:"text-sm text-gray-600 mb-3"},_e={class:"space-y-2"},Ve={class:"flex items-center gap-2"},ke={class:"text-2xl"},je={class:"flex-1"},Ie={class:"font-semibold"},Ae={class:"text-xs opacity-75"},Se={class:"flex flex-wrap gap-2"},Ue={class:"flex justify-between gap-2 mt-6"},Te={class:"flex gap-2"},Pe=e({__name:"AITemplateSuggestion",emits:["template-accepted","close"],setup(e,{expose:m,emit:p}){const v=l(),b=p,P=f(!1),M=f(1),Q=f({subject:"Mathematics",grade:"Elementary (K-5)",sectionCount:5,customInstructions:""}),z=[{label:"Mathematics",value:"Mathematics"},{label:"Science",value:"Science"},{label:"Language Arts",value:"Language Arts"},{label:"Social Studies",value:"Social Studies"},{label:"Arts",value:"Arts"},{label:"Physical Education",value:"Physical Education"},{label:"General",value:"General"}],Pe=[{label:"Elementary (K-5)",value:"Elementary (K-5)"},{label:"Middle School (6-8)",value:"Middle School (6-8)"},{label:"High School (9-12)",value:"High School (9-12)"},{label:"Mixed Grades",value:"Mixed Grades"}],Me=f(""),Qe=f(!1),ze=f(!1),Ne=f(""),Ee=f(""),Ge=f(!1),qe=[{name:"Gemini",url:"https://gemini.google.com/"},{name:"ChatGPT",url:"https://chatgpt.com/"},{name:"Claude",url:"https://claude.ai/"},{name:"Perplexity",url:"https://www.perplexity.ai/"}],Oe=f(""),Re=f([]),Le=f(null),Fe=f(!1),$e=g(()=>Q.value.subject&&Q.value.grade&&Q.value.sectionCount>=3&&Q.value.sectionCount<=10),Je=e=>{Ne.value=e,localStorage.setItem("ai_tool_url",e),v.notify({type:"positive",message:"AI tool updated",position:"top",timeout:1500})},Be=()=>{Ee.value.trim()&&(Je(Ee.value.trim()),Ge.value=!1)},Ke=()=>{Ne.value&&window.open(Ne.value,"_blank")},De=()=>{P.value=!1,b("close")},He=()=>{Q.value={subject:"Mathematics",grade:"Elementary (K-5)",sectionCount:5,customInstructions:""},Me.value="",Oe.value="",Re.value=[],Le.value=null,Qe.value=!1},Ye=()=>{Me.value=function(e){const{subject:l,grade:a,sectionCount:t,customInstructions:o}=e;return`You are an expert educational curriculum designer. Generate a lesson plan section template with the following specifications:\n\n**Requirements:**\n- Subject: ${l}\n- Grade Level: ${a}\n- Number of Sections: ${t}\n${o?`- Additional Instructions: ${o}`:""}\n\n**Instructions:**\n1. Create pedagogically sound section names appropriate for the grade level\n2. Use relevant emojis that match each section's educational purpose\n3. Assign meaningful colors to each section (use hex color codes)\n4. Include both emoji icons and Quasar icon names (from Material Design Icons)\n5. Use age-appropriate language and terminology\n\n**Required JSON Format:**\nReturn ONLY a valid JSON object (no markdown, no code blocks) with this exact structure:\n\n{\n  "name": "Descriptive template name (e.g., 'Grade 5 Math Problem-Solving Template')",\n  "sections": [\n    {\n      "id": "unique_lowercase_id",\n      "title": "Section Title",\n      "icon": "ðŸ“",\n      "qIcon": "article",\n      "bg": "#f3f4f6",\n      "bgActive": "#e5e7eb",\n      "borderColor": "#9ca3af",\n      "textColor": "#1f2937"\n    }\n  ]\n}\n\n**Section Guidelines:**\n- Common sections might include: Objectives, Warm-up, Introduction, Main Activity, Practice, Assessment, Closure, Homework, etc.\n- Each section should have a unique ID (lowercase, underscores for spaces)\n- Use complementary colors that are visually distinct\n- Background colors should be light/pastel for readability\n- Active backgrounds should be slightly darker than regular backgrounds\n- Text colors should provide good contrast with backgrounds\n\n**Example Quasar Icons:** flag, lightbulb, school, psychology, edit, quiz, check_circle, home, star, etc.\n\nPlease generate the template now.`}(Q.value),M.value=2},We=async()=>{ze.value=!0;try{await navigator.clipboard.writeText(Me.value),Qe.value=!0,v.notify({type:"positive",message:"Prompt copied to clipboard!",position:"top",timeout:2e3}),setTimeout(()=>{Qe.value=!1},2e3)}catch(e){v.notify({type:"negative",message:"Failed to copy to clipboard",position:"top"})}finally{ze.value=!1}},Xe=async()=>{try{const e=await navigator.clipboard.readText();Oe.value=e,v.notify({type:"positive",message:"Pasted from clipboard!",position:"top",timeout:1500})}catch(e){v.notify({type:"negative",message:"Failed to read from clipboard. Please paste manually.",position:"top"})}},Ze=()=>{Fe.value=!0,Re.value=[],setTimeout(()=>{const e=function(e){try{const l=e.match(/```(?:json)?\s*\n?([\s\S]*?)\n?```/),a=l?l[1]:e;return{success:!0,data:JSON.parse(a.trim())}}catch(l){return{success:!1,error:`Failed to parse JSON: ${l.message}. Please ensure the response is valid JSON.`}}}(Oe.value);if(!e.success)return Re.value=[e.error],void(Fe.value=!1);const l=function(e){const l=[];return e&&"object"==typeof e?(e.name&&"string"==typeof e.name||l.push('Missing or invalid "name" field (must be a string)'),e.sections&&Array.isArray(e.sections)?(0===e.sections.length&&l.push("Sections array must contain at least one section"),e.sections.forEach((e,a)=>{const t=[];e.id&&"string"==typeof e.id||t.push('Missing or invalid "id"'),e.title&&"string"==typeof e.title||t.push('Missing or invalid "title"'),e.icon&&"string"==typeof e.icon||t.push('Missing or invalid "icon"'),e.qIcon&&"string"==typeof e.qIcon||t.push('Missing or invalid "qIcon"'),["bg","bgActive","borderColor","textColor"].forEach(l=>{e[l]&&"string"==typeof e[l]?/^#[0-9A-Fa-f]{6}$/.test(e[l])||t.push(`Invalid hex color format for "${l}"`):t.push(`Missing or invalid "${l}"`)}),t.length>0&&l.push(`Section ${a+1}: ${t.join(", ")}`)}),{valid:0===l.length,errors:l}):(l.push('Missing or invalid "sections" field (must be an array)'),{valid:!1,errors:l})):(l.push("Response must be a valid JSON object"),{valid:!1,errors:l})}(e.data);if(!l.valid)return Re.value=l.errors,void(Fe.value=!1);Le.value=e.data,M.value=4,Fe.value=!1},500)},el=()=>{b("template-accepted",Le.value),P.value=!1};return m({open:()=>{P.value=!0,M.value=1,(()=>{const e=localStorage.getItem("ai_tool_url");Ne.value=e||qe[0].url})(),He()}}),(e,l)=>(h(),y(i,{modelValue:P.value,"onUpdate:modelValue":l[13]||(l[13]=e=>P.value=e),persistent:"",maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:x(()=>[w(n,{class:"flex flex-col"},{default:x(()=>[w(a,{class:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white"},{default:x(()=>[C("div",O,[C("div",R,[w(t,{name:"auto_awesome",size:"32px"}),l[14]||(l[14]=C("div",null,[C("div",{class:"text-h5 font-bold"},"AI Template Generator"),C("div",{class:"text-sm opacity-90"},"Let AI help you create the perfect lesson template")],-1))]),w(o,{flat:"",round:"",dense:"",icon:"close",onClick:De})])]),_:1}),w(E,{modelValue:M.value,"onUpdate:modelValue":l[12]||(l[12]=e=>M.value=e),ref:"stepper",color:"primary",animated:"",class:"flex-1"},{default:x(()=>[w(G,{name:1,title:"Configure",icon:"settings",done:M.value>1},{default:x(()=>[C("div",L,[l[16]||(l[16]=C("h3",{class:"text-xl font-semibold mb-4"},"Template Configuration",-1)),C("div",F,[l[15]||(l[15]=C("label",{class:"text-sm font-medium text-gray-700 mb-2 block"},"Quick Suggestions",-1)),C("div",$,[(h(!0),_(j,null,V(k(q),e=>(h(),y(o,{key:e.label,outline:"",color:"primary",label:e.label,onClick:l=>(e=>{Q.value.subject=e.subject,Q.value.grade=e.grade,Q.value.sectionCount=e.sections,Q.value.customInstructions=e.instructions})(e),size:"sm"},null,8,["label","onClick"]))),128))])]),C("div",J,[w(N,{modelValue:Q.value.subject,"onUpdate:modelValue":l[0]||(l[0]=e=>Q.value.subject=e),options:z,label:"Subject *",outlined:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue"]),w(N,{modelValue:Q.value.grade,"onUpdate:modelValue":l[1]||(l[1]=e=>Q.value.grade=e),options:Pe,label:"Grade Level *",outlined:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue"]),w(s,{modelValue:Q.value.sectionCount,"onUpdate:modelValue":l[2]||(l[2]=e=>Q.value.sectionCount=e),modelModifiers:{number:!0},type:"number",label:"Number of Sections *",outlined:"",dense:"",min:"3",max:"10",hint:"Between 3 and 10 sections"},null,8,["modelValue"])]),w(s,{modelValue:Q.value.customInstructions,"onUpdate:modelValue":l[3]||(l[3]=e=>Q.value.customInstructions=e),type:"textarea",label:"Additional Instructions (Optional)",outlined:"",rows:"3",hint:"Add any specific requirements or focus areas",class:"mb-4"},null,8,["modelValue"]),C("div",B,[w(o,{flat:"",label:"Cancel",onClick:De}),w(o,{unelevated:"",color:"primary",label:"Generate Prompt","icon-right":"arrow_forward",onClick:Ye,disable:!$e.value},null,8,["disable"])])])]),_:1},8,["done"]),w(G,{name:2,title:"Use AI Tool",icon:"smart_toy",done:M.value>2},{default:x(()=>[C("div",K,[l[22]||(l[22]=C("h3",{class:"text-xl font-semibold mb-4"},"Work with AI Tool",-1)),C("div",D,[C("div",H,[w(t,{name:"info",color:"blue",size:"20px",class:"mt-1"}),l[17]||(l[17]=C("div",{class:"text-sm text-blue-800"},[C("strong",null,"Instructions:"),I(" Copy the prompt below and paste it into the AI tool. You can use the embedded iframe or open your AI tool in a new tab. ")],-1))])]),C("div",Y,[C("div",null,[C("div",W,[l[18]||(l[18]=C("label",{class:"text-sm font-medium text-gray-700"},"Generated Prompt",-1)),w(o,{dense:"",unelevated:"",color:"primary",icon:"content_copy",label:"Copy",onClick:We,size:"sm",loading:ze.value},null,8,["loading"])]),w(n,{flat:"",bordered:"",class:"bg-gray-50",style:{"max-height":"400px","overflow-y":"auto"}},{default:x(()=>[w(a,null,{default:x(()=>[C("pre",X,A(Me.value),1)]),_:1})]),_:1}),C("div",Z,[C("div",ee,[l[19]||(l[19]=C("label",{class:"text-sm font-medium text-gray-700"},"AI Tool URL",-1)),w(o,{dense:"",flat:"",color:"primary",icon:"settings",label:"Change",onClick:l[4]||(l[4]=e=>Ge.value=!0),size:"sm"})]),C("div",le,[(h(),_(j,null,V(qe,e=>w(o,{key:e.name,dense:"",outline:"",color:Ne.value===e.url?"primary":"grey",label:e.name,onClick:l=>Je(e.url),size:"sm"},null,8,["color","label","onClick"])),64))])])]),C("div",null,[C("div",ae,[l[20]||(l[20]=C("label",{class:"text-sm font-medium text-gray-700"},"AI Tool (Embedded)",-1)),w(o,{dense:"",flat:"",color:"primary",icon:"open_in_new",label:"Open in New Tab",onClick:Ke,size:"sm"})]),C("div",te,[Ne.value?(h(),_("iframe",{key:0,src:Ne.value,class:"w-full h-full",frameborder:"0",sandbox:"allow-same-origin allow-scripts allow-forms allow-popups allow-popups-to-escape-sandbox"},null,8,oe)):(h(),_("div",se,[C("div",ne,[w(t,{name:"smart_toy",size:"48px",class:"mb-2"}),l[21]||(l[21]=C("div",null,"Select an AI tool to get started",-1))])]))])])]),C("div",ie,[w(o,{flat:"",label:"Back",icon:"arrow_back",onClick:l[5]||(l[5]=e=>M.value=1)}),w(o,{unelevated:"",color:"primary",label:"I Have the Response","icon-right":"arrow_forward",onClick:l[6]||(l[6]=e=>M.value=3)})])])]),_:1},8,["done"]),w(i,{modelValue:Ge.value,"onUpdate:modelValue":l[8]||(l[8]=e=>Ge.value=e)},{default:x(()=>[w(n,{style:{"min-width":"400px"}},{default:x(()=>[w(a,{class:"bg-primary text-white"},{default:x(()=>l[23]||(l[23]=[C("div",{class:"text-h6"},"Configure AI Tool URL",-1)])),_:1}),w(a,null,{default:x(()=>[w(s,{modelValue:Ee.value,"onUpdate:modelValue":l[7]||(l[7]=e=>Ee.value=e),label:"Custom AI Tool URL",outlined:"",dense:"",placeholder:"https://chatgpt.com",hint:"Enter the URL of your preferred AI tool"},null,8,["modelValue"]),C("div",re,[l[24]||(l[24]=C("div",{class:"text-sm font-medium text-gray-700 mb-2"},"Quick Presets:",-1)),C("div",de,[(h(),_(j,null,V(qe,e=>w(o,{key:e.name,outline:"",color:"primary",label:e.name,onClick:l=>Ee.value=e.url,class:"w-full",align:"left"},{default:x(()=>[w(r,null,{default:x(()=>[I(A(e.url),1)]),_:2},1024)]),_:2},1032,["label","onClick"])),64))])])]),_:1}),w(d,{align:"right"},{default:x(()=>[S(w(o,{flat:"",label:"Cancel"},null,512),[[c]]),w(o,{unelevated:"",color:"primary",label:"Save",onClick:Be})]),_:1})]),_:1})]),_:1},8,["modelValue"]),w(G,{name:3,title:"Paste Response",icon:"content_paste",done:M.value>3},{default:x(()=>[C("div",ce,[l[27]||(l[27]=C("h3",{class:"text-xl font-semibold mb-4"},"Paste AI Response",-1)),C("div",ue,[C("div",me,[w(t,{name:"tips_and_updates",color:"amber",size:"20px",class:"mt-1"}),l[25]||(l[25]=C("div",{class:"text-sm text-amber-800"},[C("strong",null,"Tip:"),I(" Paste the complete JSON response from your AI tool. The system will automatically validate the format. ")],-1))])]),C("div",pe,[w(s,{modelValue:Oe.value,"onUpdate:modelValue":l[9]||(l[9]=e=>Oe.value=e),type:"textarea",label:"AI Response *",outlined:"",rows:"12",placeholder:"Paste the AI response here...",class:"font-mono"},null,8,["modelValue"]),w(o,{unelevated:"",color:"secondary",icon:"content_paste",label:"Paste from Clipboard",onClick:Xe,class:"absolute top-4 right-4",size:"sm"})]),Re.value.length>0?(h(),_("div",ve,[C("div",be,[w(t,{name:"error",color:"red",size:"20px",class:"mt-1"}),C("div",fe,[l[26]||(l[26]=C("div",{class:"font-semibold text-red-800 mb-2"},"Validation Errors:",-1)),C("ul",ge,[(h(!0),_(j,null,V(Re.value,(e,l)=>(h(),_("li",{key:l},A(e),1))),128))])])])])):U("",!0),C("div",ye,[w(o,{flat:"",label:"Back",icon:"arrow_back",onClick:l[10]||(l[10]=e=>M.value=2)}),w(o,{unelevated:"",color:"primary",label:"Validate & Preview","icon-right":"arrow_forward",onClick:Ze,disable:!Oe.value.trim(),loading:Fe.value},null,8,["disable","loading"])])])]),_:1},8,["done"]),w(G,{name:4,title:"Preview",icon:"visibility",done:M.value>4},{default:x(()=>[C("div",he,[l[31]||(l[31]=C("h3",{class:"text-xl font-semibold mb-4"},"Preview Template",-1)),Le.value?(h(),_("div",xe,[w(n,{flat:"",bordered:""},{default:x(()=>[w(a,null,{default:x(()=>[l[28]||(l[28]=C("div",{class:"text-sm text-gray-600 mb-1"},"Template Name",-1)),C("div",we,A(Le.value.name),1)]),_:1})]),_:1}),w(n,{flat:"",bordered:""},{default:x(()=>[w(a,null,{default:x(()=>[C("div",Ce,"Sections ("+A(Le.value.sections.length)+")",1),C("div",_e,[(h(!0),_(j,null,V(Le.value.sections,(e,a)=>(h(),_("div",{key:a,class:"flex items-center gap-3 p-3 rounded-lg border",style:T({backgroundColor:e.bg,borderColor:e.borderColor,color:e.textColor})},[C("div",Ve,[C("span",ke,A(e.icon),1),w(t,{name:e.qIcon,size:"24px"},null,8,["name"])]),C("div",je,[C("div",Ie,A(e.title),1),C("div",Ae,"ID: "+A(e.id),1)]),w(u,{dense:"",style:T({backgroundColor:e.bgActive})},{default:x(()=>l[29]||(l[29]=[I(" Active State ")])),_:2},1032,["style"])],4))),128))])]),_:1})]),_:1}),w(n,{flat:"",bordered:""},{default:x(()=>[w(a,null,{default:x(()=>[l[30]||(l[30]=C("div",{class:"text-sm text-gray-600 mb-3"},"Color Palette",-1)),C("div",Se,[(h(!0),_(j,null,V(Le.value.sections,(e,l)=>(h(),_("div",{key:l,class:"flex items-center gap-2 text-xs"},[C("div",{class:"w-8 h-8 rounded border",style:T({backgroundColor:e.bg,borderColor:e.borderColor})},null,4),C("span",null,A(e.title),1)]))),128))])]),_:1})]),_:1})])):U("",!0),C("div",Ue,[w(o,{flat:"",label:"Back",icon:"arrow_back",onClick:l[11]||(l[11]=e=>M.value=3)}),C("div",Te,[w(o,{flat:"",label:"Reject",color:"negative",onClick:De}),w(o,{unelevated:"",color:"positive",label:"Accept Template",icon:"check_circle",onClick:el})])])])]),_:1},8,["done"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"]))}},[["__scopeId","data-v-f19890cf"]]),Me={class:"p-6 bg-gray-50 min-h-screen"},Qe={class:"max-w-6xl mx-auto"},ze={class:"flex items-center justify-between mb-6"},Ne={class:"flex gap-2"},Ee={class:"grid gap-4"},Ge={class:"flex-1"},qe={class:"flex items-center gap-2 mb-2"},Oe={class:"text-lg font-semibold"},Re={class:"flex flex-wrap gap-2"},Le={class:"mr-1"},Fe={class:"flex gap-2 ml-4"},$e={class:"text-h6"},Je={class:"max-w-4xl mx-auto"},Be={class:"mb-4 flex items-center justify-between"},Ke={class:"flex-1 grid grid-cols-2 gap-3"},De={__name:"SectionTemplateManager",setup(e){const g=l(),N=f([]),E=f(!1),G=f(!1),q=f({name:"",structure:{sections:[]}}),O=f(null),R=async()=>{try{const e=await Q.get(route("lesson-presentation.section-templates.index"));N.value=e.data}catch(e){console.error(e),g.notify({type:"negative",message:"Failed to load templates"})}},L=()=>{q.value={name:"New Template",structure:{sections:[{id:"objectives",title:"Objectives",icon:"ðŸŽ¯",qIcon:"flag",bg:"#fffbeb",bgActive:"#fef3c7",borderColor:"#f59e0b",textColor:"#92400e"}]}},E.value=!0},F=()=>{q.value.structure.sections.push({id:`section_${Date.now()}`,title:"New Section",icon:"ðŸ“",qIcon:"article",bg:"#f3f4f6",bgActive:"#e5e7eb",borderColor:"#9ca3af",textColor:"#1f2937"})},$=async()=>{if(q.value.name&&q.value.structure.sections&&0!==q.value.structure.sections.length){G.value=!0;try{q.value.id?await Q.put(route("lesson-presentation.section-templates.update",{id:q.value.id}),q.value):await Q.post(route("lesson-presentation.section-templates.store"),q.value),g.notify({type:"positive",message:"Template saved successfully"}),E.value=!1,R()}catch(e){console.error(e),g.notify({type:"negative",message:"Failed to save template"})}finally{G.value=!1}}else g.notify({type:"warning",message:"Name and at least one section required"})},J=()=>{O.value&&O.value.open()},B=async e=>{G.value=!0;try{const l={name:e.name,structure:{sections:e.sections}};await Q.post(route("lesson-presentation.section-templates.store"),l),g.notify({type:"positive",message:"AI-generated template saved successfully!",icon:"auto_awesome"}),R()}catch(l){console.error(l),g.notify({type:"negative",message:"Failed to save AI-generated template"})}finally{G.value=!1}};return P(()=>{R()}),(e,l)=>{const f=M("Head");return h(),_(j,null,[w(f,{title:"Section Templates"}),C("div",Me,[C("div",Qe,[C("div",ze,[l[5]||(l[5]=C("div",null,[C("h1",{class:"text-2xl font-bold"},"Lesson Section Templates"),C("p",{class:"text-gray-600 mt-1"},"Manage section templates for your lessons")],-1)),C("div",Ne,[w(o,{unelevated:"",style:{background:"linear-gradient(to right, #9333ea, #4f46e5)",color:"white"},icon:"auto_awesome",label:"Generate with AI",onClick:J}),w(o,{unelevated:"",color:"primary",icon:"add",label:"New Template",onClick:L})])]),C("div",Ee,[(h(!0),_(j,null,V(N.value,e=>(h(),y(n,{key:e.id,flat:"",bordered:""},{default:x(()=>[w(a,{class:"flex items-start justify-between"},{default:x(()=>{var a;return[C("div",Ge,[C("div",qe,[C("h3",Oe,A(e.name),1),e.is_active?(h(),y(m,{key:0,color:"positive",label:"Active"})):U("",!0)]),C("div",Re,[(h(!0),_(j,null,V((null==(a=e.structure)?void 0:a.sections)||[],e=>(h(),y(u,{key:e.id,style:T({backgroundColor:e.bg||"#f3f4f6",color:e.textColor||"#1f2937",borderColor:e.borderColor||"#e5e7eb"}),dense:"",class:"border"},{default:x(()=>[C("span",Le,A(e.icon),1),I(" "+A(e.title),1)]),_:2},1032,["style"]))),128))])]),C("div",Fe,[w(o,{flat:"",dense:"",round:"",icon:"edit",color:"primary",onClick:l=>(e=>{q.value=JSON.parse(JSON.stringify(e)),q.value.structure||(q.value.structure={sections:[]}),E.value=!0})(e)},{default:x(()=>[w(r,null,{default:x(()=>l[6]||(l[6]=[I("Edit")])),_:1})]),_:2},1032,["onClick"]),e.is_active?U("",!0):(h(),y(o,{key:0,flat:"",dense:"",round:"",icon:"check_circle",color:"positive",onClick:l=>(async e=>{try{await Q.post(route("lesson-presentation.section-templates.set-active",{id:e})),g.notify({type:"positive",message:"Active template updated"}),R()}catch(l){console.error(l),g.notify({type:"negative",message:"Failed to set active"})}})(e.id)},{default:x(()=>[w(r,null,{default:x(()=>l[7]||(l[7]=[I("Set as Active")])),_:1})]),_:2},1032,["onClick"])),e.is_active?U("",!0):(h(),y(o,{key:1,flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:l=>(async e=>{g.dialog({title:"Confirm Delete",message:"Are you sure?",cancel:!0}).onOk(async()=>{try{await Q.delete(route("lesson-presentation.section-templates.destroy",{id:e})),g.notify({type:"positive",message:"Template deleted"}),R()}catch(l){console.error(l),g.notify({type:"negative",message:"Failed to delete"})}})})(e.id)},{default:x(()=>[w(r,null,{default:x(()=>l[8]||(l[8]=[I("Delete")])),_:1})]),_:2},1032,["onClick"]))])]}),_:2},1024)]),_:2},1024))),128))])]),w(i,{modelValue:E.value,"onUpdate:modelValue":l[3]||(l[3]=e=>E.value=e),persistent:"",maximized:""},{default:x(()=>[w(n,null,{default:x(()=>[w(a,{class:"bg-primary text-white row items-center"},{default:x(()=>[C("div",$e,A(q.value.id?"Edit":"Create")+" Template",1),w(p),S(w(o,{flat:"",round:"",dense:"",icon:"close"},null,512),[[c]])]),_:1}),w(a,{class:"q-pa-md"},{default:x(()=>[C("div",Je,[w(s,{modelValue:q.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>q.value.name=e),label:"Template Name *",outlined:"",dense:"",class:"mb-6"},null,8,["modelValue"]),C("div",Be,[l[9]||(l[9]=C("h3",{class:"text-lg font-semibold"},"Sections",-1)),w(o,{flat:"",dense:"",color:"primary",icon:"add",label:"Add Section",onClick:F})]),w(k(z),{modelValue:q.value.structure.sections,"onUpdate:modelValue":l[1]||(l[1]=e=>q.value.structure.sections=e),handle:".drag-handle","item-key":"id"},{item:x(({element:e,index:l})=>[w(n,{flat:"",bordered:"",class:"mb-3"},{default:x(()=>[w(a,{class:"flex items-start gap-4"},{default:x(()=>[w(t,{name:"drag_indicator",class:"drag-handle cursor-move text-gray-400",size:"24px"}),C("div",Ke,[w(s,{modelValue:e.id,"onUpdate:modelValue":l=>e.id=l,label:"Section ID *",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),w(s,{modelValue:e.title,"onUpdate:modelValue":l=>e.title=l,label:"Title *",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),w(s,{modelValue:e.icon,"onUpdate:modelValue":l=>e.icon=l,label:"Emoji Icon",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),w(s,{modelValue:e.qIcon,"onUpdate:modelValue":l=>e.qIcon=l,label:"Quasar Icon",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"]),w(s,{modelValue:e.bg,"onUpdate:modelValue":l=>e.bg=l,label:"Background Color",dense:"",outlined:"",style:T({backgroundColor:e.bg})},{append:x(()=>[w(t,{name:"colorize",class:"cursor-pointer"},{default:x(()=>[w(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:x(()=>[w(v,{modelValue:e.bg,"onUpdate:modelValue":l=>e.bg=l},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","style"]),w(s,{modelValue:e.bgActive,"onUpdate:modelValue":l=>e.bgActive=l,label:"Active BG",dense:"",outlined:"",style:T({backgroundColor:e.bgActive})},{append:x(()=>[w(t,{name:"colorize",class:"cursor-pointer"},{default:x(()=>[w(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:x(()=>[w(v,{modelValue:e.bgActive,"onUpdate:modelValue":l=>e.bgActive=l},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","style"]),w(s,{modelValue:e.borderColor,"onUpdate:modelValue":l=>e.borderColor=l,label:"Border Color",dense:"",outlined:"",style:T({backgroundColor:e.borderColor})},{append:x(()=>[w(t,{name:"colorize",class:"cursor-pointer"},{default:x(()=>[w(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:x(()=>[w(v,{modelValue:e.borderColor,"onUpdate:modelValue":l=>e.borderColor=l},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","style"]),w(s,{modelValue:e.textColor,"onUpdate:modelValue":l=>e.textColor=l,label:"Text Color",dense:"",outlined:"",style:T({color:e.textColor})},{append:x(()=>[w(t,{name:"colorize",class:"cursor-pointer"},{default:x(()=>[w(b,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:x(()=>[w(v,{modelValue:e.textColor,"onUpdate:modelValue":l=>e.textColor=l},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue","onUpdate:modelValue","style"])]),w(o,{flat:"",dense:"",round:"",icon:"delete",color:"negative",onClick:e=>(e=>{q.value.structure.sections.splice(e,1)})(l)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])])]),_:1}),w(d,{align:"right",class:"border-t"},{default:x(()=>[w(o,{flat:"",label:"Cancel",onClick:l[2]||(l[2]=e=>E.value=!1)}),w(o,{unelevated:"",color:"primary",label:"Save",onClick:$,loading:G.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),w(Pe,{ref_key:"aiGenerator",ref:O,onTemplateAccepted:B,onClose:l[4]||(l[4]=l=>e.showAIGenerator=!1)},null,512)])],64)}}};export{De as default};
