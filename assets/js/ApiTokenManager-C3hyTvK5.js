import{I as e,J as s,K as t,N as o,L as l,a7 as a,f as i,M as n,b as r,Q as c,z as m,W as u,U as d,F as p,R as v,V as f}from"./vendor-DuKqz2x4.js";import{_ as k}from"./ActionMessage-CfS5K1b9.js";import{_ as b}from"./ActionSection-KyhMbI1h.js";import{_ as y}from"./Checkbox-eXwwg0Qm.js";import{M as g}from"./Modal-8ks5__7o.js";import{D as x}from"./DangerButton-CQBiTwoe.js";import{_ as h}from"./DialogModal-CnDR1S7D.js";import{_}from"./FormSection-CY0SdzGY.js";import{_ as w}from"./InputError-DsbrcuwC.js";import{_ as j}from"./InputLabel-D7_a4jhT.js";import{_ as C}from"./PrimaryButton-Cw-PZntm.js";import{_ as P}from"./SecondaryButton-BDKLxmbK.js";import{S}from"./SectionBorder-CIX-NVsr.js";import{_ as A}from"./TextInput-CjrCWcm1.js";import"./SectionTitle-vKJjQUt6.js";import"./app-BB4Fw2oM.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const I={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},M={class:"sm:flex sm:items-start"},B={class:"mt-3 text-center sm:mt-0 sm:ms-4 sm:text-start"},T={class:"text-lg font-medium text-gray-900"},z={class:"mt-4 text-sm text-gray-600"},D={class:"flex flex-row justify-end px-6 py-4 bg-gray-100 text-end"},L={__name:"ConfirmationModal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0}},emits:["close"],setup(a,{emit:i}){const n=i,r=()=>{n("close")};return(i,n)=>(s(),e(g,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:r},{default:t(()=>[o("div",I,[o("div",M,[n[0]||(n[0]=o("div",{class:"mx-auto shrink-0 flex items-center justify-center size-12 rounded-full bg-red-100 sm:mx-0 sm:size-10"},[o("svg",{class:"size-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])],-1)),o("div",B,[o("h3",T,[l(i.$slots,"title")]),o("div",z,[l(i.$slots,"content")])])])]),o("div",D,[l(i.$slots,"footer")])]),_:3},8,["show","max-width","closeable"]))}},$={class:"col-span-6 sm:col-span-4"},F={key:0,class:"col-span-6"},U={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},V={class:"flex items-center"},W={class:"ms-2 text-sm text-gray-600"},E={key:0},H={class:"mt-10 sm:mt-0"},N={class:"space-y-6"},G={class:"break-all"},J={class:"flex items-center ms-2"},K={key:0,class:"text-sm text-gray-400"},Q=["onClick"],R=["onClick"],Y={key:0,class:"mt-4 bg-gray-100 px-4 py-2 rounded font-mono text-sm text-gray-500 break-all"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},O={class:"flex items-center"},X={class:"ms-2 text-sm text-gray-600"},Z={__name:"ApiTokenManager",props:{tokens:Array,availablePermissions:Array,defaultPermissions:Array},setup(e){const l=a({name:"",permissions:e.defaultPermissions}),g=a({permissions:[]}),I=a({}),M=i(!1),B=i(null),T=i(null),z=()=>{l.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{M.value=!0,l.reset()}})},D=()=>{g.put(route("api-tokens.update",B.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>B.value=null})},Z=()=>{I.delete(route("api-tokens.destroy",T.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>T.value=null})};return(a,i)=>(s(),n("div",null,[r(_,{onSubmitted:z},{title:t(()=>i[9]||(i[9]=[u(" Create API Token ")])),description:t(()=>i[10]||(i[10]=[u(" API tokens allow third-party services to authenticate with our application on your behalf. ")])),form:t(()=>[o("div",$,[r(j,{for:"name",value:"Name"}),r(A,{id:"name",modelValue:m(l).name,"onUpdate:modelValue":i[0]||(i[0]=e=>m(l).name=e),type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),r(w,{message:m(l).errors.name,class:"mt-2"},null,8,["message"])]),e.availablePermissions.length>0?(s(),n("div",F,[r(j,{for:"permissions",value:"Permissions"}),o("div",U,[(s(!0),n(p,null,v(e.availablePermissions,e=>(s(),n("div",{key:e},[o("label",V,[r(y,{checked:m(l).permissions,"onUpdate:checked":i[1]||(i[1]=e=>m(l).permissions=e),value:e},null,8,["checked","value"]),o("span",W,f(e),1)])]))),128))])])):c("",!0)]),actions:t(()=>[r(k,{on:m(l).recentlySuccessful,class:"me-3"},{default:t(()=>i[11]||(i[11]=[u(" Created. ")])),_:1},8,["on"]),r(C,{class:d({"opacity-25":m(l).processing}),disabled:m(l).processing},{default:t(()=>i[12]||(i[12]=[u(" Create ")])),_:1},8,["class","disabled"])]),_:1}),e.tokens.length>0?(s(),n("div",E,[r(S),o("div",H,[r(b,null,{title:t(()=>i[13]||(i[13]=[u(" Manage API Tokens ")])),description:t(()=>i[14]||(i[14]=[u(" You may delete any of your existing tokens if they are no longer needed. ")])),content:t(()=>[o("div",N,[(s(!0),n(p,null,v(e.tokens,t=>(s(),n("div",{key:t.id,class:"flex items-center justify-between"},[o("div",G,f(t.name),1),o("div",J,[t.last_used_ago?(s(),n("div",K," Last used "+f(t.last_used_ago),1)):c("",!0),e.availablePermissions.length>0?(s(),n("button",{key:1,class:"cursor-pointer ms-6 text-sm text-gray-400 underline",onClick:e=>(e=>{g.permissions=e.abilities,B.value=e})(t)}," Permissions ",8,Q)):c("",!0),o("button",{class:"cursor-pointer ms-6 text-sm text-red-500",onClick:e=>(e=>{T.value=e})(t)}," Delete ",8,R)])]))),128))])]),_:1})])])):c("",!0),r(h,{show:M.value,onClose:i[3]||(i[3]=e=>M.value=!1)},{title:t(()=>i[15]||(i[15]=[u(" API Token ")])),content:t(()=>[i[16]||(i[16]=o("div",null," Please copy your new API token. For your security, it won't be shown again. ",-1)),a.$page.props.jetstream.flash.token?(s(),n("div",Y,f(a.$page.props.jetstream.flash.token),1)):c("",!0)]),footer:t(()=>[r(P,{onClick:i[2]||(i[2]=e=>M.value=!1)},{default:t(()=>i[17]||(i[17]=[u(" Close ")])),_:1})]),_:1},8,["show"]),r(h,{show:null!=B.value,onClose:i[6]||(i[6]=e=>B.value=null)},{title:t(()=>i[18]||(i[18]=[u(" API Token Permissions ")])),content:t(()=>[o("div",q,[(s(!0),n(p,null,v(e.availablePermissions,e=>(s(),n("div",{key:e},[o("label",O,[r(y,{checked:m(g).permissions,"onUpdate:checked":i[4]||(i[4]=e=>m(g).permissions=e),value:e},null,8,["checked","value"]),o("span",X,f(e),1)])]))),128))])]),footer:t(()=>[r(P,{onClick:i[5]||(i[5]=e=>B.value=null)},{default:t(()=>i[19]||(i[19]=[u(" Cancel ")])),_:1}),r(C,{class:d(["ms-3",{"opacity-25":m(g).processing}]),disabled:m(g).processing,onClick:D},{default:t(()=>i[20]||(i[20]=[u(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),r(L,{show:null!=T.value,onClose:i[8]||(i[8]=e=>T.value=null)},{title:t(()=>i[21]||(i[21]=[u(" Delete API Token ")])),content:t(()=>i[22]||(i[22]=[u(" Are you sure you would like to delete this API token? ")])),footer:t(()=>[r(P,{onClick:i[7]||(i[7]=e=>T.value=null)},{default:t(()=>i[23]||(i[23]=[u(" Cancel ")])),_:1}),r(x,{class:d(["ms-3",{"opacity-25":m(I).processing}]),disabled:m(I).processing,onClick:Z},{default:t(()=>i[24]||(i[24]=[u(" Delete ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{Z as default};
