import e from"./Modal-Djl5Tz4g.js";import{f as l,a as t,k as a,L as o,I as s,V as n,b as i,U as r,J as d,M as u,$ as c,F as m,Q as p,O as g,x as f,aa as v}from"./vendor-DNM7Y6Xn.js";import"./PrimaryButton-BUJknf5C.js";import"./SecondaryButton-VyNp8kIv.js";const y={class:"p-6"},b={class:"text-lg font-medium text-gray-900"},h={class:"space-y-6"},x={key:0,class:"flex items-center"},k=["id","checked","onChange"],w=["for"],q={key:0,class:"ml-2 text-sm text-gray-500"},S=["for"],j={key:0,class:"text-red-500"},C=["value","onInput","type","id","min","required","placeholder"],$=["id","onUpdate:modelValue","required"],B={value:""},E=["value"],I={key:2,class:"mt-1 text-sm text-red-600"},A={class:"mt-6 flex justify-end"},M=["disabled"],O=["disabled"],U={__name:"FormModal",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},fields:{type:Array,required:!0},editing:{type:[Object,null],default:null},errors:{type:Object,default:()=>({})},submitting:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"}},emits:["close","submitted"],setup(U,{emit:V}){const _=U,F=V,N=l({}),z=l({}),J=l(!1),L=t(()=>_.fields.map(e=>{var l;return{type:"text",required:!1,placeholder:"",...e,options:Array.isArray(e.options)?e.options:(null==(l=e.options)?void 0:l.value)||[]}})),P=()=>{const e={};_.fields.forEach(l=>{var t,a,o,s,n;_.editing?e[l.name]=null!=(a=null!=(t=_.editing[l.name])?t:l.default)?a:"":"checkbox"===l.type?e[l.name]=null!=(o=l.default)&&o:"select"===l.type?e[l.name]=null!=(s=l.default)?s:"":e[l.name]=null!=(n=l.default)?n:""}),console.log("Initialized form with values:",e),N.value=e,z.value={}};a(()=>_.show,e=>{console.log("Show changed:",e),e&&P()},{immediate:!0}),a(()=>_.editing,e=>{console.log("Editing changed:",e),_.show&&P()},{deep:!0});const Q=()=>{J.value||(J.value=!0,F("submitted",{form:N.value,onSuccess:()=>{J.value=!1,J.value||(F("close"),z.value={})},onError:e=>{J.value=!1,z.value=e}}))};return(l,t)=>(s(),o(m,null,[n(" form:"+r(_)+" ",1),i(e,{"max-width":"6xl",show:U.show,closeable:!J.value,persistent:J.value,loading:J.value,onClose:t[1]||(t[1]=e=>l.$emit("close"))},{default:d(()=>[u("div",y,[u("h2",b,r(_.editing?`Edit ${_.title}`:`Create New ${_.title}`),1),u("form",{onSubmit:c(Q,["prevent"]),class:"mt-6"},[u("div",h,[(s(!0),o(m,null,p(L.value,e=>(s(),o("div",{key:e.name,class:"mb-4"},["checkbox"===e.type?(s(),o("div",x,[u("input",{id:e.name,checked:N.value[e.name],onChange:l=>N.value[e.name]=l.target.checked,type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,k),u("label",{for:e.name,class:"ml-2 block text-sm text-gray-900"},r(e.label),9,w),e.help?(s(),o("span",q,r(e.help),1)):g("",!0)])):(s(),o(m,{key:1},[u("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},[n(r(e.label)+" ",1),e.required?(s(),o("span",j,"*")):g("",!0)],8,S),["text","number","date"].includes(e.type)?(s(),o("input",{key:0,value:N.value[e.name],onInput:l=>N.value[e.name]=l.target.value,type:e.type,id:e.name,min:e.min,required:e.required,placeholder:e.placeholder,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,40,C)):g("",!0),"select"===e.type?f((s(),o("select",{key:1,id:e.name,"onUpdate:modelValue":l=>N.value[e.name]=l,required:e.required,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[u("option",B,r(e.placeholder||`Select ${e.label}`),1),(s(!0),o(m,null,p(e.options,e=>(s(),o("option",{key:e.value,value:e.value},r(e.label),9,E))),128))],8,$)),[[v,N.value[e.name]]]):g("",!0),z.value[e.name]?(s(),o("div",I,r(z.value[e.name]),1)):g("",!0)],64))]))),128))]),u("div",A,[u("button",{type:"button",class:"mr-3 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",disabled:J.value,onClick:t[0]||(t[0]=e=>l.$emit("close"))}," Cancel ",8,M),u("button",{type:"submit",class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md text-sm text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",disabled:J.value},r(J.value?"Saving...":"Save"),9,O)])],32)])]),_:1},8,["show","closeable","persistent","loading"])],64))}};export{U as default};
