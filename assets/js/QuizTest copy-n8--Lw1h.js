import{o as e,u as s,d as t,c as a,ba as i,m as l,Q as u}from"./app-Buylb2AA.js";import{Q as o}from"./QBadge-Dt5ch-CZ.js";import{Q as n}from"./QSpace-1_yTqfel.js";import{f as v,a as r,o as c,e as d,L as _,I as q,M as m,O as z,U as p,b as f,J as b,H as y,F as h,Q as g,S as k,y as Q,_ as w,Z as C}from"./vendor-CUZ9QTQV.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";const I={class:"quiz-test"},x={class:"quiz-test__header"},S={class:"quiz-test__header-content"},j={class:"quiz-test__title"},M={class:"quiz-test__progress"},T={key:0,class:"quiz-test__timer"},F={key:0,class:"quiz-test__container"},H={class:"quiz-test__question-container"},N={class:"quiz-test__question-header"},$={class:"quiz-test__question-number"},D=["innerHTML"],L={class:"quiz-test__options"},R=["onClick"],A={class:"quiz-test__option-radio"},B={class:"quiz-test__option-label"},E={class:"quiz-test__option-text"},J={class:"quiz-test__navigation"},O={class:"quiz-test__sidebar"},Y={class:"quiz-test__question-grid"},P=["onClick"],U={key:1,class:"quiz-test__results"},V={class:"quiz-test__results-stats"},Z={class:"quiz-test__stat"},G={class:"quiz-test__stat-value"},K={class:"quiz-test__stat"},W={class:"quiz-test__stat-value"},X={class:"quiz-test__results-actions"},ee=e({__name:"QuizTest copy",props:{quizId:Number},setup(e){const ee=s(),se=e,te=v({name:"",questions:[],time_limit_minutes:null}),ae=v(0),ie=v({}),le=v(null),ue=v(!1),oe=v(0),ne=v(0),ve=v(null);let re=null;const ce=r(()=>{var e;return(null==(e=te.value.questions)?void 0:e[ae.value])||{}}),de=()=>{re=setInterval(()=>{oe.value--,oe.value<=0&&fe()},1e3)},_e=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`,qe=()=>{le.value&&(ie.value[ae.value]=le.value)},me=()=>{le.value=ie.value[ae.value]||null},ze=()=>{var e;qe(),ae.value<((null==(e=te.value.questions)?void 0:e.length)||0)-1&&(ae.value++,me())},pe=()=>{qe(),ae.value>0&&(ae.value--,me())},fe=async()=>{qe(),ne.value=Math.floor((Date.now()-ve.value)/1e3),re&&clearInterval(re);let e=0;te.value.questions.forEach((s,t)=>{var a;const i=ie.value[t],l=null==(a=s.options)?void 0:a.find(e=>e.is_correct);i===(null==l?void 0:l.id)&&e++});const s=Math.round(e/te.value.questions.length*100);sessionStorage.setItem("quizResults",JSON.stringify({quizId:se.quizId,quizName:te.value.name,answers:ie.value,questions:te.value.questions,score:s,correctAnswers:e,totalQuestions:te.value.questions.length,timeTaken:ne.value}));try{ue.value=!0,ee.notify({type:"positive",message:"Quiz submitted successfully!",icon:"check"})}catch(t){console.error("Failed to submit quiz:",t),ee.notify({type:"negative",message:"Failed to submit quiz",icon:"error"})}},be=()=>{w.visit(`/quizzes/${se.quizId}/results`)};return c(()=>{(async()=>{try{const e=await C.get(`/api/quizzes/${se.quizId}`);te.value=e.data,te.value.time_limit_minutes&&(oe.value=60*te.value.time_limit_minutes,de()),ve.value=Date.now(),me()}catch(e){console.error("Failed to load quiz:",e),ee.notify({type:"negative",message:"Failed to load quiz",icon:"error"})}})()}),d(()=>{re&&clearInterval(re)}),(e,s)=>{var v,r;return q(),_("div",I,[m("div",x,[m("div",S,[m("h1",j,p(te.value.name),1),m("div",M," Question "+p(ae.value+1)+" of "+p((null==(v=te.value.questions)?void 0:v.length)||0),1)]),te.value.time_limit_minutes&&!ue.value?(q(),_("div",T,[f(t,{name:"schedule",size:"20px"}),m("span",null,p(_e(oe.value)),1)])):z("",!0)]),ue.value?(q(),_("div",U,[f(l,{class:"quiz-test__results-card"},{default:b(()=>[f(a,{class:"text-center"},{default:b(()=>{var e;return[f(t,{name:"check_circle",size:"80px",color:"positive"}),s[4]||(s[4]=m("h2",null,"Quiz Completed!",-1)),s[5]||(s[5]=m("p",{class:"quiz-test__results-message"}," You've completed the quiz. Your answers have been submitted. ",-1)),m("div",V,[m("div",Z,[m("div",G,p((null==(e=te.value.questions)?void 0:e.length)||0),1),s[2]||(s[2]=m("div",{class:"quiz-test__stat-label"},"Questions Answered",-1))]),m("div",K,[m("div",W,p(_e(ne.value)),1),s[3]||(s[3]=m("div",{class:"quiz-test__stat-label"},"Time Taken",-1))])]),m("div",X,[f(u,{flat:"",label:"Back to Dashboard",icon:"arrow_back",onClick:s[0]||(s[0]=e=>Q(w).visit("/quizzes"))}),f(u,{unelevated:"",color:"primary",label:"View Results",icon:"assessment",onClick:be})])]}),_:1})]),_:1})])):(q(),_("div",F,[m("div",H,[f(l,{class:"quiz-test__question-card"},{default:b(()=>[f(a,null,{default:b(()=>{return[m("div",N,[m("div",$," Question "+p(ae.value+1),1),ce.value.difficulty?(q(),y(o,{key:0,color:(e=ce.value.difficulty,{Easy:"positive",Medium:"warning",Hard:"negative"}[e]||"info"),label:ce.value.difficulty},null,8,["color","label"])):z("",!0)]),m("div",{class:"quiz-test__question-text",innerHTML:ce.value.question_text},null,8,D),m("div",L,[(q(!0),_(h,null,g(ce.value.options,(e,s)=>(q(),_("div",{key:e.id,class:k(["quiz-test__option",{"quiz-test__option--selected":le.value===e.id}]),onClick:s=>{return t=e.id,void(le.value=t);var t}},[m("div",A,[f(i,{"model-value":le.value,val:e.id,color:"primary"},null,8,["model-value","val"])]),m("div",B,p(String.fromCharCode(65+s)),1),m("div",E,p(e.option_text),1)],10,R))),128))])];var e}),_:1})]),_:1}),m("div",J,[f(u,{flat:"",label:"Previous",icon:"arrow_back",disable:0===ae.value,onClick:pe},null,8,["disable"]),f(n),ae.value<((null==(r=te.value.questions)?void 0:r.length)||0)-1?(q(),y(u,{key:0,unelevated:"",color:"primary",label:"Next","icon-right":"arrow_forward",disable:!le.value,onClick:ze},null,8,["disable"])):(q(),y(u,{key:1,unelevated:"",color:"positive",label:"Submit Quiz","icon-right":"check",disable:!le.value,onClick:fe},null,8,["disable"]))])]),m("div",O,[f(l,null,{default:b(()=>[f(a,null,{default:b(()=>[s[1]||(s[1]=m("h4",null,"Questions",-1)),m("div",Y,[(q(!0),_(h,null,g(te.value.questions,(e,s)=>(q(),_("div",{key:e.id,class:k(["quiz-test__question-nav-item",{"quiz-test__question-nav-item--current":s===ae.value,"quiz-test__question-nav-item--answered":void 0!==ie.value[s]}]),onClick:e=>(e=>{qe(),ae.value=e,me()})(s)},p(s+1),11,P))),128))])]),_:1})]),_:1})])]))])}}},[["__scopeId","data-v-9c4ddfc9"]]);export{ee as default};
