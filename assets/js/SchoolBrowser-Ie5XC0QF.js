import{Q as e}from"./QSpinnerDots-B_GSDqC3.js";import{Q as s}from"./QTab-CYxYFXBq.js";import{Q as a}from"./QTabs-BClcf-CB.js";import{r as l,u as o,c as t,Q as r,d as i}from"./app-DlLesFGi.js";import{Q as m}from"./QTabPanel-DXa1fEFB.js";import{Q as n}from"./QTabPanels-CTgZWG49.js";import{u as c}from"./schoolData-CWFtmgnE.js";import{f as u,k as d,o as p,N as y,J as v,b as h,R as j,I as b,V as f,z as w,K as g,_ as x}from"./vendor-BWKGNkNB.js";import{u as Q}from"./i18n-B0T1C7j3.js";import S from"./WeeklyPlanMenu-BcGTVUpe.js";import k from"./SchoolOverview-wDTdaVwJ.js";import T from"./ClassroomHierarchy-CLndWMM2.js";import _ from"./AssignmentsTable-Mqin4sW3.js";import"./rtl-Cr6c3OOr.js";import"./offline-BzIlwqNM.js";import"./ui-B7TfxbV_.js";import"./use-panel-BqxRbB7W.js";import"./use-render-cache-CmTcazfP.js";import"./QSpace-BK_PGLKv.js";import"./WeeklySystemGuide-Bj_R2PyQ.js";import"./MainSchoolData-ClhKhkN6.js";import"./QBadge-IdEcTs8C.js";import"./SchoolSettingsDialog-CLF5QRZg.js";import"./QSelect-BTh0khse.js";import"./QForm-CDvMxBSt.js";import"./QTd-BU_S4ffH.js";import"./QTable-BIAJAIui.js";import"./QMarkupTable-CzIo4GGA.js";import"./QLinearProgress-CX6G9yBK.js";import"./use-fullscreen-BQHoXYBI.js";const B={class:"q-pa-md"},V={class:"row items-center q-mb-md"},q={class:"col"},D={class:"text-h4 text-weight-bold text-primary"},A={class:"text-subtitle2 text-grey-7"},C={key:0,class:"row justify-center q-my-xl"},I={key:1},P={class:"text-h6 text-grey-7 q-mt-md"},z={class:"text-body2 text-grey-6"},F=l({__name:"SchoolBrowser",setup(l){const{t:F}=Q(),M=o(),U=c(),W=u(null),G=u(!1),H=u("overview");return d(()=>U.hasAllContext,async e=>{e?await(async()=>{var e,s;if(U.schoolId){G.value=!0;try{const e=await x.get(route("weekly-system.api.school-data"),{params:{school_id:U.schoolId}});W.value=e.data}catch(a){M.notify({type:"negative",message:"Failed to load school data",caption:(null==(s=null==(e=a.response)?void 0:e.data)?void 0:s.message)||a.message})}finally{G.value=!1}}else W.value=null})():W.value=null},{immediate:!0}),p(()=>{}),(l,o)=>(v(),y("div",B,[h(S),j("div",V,[j("div",q,[j("div",D,f(w(F)("weeklySystem.schoolBrowser.title")),1),j("div",A,f(w(F)("weeklySystem.schoolBrowser.subtitle")),1)])]),G.value?(v(),y("div",C,[h(e,{color:"primary",size:"50px"})])):w(U).hasAllContext&&W.value?(v(),y("div",I,[h(a,{modelValue:H.value,"onUpdate:modelValue":o[0]||(o[0]=e=>H.value=e),dense:"",class:"text-grey-7 q-mb-md","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},{default:g(()=>[h(s,{name:"overview",icon:"dashboard",label:w(F)("weeklySystem.schoolBrowser.overviewTab")},null,8,["label"]),h(s,{name:"classrooms",icon:"class",label:w(F)("weeklySystem.schoolBrowser.classroomsTab")},null,8,["label"]),h(s,{name:"assignments",icon:"assignment",label:w(F)("weeklySystem.schoolBrowser.assignmentsTab")},null,8,["label"])]),_:1},8,["modelValue"]),h(t,{class:"q-mb-md"}),h(n,{modelValue:H.value,"onUpdate:modelValue":o[1]||(o[1]=e=>H.value=e),animated:""},{default:g(()=>[h(m,{name:"overview"},{default:g(()=>[h(k,{stats:W.value.stats||{},subjects:W.value.subjects||[],teachers:W.value.teachers||[]},null,8,["stats","subjects","teachers"])]),_:1}),h(m,{name:"classrooms"},{default:g(()=>[h(T,{hierarchy:W.value.hierarchy||[],assignments:W.value.assignments||[]},null,8,["hierarchy","assignments"])]),_:1}),h(m,{name:"assignments"},{default:g(()=>[h(_,{assignments:W.value.assignments||[]},null,8,["assignments"])]),_:1})]),_:1},8,["modelValue"])])):(v(),b(i,{key:2,flat:"",bordered:"",class:"q-pa-xl text-center"},{default:g(()=>[h(r,{name:"school",size:"80px",color:"grey-5"}),j("div",P,f(w(F)("weeklySystem.schoolBrowser.selectSchool")),1),j("div",z,f(w(F)("weeklySystem.schoolBrowser.selectSchoolHint")),1)]),_:1}))]))}},[["__scopeId","data-v-36b63738"]]);export{F as default};
