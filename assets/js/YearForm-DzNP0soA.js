import{Q as e}from"./QSpace-DuS_4lXE.js";import{C as a,c as t,f as l,Q as s,m as d}from"./app-DOc39CFu.js";import{Q as o}from"./QForm-CqUo2wlA.js";import{a7 as r,I as n,J as m,K as i,b as c,N as u,W as p,a0 as f,z as _,M as g,Q as b,V as v}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const x={class:"col-12 col-md-4"},V={class:"col-12 col-md-4"},q={class:"col-12 col-md-4"},w={class:"row q-col-gutter-sm"},y={class:"col"},S={class:"col-auto"},h={key:0,class:"text-negative text-caption q-mt-xs"},j={__name:"YearForm",emits:["created"],setup(j,{emit:Y}){const Q=Y,$=r({start_date:"",end_date:"",name:""}),F=()=>{if($.start_date){const e=new Date($.start_date).getFullYear();if($.name&&$.name!==`${e-1}-${e}`&&$.name!==`${e}-${e+1}`||($.name=`${e}-${e+1}`),!$.end_date){const e=new Date($.start_date);e.setFullYear(e.getFullYear()+1),$.end_date=e.toISOString().split("T")[0]}}},D=()=>{$.post(route("admin.academic_calendar.year.store"),{onSuccess:()=>{$.reset(),Q("created")}})};return(r,j)=>(m(),n(d,{flat:"",bordered:"",class:"q-mb-xl"},{default:i(()=>[c(t,{class:"row items-center q-pb-none"},{default:i(()=>[j[4]||(j[4]=u("div",{class:"text-h6 text-weight-bold"},"New Academic Year",-1)),c(e),c(a,{size:"sm",color:"grey-3","text-color":"grey-8",dense:""},{default:i(()=>j[3]||(j[3]=[p("SETTINGS")])),_:1})]),_:1}),c(t,null,{default:i(()=>[c(o,{onSubmit:f(D,["prevent"]),class:"row q-col-gutter-md"},{default:i(()=>[u("div",x,[c(l,{modelValue:_($).start_date,"onUpdate:modelValue":j[0]||(j[0]=e=>_($).start_date=e),type:"date",label:"Start Date",filled:"",dense:"",onChange:F,rules:[e=>!!e||"Required"]},null,8,["modelValue","rules"])]),u("div",V,[c(l,{modelValue:_($).end_date,"onUpdate:modelValue":j[1]||(j[1]=e=>_($).end_date=e),type:"date",label:"End Date",filled:"",dense:"",rules:[e=>!!e||"Required"]},null,8,["modelValue","rules"])]),u("div",q,[u("div",w,[u("div",y,[c(l,{modelValue:_($).name,"onUpdate:modelValue":j[2]||(j[2]=e=>_($).name=e),label:"Year Name",placeholder:"e.g. 2025-2026",filled:"",dense:"",class:"text-mono",rules:[e=>!!e||"Required"]},null,8,["modelValue","rules"])]),u("div",S,[c(s,{type:"submit",color:"primary",unelevated:"",loading:_($).processing,disable:_($).processing,icon:"add",label:"Create Year",class:"full-height text-weight-bold"},null,8,["loading","disable"])])]),_($).errors.name?(m(),g("div",h,v(_($).errors.name),1)):b("",!0)])]),_:1})]),_:1})]),_:1}))}};export{j as default};
