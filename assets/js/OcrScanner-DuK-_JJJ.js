import{o as e}from"./app-B77gjd5a.js";import{M as s,J as a,N as r,Q as t,a0 as i,U as l,an as o,F as n,R as c,V as d}from"./vendor-DuKqz2x4.js";const p={name:"OcrScanner",props:{apiKey:{type:String,required:!0,default:"K89883067088957"},language:{type:String,default:"eng"},detectOrientation:{type:Boolean,default:!0}},data:()=>({uploadId:`file-upload-${Math.random().toString(36).substr(2,9)}`,selectedImage:null,isDragging:!1,isProcessing:!1,ocrResult:null,error:null,fileToProcess:null}),methods:{handleDrop(e){this.isDragging=!1;const s=e.dataTransfer.files[0];s&&this.isValidImageFile(s)&&this.processFile(s)},handleFileSelect(e){const s=e.target.files[0];s&&this.isValidImageFile(s)&&this.processFile(s)},isValidImageFile(e){return!!["image/jpeg","image/png","image/gif","image/tiff"].includes(e.type)||(this.error="Please select a valid image file (PNG, JPG, GIF, TIFF)",!1)},processFile(e){this.error=null,this.fileToProcess=e;const s=new FileReader;s.onload=e=>{this.selectedImage=e.target.result,this.performOcr()},s.readAsDataURL(e)},async performOcr(){if(!this.fileToProcess)return;this.isProcessing=!0,this.ocrResult=null,this.error=null;const e=new FormData;e.append("file",this.fileToProcess),e.append("apikey",this.apiKey),e.append("language",this.language),e.append("detectOrientation",this.detectOrientation),e.append("isOverlayRequired",!0);try{const s=await fetch("https://api.ocr.space/parse/image",{method:"POST",body:e}),a=await s.json();if(a.ErrorMessage)throw new Error(a.ErrorMessage);if(!a.ParsedResults||0===a.ParsedResults.length)throw new Error("No text was detected in the image");this.ocrResult=a,this.$emit("ocr-complete",a)}catch(s){this.error=s.message||"An error occurred while processing the image",this.$emit("ocr-error",s)}finally{this.isProcessing=!1}},clearImage(){this.selectedImage=null,this.fileToProcess=null,this.ocrResult=null,this.error=null,this.$emit("clear")}}},g={class:"ocr-scanner"},u={class:"upload-section mb-4"},h=["for"],m=["id"],v={key:0,class:"preview-section mb-4"},f={class:"preview-header"},b={class:"preview-image-container"},I=["src"],P={key:1,class:"processing-status"},y={key:2,class:"results-section"},F={class:"results-content"},w={key:3,class:"error-message"};const R=e(p,[["render",function(e,p,R,D,k,S){return a(),s("div",g,[r("div",u,[r("label",{for:k.uploadId,class:l(["upload-label",{dragging:k.isDragging}]),onDragover:p[0]||(p[0]=i(e=>k.isDragging=!0,["prevent"])),onDragleave:p[1]||(p[1]=i(e=>k.isDragging=!1,["prevent"])),onDrop:p[2]||(p[2]=i((...e)=>S.handleDrop&&S.handleDrop(...e),["prevent"]))},p[5]||(p[5]=[o('<div class="upload-content" data-v-9bae7dcb><svg class="upload-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-9bae7dcb><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" data-v-9bae7dcb></path></svg><span class="upload-text" data-v-9bae7dcb> Drop image here or click to upload </span><span class="upload-hint" data-v-9bae7dcb> Supported formats: PNG, JPG, GIF, TIFF </span></div>',1)]),42,h),r("input",{id:k.uploadId,type:"file",accept:"image/*",class:"hidden",onChange:p[3]||(p[3]=(...e)=>S.handleFileSelect&&S.handleFileSelect(...e))},null,40,m)]),k.selectedImage?(a(),s("div",v,[r("div",f,[p[6]||(p[6]=r("h3",{class:"preview-title"},"Selected Image",-1)),r("button",{onClick:p[4]||(p[4]=(...e)=>S.clearImage&&S.clearImage(...e)),class:"clear-button"}," Clear ")]),r("div",b,[r("img",{src:k.selectedImage,alt:"Selected image",class:"preview-image"},null,8,I)])])):t("",!0),k.isProcessing?(a(),s("div",P,p[7]||(p[7]=[r("div",{class:"spinner"},null,-1),r("span",null,"Processing image...",-1)]))):t("",!0),k.ocrResult?(a(),s("div",y,[p[8]||(p[8]=r("h3",{class:"results-title"},"OCR Results",-1)),r("div",F,[(a(!0),s(n,null,c(k.ocrResult.ParsedResults[0].ParsedText.split("\n"),(e,r)=>(a(),s("p",{key:r,class:"result-line"},d(e),1))),128))])])):t("",!0),k.error?(a(),s("div",w,d(k.error),1)):t("",!0)])}],["__scopeId","data-v-9bae7dcb"]]);export{R as O};
