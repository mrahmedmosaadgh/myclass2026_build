import e from"./Editor7tiptap-HSyDGKyT.js";import t from"./TodoList7-QJJ2gQ_1.js";import{f as a,k as l,o,n as r,L as s,I as i,M as n,O as u,x as d,aa as p,am as c,S as m,b as v,U as g}from"./vendor-DNM7Y6Xn.js";import"./TabButtons-CQvWm7Ja.js";import"./ReusableHtmlViewer_Editor9-f-T2yzjN.js";import"./purify.es-C2Ba6vpb.js";import"./app-BXm70mdJ.js";import"./offline-BzIlwqNM.js";import"./i18n-CBOKL2HS.js";import"./ui-BP0GJNn5.js";import"./use_paste-D9d6668Z.js";import"./AdvancedClipboardHandler-Y8bKs15O.js";import"./LucideIcon-kaM68_Rv.js";import"./createLucideIcon-DNsKNLPq.js";import"./align-right-BV65b6MB.js";import"./underline-BaO36zfI.js";import"./image-D9BEVhOC.js";import"./printer-DEjU2fo9.js";const f={class:"space-y-4"},y={class:"flex items-center gap-2 mb-4"},h=["value","rows","required","placeholder"],x={key:1,class:"p-0"},V={key:2,class:"space-y-2"},w=["src"],b={key:3,class:"space-y-4"},_=["value","rows"],S=["src"],k={key:4,class:"space-y-4"},j={key:5,class:"p-0"},T=["innerHTML"],I="mt-1 block w-full rounded-lg border-gray-300 shadow-sm transition-all duration-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",N={__name:"slide_content",props:{modelValue:{type:String,default:""},contentType:{type:String,default:"text"},rows:{type:[String,Number],default:4},required:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue","update:contentType","save_data"],setup(N,{emit:O}){const J=N,E=O,L=a(!1),C=a(J.contentType),U=a(""),A=a(""),R=a(null),H=a(null),$=a(J.modelValue),q=a((()=>{if(J.modelValue&&"todo_list"===J.contentType)try{return JSON.parse(J.modelValue)}catch(e){return console.error("Error parsing initial todos:",e),[]}return[]})());l(C,e=>{E("update:contentType",e)}),l(()=>J.modelValue,e=>{if("todo_list"===C.value&&e)try{const t=JSON.parse(e);JSON.stringify(q.value)!==JSON.stringify(t)&&(q.value=t)}catch(t){console.error("Error parsing todos:",t),q.value=[]}else"html"===C.value&&($.value=e||"")}),l(C,(e,t)=>{if("todo_list"===e&&"todo_list"!==t)try{q.value=J.modelValue?JSON.parse(J.modelValue):[]}catch(a){console.error("Error parsing todos on type change:",a),q.value=[]}});const M=async()=>{"html"===C.value?($.value=J.modelValue||"",L.value=!1,await r(),L.value=!0):"todo_list"===C.value?(q.value=[],E("update:modelValue",JSON.stringify(q.value))):E("update:modelValue","")},D=async e=>{const t=e.target.files[0];if(t)try{const e=await new Promise((e,a)=>{const l=new FileReader;l.onload=()=>e(l.result),l.onerror=a,l.readAsDataURL(t)});E("update:modelValue",e)}catch(a){console.error("Error converting image to base64:",a)}},B=async e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{A.value=e.target.result,F("image",e.target.result)},e.readAsDataURL(t)}},F=(e,t)=>{const a={text:"text"===e?t:U.value,image:"image"===e?t:A.value};U.value=a.text,A.value=a.image,E("update:modelValue",JSON.stringify(a))},P=e=>{try{$.value=e,E("update:modelValue",e)}catch(t){W(t)}},W=e=>{console.error("Editor error:",e),$.value=""};l(q,e=>{E("update:modelValue",JSON.stringify(e))},{deep:!0});const X=e=>{const t=q.value.filter(t=>t.id!==e);q.value=t,E("update:modelValue",JSON.stringify(t))},Y=e=>{const t=q.value.map(t=>t.id===e.id?{...t,completed:!t.completed}:t);q.value=t,E("update:modelValue",JSON.stringify(t))},Z=()=>{const e=q.value.filter(e=>!e.completed);q.value=e,E("update:modelValue",JSON.stringify(e))};return o(async()=>{"html"===C.value&&(await r(),L.value=!0)}),(a,l)=>(i(),s("div",f,[n("div",y,[d(n("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>C.value=e),class:"rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",onChange:M},l[8]||(l[8]=[c('<option value="text">Plain Text</option><option value="html">Rich HTML</option><option value="screenshot">Screenshot</option><option value="text_img">Text with Image</option><option value="todo_list">todo_list</option><option value="force_html">force_html</option>',6)]),544),[[p,C.value]])]),"text"===C.value?(i(),s("textarea",{key:0,class:m(["",I]),value:N.modelValue,onInput:l[1]||(l[1]=e=>a.$emit("update:modelValue",e.target.value)),rows:N.rows,required:N.required,placeholder:N.placeholder},null,40,h)):u("",!0),"html"===C.value?(i(),s("div",x,[v(e,{modelValue:$.value,"onUpdate:modelValue":[l[2]||(l[2]=e=>$.value=e),P],locale:"en",mode:"default",height:"300px",placeholder:N.placeholder,onError:W},null,8,["modelValue","placeholder"])])):u("",!0),"screenshot"===C.value?(i(),s("div",V,[n("input",{type:"file",accept:"image/*",onChange:D,class:"hidden",ref_key:"fileInput",ref:R},null,544),n("button",{onClick:l[3]||(l[3]=e=>a.$refs.fileInput.click()),class:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"}," Upload Screenshot "),N.modelValue?(i(),s("img",{key:0,src:N.modelValue,class:"max-w-full h-auto rounded",alt:"Screenshot"},null,8,w)):u("",!0)])):u("",!0),"text_img"===C.value?(i(),s("div",b,[n("textarea",{value:U.value,onInput:l[4]||(l[4]=e=>F("text",e.target.value)),rows:N.rows,class:m(I),placeholder:"Enter text content..."},null,40,_),n("div",null,[n("input",{type:"file",accept:"image/*",onChange:B,class:"hidden",ref_key:"textImageInput",ref:H},null,544),n("button",{onClick:l[5]||(l[5]=e=>a.$refs.textImageInput.click()),class:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"}," Add Image "),A.value?(i(),s("img",{key:0,src:A.value,class:"max-w-full h-auto mt-2 rounded",alt:"Uploaded image"},null,8,S)):u("",!0)])])):u("",!0),"todo_list"===C.value?(i(),s("div",k,[v(t,{todos:q.value,"onUpdate:todos":l[6]||(l[6]=e=>q.value=e),"show-filters":!0,"show-priority":!0,"show-stats":!0,placeholder:"Enter a new task...","add-button-text":"Add Task",onAdd:X,onDelete:X,onToggle:Y,onClearCompleted:Z,onSave_data:l[7]||(l[7]=e=>a.$emit("save_data"))},null,8,["todos"])])):u("",!0),"force_html"===C.value?(i(),s("div",j,[n("div",{class:"p-0",innerHTML:$.value},null,8,T),n("details",null,[l[9]||(l[9]=n("summary",null,"code",-1)),n("pre",null,g($.value),1)])])):u("",!0)]))}};export{N as default};
