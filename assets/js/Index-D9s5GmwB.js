import{o as e,u as l,m as a,c as t,Q as s,f as o,d as r,a as n,aF as i,p as u,b as c,A as d,l as m}from"./app-Buylb2AA.js";import{Q as v}from"./QSelect-CcTxzM62.js";import{Q as p}from"./QSpinnerDots-DjseaGnd.js";import{Q as f}from"./QTd-B6OVqMbX.js";import{Q as g}from"./QTable-BmRSX4cl.js";import{f as b,a as _,L as x,I as y,b as C,y as w,a3 as h,J as k,M as V,U as j,H as D,F as Q,Q as L,V as q,O as T,_ as A}from"./vendor-CUZ9QTQV.js";import{_ as M}from"./AppLayout-ClCiCQFL.js";import S from"./CourseCard-BPl4rH9X.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";import"./rtl-Cr6c3OOr.js";import"./QMarkupTable-Cd9X66xB.js";import"./QLinearProgress-B7jHdoB9.js";import"./use-fullscreen-DO2N8akv.js";const U={class:"q-pa-md"},$={class:"row items-center justify-between"},E={class:"q-gutter-sm"},F={class:"col-12 col-sm-6 col-md-3"},I={class:"text-h5 text-bold text-blue-8"},N={class:"col-12 col-sm-6 col-md-3"},P={class:"text-h5 text-bold text-green-8"},z={class:"col-12 col-sm-6 col-md-3"},O={class:"text-h5 text-bold text-orange-8"},R={class:"col-12 col-sm-6 col-md-3"},B={class:"text-h5 text-bold text-purple-8"},G={class:"row q-col-gutter-md items-center"},H={class:"col-12 col-md-6"},J={class:"col-12 col-md-3"},Z={class:"col-12 col-md-3"},K={key:0,class:"text-center q-pa-lg"},W={key:1,class:"row q-col-gutter-md"},X={key:3,class:"text-center text-grey-7 q-pa-xl"},Y={class:"text-subtitle2"},ee=e({__name:"Index",props:{courses:{type:Array,required:!0}},setup(e){const ee=e,le=l(),ae=b(!1),te=b(""),se=b("created_at"),oe=b("grid"),re=b(!1),ne=b(null),ie=[{label:"Recently Created",value:"created_at"},{label:"Name (A-Z)",value:"name"},{label:"Most Levels",value:"levels_count"}],ue=[{label:"Grid View",value:"grid"},{label:"Table View",value:"table"}],ce=[{name:"name",label:"Course Name",field:"name",align:"left",sortable:!0},{name:"description",label:"Description",field:"description",align:"left"},{name:"levels_count",label:"Levels",field:e=>{var l;return(null==(l=e.levels)?void 0:l.length)||0},align:"center"},{name:"creator",label:"Created By",field:e=>{var l;return(null==(l=e.creator)?void 0:l.name)||"Unknown"},align:"left"},{name:"created_at",label:"Created",field:"created_at",align:"left",format:e=>new Date(e).toLocaleDateString()},{name:"actions",label:"Actions",align:"center"}],de=_(()=>{let e=ee.courses;if(te.value){const l=te.value.toLowerCase();e=e.filter(e=>{var a;return e.name.toLowerCase().includes(l)||(null==(a=e.description)?void 0:a.toLowerCase().includes(l))})}return e.sort((e,l)=>{var a,t;return"name"===se.value?e.name.localeCompare(l.name):"levels_count"===se.value?((null==(a=l.levels)?void 0:a.length)||0)-((null==(t=e.levels)?void 0:t.length)||0):new Date(l.created_at)-new Date(e.created_at)}),e}),me=_(()=>ee.courses.reduce((e,l)=>{var a;return e+((null==(a=l.levels)?void 0:a.length)||0)},0)),ve=_(()=>ee.courses.filter(e=>{var l;return(null==(l=e.levels)?void 0:l.length)>0}).length),pe=_(()=>{const e=new Date;return e.setDate(e.getDate()-7),ee.courses.filter(l=>new Date(l.created_at)>e).length}),fe=e=>{A.visit(route("course-management.courses.edit",e.id))},ge=e=>{ne.value=e,re.value=!0},be=()=>{ne.value&&A.delete(route("course-management.courses.destroy",ne.value.id),{onSuccess:()=>{le.notify({type:"positive",message:"Course deleted successfully.",icon:"check_circle"}),re.value=!1,ne.value=null},onError:()=>{le.notify({type:"negative",message:"Failed to delete course.",icon:"error"})}})};return(l,b)=>(y(),x(Q,null,[C(w(h),{title:"Course Management"}),C(M,{title:"Course Management"},{default:k(()=>[V("div",U,[C(a,{flat:"",bordered:""},{default:k(()=>[C(t,null,{default:k(()=>[V("div",$,[b[9]||(b[9]=V("div",null,[V("div",{class:"text-h6"},"Course Management"),V("div",{class:"text-subtitle2"},"Manage educational courses, levels, sections, and lessons.")],-1)),V("div",E,[C(s,{flat:"",color:"purple",icon:"person_add",label:"Assign Teachers",onClick:b[0]||(b[0]=e=>l.$inertia.visit(l.route("course-management.teachers.index")))}),C(s,{flat:"",color:"orange",icon:"upload",label:"Import Excel",onClick:b[1]||(b[1]=e=>l.$inertia.visit(l.route("course-management.import.index")))}),C(s,{color:"primary",icon:"add",label:"New Course",onClick:b[2]||(b[2]=e=>l.$inertia.visit(l.route("course-management.courses.create")))})])])]),_:1}),C(t,{class:"row q-col-gutter-md"},{default:k(()=>[V("div",F,[C(a,{class:"bg-blue-1 text-center"},{default:k(()=>[C(t,null,{default:k(()=>[V("div",I,j(e.courses.length),1),b[10]||(b[10]=V("div",{class:"text-subtitle2 text-grey-8"},"Total Courses",-1))]),_:1})]),_:1})]),V("div",N,[C(a,{class:"bg-green-1 text-center"},{default:k(()=>[C(t,null,{default:k(()=>[V("div",P,j(me.value),1),b[11]||(b[11]=V("div",{class:"text-subtitle2 text-grey-8"},"Total Levels",-1))]),_:1})]),_:1})]),V("div",z,[C(a,{class:"bg-orange-1 text-center"},{default:k(()=>[C(t,null,{default:k(()=>[V("div",O,j(ve.value),1),b[12]||(b[12]=V("div",{class:"text-subtitle2 text-grey-8"},"Active Courses",-1))]),_:1})]),_:1})]),V("div",R,[C(a,{class:"bg-purple-1 text-center"},{default:k(()=>[C(t,null,{default:k(()=>[V("div",B,j(pe.value),1),b[13]||(b[13]=V("div",{class:"text-subtitle2 text-grey-8"},"Recent Courses",-1))]),_:1})]),_:1})])]),_:1}),C(t,null,{default:k(()=>[V("div",G,[V("div",H,[C(o,{modelValue:te.value,"onUpdate:modelValue":b[3]||(b[3]=e=>te.value=e),outlined:"",dense:"",placeholder:"Search courses...",clearable:""},{prepend:k(()=>[C(r,{name:"search"})]),_:1},8,["modelValue"])]),V("div",J,[C(v,{modelValue:se.value,"onUpdate:modelValue":b[4]||(b[4]=e=>se.value=e),options:ie,outlined:"",dense:"",label:"Sort by","emit-value":"","map-options":""},null,8,["modelValue"])]),V("div",Z,[C(v,{modelValue:oe.value,"onUpdate:modelValue":b[5]||(b[5]=e=>oe.value=e),options:ue,outlined:"",dense:"",label:"View","emit-value":"","map-options":""},null,8,["modelValue"])])])]),_:1}),C(n),C(t,null,{default:k(()=>[ae.value?(y(),x("div",K,[C(p,{color:"primary",size:"40px"}),b[14]||(b[14]=V("p",null,"Loading courses...",-1))])):"grid"===oe.value&&de.value.length>0?(y(),x("div",W,[(y(!0),x(Q,null,L(de.value,e=>(y(),x("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[C(S,{course:e,onEdit:fe,onDelete:ge},null,8,["course"])]))),128))])):"table"===oe.value&&de.value.length>0?(y(),D(g,{key:2,rows:de.value,columns:ce,"row-key":"id",flat:"",bordered:"",pagination:{rowsPerPage:10}},{"body-cell-actions":k(e=>[C(f,{props:e},{default:k(()=>[C(i,{flat:""},{default:k(()=>[C(s,{flat:"",dense:"",color:"primary",icon:"visibility",onClick:a=>l.$inertia.visit(l.route("course-management.courses.show",e.row.id))},{default:k(()=>[C(u,null,{default:k(()=>b[15]||(b[15]=[q("View Course")])),_:1})]),_:2},1032,["onClick"]),C(s,{flat:"",dense:"",color:"orange",icon:"edit",onClick:l=>fe(e.row)},{default:k(()=>[C(u,null,{default:k(()=>b[16]||(b[16]=[q("Edit Course")])),_:1})]),_:2},1032,["onClick"]),C(s,{flat:"",dense:"",color:"negative",icon:"delete",onClick:l=>ge(e.row)},{default:k(()=>[C(u,null,{default:k(()=>b[17]||(b[17]=[q("Delete Course")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows"])):(y(),x("div",X,[C(r,{name:"school",size:"4em"}),b[18]||(b[18]=V("p",{class:"q-mt-md"},"No courses found matching your criteria.",-1)),C(s,{color:"primary",label:"Create First Course",onClick:b[6]||(b[6]=e=>l.$inertia.visit(l.route("course-management.courses.create")))})]))]),_:1})]),_:1})]),C(c,{modelValue:re.value,"onUpdate:modelValue":b[8]||(b[8]=e=>re.value=e),persistent:""},{default:k(()=>[C(a,null,{default:k(()=>[C(t,{class:"row items-center"},{default:k(()=>[C(d,{icon:"warning",color:"negative","text-color":"white"}),b[19]||(b[19]=V("span",{class:"q-ml-sm"},"Are you sure you want to delete this course?",-1))]),_:1}),ne.value?(y(),D(t,{key:0},{default:k(()=>[V("div",Y,"Course: "+j(ne.value.name),1),b[20]||(b[20]=V("div",{class:"text-caption text-grey-7"},"This action cannot be undone.",-1))]),_:1})):T("",!0),C(m,{align:"right"},{default:k(()=>[C(s,{flat:"",label:"Cancel",color:"primary",onClick:b[7]||(b[7]=e=>re.value=!1)}),C(s,{flat:"",label:"Delete",color:"negative",onClick:be})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64))}},[["__scopeId","data-v-c3e757fa"]]);export{ee as default};
