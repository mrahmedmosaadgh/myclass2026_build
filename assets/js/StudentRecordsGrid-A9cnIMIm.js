import{u as e,d as l,f as a,Q as t,aF as o,aj as s,g as n,aP as d,i as u,h as i,m as c,c as r,A as m,a as p,l as f,n as v,b as _}from"./app-B9g134Ig.js";import{Q as b}from"./QTab-Cz1WPncs.js";import{Q as k}from"./QTabs-CeWTaR6G.js";import{Q as g}from"./QBadge-DTOqueiL.js";import{Q as h}from"./QSelect-s_FFdLoI.js";import{Q as y}from"./QTabPanel-pSOuZD-K.js";import{Q as V}from"./QTabPanels-R7xx_0TT.js";import{f as w,a as C,N as j,J as U,O as Q,b as x,K as A,W as q,y as P,I as S,F as L,R as N,U as O,V as R,Q as $}from"./vendor-nQjeLEvd.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";import"./rtl-Cr6c3OOr.js";import"./use-panel-DG3Ijog8.js";import"./use-render-cache-CmTcazfP.js";const T={class:"student-records-grid"},I={class:"grid-header q-mb-md"},M={class:"row items-center justify-between q-mb-sm"},B={class:"col-12 col-md-4"},F={class:"col-12 col-md-8 row justify-end q-gutter-sm"},z={class:"row q-col-gutter-md"},E={class:"row items-center no-wrap"},H=["src"],J={class:"student-info"},K={class:"text-h6 ellipsis-2-lines"},G={class:"row q-col-gutter-sm"},W={class:"col-12"},D={key:0,class:"col-12"},X={class:"row q-col-gutter-md"},Y={class:"row items-center no-wrap"},Z=["src"],ee={class:"student-info"},le={class:"text-h6 ellipsis-2-lines"},ae={class:"row q-col-gutter-sm"},te={class:"col-12"},oe={key:0,class:"col-12"},se={class:"text-h6"},ne={__name:"StudentRecordsGrid",props:{students:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["update:student","save-student"],setup(ne,{emit:de}){const ue=ne,ie=de,ce=e(),re=w(""),me=w("attendance"),pe=w("all"),fe=w(!1),ve=w(!1),_e=w(null),be=[{label:"Present",value:"present"},{label:"Absent",value:"absent"},{label:"Late",value:"late"},{label:"Excused",value:"excused"}],ke=C(()=>{let e=[...ue.students];if(re.value){const l=re.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(l))}return"all"!==pe.value&&(e=e.filter(e=>e.attendance_status===pe.value)),e});function ge(e){return{present:"positive",absent:"negative",late:"warning",excused:"info"}[e]||"grey"}function he(e){ce.dialog({title:"Confirm",message:`Are you sure you want to mark all students as ${e}?`,cancel:!0,persistent:!0}).onOk(()=>{ke.value.forEach(l=>{l.attendance_status=e,we(l)}),ce.notify({color:"positive",message:`All students marked as ${e}`,icon:"check"})})}function ye(e){pe.value=e}function Ve(){fe.value=!fe.value,ce.dark.set(fe.value)}function we(e){ie("update:student",e)}function Ce(e){ie("save-student",e),ce.notify({color:"positive",message:`Record updated for ${e.name}`,icon:"check"})}function je(e){_e.value={...e},ve.value=!0}function Ue(){const e=ue.students.findIndex(e=>e.id===_e.value.id);if(-1!==e){const l={...ue.students[e],notes:_e.value.notes};ie("update:student",l),ie("save-student",l)}}return(e,w)=>(U(),j("div",T,[Q("div",I,[Q("div",M,[Q("div",B,[x(a,{modelValue:re.value,"onUpdate:modelValue":w[0]||(w[0]=e=>re.value=e),dense:"",outlined:"",placeholder:"Search students...",class:"search-input"},{append:A(()=>[x(l,{name:"search"})]),_:1},8,["modelValue"])]),Q("div",F,[x(o,{outline:""},{default:A(()=>[x(t,{color:"positive",icon:"check_circle",label:"All Present",onClick:w[1]||(w[1]=e=>he("present"))}),x(t,{color:"warning",icon:"schedule",label:"All Late",onClick:w[2]||(w[2]=e=>he("late"))}),x(t,{color:"negative",icon:"cancel",label:"All Absent",onClick:w[3]||(w[3]=e=>he("absent"))})]),_:1}),x(t,{color:"primary",icon:"filter_list"},{default:A(()=>[w[16]||(w[16]=q(" Filter ")),x(s,null,{default:A(()=>[x(n,{style:{"min-width":"150px"}},{default:A(()=>[P((U(),S(i,{clickable:"",onClick:w[4]||(w[4]=e=>ye("all"))},{default:A(()=>[x(u,null,{default:A(()=>w[12]||(w[12]=[q("All Students")])),_:1})]),_:1})),[[d]]),P((U(),S(i,{clickable:"",onClick:w[5]||(w[5]=e=>ye("present"))},{default:A(()=>[x(u,null,{default:A(()=>w[13]||(w[13]=[q("Present Only")])),_:1})]),_:1})),[[d]]),P((U(),S(i,{clickable:"",onClick:w[6]||(w[6]=e=>ye("absent"))},{default:A(()=>[x(u,null,{default:A(()=>w[14]||(w[14]=[q("Absent Only")])),_:1})]),_:1})),[[d]]),P((U(),S(i,{clickable:"",onClick:w[7]||(w[7]=e=>ye("late"))},{default:A(()=>[x(u,null,{default:A(()=>w[15]||(w[15]=[q("Late Only")])),_:1})]),_:1})),[[d]])]),_:1})]),_:1})]),_:1}),x(t,{color:"secondary",icon:"dark_mode",onClick:Ve})])]),x(k,{modelValue:me.value,"onUpdate:modelValue":w[8]||(w[8]=e=>me.value=e),class:"text-primary","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:A(()=>[x(b,{name:"attendance",icon:"how_to_reg",label:"Attendance"}),x(b,{name:"homework",icon:"assignment",label:"Homework"}),x(b,{name:"behavior",icon:"psychology",label:"Behavior"}),x(b,{name:"participation",icon:"record_voice_over",label:"Participation"})]),_:1},8,["modelValue"])]),x(V,{modelValue:me.value,"onUpdate:modelValue":w[9]||(w[9]=e=>me.value=e),animated:"",class:"transparent"},{default:A(()=>[x(y,{name:"attendance"},{default:A(()=>[Q("div",z,[(U(!0),j(L,null,N(ke.value,e=>(U(),j("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[x(c,{class:O(["student-card",`status-${e.attendance_status}`]),dark:fe.value},{default:A(()=>[x(r,{class:"student-header"},{default:A(()=>[Q("div",E,[x(m,{size:"60px",class:"q-mr-sm"},{default:A(()=>[Q("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random&color=fff`},null,8,H)]),_:2},1024),Q("div",J,[Q("div",K,R(e.name),1),x(g,{color:ge(e.attendance_status)},{default:A(()=>{return[q(R((l=e.attendance_status,l.charAt(0).toUpperCase()+l.slice(1))),1)];var l}),_:2},1032,["color"])])])]),_:2},1024),x(p),x(r,null,{default:A(()=>[Q("div",G,[Q("div",W,[x(h,{modelValue:e.attendance_status,"onUpdate:modelValue":[l=>e.attendance_status=l,l=>we(e)],options:be,outlined:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),"late"===e.attendance_status?(U(),j("div",D,[x(a,{modelValue:e.late_minutes,"onUpdate:modelValue":[l=>e.late_minutes=l,l=>we(e)],modelModifiers:{number:!0},type:"number",label:"Minutes Late",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])])):$("",!0)])]),_:2},1024),x(f,{align:"right"},{default:A(()=>[x(t,{flat:"",color:"grey",icon:"edit",onClick:l=>je(e)},{default:A(()=>w[17]||(w[17]=[q(" Notes ")])),_:2},1032,["onClick"]),x(t,{flat:"",color:ge(e.attendance_status),icon:"save",onClick:l=>Ce(e)},{default:A(()=>w[18]||(w[18]=[q(" Save ")])),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1032,["class","dark"])]))),128))])]),_:1}),x(y,{name:"homework"},{default:A(()=>[Q("div",X,[(U(!0),j(L,null,N(ke.value,e=>(U(),j("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[x(c,{dark:fe.value,class:"student-card"},{default:A(()=>[x(r,{class:"student-header"},{default:A(()=>[Q("div",Y,[x(m,{size:"60px",class:"q-mr-sm"},{default:A(()=>[Q("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random&color=fff`},null,8,Z)]),_:2},1024),Q("div",ee,[Q("div",le,R(e.name),1),x(g,{color:e.homework_completed?"positive":"grey"},{default:A(()=>[q(R(e.homework_completed?"Completed":"Not Completed"),1)]),_:2},1032,["color"])])])]),_:2},1024),x(p),x(r,null,{default:A(()=>[Q("div",ae,[Q("div",te,[x(v,{modelValue:e.homework_completed,"onUpdate:modelValue":[l=>e.homework_completed=l,l=>we(e)],label:"Homework Completed",color:"positive"},null,8,["modelValue","onUpdate:modelValue"])]),e.homework_completed?(U(),j("div",oe,[x(a,{modelValue:e.homework_score,"onUpdate:modelValue":[l=>e.homework_score=l,l=>we(e)],modelModifiers:{number:!0},type:"number",label:"Score",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])])):$("",!0)])]),_:2},1024),x(f,{align:"right"},{default:A(()=>[x(t,{flat:"",color:"grey",icon:"edit",onClick:l=>je(e)},{default:A(()=>w[19]||(w[19]=[q(" Notes ")])),_:2},1032,["onClick"]),x(t,{flat:"",color:"primary",icon:"save",onClick:l=>Ce(e)},{default:A(()=>w[20]||(w[20]=[q(" Save ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["dark"])]))),128))])]),_:1})]),_:1},8,["modelValue"]),x(_,{modelValue:ve.value,"onUpdate:modelValue":w[11]||(w[11]=e=>ve.value=e),persistent:""},{default:A(()=>[x(c,{style:{"min-width":"350px"},dark:fe.value},{default:A(()=>[x(r,null,{default:A(()=>{var e;return[Q("div",se,"Notes for "+R(null==(e=_e.value)?void 0:e.name),1)]}),_:1}),x(r,null,{default:A(()=>[x(a,{modelValue:_e.value.notes,"onUpdate:modelValue":w[10]||(w[10]=e=>_e.value.notes=e),type:"textarea",autofocus:"",outlined:""},null,8,["modelValue"])]),_:1}),x(f,{align:"right"},{default:A(()=>[P(x(t,{flat:"",label:"Cancel",color:"negative"},null,512),[[d]]),P(x(t,{flat:"",label:"Save Notes",color:"positive",onClick:Ue},null,512),[[d]])]),_:1})]),_:1},8,["dark"])]),_:1},8,["modelValue"])]))}};export{ne as default};
