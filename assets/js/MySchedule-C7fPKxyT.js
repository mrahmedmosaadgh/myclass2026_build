import{o as e,u as s,d as a,m as l}from"./app-C-NJhdpe.js";import{Q as t}from"./QSpinnerDots-BFT-tKRa.js";import{f as r,a as c,o,ae as i,L as d,I as n,b as m,M as u,y,H as v,O as p,V as b,U as h,J as g,F as k,Q as w,Z as x,R as S,_ as j}from"./vendor-CUZ9QTQV.js";import f from"./WeeklyPlanMenu-D0zERVbo.js";import{u as _}from"./i18n-CP46N9fu.js";import"./offline-BzIlwqNM.js";import"./ui-LrZmvB2D.js";import"./QTab-C_vkYR0k.js";import"./QTabs-C8Sz98qV.js";import"./rtl-Cr6c3OOr.js";import"./QSpace-Bn7M2Abx.js";import"./WeeklySystemGuide-C11T3DR0.js";import"./QTabPanel-zhJc0Joi.js";import"./use-panel-CGzbevm7.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanels-bY91sdlT.js";import"./MainSchoolData-i5zT_CXg.js";import"./QBadge-D_SrvMy0.js";import"./schoolData-BQSkQPXz.js";import"./SchoolSettingsDialog-D3tRhtrL.js";import"./QSelect-B3f0Rrq3.js";import"./QForm-CqbXDoyt.js";const Q={class:"q-pa-md"},q={class:"row items-center q-mb-lg"},D={class:"col"},P={class:"q-ma-none text-weight-bold"},$={class:"text-grey-7 q-mb-none"},M={key:0,class:"row justify-center q-pa-xl"},T={class:"text-h6 text-grey-7 q-mt-md"},z={class:"text-grey-6"},C={key:2,class:"timetable-container"},F={class:"grid-row header-row"},J={class:"grid-cell period-header"},B={class:"period-number"},E=["onClick"],H={class:"card-content"},I={class:"subject"},K={class:"classroom"},L={key:1,class:"free-period text-caption text-grey-5"},O={class:"row q-gutter-lg justify-center"},R={class:"text-center"},U={class:"text-h4 text-primary"},W={class:"text-caption text-grey-7"},G={class:"text-center"},V={class:"text-h4 text-secondary"},Z={class:"text-caption text-grey-7"},A={class:"text-center"},N={class:"text-h4 text-accent"},X={class:"text-caption text-grey-7"},Y=e({__name:"MySchedule",setup(e){const{t:Y}=_(),ee=s(),se=r([]),ae=r(!1),le=c(()=>[{value:1,label:Y("weeklyPlans.fullDays.1")},{value:2,label:Y("weeklyPlans.fullDays.2")},{value:3,label:Y("weeklyPlans.fullDays.3")},{value:4,label:Y("weeklyPlans.fullDays.4")},{value:5,label:Y("weeklyPlans.fullDays.5")}]),te=[1,2,3,4,5,6,7,8],re=c(()=>{const e={};return se.value.forEach(s=>{const a=`${s.day}-${s.period_number}`;e[a]=s}),e}),ce=c(()=>se.value.length),oe=c(()=>new Set(se.value.map(e=>{var s;return null==(s=e.cst)?void 0:s.classroom_id})).size),ie=c(()=>new Set(se.value.map(e=>{var s;return null==(s=e.cst)?void 0:s.subject_id})).size),de=(e,s)=>re.value[`${e}-${s}`],ne=(e,s)=>{const a=de(e,s);return(null==a?void 0:a.cst)?{backgroundColor:a.cst.c_bg||"#e0e0e0",color:a.cst.c_text||"#333"}:{}};return o(()=>{(async()=>{ae.value=!0;try{const e=await x.get("/weekly-system/api/teacher/my-schedule");se.value=e.data.data||e.data||[]}catch(e){console.error("Error fetching schedule:",e),ee.notify({type:"negative",message:Y("weeklySystem.notifications.loadFailed")})}finally{ae.value=!1}})()}),(e,s)=>{const r=i("Head");return n(),d(k,null,[m(r,{title:y(Y)("weeklySystem.mySchedule.title")},null,8,["title"]),u("div",Q,[m(f),u("div",q,[u("div",D,[u("h4",P,[m(a,{name:"calendar_month",class:"q-mr-sm",color:"primary"}),b(" "+h(y(Y)("weeklySystem.mySchedule.title")),1)]),u("p",$,h(y(Y)("weeklySystem.mySchedule.subtitle")),1)])]),ae.value?(n(),d("div",M,[m(t,{size:"50px",color:"primary"})])):se.value.length?(n(),d("div",C,[u("div",F,[s[0]||(s[0]=u("div",{class:"grid-cell period-header"},null,-1)),(n(!0),d(k,null,w(le.value,e=>(n(),d("div",{key:e.value,class:"grid-cell day-header"},h(y(Y)(`weeklyPlans.shortDays.${e.value}`)),1))),128))]),(n(),d(k,null,w(te,e=>u("div",{key:e,class:"grid-row"},[u("div",J,[u("div",B,h(e),1)]),(n(!0),d(k,null,w(le.value,s=>{var l,t;return n(),d("div",{key:`${s.value}-${e}`,class:"grid-cell"},[de(s.value,e)?(n(),d("div",{key:0,class:"schedule-card",style:S(ne(s.value,e)),onClick:a=>((e,s)=>{const a=de(e,s);a&&j.visit("/my_table_mnger/weekly_system/teacher/my-weekly-plans",{data:{schedule_id:a.id}})})(s.value,e)},[u("div",H,[u("div",I,h(null==(l=de(s.value,e).cst)?void 0:l.subject_name),1),u("div",K,[m(a,{name:"meeting_room",size:"xs"}),b(" "+h(null==(t=de(s.value,e).cst)?void 0:t.classroom_name),1)])])],12,E)):(n(),d("div",L,h(y(Y)("weeklySystem.mySchedule.free")),1))])}),128))])),64))])):(n(),v(l,{key:1,flat:"",bordered:"",class:"text-center q-pa-xl"},{default:g(()=>[m(a,{name:"event_busy",size:"64px",color:"grey-5"}),u("p",T,h(y(Y)("weeklySystem.schoolBrowser.noDataTitle")),1),u("p",z,h(y(Y)("weeklySystem.mySchedule.emptyState")),1)]),_:1})),se.value.length?(n(),v(l,{key:3,flat:"",bordered:"",class:"q-mt-lg q-pa-md"},{default:g(()=>[u("div",O,[u("div",R,[u("div",U,h(ce.value),1),u("div",W,h(y(Y)("weeklySystem.mySchedule.totalClasses")),1)]),u("div",G,[u("div",V,h(oe.value),1),u("div",Z,h(y(Y)("weeklySystem.mySchedule.classrooms")),1)]),u("div",A,[u("div",N,h(ie.value),1),u("div",X,h(y(Y)("weeklySystem.mySchedule.subjects")),1)])])]),_:1})):p("",!0)])],64)}}},[["__scopeId","data-v-bd704b76"]]);export{Y as default};
