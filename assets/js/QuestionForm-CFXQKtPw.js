import{Q as e}from"./QSpace-Cq53gbnC.js";import{r as a,u as l,f as t,aS as o,b as u,h as s,p as r,o as i,d as n,e as d}from"./app-NYt77MEb.js";import{Q as p}from"./QSelect-BfJwO5J-.js";import{Q as m}from"./QForm-CzIe14r9.js";import{f as v,a as g,k as c,I as y,J as f,K as b,b as V,R as q,y as h,V as _,a0 as w,O as x}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";const A={class:"text-h6"},U={class:"q-gutter-md"},j=a({__name:"QuestionForm",props:{modelValue:{type:Boolean,default:!1},question:{type:Object,default:null},categories:{type:Array,default:()=>["General","Technical","Behavioral","Experience","Education"]},questionTypes:{type:Array,default:()=>["text","textarea","select","multi-select","media","file"]}},emits:["update:modelValue","save"],setup(a,{expose:j,emit:Q}){const S=a,T=Q,E=l(),O=v(S.modelValue),B=v(!1),C=v({}),F=v({title:"",type:"",category:[],language:"en",tags:[],options:"",default_answer:"",is_required:!1,description:""}),I=g(()=>[{label:"Text Input",value:"text"},{label:"Textarea",value:"textarea"},{label:"Single Select",value:"select"},{label:"Multi Select",value:"multi-select"},{label:"Media Upload",value:"media"},{label:"File Upload",value:"file"}]),k=g(()=>S.categories),D=g(()=>[{label:"English",value:"en"},{label:"Spanish",value:"es"},{label:"French",value:"fr"},{label:"Arabic",value:"ar"}]),L=v(["core","optional","advanced","beginner","intermediate"]),M=g(()=>!!S.question),z=g(()=>F.value.title&&F.value.type&&F.value.category.length>0&&F.value.language),G=e=>{e?F.value={title:e.title||"",type:e.type||"",category:Array.isArray(e.category)?e.category:[e.category].filter(Boolean),language:e.language||"en",tags:Array.isArray(e.tags)?e.tags:[],options:Array.isArray(e.options)?e.options.join(", "):e.options||"",default_answer:e.default_answer||"",is_required:e.is_required||!1,description:e.description||""}:(F.value={title:"",type:"",category:[],language:"en",tags:[],options:"",default_answer:"",is_required:!1,description:""},C.value={})},J=()=>{if(!z.value)return void E.notify({type:"negative",message:"Please fill in all required fields",position:"top"});B.value=!0,C.value={};const e={...F.value,options:F.value.options?F.value.options.split(",").map(e=>e.trim()).filter(Boolean):[]};M.value&&(e.id=S.question.id),T("save",e)};return c(()=>S.modelValue,e=>{O.value=e,e&&G(S.question)}),c(()=>S.question,e=>{O.value&&G(e)}),j({handleSaveComplete:()=>{B.value=!1,O.value=!1},handleSaveError:e=>{var a,l;B.value=!1,(null==(l=null==(a=e.response)?void 0:a.data)?void 0:l.errors)&&(C.value=e.response.data.errors)}}),(a,l)=>(f(),y(d,{modelValue:O.value,"onUpdate:modelValue":[l[9]||(l[9]=e=>O.value=e),l[10]||(l[10]=e=>a.$emit("update:modelValue",e))],persistent:""},{default:b(()=>[V(n,{style:{"min-width":"500px","max-width":"700px",width:"100%"}},{default:b(()=>[V(t,{class:"row items-center q-pb-none"},{default:b(()=>[q("div",A,_(M.value?"Edit Question":"Add New Question"),1),V(e),h(V(u,{icon:"close",flat:"",round:"",dense:""},null,512),[[o]])]),_:1}),V(m,{onSubmit:w(J,["prevent"]),class:"q-gutter-md"},{default:b(()=>[V(t,{class:"q-pt-none"},{default:b(()=>[q("div",U,[V(s,{modelValue:F.value.title,"onUpdate:modelValue":l[0]||(l[0]=e=>F.value.title=e),label:"Question Title *",outlined:"",dense:"",rules:[e=>!!e||"Title is required"],error:!!C.value.title,"error-message":C.value.title},null,8,["modelValue","rules","error","error-message"]),V(p,{modelValue:F.value.type,"onUpdate:modelValue":l[1]||(l[1]=e=>F.value.type=e),options:I.value,label:"Question Type *",outlined:"",dense:"","emit-value":"","map-options":"",rules:[e=>!!e||"Type is required"],error:!!C.value.type,"error-message":C.value.type},null,8,["modelValue","options","rules","error","error-message"]),V(p,{modelValue:F.value.category,"onUpdate:modelValue":l[2]||(l[2]=e=>F.value.category=e),options:k.value,label:"Category *",outlined:"",dense:"",multiple:"","use-chips":"","use-input":"","input-debounce":"0","new-value-mode":"add-unique",rules:[e=>e&&e.length>0||"At least one category is required"],error:!!C.value.category,"error-message":C.value.category},null,8,["modelValue","options","rules","error","error-message"]),V(p,{modelValue:F.value.language,"onUpdate:modelValue":l[3]||(l[3]=e=>F.value.language=e),options:D.value,label:"Language *",outlined:"",dense:"","emit-value":"","map-options":"",rules:[e=>!!e||"Language is required"],error:!!C.value.language,"error-message":C.value.language},null,8,["modelValue","options","rules","error","error-message"]),V(p,{modelValue:F.value.tags,"onUpdate:modelValue":l[4]||(l[4]=e=>F.value.tags=e),options:L.value,label:"Tags",outlined:"",dense:"",multiple:"","use-chips":"","use-input":"","input-debounce":"0","new-value-mode":"add-unique",hint:"Optional tags for categorization"},null,8,["modelValue","options"]),"select"===F.value.type||"multi-select"===F.value.type?(f(),y(s,{key:0,modelValue:F.value.options,"onUpdate:modelValue":l[5]||(l[5]=e=>F.value.options=e),label:"Options (comma separated)",outlined:"",dense:"",type:"textarea",rows:"3",hint:"Enter options separated by commas"},null,8,["modelValue"])):x("",!0),V(s,{modelValue:F.value.default_answer,"onUpdate:modelValue":l[6]||(l[6]=e=>F.value.default_answer=e),label:"Default Answer",outlined:"",dense:"",type:"textarea",rows:"3",hint:"Optional default answer or placeholder text"},null,8,["modelValue"]),V(r,{modelValue:F.value.is_required,"onUpdate:modelValue":l[7]||(l[7]=e=>F.value.is_required=e),label:"This question is required",color:"primary"},null,8,["modelValue"]),V(s,{modelValue:F.value.description,"onUpdate:modelValue":l[8]||(l[8]=e=>F.value.description=e),label:"Description",outlined:"",dense:"",type:"textarea",rows:"2",hint:"Optional description or instructions for this question"},null,8,["modelValue"])])]),_:1}),V(i,{align:"right",class:"q-pa-md"},{default:b(()=>[h(V(u,{flat:"",label:"Cancel",color:"grey-7",disable:B.value},null,8,["disable"]),[[o]]),V(u,{type:"submit",label:"Save",color:"primary",loading:B.value,disable:!z.value},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},[["__scopeId","data-v-1434750a"]]);export{j as default};
