import{c as e,n as a,f as l,h as t,i as s,A as o,j as r,Q as u,m as n}from"./app-Cs5CKgHw.js";import{Q as i}from"./QSelect-D-pA-eh-.js";import{Q as m}from"./QForm-BPEGFHcd.js";import{f as p,I as d,J as v,K as c,O as f,b,N as g,Q as _,ag as y,ah as h,W as j,V as x,z as C,$ as V}from"./vendor-nQjeLEvd.js";import{_ as w}from"./AppLayout-33RltWFH.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";import"./rtl-Cr6c3OOr.js";const Q={class:"py-12"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={key:0},A={class:"flex justify-end q-mt-lg"},N={__name:"Create",props:{users:{type:Array,default:()=>[]}},setup(N){const S=window.route,P=p(!1),F=p(""),G=p([]),O=p(!1),k=e=>{if(!e)return"primary";const a=["primary","secondary","accent","positive","negative","info","warning"];return a[e.split("").reduce((e,a)=>e+a.charCodeAt(0),0)%a.length]},z=()=>{O.value=!0;const e=P.value?G.value.map(e=>e.id):[G.value.id];V.post(S("conversations.store"),{user_ids:e,name:P.value?F.value:null},{onFinish:()=>{O.value=!1}})};return(p,V)=>(v(),d(w,{title:"New Conversation"},{header:c(()=>V[3]||(V[3]=[f("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," New Conversation ",-1)])),default:c(()=>[f("div",Q,[f("div",U,[b(n,{flat:"",bordered:""},{default:c(()=>[b(e,null,{default:c(()=>[V[4]||(V[4]=f("div",{class:"text-h5 q-mb-md"},"Start a New Conversation",-1)),b(m,{onSubmit:z,class:"q-gutter-md"},{default:c(()=>[f("div",null,[b(a,{modelValue:P.value,"onUpdate:modelValue":V[0]||(V[0]=e=>P.value=e),label:"Create a group chat",color:"primary"},null,8,["modelValue"])]),P.value?(v(),g("div",q,[b(l,{modelValue:F.value,"onUpdate:modelValue":V[1]||(V[1]=e=>F.value=e),label:"Group Name",rules:[e=>!!e||"Group name is required"]},null,8,["modelValue","rules"])])):_("",!0),f("div",null,[b(i,{modelValue:G.value,"onUpdate:modelValue":V[2]||(V[2]=e=>G.value=e),options:N.users,"option-label":"name","option-value":e=>e.id,label:P.value?"Add Participants":"Select User",multiple:P.value,"use-chips":"",rules:[e=>e.length>0||"Please select at least one user"]},{option:c(e=>[b(t,y(h(e.itemProps)),{default:c(()=>[b(s,{avatar:""},{default:c(()=>[b(o,{color:k(e.opt.name)},{default:c(()=>{return[j(x((a=e.opt.name,a?a.split(" ").map(e=>e[0]).join("").toUpperCase():"?")),1)];var a}),_:2},1032,["color"])]),_:2},1024),b(s,null,{default:c(()=>[b(r,null,{default:c(()=>[j(x(e.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","option-value","label","multiple","rules"])]),f("div",A,[b(u,{flat:"",color:"negative",label:"Cancel",to:C(S)("conversations.index"),class:"q-mr-sm"},null,8,["to"]),b(u,{type:"submit",color:"primary",label:"Create Conversation",loading:O.value},null,8,["loading"])])]),_:1})]),_:1})]),_:1})])])]),_:1}))}};export{N as default};
