import{o as e}from"./app-BwCflFkV.js";import{f as l,a,o as s,k as t,L as u,I as n,M as r,x as o,O as i,F as v,Q as p,S as c,U as y,ab as d}from"./vendor-CUZ9QTQV.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";const m={class:"typing-area"},f=["disabled"],x={key:0,class:"typing-prompt"},g=e({__name:"TypingArea",props:{lessonText:{type:String,required:!0}},emits:["key-press","exercise-complete"],setup(e,{emit:g}){const k=e,h=g,T=l(null),b=l(""),j=l([]),_=l(0),w=l(!1),M=l(null),B=a(()=>_.value===k.lessonText.length),D=e=>{if(M.value||(M.value=Date.now()),"Backspace"!==e.key){if(1===e.key.length&&(h("key-press",e.key),j.value[_.value]=e.key,_.value++,B.value)){const e=(Date.now()-M.value)/6e4,l=k.lessonText.split(" ").length,a=Math.round(l/e);h("exercise-complete",{wpm:a,accuracy:F(),errors:I()})}}else _.value>0&&(_.value--,j.value[_.value]=null)},F=()=>{const e=j.value.filter((e,l)=>e===k.lessonText[l]).length;return Math.round(e/k.lessonText.length*100)},I=()=>j.value.filter((e,l)=>e&&e!==k.lessonText[l]).length;return s(()=>{var e;null==(e=T.value)||e.focus()}),t(B,e=>{var l;e&&(null==(l=T.value)||l.blur())}),(l,a)=>(n(),u("div",m,[r("div",{class:c(["lesson-text",{blur:!w.value}])},[(n(!0),u(v,null,p(e.lessonText,(e,l)=>(n(),u("span",{key:l,class:c({current:_.value===l,correct:j.value[l]===e,incorrect:j.value[l]&&j.value[l]!==e})},y(e),3))),128))],2),o(r("input",{ref_key:"inputRef",ref:T,type:"text",class:"typing-input","onUpdate:modelValue":a[0]||(a[0]=e=>b.value=e),onKeydown:D,onFocus:a[1]||(a[1]=e=>w.value=!0),onBlur:a[2]||(a[2]=e=>w.value=!1),disabled:B.value},null,40,f),[[d,b.value]]),w.value?i("",!0):(n(),u("div",x," Click here to start typing "))]))}},[["__scopeId","data-v-257c50c8"]]);export{g as default};
