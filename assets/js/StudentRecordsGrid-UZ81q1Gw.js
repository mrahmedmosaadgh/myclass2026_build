import{u as e,e as l,g as a,Q as t,D as o,aj as s,h as n,aD as d,j as u,i,n as c,d as r,A as m,a as p,m as f,o as v,b as _}from"./app-Dccx8xF5.js";import{Q as b}from"./QTab-BJCUrT4L.js";import{Q as k}from"./QTabs-4quOvtr1.js";import{Q as g}from"./QBadge-BoQNzKR2.js";import{Q as h}from"./QSelect-aOnYle6d.js";import{Q as y}from"./QTabPanel-QxVdoii7.js";import{Q as V}from"./QTabPanels-DiqDdK2g.js";import{f as w,a as C,L as j,I as U,M as x,b as Q,J as A,V as q,x as S,H as L,F as P,Q as N,S as O,U as $,O as I}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./rtl-Cr6c3OOr.js";import"./use-panel-DP2_LoYb.js";import"./use-render-cache-CmTcazfP.js";const M={class:"student-records-grid"},R={class:"grid-header q-mb-md"},H={class:"row items-center justify-between q-mb-sm"},T={class:"col-12 col-md-4"},B={class:"col-12 col-md-8 row justify-end q-gutter-sm"},z={class:"row q-col-gutter-md"},D={class:"row items-center no-wrap"},E=["src"],F={class:"student-info"},J={class:"text-h6 ellipsis-2-lines"},G={class:"row q-col-gutter-sm"},K={class:"col-12"},W={key:0,class:"col-12"},X={class:"row q-col-gutter-md"},Y={class:"row items-center no-wrap"},Z=["src"],ee={class:"student-info"},le={class:"text-h6 ellipsis-2-lines"},ae={class:"row q-col-gutter-sm"},te={class:"col-12"},oe={key:0,class:"col-12"},se={class:"text-h6"},ne={__name:"StudentRecordsGrid",props:{students:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["update:student","save-student"],setup(ne,{emit:de}){const ue=ne,ie=de,ce=e(),re=w(""),me=w("attendance"),pe=w("all"),fe=w(!1),ve=w(!1),_e=w(null),be=[{label:"Present",value:"present"},{label:"Absent",value:"absent"},{label:"Late",value:"late"},{label:"Excused",value:"excused"}],ke=C(()=>{let e=[...ue.students];if(re.value){const l=re.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(l))}return"all"!==pe.value&&(e=e.filter(e=>e.attendance_status===pe.value)),e});function ge(e){return{present:"positive",absent:"negative",late:"warning",excused:"info"}[e]||"grey"}function he(e){ce.dialog({title:"Confirm",message:`Are you sure you want to mark all students as ${e}?`,cancel:!0,persistent:!0}).onOk(()=>{ke.value.forEach(l=>{l.attendance_status=e,we(l)}),ce.notify({color:"positive",message:`All students marked as ${e}`,icon:"check"})})}function ye(e){pe.value=e}function Ve(){fe.value=!fe.value,ce.dark.set(fe.value)}function we(e){ie("update:student",e)}function Ce(e){ie("save-student",e),ce.notify({color:"positive",message:`Record updated for ${e.name}`,icon:"check"})}function je(e){_e.value={...e},ve.value=!0}function Ue(){const e=ue.students.findIndex(e=>e.id===_e.value.id);if(-1!==e){const l={...ue.students[e],notes:_e.value.notes};ie("update:student",l),ie("save-student",l)}}return(e,w)=>(U(),j("div",M,[x("div",R,[x("div",H,[x("div",T,[Q(a,{modelValue:re.value,"onUpdate:modelValue":w[0]||(w[0]=e=>re.value=e),dense:"",outlined:"",placeholder:"Search students...",class:"search-input"},{append:A(()=>[Q(l,{name:"search"})]),_:1},8,["modelValue"])]),x("div",B,[Q(o,{outline:""},{default:A(()=>[Q(t,{color:"positive",icon:"check_circle",label:"All Present",onClick:w[1]||(w[1]=e=>he("present"))}),Q(t,{color:"warning",icon:"schedule",label:"All Late",onClick:w[2]||(w[2]=e=>he("late"))}),Q(t,{color:"negative",icon:"cancel",label:"All Absent",onClick:w[3]||(w[3]=e=>he("absent"))})]),_:1}),Q(t,{color:"primary",icon:"filter_list"},{default:A(()=>[w[16]||(w[16]=q(" Filter ")),Q(s,null,{default:A(()=>[Q(n,{style:{"min-width":"150px"}},{default:A(()=>[S((U(),L(i,{clickable:"",onClick:w[4]||(w[4]=e=>ye("all"))},{default:A(()=>[Q(u,null,{default:A(()=>w[12]||(w[12]=[q("All Students")])),_:1})]),_:1})),[[d]]),S((U(),L(i,{clickable:"",onClick:w[5]||(w[5]=e=>ye("present"))},{default:A(()=>[Q(u,null,{default:A(()=>w[13]||(w[13]=[q("Present Only")])),_:1})]),_:1})),[[d]]),S((U(),L(i,{clickable:"",onClick:w[6]||(w[6]=e=>ye("absent"))},{default:A(()=>[Q(u,null,{default:A(()=>w[14]||(w[14]=[q("Absent Only")])),_:1})]),_:1})),[[d]]),S((U(),L(i,{clickable:"",onClick:w[7]||(w[7]=e=>ye("late"))},{default:A(()=>[Q(u,null,{default:A(()=>w[15]||(w[15]=[q("Late Only")])),_:1})]),_:1})),[[d]])]),_:1})]),_:1})]),_:1}),Q(t,{color:"secondary",icon:"dark_mode",onClick:Ve})])]),Q(k,{modelValue:me.value,"onUpdate:modelValue":w[8]||(w[8]=e=>me.value=e),class:"text-primary","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:A(()=>[Q(b,{name:"attendance",icon:"how_to_reg",label:"Attendance"}),Q(b,{name:"homework",icon:"assignment",label:"Homework"}),Q(b,{name:"behavior",icon:"psychology",label:"Behavior"}),Q(b,{name:"participation",icon:"record_voice_over",label:"Participation"})]),_:1},8,["modelValue"])]),Q(V,{modelValue:me.value,"onUpdate:modelValue":w[9]||(w[9]=e=>me.value=e),animated:"",class:"transparent"},{default:A(()=>[Q(y,{name:"attendance"},{default:A(()=>[x("div",z,[(U(!0),j(P,null,N(ke.value,e=>(U(),j("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[Q(c,{class:O(["student-card",`status-${e.attendance_status}`]),dark:fe.value},{default:A(()=>[Q(r,{class:"student-header"},{default:A(()=>[x("div",D,[Q(m,{size:"60px",class:"q-mr-sm"},{default:A(()=>[x("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random&color=fff`},null,8,E)]),_:2},1024),x("div",F,[x("div",J,$(e.name),1),Q(g,{color:ge(e.attendance_status)},{default:A(()=>{return[q($((l=e.attendance_status,l.charAt(0).toUpperCase()+l.slice(1))),1)];var l}),_:2},1032,["color"])])])]),_:2},1024),Q(p),Q(r,null,{default:A(()=>[x("div",G,[x("div",K,[Q(h,{modelValue:e.attendance_status,"onUpdate:modelValue":[l=>e.attendance_status=l,l=>we(e)],options:be,outlined:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),"late"===e.attendance_status?(U(),j("div",W,[Q(a,{modelValue:e.late_minutes,"onUpdate:modelValue":[l=>e.late_minutes=l,l=>we(e)],modelModifiers:{number:!0},type:"number",label:"Minutes Late",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])])):I("",!0)])]),_:2},1024),Q(f,{align:"right"},{default:A(()=>[Q(t,{flat:"",color:"grey",icon:"edit",onClick:l=>je(e)},{default:A(()=>w[17]||(w[17]=[q(" Notes ")])),_:2},1032,["onClick"]),Q(t,{flat:"",color:ge(e.attendance_status),icon:"save",onClick:l=>Ce(e)},{default:A(()=>w[18]||(w[18]=[q(" Save ")])),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1032,["class","dark"])]))),128))])]),_:1}),Q(y,{name:"homework"},{default:A(()=>[x("div",X,[(U(!0),j(P,null,N(ke.value,e=>(U(),j("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[Q(c,{dark:fe.value,class:"student-card"},{default:A(()=>[Q(r,{class:"student-header"},{default:A(()=>[x("div",Y,[Q(m,{size:"60px",class:"q-mr-sm"},{default:A(()=>[x("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random&color=fff`},null,8,Z)]),_:2},1024),x("div",ee,[x("div",le,$(e.name),1),Q(g,{color:e.homework_completed?"positive":"grey"},{default:A(()=>[q($(e.homework_completed?"Completed":"Not Completed"),1)]),_:2},1032,["color"])])])]),_:2},1024),Q(p),Q(r,null,{default:A(()=>[x("div",ae,[x("div",te,[Q(v,{modelValue:e.homework_completed,"onUpdate:modelValue":[l=>e.homework_completed=l,l=>we(e)],label:"Homework Completed",color:"positive"},null,8,["modelValue","onUpdate:modelValue"])]),e.homework_completed?(U(),j("div",oe,[Q(a,{modelValue:e.homework_score,"onUpdate:modelValue":[l=>e.homework_score=l,l=>we(e)],modelModifiers:{number:!0},type:"number",label:"Score",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])])):I("",!0)])]),_:2},1024),Q(f,{align:"right"},{default:A(()=>[Q(t,{flat:"",color:"grey",icon:"edit",onClick:l=>je(e)},{default:A(()=>w[19]||(w[19]=[q(" Notes ")])),_:2},1032,["onClick"]),Q(t,{flat:"",color:"primary",icon:"save",onClick:l=>Ce(e)},{default:A(()=>w[20]||(w[20]=[q(" Save ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["dark"])]))),128))])]),_:1})]),_:1},8,["modelValue"]),Q(_,{modelValue:ve.value,"onUpdate:modelValue":w[11]||(w[11]=e=>ve.value=e),persistent:""},{default:A(()=>[Q(c,{style:{"min-width":"350px"},dark:fe.value},{default:A(()=>[Q(r,null,{default:A(()=>{var e;return[x("div",se,"Notes for "+$(null==(e=_e.value)?void 0:e.name),1)]}),_:1}),Q(r,null,{default:A(()=>[Q(a,{modelValue:_e.value.notes,"onUpdate:modelValue":w[10]||(w[10]=e=>_e.value.notes=e),type:"textarea",autofocus:"",outlined:""},null,8,["modelValue"])]),_:1}),Q(f,{align:"right"},{default:A(()=>[S(Q(t,{flat:"",label:"Cancel",color:"negative"},null,512),[[d]]),S(Q(t,{flat:"",label:"Save Notes",color:"positive",onClick:Ue},null,512),[[d]])]),_:1})]),_:1},8,["dark"])]),_:1},8,["modelValue"])]))}};export{ne as default};
