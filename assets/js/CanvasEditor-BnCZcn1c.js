import{_ as e}from"./LucideIcon-CvBD6-wv.js";import{o as t}from"./app-Cs5CKgHw.js";import{f as l,a as o,N as a,J as n,Q as i,L as s,a0 as d,U as r,b as m,O as u,S as p,F as c,R as y,I as v,K as g}from"./vendor-nQjeLEvd.js";import b from"./ElementContent-CjD8SebZ.js";import"./createLucideIcon-B92OCqKn.js";import"./align-right-Bgq5iJ0f.js";import"./underline-W2dy4QkK.js";import"./image-Bjqqm2aR.js";import"./printer-CB3iEnDW.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";import"./presentationStore-B6dVkEOw.js";import"./youtube_VideoPlayer-BKMHhvfQ.js";import"./VideoPlayer-DgYpxfFj.js";import"./text_el-Djwjt_l8.js";const V=["title"],f=["title"],h=t({__name:"DraggableWrapper",props:{modelValue:{type:Object,required:!0},readonly:{type:Boolean,default:!1},hideDragHandle:{type:Boolean,default:!1},hideSettings:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1}},emits:["update:modelValue","toggle-visibility","open-settings","delete-element"],setup(t,{emit:c}){const y=t,v=c,g=l(!1),b=l({x:0,y:0}),h=o(()=>g.value?"move":"grip"),j=o(()=>g.value?"Release to drop":"Drag to move"),x=e=>{!y.readonly&&y.modelValue.visible&&(g.value=!0,b.value={x:e.clientX,y:e.clientY},document.addEventListener("mousemove",E),document.addEventListener("mouseup",_))},E=e=>{if(!g.value)return;const t=e.clientX-b.value.x,l=e.clientY-b.value.y,o=e.target.closest(".canvas-editor");if(!o)return;const a=o.getBoundingClientRect(),n=t/a.width*100,i=l/a.height*100;v("update:modelValue",{...y.modelValue,x:Math.max(0,Math.min(100,y.modelValue.x+n)),y:Math.max(0,Math.min(100,y.modelValue.y+i))}),b.value={x:e.clientX,y:e.clientY}},_=()=>{g.value=!1,document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",_)};return(l,o)=>(n(),a("div",{class:"draggable-wrapper group relative",style:p({left:`${t.modelValue.x}%`,top:`${t.modelValue.y}%`,position:"absolute",opacity:t.modelValue.visible?1:.3,transform:`scale(${t.modelValue.visible?1:.95})`,transition:"opacity 0.3s ease, transform 0.3s ease",zIndex:g.value?50:10})},[t.hideDragHandle||t.readonly?i("",!0):(n(),a("div",{key:0,onDblclick:o[0]||(o[0]=e=>l.$emit("toggle-visibility")),class:r(["absolute -top-2 -left-2 w-8 h-8 rounded-full flex items-center justify-center cursor-move z-50 transition-all duration-200",g.value?"bg-indigo-600":"bg-gray-500 hover:bg-gray-600",t.modelValue.visible?"opacity-0 group-hover:opacity-100":"opacity-60"]),onMousedown:d(x,["stop"]),title:j.value},[m(e,{name:h.value,size:16,class:"text-white"},null,8,["name"])],42,V)),t.readonly?i("",!0):(n(),a("div",{key:1,class:r(["absolute -top-2 -right-2 flex gap-1 z-50 transition-all duration-200",t.modelValue.visible?"opacity-0 group-hover:opacity-100":"opacity-60"])},[u("button",{onClick:o[1]||(o[1]=e=>l.$emit("toggle-visibility")),class:"control-button",title:t.modelValue.visible?"Hide Element":"Show Element"},[m(e,{name:t.modelValue.visible?"eye":"eye-off",size:16,class:"text-gray-600"},null,8,["name"])],8,f),t.hideSettings?i("",!0):(n(),a("button",{key:0,onClick:o[2]||(o[2]=e=>l.$emit("open-settings")),class:"control-button",title:"Element Settings"},[m(e,{name:"settings",size:16,class:"text-gray-600"})])),t.hideDelete?i("",!0):(n(),a("button",{key:1,onClick:o[3]||(o[3]=e=>l.$emit("delete-element")),class:"control-button",title:"Delete Element"},[m(e,{name:"trash-2",size:16,class:"text-gray-600"})]))],2)),s(l.$slots,"default",{},void 0,!0)],4))}},[["__scopeId","data-v-6c17d3ba"]]),j={class:"elements-container"},x=t({__name:"CanvasEditor",props:{modelValue:{type:Object,required:!0,default:()=>({elements:[],backgroundImage:""})},presentationMode:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,o=t,i=(e,t)=>{const a=[...l.modelValue.elements],n=a.findIndex(t=>t.id===e);-1!==n&&(a[n]=t,o("update:modelValue",{...l.modelValue,elements:a}))};return(t,s)=>(n(),a("div",{class:r(["canvas-editor",{"presentation-mode":e.presentationMode,readonly:e.readonly}])},[u("div",j,[(n(!0),a(c,null,y(e.modelValue.elements,t=>(n(),v(h,{key:t.id,modelValue:t,readonly:e.presentationMode||e.readonly,"onUpdate:modelValue":e=>i(t.id,e),onToggleVisibility:e=>(e=>{const t=l.modelValue.elements.map(t=>t.id===e?{...t,visible:!t.visible}:t);o("update:modelValue",{...l.modelValue,elements:t})})(t.id),onOpenSettings:e=>{},onDeleteElement:e=>(e=>{const t=l.modelValue.elements.filter(t=>t.id!==e);o("update:modelValue",{...l.modelValue,elements:t})})(t.id)},{default:g(()=>[m(b,{element:t,readonly:e.presentationMode||e.readonly,"onUpdate:element":e=>i(t.id,e)},null,8,["element","readonly","onUpdate:element"])]),_:2},1032,["modelValue","readonly","onUpdate:modelValue","onToggleVisibility","onOpenSettings","onDeleteElement"]))),128))])],2))}},[["__scopeId","data-v-7098cb4d"]]);export{x as default};
