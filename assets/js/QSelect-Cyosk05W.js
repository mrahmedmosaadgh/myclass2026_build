import{D as e,a7 as l,a8 as t,a9 as o,aa as a,ab as n,a0 as i,ac as u,ad as r,ae as s,af as c,K as d,I as v,ag as p,J as f,ah as m,d as S,ai as g,H as h,C as y,aj as w,b,G as V,i as C,j as x,h as k}from"./app-BwCflFkV.js";import{r as z}from"./rtl-Cr6c3OOr.js";import{f as I,a as A,p as q,k as O,n as _,ak as M,C as L,G as E,z as T,h as H,E as F,al as D}from"./vendor-CUZ9QTQV.js";const B=e({name:"QField",inheritAttrs:!1,props:{...t,tag:{type:String,default:"label"}},emits:l,setup:()=>o(a({tagProp:!0}))}),R=1e3,$=["start","center","end","start-force","center-force","end-force"],N=Array.prototype.filter,j=void 0===window.getComputedStyle(document.body).overflowAnchor?i:function(e,l){null!==e&&(void 0!==e._qOverflowAnimationFrame&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(null===e)return;e._qOverflowAnimationFrame=void 0;const t=e.children||[];N.call(t,e=>e.dataset&&void 0!==e.dataset.qVsAnchor).forEach(e=>{delete e.dataset.qVsAnchor});const o=t[l];(null==o?void 0:o.dataset)&&(o.dataset.qVsAnchor="")}))};function P(e,l){return e+l}function K(e,l,t,o,a,n,i,u){const r=e===window?document.scrollingElement||document.documentElement:e,s=!0===a?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-i-u,scrollMaxSize:0,offsetStart:-i,offsetEnd:-u};if(!0===a?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=r.scrollLeft,c.scrollViewSize+=r.clientWidth),c.scrollMaxSize=r.scrollWidth,!0===n&&(c.scrollStart=(!0===z?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=r.scrollTop,c.scrollViewSize+=r.clientHeight),c.scrollMaxSize=r.scrollHeight),null!==t)for(let d=t.previousElementSibling;null!==d;d=d.previousElementSibling)!1===d.classList.contains("q-virtual-scroll--skip")&&(c.offsetStart+=d[s]);if(null!==o)for(let d=o.nextElementSibling;null!==d;d=d.nextElementSibling)!1===d.classList.contains("q-virtual-scroll--skip")&&(c.offsetEnd+=d[s]);if(l!==e){const t=r.getBoundingClientRect(),o=l.getBoundingClientRect();!0===a?(c.offsetStart+=o.left-t.left,c.offsetEnd-=o.width):(c.offsetStart+=o.top-t.top,c.offsetEnd-=o.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function U(e,l,t,o){"end"===l&&(l=(e===window?document.body:e)[!0===t?"scrollWidth":"scrollHeight"]),e===window?!0===t?(!0===o&&(l=(!0===z?document.body.scrollWidth-document.documentElement.clientWidth:0)-l),window.scrollTo(l,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,l):!0===t?(!0===o&&(l=(!0===z?e.scrollWidth-e.offsetWidth:0)-l),e.scrollLeft=l):e.scrollTop=l}function W(e,l,t,o){if(t>=o)return 0;const a=l.length,n=Math.floor(t/R),i=Math.floor((o-1)/R)+1;let u=e.slice(n,i).reduce(P,0);return t%R!==0&&(u-=l.slice(n*R,t).reduce(P,0)),o%R!==0&&o!==a&&(u-=l.slice(o,i*R).reduce(P,0)),u}const X={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Y=Object.keys(X),Q={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...X};function G({virtualScrollLength:e,getVirtualScrollTarget:l,getVirtualScrollEl:t,virtualScrollItemSizeComputed:o}){const a=q(),{props:i,emit:u,proxy:r}=a,{$q:s}=r;let c,d,v,p,f=[];const m=I(0),S=I(0),g=I({}),h=I(null),y=I(null),w=I(null),b=I({from:0,to:0}),V=A(()=>void 0!==i.tableColspan?i.tableColspan:100);void 0===o&&(o=A(()=>i.virtualScrollItemSize));const C=A(()=>o.value+";"+i.virtualScrollHorizontal),x=A(()=>C.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);function k(){Y(d,!0)}function z(e){Y(void 0===e?d:e)}function F(o,a){const n=l();if(null==n||8===n.nodeType)return;const u=K(n,t(),h.value,y.value,i.virtualScrollHorizontal,s.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);v!==u.scrollViewSize&&Q(u.scrollViewSize),D(n,u,Math.min(e.value-1,Math.max(0,parseInt(o,10)||0)),0,-1!==$.indexOf(a)?a:-1!==d&&o>d?"end":"start")}function D(l,t,o,a,n){const u="string"==typeof n&&-1!==n.indexOf("-force"),r=!0===u?n.replace("-force",""):n,d=void 0!==r?r:"start";let v=Math.max(0,o-g.value[d]),h=v+g.value.total;h>e.value&&(h=e.value,v=Math.max(0,h-g.value.total)),c=t.scrollStart;const y=v!==b.value.from||h!==b.value.to;if(!1===y&&void 0===r)return void G(o);const{activeElement:V}=document,C=w.value;!0===y&&null!==C&&C!==V&&!0===C.contains(V)&&(C.addEventListener("focusout",X),setTimeout(()=>{null==C||C.removeEventListener("focusout",X)})),j(C,o-v);const x=void 0!==r?p.slice(v,o).reduce(P,0):0;if(!0===y){const l=h>=b.value.from&&v<=b.value.to?b.value.to:h;b.value={from:v,to:l},m.value=W(f,p,0,v),S.value=W(f,p,h,e.value),requestAnimationFrame(()=>{b.value.to!==h&&c===t.scrollStart&&(b.value={from:b.value.from,to:h},S.value=W(f,p,h,e.value))})}requestAnimationFrame(()=>{if(c!==t.scrollStart)return;!0===y&&B(v);const e=p.slice(v,o).reduce(P,0),n=e+t.offsetStart+m.value,d=n+p[o];let f=n+a;if(void 0!==r){const l=e-x,a=t.scrollStart+l;f=!0!==u&&a<n&&d<a+t.scrollViewSize?a:"end"===r?d-t.scrollViewSize:n-("start"===r?0:Math.round((t.scrollViewSize-p[o])/2))}c=f,U(l,f,i.virtualScrollHorizontal,s.lang.rtl),G(o)})}function B(e){const l=w.value;if(l){const t=N.call(l.children,e=>e.classList&&!1===e.classList.contains("q-virtual-scroll--skip")),o=t.length,a=!0===i.virtualScrollHorizontal?e=>e.getBoundingClientRect().width:e=>e.offsetHeight;let n,u,r=e;for(let e=0;e<o;){for(n=a(t[e]),e++;e<o&&!0===t[e].classList.contains("q-virtual-scroll--with-prev");)n+=a(t[e]),e++;u=n-p[r],0!==u&&(p[r]+=u,f[Math.floor(r/R)]+=u),r++}}}function X(){var e;null==(e=w.value)||e.focus()}function Y(l,t){const a=1*o.value;!0!==t&&!1!==Array.isArray(p)||(p=[]);const n=p.length;p.length=e.value;for(let o=e.value-1;o>=n;o--)p[o]=a;const i=Math.floor((e.value-1)/R);f=[];for(let o=0;o<=i;o++){let l=0;const t=Math.min((o+1)*R,e.value);for(let e=o*R;e<t;e++)l+=p[e];f.push(l)}d=-1,c=void 0,m.value=W(f,p,0,b.value.from),S.value=W(f,p,b.value.to,e.value),l>=0?(B(b.value.from),_(()=>{F(l)})):J()}function Q(e){if(void 0===e&&"undefined"!=typeof window){const o=l();null!=o&&8!==o.nodeType&&(e=K(o,t(),h.value,y.value,i.virtualScrollHorizontal,s.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}v=e;const a=parseFloat(i.virtualScrollSliceRatioBefore)||0,n=1+a+(parseFloat(i.virtualScrollSliceRatioAfter)||0),u=void 0===e||e<=0?1:Math.ceil(e/o.value),r=Math.max(1,u,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/n));g.value={total:Math.ceil(r*n),start:Math.ceil(r*a),center:Math.ceil(r*(.5+a)),end:Math.ceil(r*(1+a)),view:u}}function G(e){d!==e&&(void 0!==i.onVirtualScroll&&u("virtualScroll",{index:e,from:b.value.from,to:b.value.to-1,direction:e<d?"decrease":"increase",ref:r}),d=e)}O(x,()=>{Q()}),O(C,k),Q();const J=n(function(){const o=l();if(null==o||8===o.nodeType)return;const a=K(o,t(),h.value,y.value,i.virtualScrollHorizontal,s.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),n=e.value-1,u=a.scrollMaxSize-a.offsetStart-a.offsetEnd-S.value;if(c===a.scrollStart)return;if(a.scrollMaxSize<=0)return void D(o,a,0,0);v!==a.scrollViewSize&&Q(a.scrollViewSize),B(b.value.from);const r=Math.floor(a.scrollMaxSize-Math.max(a.scrollViewSize,a.offsetEnd)-Math.min(p[n],a.scrollViewSize/2));if(r>0&&Math.ceil(a.scrollStart)>=r)return void D(o,a,n,a.scrollMaxSize-a.offsetEnd-f.reduce(P,0));let d=0,g=a.scrollStart-a.offsetStart,w=g;if(g<=u&&g+a.scrollViewSize>=m.value)g-=m.value,d=b.value.from,w=g;else for(let e=0;g>=f[e]&&d<n;e++)g-=f[e],d+=R;for(;g>0&&d<n;)g-=p[d],g>-a.scrollViewSize?(d++,w=g):w=p[d]+g;D(o,a,d,w)},!0===s.platform.is.ios?120:35);M(()=>{Q()});let Z=!1;return L(()=>{Z=!0}),E(()=>{if(!0!==Z)return;const e=l();void 0!==c&&null!=e&&8!==e.nodeType?U(e,c,i.virtualScrollHorizontal,s.lang.rtl):F(d)}),T(()=>{J.cancel()}),Object.assign(r,{scrollTo:F,reset:k,refresh:z}),{virtualScrollSliceRange:b,virtualScrollSliceSizeComputed:g,setVirtualScrollSize:Q,onVirtualScrollEvt:J,localResetVirtualScroll:Y,padVirtualScroll:function(e,l){const t=!0===i.virtualScrollHorizontal?"width":"height",a={["--q-virtual-scroll-item-"+t]:o.value+"px"};return["tbody"===e?H(e,{class:"q-virtual-scroll__padding",key:"before",ref:h},[H("tr",[H("td",{style:{[t]:`${m.value}px`,...a},colspan:V.value})])]):H(e,{class:"q-virtual-scroll__padding",key:"before",ref:h,style:{[t]:`${m.value}px`,...a}}),H(e,{class:"q-virtual-scroll__content",key:"content",ref:w,tabindex:-1},l.flat()),"tbody"===e?H(e,{class:"q-virtual-scroll__padding",key:"after",ref:y},[H("tr",[H("td",{style:{[t]:`${S.value}px`,...a},colspan:V.value})])]):H(e,{class:"q-virtual-scroll__padding",key:"after",ref:y,style:{[t]:`${S.value}px`,...a}})]},scrollTo:F,reset:k,refresh:z}}const J=e=>["add","add-unique","toggle"].includes(e),Z=Object.keys(t);function ee(e,l){if("function"==typeof e)return e;const t=void 0!==e?e:l;return e=>null!==e&&"object"==typeof e&&t in e?e[t]:e}const le=e({name:"QSelect",inheritAttrs:!1,props:{...Q,...u,...t,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:J},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:Q.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...l,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:l,emit:t}){const{proxy:n}=q(),{$q:i}=n,u=I(!1),z=I(!1),M=I(-1),L=I(""),E=I(!1),R=I(!1);let $,N,j,P,K,U,W,X=null,Y=null,Q=null;const le=I(null),te=I(null),oe=I(null),ae=I(null),ne=I(null),ie=r(e),ue=c(ol),re=A(()=>Array.isArray(e.options)?e.options.length:0),se=A(()=>void 0===e.virtualScrollItemSize?!0===e.optionsDense?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:ce,virtualScrollSliceSizeComputed:de,localResetVirtualScroll:ve,padVirtualScroll:pe,onVirtualScrollEvt:fe,scrollTo:me,setVirtualScrollSize:Se}=G({virtualScrollLength:re,getVirtualScrollTarget:function(){return ll()},getVirtualScrollEl:ll,virtualScrollItemSizeComputed:se}),ge=a(),he=A(()=>{const l=!0===e.mapOptions&&!0!==e.multiple,t=void 0===e.modelValue||null===e.modelValue&&!0!==l?[]:!0===e.multiple&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue];if(!0===e.mapOptions&&!0===Array.isArray(e.options)){const o=!0===e.mapOptions&&void 0!==$?$:[],a=t.map(l=>function(l,t){const o=e=>d(Fe.value(e),l);return e.options.find(o)||t.find(o)||l}(l,o));return null===e.modelValue&&!0===l?a.filter(e=>null!==e):a}return t}),ye=A(()=>{const l={};return Z.forEach(t=>{const o=e[t];void 0!==o&&(l[t]=o)}),l}),we=A(()=>null===e.optionsDark?ge.isDark.value:e.optionsDark),be=A(()=>s(he.value)),Ve=A(()=>{let l="q-field__input q-placeholder col";return!0===e.hideSelected||0===he.value.length?[l,e.inputClass]:(l+=" q-field__input--padding",void 0===e.inputClass?l:[l,e.inputClass])}),Ce=A(()=>(!0===e.virtualScrollHorizontal?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),xe=A(()=>0===re.value),ke=A(()=>he.value.map(e=>De.value(e)).join(", ")),ze=A(()=>void 0!==e.displayValue?e.displayValue:ke.value),Ie=A(()=>!0===e.optionsHtml?()=>!0:e=>!0===(null==e?void 0:e.html)),Ae=A(()=>!0===e.displayValueHtml||void 0===e.displayValue&&(!0===e.optionsHtml||he.value.some(Ie.value))),qe=A(()=>!0===ge.focused.value?e.tabindex:-1),Oe=A(()=>{const l={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":!0===e.readonly?"true":"false","aria-autocomplete":!0===e.useInput?"list":"none","aria-expanded":!0===u.value?"true":"false","aria-controls":`${ge.targetUid.value}_lb`};return M.value>=0&&(l["aria-activedescendant"]=`${ge.targetUid.value}_${M.value}`),l}),_e=A(()=>({id:`${ge.targetUid.value}_lb`,role:"listbox","aria-multiselectable":!0===e.multiple?"true":"false"})),Me=A(()=>he.value.map((e,l)=>({index:l,opt:e,html:Ie.value(e),selected:!0,removeAtIndex:Pe,toggleOption:Ue,tabindex:qe.value}))),Le=A(()=>{if(0===re.value)return[];const{from:l,to:t}=ce.value;return e.options.slice(l,t).map((t,o)=>{const a=!0===Be.value(t),n=!0===Ye(t),r=l+o,s={clickable:!0,active:n,activeClass:He.value,manualFocus:!0,focused:!1,disable:a,tabindex:-1,dense:e.optionsDense,dark:we.value,role:"option","aria-selected":!0===n?"true":"false",id:`${ge.targetUid.value}_${r}`,onClick:()=>{Ue(t)}};return!0!==a&&(M.value===r&&(s.focused=!0),!0===i.platform.is.desktop&&(s.onMousemove=()=>{!0===u.value&&We(r)})),{index:r,opt:t,html:Ie.value(t),label:De.value(t),selected:s.active,focused:s.focused,toggleOption:Ue,setOptionIndex:We,itemProps:s}})}),Ee=A(()=>void 0!==e.dropdownIcon?e.dropdownIcon:i.iconSet.arrow.dropdown),Te=A(()=>!1===e.optionsCover&&!0!==e.outlined&&!0!==e.standout&&!0!==e.borderless&&!0!==e.rounded),He=A(()=>void 0!==e.optionsSelectedClass?e.optionsSelectedClass:void 0!==e.color?`text-${e.color}`:""),Fe=A(()=>ee(e.optionValue,"value")),De=A(()=>ee(e.optionLabel,"label")),Be=A(()=>ee(e.optionDisable,"disable")),Re=A(()=>he.value.map(Fe.value)),$e=A(()=>{const e={onInput:ol,onChange:ue,onKeydown:el,onKeyup:Je,onKeypress:Ze,onFocus:Qe,onClick(e){!0===N&&g(e)}};return e.onCompositionstart=e.onCompositionupdate=e.onCompositionend=ue,e});function Ne(l){return!0===e.emitValue?Fe.value(l):l}function je(l){if(-1!==l&&l<he.value.length)if(!0===e.multiple){const o=e.modelValue.slice();t("remove",{index:l,value:o.splice(l,1)[0]}),t("update:modelValue",o)}else t("update:modelValue",null)}function Pe(e){je(e),ge.focus()}function Ke(l,o){const a=Ne(l);if(!0!==e.multiple)return!0===e.fillInput&&nl(De.value(l),!0,!0),void t("update:modelValue",a);if(0===he.value.length)return t("add",{index:0,value:a}),void t("update:modelValue",!0===e.multiple?[a]:a);if(!0===o&&!0===Ye(l))return;if(void 0!==e.maxValues&&e.modelValue.length>=e.maxValues)return;const n=e.modelValue.slice();t("add",{index:n.length,value:a}),n.push(a),t("update:modelValue",n)}function Ue(l,o){var a;if(!0!==ge.editable.value||void 0===l||!0===Be.value(l))return;const n=Fe.value(l);if(!0!==e.multiple)return!0!==o&&(nl(!0===e.fillInput?De.value(l):"",!0,!0),Sl()),null==(a=te.value)||a.focus(),void(0!==he.value.length&&!0===d(Fe.value(he.value[0]),n)||t("update:modelValue",!0===e.emitValue?n:l));if(!0===N&&!0!==E.value||ge.focus(),Qe(),0===he.value.length){const o=!0===e.emitValue?n:l;return t("add",{index:0,value:o}),void t("update:modelValue",!0===e.multiple?[o]:o)}const i=e.modelValue.slice(),u=Re.value.findIndex(e=>d(e,n));if(-1!==u)t("remove",{index:u,value:i.splice(u,1)[0]});else{if(void 0!==e.maxValues&&i.length>=e.maxValues)return;const o=!0===e.emitValue?n:l;t("add",{index:i.length,value:o}),i.push(o)}t("update:modelValue",i)}function We(e){if(!0!==i.platform.is.desktop)return;const l=-1!==e&&e<re.value?e:-1;M.value!==l&&(M.value=l)}function Xe(l=1,t){if(!0===u.value){let o=M.value;do{o=m(o+l,-1,re.value-1)}while(-1!==o&&o!==M.value&&!0===Be.value(e.options[o]));M.value!==o&&(We(o),me(o),!0!==t&&!0===e.useInput&&!0===e.fillInput&&al(o>=0?De.value(e.options[o]):P,!0))}}function Ye(e){const l=Fe.value(e);return void 0!==Re.value.find(e=>d(e,l))}function Qe(l){!0===e.useInput&&null!==te.value&&(void 0===l||te.value===l.target&&l.target.value===ke.value)&&te.value.select()}function Ge(e){!0===h(e,27)&&!0===u.value&&(g(e),Sl(),gl()),t("keyup",e)}function Je(l){const{value:t}=l.target;if(void 0===l.keyCode)if(l.target.value="",null!==X&&(clearTimeout(X),X=null),null!==Y&&(clearTimeout(Y),Y=null),gl(),"string"==typeof t&&0!==t.length){const l=t.toLocaleLowerCase(),o=t=>{const o=e.options.find(e=>String(t.value(e)).toLocaleLowerCase()===l);return void 0!==o&&(-1===he.value.indexOf(o)?Ue(o):Sl(),!0)},a=e=>{!0!==o(Fe)&&!0!==e&&!0!==o(De)&&il(t,!0,()=>a(!0))};a()}else ge.clearValue(l);else Ge(l)}function Ze(e){t("keypress",e)}function el(l){if(t("keydown",l),!0===v(l))return;const o=0!==L.value.length&&(void 0!==e.newValueMode||void 0!==e.onNewValue),a=!0!==l.shiftKey&&!0!==e.disableTabSelection&&!0!==e.multiple&&(-1!==M.value||!0===o);if(27===l.keyCode)return void p(l);if(9===l.keyCode&&!1===a)return void fl();if(void 0===l.target||l.target.id!==ge.targetUid.value||!0!==ge.editable.value)return;if(40===l.keyCode&&!0!==ge.innerLoading.value&&!1===u.value)return f(l),void ml();if(8===l.keyCode&&(!0===e.useChips||!0===e.clearable)&&!0!==e.hideSelected&&0===L.value.length)return void(!0===e.multiple&&!0===Array.isArray(e.modelValue)?je(e.modelValue.length-1):!0!==e.multiple&&null!==e.modelValue&&t("update:modelValue",null));35!==l.keyCode&&36!==l.keyCode||"string"==typeof L.value&&0!==L.value.length||(f(l),M.value=-1,Xe(36===l.keyCode?1:-1,e.multiple)),33!==l.keyCode&&34!==l.keyCode||void 0===de.value||(f(l),M.value=Math.max(-1,Math.min(re.value,M.value+(33===l.keyCode?-1:1)*de.value.view)),Xe(33===l.keyCode?1:-1,e.multiple)),38!==l.keyCode&&40!==l.keyCode||(f(l),Xe(38===l.keyCode?-1:1,e.multiple));const n=re.value;if((void 0===U||W<Date.now())&&(U=""),n>0&&!0!==e.useInput&&void 0!==l.key&&1===l.key.length&&!1===l.altKey&&!1===l.ctrlKey&&!1===l.metaKey&&(32!==l.keyCode||0!==U.length)){!0!==u.value&&ml(l);const t=l.key.toLocaleLowerCase(),o=1===U.length&&U[0]===t;W=Date.now()+1500,!1===o&&(f(l),U+=t);const a=new RegExp("^"+U.split("").map(e=>-1!==".*+?^${}()|[]\\".indexOf(e)?"\\"+e:e).join(".*"),"i");let i=M.value;if(!0===o||i<0||!0!==a.test(De.value(e.options[i])))do{i=m(i+1,-1,n-1)}while(i!==M.value&&(!0===Be.value(e.options[i])||!0!==a.test(De.value(e.options[i]))));return void(M.value!==i&&_(()=>{We(i),me(i),i>=0&&!0===e.useInput&&!0===e.fillInput&&al(De.value(e.options[i]),!0)}))}if(13===l.keyCode||32===l.keyCode&&!0!==e.useInput&&""===U||9===l.keyCode&&!1!==a)if(9!==l.keyCode&&f(l),-1!==M.value&&M.value<n)Ue(e.options[M.value]);else{if(!0===o){const l=(l,t)=>{var o;if(t){if(!0!==J(t))return}else t=e.newValueMode;if(nl("",!0!==e.multiple,!0),null==l)return;("toggle"===t?Ue:Ke)(l,"add-unique"===t),!0!==e.multiple&&(null==(o=te.value)||o.focus(),Sl())};if(void 0!==e.onNewValue?t("newValue",L.value,l):l(L.value),!0!==e.multiple)return}!0===u.value?fl():!0!==ge.innerLoading.value&&ml()}}function ll(){return!0===N?ne.value:null!==oe.value&&null!==oe.value.contentEl?oe.value.contentEl:void 0}function tl(){if(!0===xe.value)return void 0!==l["no-option"]?l["no-option"]({inputValue:L.value}):void 0;const e=void 0!==l.option?l.option:e=>H(k,{key:e.index,...e.itemProps},()=>H(C,()=>H(x,()=>H("span",{[!0===e.html?"innerHTML":"textContent"]:e.label}))));let t=pe("div",Le.value.map(e));return void 0!==l["before-options"]&&(t=l["before-options"]().concat(t)),V(l["after-options"],t)}function ol(l){null!==X&&(clearTimeout(X),X=null),null!==Y&&(clearTimeout(Y),Y=null),l&&l.target&&!0===l.target.qComposing||(al(l.target.value||""),j=!0,P=L.value,!0===ge.focused.value||!0===N&&!0!==E.value||ge.focus(),void 0!==e.onFilter&&(X=setTimeout(()=>{X=null,il(L.value)},e.inputDebounce)))}function al(l,o){L.value!==l&&(L.value=l,!0===o||0===e.inputDebounce||"0"===e.inputDebounce?t("inputValue",l):Y=setTimeout(()=>{Y=null,t("inputValue",l)},e.inputDebounce))}function nl(l,t,o){j=!0!==o,!0===e.useInput&&(al(l,!0),!0!==t&&!0===o||(P=l),!0!==t&&il(l))}function il(l,o,a){if(void 0===e.onFilter||!0!==o&&!0!==ge.focused.value)return;!0===ge.innerLoading.value?t("filterAbort"):(ge.innerLoading.value=!0,R.value=!0),""!==l&&!0!==e.multiple&&0!==he.value.length&&!0!==j&&l===De.value(he.value[0])&&(l="");const i=setTimeout(()=>{!0===u.value&&(u.value=!1)},10);null!==Q&&clearTimeout(Q),Q=i,t("filter",l,(e,l)=>{!0!==o&&!0!==ge.focused.value||Q!==i||(clearTimeout(Q),"function"==typeof e&&e(),R.value=!1,_(()=>{ge.innerLoading.value=!1,!0===ge.editable.value&&(!0===o?!0===u.value&&Sl():!0===u.value?hl(!0):u.value=!0),"function"==typeof l&&_(()=>{l(n)}),"function"==typeof a&&_(()=>{a(n)})}))},()=>{!0===ge.focused.value&&Q===i&&(clearTimeout(Q),ge.innerLoading.value=!1,R.value=!1),!0===u.value&&(u.value=!1)})}function ul(e){bl(e),fl()}function rl(){Se()}function sl(e){var l;g(e),null==(l=te.value)||l.focus(),E.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function cl(e){g(e),_(()=>{E.value=!1})}function dl(e){bl(e),null!==ae.value&&ae.value.__updateRefocusTarget(ge.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),ge.focused.value=!1}function vl(e){Sl(),!1===ge.focused.value&&t("blur",e),gl()}function pl(){const e=document.activeElement;null!==e&&e.id===ge.targetUid.value||null===te.value||te.value===e||te.value.focus(),Se()}function fl(){!0!==z.value&&(M.value=-1,!0===u.value&&(u.value=!1),!1===ge.focused.value&&(null!==Q&&(clearTimeout(Q),Q=null),!0===ge.innerLoading.value&&(t("filterAbort"),ge.innerLoading.value=!1,R.value=!1)))}function ml(t){!0===ge.editable.value&&(!0===N?(ge.onControlFocusin(t),z.value=!0,_(()=>{ge.focus()})):ge.focus(),void 0!==e.onFilter?il(L.value):!0===xe.value&&void 0===l["no-option"]||(u.value=!0))}function Sl(){z.value=!1,fl()}function gl(){!0===e.useInput&&nl(!0!==e.multiple&&!0===e.fillInput&&0!==he.value.length&&De.value(he.value[0])||"",!0,!0)}function hl(l){let t=-1;if(!0===l){if(0!==he.value.length){const l=Fe.value(he.value[0]);t=e.options.findIndex(e=>d(Fe.value(e),l))}ve(t)}We(t)}function yl(){!1===z.value&&null!==oe.value&&oe.value.updatePosition()}function wl(e){void 0!==e&&g(e),t("popupShow",e),ge.hasPopupOpen=!0,ge.onControlFocusin(e)}function bl(e){void 0!==e&&g(e),t("popupHide",e),ge.hasPopupOpen=!1,ge.onControlFocusout(e)}function Vl(){N=(!0===i.platform.is.mobile||"dialog"===e.behavior)&&("menu"!==e.behavior&&(!0!==e.useInput||(void 0!==l["no-option"]||void 0!==e.onFilter||!1===xe.value))),K=!0===i.platform.is.ios&&!0===N&&!0===e.useInput?"fade":e.transitionShow}return O(he,l=>{$=l,!0===e.useInput&&!0===e.fillInput&&!0!==e.multiple&&!0!==ge.innerLoading.value&&(!0!==z.value&&!0!==u.value||!0!==be.value)&&(!0!==j&&gl(),!0!==z.value&&!0!==u.value||il(""))},{immediate:!0}),O(()=>e.fillInput,gl),O(u,hl),O(re,function(e,l){!0===u.value&&!1===ge.innerLoading.value&&(ve(-1,!0),_(()=>{!0===u.value&&!1===ge.innerLoading.value&&(e>l?ve():hl(!0))}))}),F(Vl),D(yl),Vl(),T(()=>{null!==X&&clearTimeout(X),null!==Y&&clearTimeout(Y)}),Object.assign(n,{showPopup:ml,hidePopup:Sl,removeAtIndex:je,add:Ke,toggleOption:Ue,getOptionIndex:()=>M.value,setOptionIndex:We,moveOptionSelection:Xe,filter:il,updateMenuPosition:yl,updateInputValue:nl,isOptionSelected:Ye,getEmittingOptionValue:Ne,isOptionDisabled:(...e)=>!0===Be.value.apply(null,e),getOptionValue:(...e)=>Fe.value.apply(null,e),getOptionLabel:(...e)=>De.value.apply(null,e)}),Object.assign(ge,{innerValue:he,fieldClass:A(()=>`q-select q-field--auto-height q-select--with${!0!==e.useInput?"out":""}-input q-select--with${!0!==e.useChips?"out":""}-chips q-select--${!0===e.multiple?"multiple":"single"}`),inputRef:le,targetRef:te,hasValue:be,showPopup:ml,floatingLabel:A(()=>!0!==e.hideSelected&&!0===be.value||"number"==typeof L.value||0!==L.value.length||s(e.displayValue)),getControlChild:()=>{if(!1!==ge.editable.value&&(!0===z.value||!0!==xe.value||void 0!==l["no-option"]))return!0===N?function(){const t=[H(B,{class:`col-auto ${ge.fieldClass.value}`,...ye.value,for:ge.targetUid.value,dark:we.value,square:!0,loading:R.value,itemAligned:!1,filled:!0,stackLabel:0!==L.value.length,...ge.splitAttrs.listeners.value,onFocus:sl,onBlur:cl},{...l,rawControl:()=>ge.getControl(!0),before:void 0,after:void 0})];return!0===u.value&&t.push(H("div",{ref:ne,class:Ce.value+" scroll",style:e.popupContentStyle,..._e.value,onClick:p,onScrollPassive:fe},tl())),H(b,{ref:ae,modelValue:z.value,position:!0===e.useInput?"top":void 0,transitionShow:K,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:wl,onBeforeHide:dl,onHide:vl,onShow:pl},()=>H("div",{class:"q-select__dialog"+(!0===we.value?" q-select__dialog--dark q-dark":"")+(!0===E.value?" q-select__dialog--focused":"")},t))}():H(w,{ref:oe,class:Ce.value,style:e.popupContentStyle,modelValue:u.value,fit:!0!==e.menuShrink,cover:!0===e.optionsCover&&!0!==xe.value&&!0!==e.useInput,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:we.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:Te.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,..._e.value,onScrollPassive:fe,onBeforeShow:wl,onBeforeHide:ul,onShow:rl},tl);!0===ge.hasPopupOpen&&(ge.hasPopupOpen=!1)},controlEvents:{onFocusin(e){ge.onControlFocusin(e)},onFocusout(e){ge.onControlFocusout(e,()=>{gl(),fl()})},onClick(e){var l;if(p(e),!0!==N&&!0===u.value)return fl(),void(null==(l=te.value)||l.focus());ml(e)}},getControl:t=>{const o=!0===e.hideSelected?[]:void 0!==l["selected-item"]?Me.value.map(e=>l["selected-item"](e)).slice():void 0!==l.selected?[].concat(l.selected()):!0===e.useChips?Me.value.map((l,t)=>H(y,{key:"option-"+t,removable:!0===ge.editable.value&&!0!==Be.value(l.opt),dense:!0,textColor:e.color,tabindex:qe.value,onRemove(){l.removeAtIndex(t)}},()=>H("span",{class:"ellipsis",[!0===l.html?"innerHTML":"textContent"]:De.value(l.opt)}))):[H("span",{class:"ellipsis",[!0===Ae.value?"innerHTML":"textContent"]:ze.value})],a=!0===t||!0!==z.value||!0!==N;if(!0===e.useInput)o.push(function(l,t){const o=!0===t?{...Oe.value,...ge.splitAttrs.attributes.value}:void 0,a={ref:!0===t?te:void 0,key:"i_t",class:Ve.value,style:e.inputStyle,value:void 0!==L.value?L.value:"",type:"search",...o,id:!0===t?ge.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":!0===l||!0===e.autofocus||void 0,disabled:!0===e.disable,readonly:!0===e.readonly,...$e.value};return!0!==l&&!0===N&&(!0===Array.isArray(a.class)?a.class=[...a.class,"no-pointer-events"]:a.class+=" no-pointer-events"),H("input",a)}(t,a));else if(!0===ge.editable.value){const l=!0===a?Oe.value:void 0;o.push(H("input",{ref:!0===a?te:void 0,key:"d_t",class:"q-select__focus-target",id:!0===a?ge.targetUid.value:void 0,value:ze.value,readonly:!0,"data-autofocus":!0===t||!0===e.autofocus||void 0,...l,onKeydown:el,onKeyup:Ge,onKeypress:Ze})),!0===a&&"string"==typeof e.autocomplete&&0!==e.autocomplete.length&&o.push(H("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:Je}))}if(void 0!==ie.value&&!0!==e.disable&&0!==Re.value.length){const l=Re.value.map(e=>H("option",{value:e,selected:!0}));o.push(H("select",{class:"hidden",name:ie.value,multiple:e.multiple},l))}const n=!0===e.useInput||!0!==a?void 0:ge.splitAttrs.attributes.value;return H("div",{class:"q-field__native row items-center",...n,...ge.splitAttrs.listeners.value},o)},getInnerAppend:()=>!0!==e.loading&&!0!==R.value&&!0!==e.hideDropdownIcon?[H(S,{class:"q-select__dropdown-icon"+(!0===u.value?" rotate-180":""),name:Ee.value})]:null}),o(ge)}});export{le as Q,G as a,Y as c,Q as u};
