import{o as e,u as t,c as l,Q as s,a,m as o,f as i,C as r,g as d,h as n,i as u,d as c,j as m}from"./app-ggGwxJON.js";import{Q as v}from"./QSelect-DOo83gJW.js";import{Q as f}from"./QForm-BTggRcrz.js";import{r as p,f as b,a as y,I as g,J as x,K as _,O as h,b as q,V as j,Q as V,N as w,W as L,R as k,F as O,$ as U}from"./vendor-nQjeLEvd.js";import{_ as Q}from"./AppLayout-33RltWFH.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";import"./rtl-Cr6c3OOr.js";const C={class:"q-pa-md"},S={class:"row items-center justify-between"},E={class:"text-subtitle2"},A={class:"row q-col-gutter-md"},B={class:"col-12 col-md-8"},F={class:"q-mb-md"},I={class:"q-mb-md"},z={class:"q-mb-md"},D={class:"row q-col-gutter-md"},P={class:"col-12 col-md-6"},W={class:"col-12 col-md-6"},$={class:"q-mt-md"},M={class:"col-12 col-md-4"},T={class:"section-context"},J={class:"text-h6 text-primary"},K={class:"text-caption text-grey-7 q-mt-xs"},N={class:"text-caption text-grey-7"},R={class:"lesson-preview"},G={class:"text-subtitle1 text-primary"},H={key:0,class:"text-caption text-grey-7 q-mt-xs"},X={key:1,class:"q-mt-md row q-col-gutter-xs"},Y={key:0,class:"col-auto"},Z={key:1,class:"col-auto"},ee={class:"text-caption text-grey-7 q-mt-sm"},te={class:"row justify-end q-gutter-sm"},le=e({__name:"Edit",props:{lesson:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(e){var le,se,ae;const oe=e,ie=t(),re=p({title:oe.lesson.title,text:oe.lesson.text||"",order:oe.lesson.order,duration:(null==(le=oe.lesson.data)?void 0:le.duration)||null,difficulty:(null==(se=oe.lesson.data)?void 0:se.difficulty)||null}),de=b((null==(ae=oe.lesson.data)?void 0:ae.objectives)?oe.lesson.data.objectives.join("\n"):""),ne=b(!1),ue=[{label:"Beginner",value:"beginner"},{label:"Intermediate",value:"intermediate"},{label:"Advanced",value:"advanced"}],ce=y(()=>de.value?de.value.split("\n").map(e=>e.trim()).filter(e=>e.length>0):[]),me=e=>({beginner:"green-8",intermediate:"orange-8",advanced:"red-8"}[e]||"grey-8"),ve=()=>{ne.value=!0;const e={title:re.title,text:re.text,order:re.order,data:{}};re.duration&&(e.data.duration=re.duration),re.difficulty&&(e.data.difficulty=re.difficulty),ce.value.length>0&&(e.data.objectives=ce.value),U.put(route("course-management.lessons.update",oe.lesson.id),e,{onSuccess:()=>{ie.notify({type:"positive",message:"Lesson updated successfully!",icon:"check_circle"})},onError:e=>{ie.notify({type:"negative",message:"Please check the form for errors.",icon:"error"})},onFinish:()=>{ne.value=!1}})};return(t,p)=>(x(),g(Q,{title:"Edit Lesson"},{default:_(()=>[h("div",C,[q(o,{flat:"",bordered:""},{default:_(()=>[q(l,null,{default:_(()=>{var l;return[h("div",S,[h("div",null,[p[8]||(p[8]=h("div",{class:"text-h6"},"Edit Lesson",-1)),h("div",E,'Update lesson information for "'+j(null==(l=e.lesson.section)?void 0:l.title)+'"',1)]),q(s,{flat:"",color:"grey-7",icon:"arrow_back",label:"Back to Lesson",onClick:p[0]||(p[0]=l=>t.$inertia.visit(t.route("course-management.lessons.show",e.lesson.id)))})])]}),_:1}),q(a),q(f,{onSubmit:ve,class:"q-pa-md"},{default:_(()=>[h("div",A,[h("div",B,[q(o,{flat:"",bordered:""},{default:_(()=>[q(l,null,{default:_(()=>[p[9]||(p[9]=h("div",{class:"text-subtitle1 q-mb-md"},"Lesson Information",-1)),h("div",F,[q(i,{modelValue:re.title,"onUpdate:modelValue":p[1]||(p[1]=e=>re.title=e),label:"Lesson Title *",outlined:"",error:!!e.errors.title,"error-message":e.errors.title,placeholder:"e.g., What is a Fraction?, Basic Addition"},null,8,["modelValue","error","error-message"])]),h("div",I,[q(i,{modelValue:re.text,"onUpdate:modelValue":p[2]||(p[2]=e=>re.text=e),label:"Lesson Description",outlined:"",type:"textarea",rows:"3",error:!!e.errors.text,"error-message":e.errors.text,placeholder:"Brief description of what this lesson covers..."},null,8,["modelValue","error","error-message"])]),h("div",z,[q(i,{modelValue:re.order,"onUpdate:modelValue":p[3]||(p[3]=e=>re.order=e),modelModifiers:{number:!0},label:"Order",outlined:"",type:"number",min:"0",error:!!e.errors.order,"error-message":e.errors.order,hint:"Position of this lesson in the section"},null,8,["modelValue","error","error-message"])])]),_:1})]),_:1}),q(o,{flat:"",bordered:"",class:"q-mt-md"},{default:_(()=>[q(l,null,{default:_(()=>[p[10]||(p[10]=h("div",{class:"text-subtitle1 q-mb-md"},"Lesson Settings",-1)),h("div",D,[h("div",P,[q(i,{modelValue:re.duration,"onUpdate:modelValue":p[4]||(p[4]=e=>re.duration=e),modelModifiers:{number:!0},label:"Duration (minutes)",outlined:"",type:"number",min:"1",placeholder:"30"},null,8,["modelValue"])]),h("div",W,[q(v,{modelValue:re.difficulty,"onUpdate:modelValue":p[5]||(p[5]=e=>re.difficulty=e),options:ue,outlined:"",label:"Difficulty Level","emit-value":"","map-options":"",clearable:""},null,8,["modelValue"])])]),h("div",$,[q(i,{modelValue:de.value,"onUpdate:modelValue":p[6]||(p[6]=e=>de.value=e),label:"Learning Objectives",outlined:"",type:"textarea",rows:"3",placeholder:"Enter each objective on a new line...",hint:"One objective per line"},null,8,["modelValue"])])]),_:1})]),_:1})]),h("div",M,[q(o,{flat:"",bordered:""},{default:_(()=>[q(l,null,{default:_(()=>{var t,l,s,a,o,i;return[p[11]||(p[11]=h("div",{class:"text-subtitle1 q-mb-md"},"Section Context",-1)),h("div",T,[h("div",J,j(null==(t=e.lesson.section)?void 0:t.title),1),h("div",K,' Section in "'+j(null==(s=null==(l=e.lesson.section)?void 0:l.level)?void 0:s.title)+'" ',1),h("div",N,' Course: "'+j(null==(i=null==(o=null==(a=e.lesson.section)?void 0:a.level)?void 0:o.course)?void 0:i.name)+'" ',1)])]}),_:1})]),_:1}),q(o,{flat:"",bordered:"",class:"q-mt-md"},{default:_(()=>[q(l,null,{default:_(()=>{return[p[12]||(p[12]=h("div",{class:"text-subtitle1 q-mb-md"},"Lesson Preview",-1)),h("div",R,[h("div",G,j(re.title||"Lesson Title"),1),re.text?(x(),w("div",H,j(re.text),1)):V("",!0),re.duration||re.difficulty?(x(),w("div",X,[re.duration?(x(),w("div",Y,[q(r,{size:"sm",color:"blue-1","text-color":"blue-8",icon:"schedule"},{default:_(()=>[L(j(re.duration)+" min ",1)]),_:1})])):V("",!0),re.difficulty?(x(),w("div",Z,[q(r,{size:"sm",color:(e=re.difficulty,{beginner:"green-1",intermediate:"orange-1",advanced:"red-1"}[e]||"grey-1"),"text-color":me(re.difficulty),icon:"trending_up"},{default:_(()=>[L(j(re.difficulty),1)]),_:1},8,["color","text-color"])])):V("",!0)])):V("",!0),h("div",ee," Order: "+j(re.order||"Auto"),1)])];var e}),_:1})]),_:1}),ce.value.length>0?(x(),g(o,{key:0,flat:"",bordered:"",class:"q-mt-md"},{default:_(()=>[q(l,null,{default:_(()=>[p[13]||(p[13]=h("div",{class:"text-subtitle1 q-mb-md"},"Learning Objectives",-1)),q(d,{dense:""},{default:_(()=>[(x(!0),w(O,null,k(ce.value,(e,t)=>(x(),g(n,{key:t},{default:_(()=>[q(u,{avatar:""},{default:_(()=>[q(c,{name:"check_circle",color:"positive",size:"sm"})]),_:1}),q(u,null,{default:_(()=>[q(m,{class:"text-caption"},{default:_(()=>[L(j(e),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):V("",!0)])]),q(a,{class:"q-my-md"}),h("div",te,[q(s,{flat:"",label:"Cancel",color:"grey-7",onClick:p[7]||(p[7]=l=>t.$inertia.visit(t.route("course-management.lessons.show",e.lesson.id)))}),q(s,{type:"submit",label:"Update Lesson",color:"primary",icon:"save",loading:ne.value},null,8,["loading"])])]),_:1})]),_:1})])]),_:1}))}},[["__scopeId","data-v-a2690764"]]);export{le as default};
