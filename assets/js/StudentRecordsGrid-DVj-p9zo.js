import{u as e,Q as a,h as l,b as t,H as o,ao as s,i as n,aS as d,k as u,j as i,d as c,f as r,s as m,c as p,o as f,p as v,e as _}from"./app-CWAnT6CT.js";import{Q as k}from"./QTab-BMD61nU3.js";import{Q as b}from"./QTabs-BXUhAxYJ.js";import{Q as g}from"./QBadge-D8mJvg-f.js";import{Q as h}from"./QSelect-5P1Qxg14.js";import{Q as y}from"./QTabPanel-16_gtepn.js";import{Q as w}from"./QTabPanels-BZNF5OxK.js";import{f as V,a as C,N as j,J as U,R as x,b as Q,K as A,W as q,y as S,I as L,F as N,Q as P,U as $,V as O,O as R}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";import"./use-panel-BQUWxHno.js";import"./use-render-cache-CmTcazfP.js";const B={class:"student-records-grid"},I={class:"grid-header q-mb-md"},T={class:"row items-center justify-between q-mb-sm"},z={class:"col-12 col-md-4"},H={class:"col-12 col-md-8 row justify-end q-gutter-sm"},M={class:"row q-col-gutter-md"},E={class:"row items-center no-wrap"},F=["src"],G={class:"student-info"},J={class:"text-h6 ellipsis-2-lines"},K={class:"row q-col-gutter-sm"},W={class:"col-12"},D={key:0,class:"col-12"},X={class:"row q-col-gutter-md"},Y={class:"row items-center no-wrap"},Z=["src"],ee={class:"student-info"},ae={class:"text-h6 ellipsis-2-lines"},le={class:"row q-col-gutter-sm"},te={class:"col-12"},oe={key:0,class:"col-12"},se={class:"text-h6"},ne={__name:"StudentRecordsGrid",props:{students:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["update:student","save-student"],setup(ne,{emit:de}){const ue=ne,ie=de,ce=e(),re=V(""),me=V("attendance"),pe=V("all"),fe=V(!1),ve=V(!1),_e=V(null),ke=[{label:"Present",value:"present"},{label:"Absent",value:"absent"},{label:"Late",value:"late"},{label:"Excused",value:"excused"}],be=C(()=>{let e=[...ue.students];if(re.value){const a=re.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(a))}return"all"!==pe.value&&(e=e.filter(e=>e.attendance_status===pe.value)),e});function ge(e){return{present:"positive",absent:"negative",late:"warning",excused:"info"}[e]||"grey"}function he(e){ce.dialog({title:"Confirm",message:`Are you sure you want to mark all students as ${e}?`,cancel:!0,persistent:!0}).onOk(()=>{be.value.forEach(a=>{a.attendance_status=e,Ve(a)}),ce.notify({color:"positive",message:`All students marked as ${e}`,icon:"check"})})}function ye(e){pe.value=e}function we(){fe.value=!fe.value,ce.dark.set(fe.value)}function Ve(e){ie("update:student",e)}function Ce(e){ie("save-student",e),ce.notify({color:"positive",message:`Record updated for ${e.name}`,icon:"check"})}function je(e){_e.value={...e},ve.value=!0}function Ue(){const e=ue.students.findIndex(e=>e.id===_e.value.id);if(-1!==e){const a={...ue.students[e],notes:_e.value.notes};ie("update:student",a),ie("save-student",a)}}return(e,V)=>(U(),j("div",B,[x("div",I,[x("div",T,[x("div",z,[Q(l,{modelValue:re.value,"onUpdate:modelValue":V[0]||(V[0]=e=>re.value=e),dense:"",outlined:"",placeholder:"Search students...",class:"search-input"},{append:A(()=>[Q(a,{name:"search"})]),_:1},8,["modelValue"])]),x("div",H,[Q(o,{outline:""},{default:A(()=>[Q(t,{color:"positive",icon:"check_circle",label:"All Present",onClick:V[1]||(V[1]=e=>he("present"))}),Q(t,{color:"warning",icon:"schedule",label:"All Late",onClick:V[2]||(V[2]=e=>he("late"))}),Q(t,{color:"negative",icon:"cancel",label:"All Absent",onClick:V[3]||(V[3]=e=>he("absent"))})]),_:1}),Q(t,{color:"primary",icon:"filter_list"},{default:A(()=>[V[16]||(V[16]=q(" Filter ")),Q(s,null,{default:A(()=>[Q(n,{style:{"min-width":"150px"}},{default:A(()=>[S((U(),L(i,{clickable:"",onClick:V[4]||(V[4]=e=>ye("all"))},{default:A(()=>[Q(u,null,{default:A(()=>V[12]||(V[12]=[q("All Students")])),_:1})]),_:1})),[[d]]),S((U(),L(i,{clickable:"",onClick:V[5]||(V[5]=e=>ye("present"))},{default:A(()=>[Q(u,null,{default:A(()=>V[13]||(V[13]=[q("Present Only")])),_:1})]),_:1})),[[d]]),S((U(),L(i,{clickable:"",onClick:V[6]||(V[6]=e=>ye("absent"))},{default:A(()=>[Q(u,null,{default:A(()=>V[14]||(V[14]=[q("Absent Only")])),_:1})]),_:1})),[[d]]),S((U(),L(i,{clickable:"",onClick:V[7]||(V[7]=e=>ye("late"))},{default:A(()=>[Q(u,null,{default:A(()=>V[15]||(V[15]=[q("Late Only")])),_:1})]),_:1})),[[d]])]),_:1})]),_:1})]),_:1}),Q(t,{color:"secondary",icon:"dark_mode",onClick:we})])]),Q(b,{modelValue:me.value,"onUpdate:modelValue":V[8]||(V[8]=e=>me.value=e),class:"text-primary","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:A(()=>[Q(k,{name:"attendance",icon:"how_to_reg",label:"Attendance"}),Q(k,{name:"homework",icon:"assignment",label:"Homework"}),Q(k,{name:"behavior",icon:"psychology",label:"Behavior"}),Q(k,{name:"participation",icon:"record_voice_over",label:"Participation"})]),_:1},8,["modelValue"])]),Q(w,{modelValue:me.value,"onUpdate:modelValue":V[9]||(V[9]=e=>me.value=e),animated:"",class:"transparent"},{default:A(()=>[Q(y,{name:"attendance"},{default:A(()=>[x("div",M,[(U(!0),j(N,null,P(be.value,e=>(U(),j("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[Q(c,{class:$(["student-card",`status-${e.attendance_status}`]),dark:fe.value},{default:A(()=>[Q(r,{class:"student-header"},{default:A(()=>[x("div",E,[Q(m,{size:"60px",class:"q-mr-sm"},{default:A(()=>[x("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random&color=fff`},null,8,F)]),_:2},1024),x("div",G,[x("div",J,O(e.name),1),Q(g,{color:ge(e.attendance_status)},{default:A(()=>{return[q(O((a=e.attendance_status,a.charAt(0).toUpperCase()+a.slice(1))),1)];var a}),_:2},1032,["color"])])])]),_:2},1024),Q(p),Q(r,null,{default:A(()=>[x("div",K,[x("div",W,[Q(h,{modelValue:e.attendance_status,"onUpdate:modelValue":[a=>e.attendance_status=a,a=>Ve(e)],options:ke,outlined:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),"late"===e.attendance_status?(U(),j("div",D,[Q(l,{modelValue:e.late_minutes,"onUpdate:modelValue":[a=>e.late_minutes=a,a=>Ve(e)],modelModifiers:{number:!0},type:"number",label:"Minutes Late",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])])):R("",!0)])]),_:2},1024),Q(f,{align:"right"},{default:A(()=>[Q(t,{flat:"",color:"grey",icon:"edit",onClick:a=>je(e)},{default:A(()=>V[17]||(V[17]=[q(" Notes ")])),_:2},1032,["onClick"]),Q(t,{flat:"",color:ge(e.attendance_status),icon:"save",onClick:a=>Ce(e)},{default:A(()=>V[18]||(V[18]=[q(" Save ")])),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1032,["class","dark"])]))),128))])]),_:1}),Q(y,{name:"homework"},{default:A(()=>[x("div",X,[(U(!0),j(N,null,P(be.value,e=>(U(),j("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[Q(c,{dark:fe.value,class:"student-card"},{default:A(()=>[Q(r,{class:"student-header"},{default:A(()=>[x("div",Y,[Q(m,{size:"60px",class:"q-mr-sm"},{default:A(()=>[x("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random&color=fff`},null,8,Z)]),_:2},1024),x("div",ee,[x("div",ae,O(e.name),1),Q(g,{color:e.homework_completed?"positive":"grey"},{default:A(()=>[q(O(e.homework_completed?"Completed":"Not Completed"),1)]),_:2},1032,["color"])])])]),_:2},1024),Q(p),Q(r,null,{default:A(()=>[x("div",le,[x("div",te,[Q(v,{modelValue:e.homework_completed,"onUpdate:modelValue":[a=>e.homework_completed=a,a=>Ve(e)],label:"Homework Completed",color:"positive"},null,8,["modelValue","onUpdate:modelValue"])]),e.homework_completed?(U(),j("div",oe,[Q(l,{modelValue:e.homework_score,"onUpdate:modelValue":[a=>e.homework_score=a,a=>Ve(e)],modelModifiers:{number:!0},type:"number",label:"Score",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])])):R("",!0)])]),_:2},1024),Q(f,{align:"right"},{default:A(()=>[Q(t,{flat:"",color:"grey",icon:"edit",onClick:a=>je(e)},{default:A(()=>V[19]||(V[19]=[q(" Notes ")])),_:2},1032,["onClick"]),Q(t,{flat:"",color:"primary",icon:"save",onClick:a=>Ce(e)},{default:A(()=>V[20]||(V[20]=[q(" Save ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["dark"])]))),128))])]),_:1})]),_:1},8,["modelValue"]),Q(_,{modelValue:ve.value,"onUpdate:modelValue":V[11]||(V[11]=e=>ve.value=e),persistent:""},{default:A(()=>[Q(c,{style:{"min-width":"350px"},dark:fe.value},{default:A(()=>[Q(r,null,{default:A(()=>{var e;return[x("div",se,"Notes for "+O(null==(e=_e.value)?void 0:e.name),1)]}),_:1}),Q(r,null,{default:A(()=>[Q(l,{modelValue:_e.value.notes,"onUpdate:modelValue":V[10]||(V[10]=e=>_e.value.notes=e),type:"textarea",autofocus:"",outlined:""},null,8,["modelValue"])]),_:1}),Q(f,{align:"right"},{default:A(()=>[S(Q(t,{flat:"",label:"Cancel",color:"negative"},null,512),[[d]]),S(Q(t,{flat:"",label:"Save Notes",color:"positive",onClick:Ue},null,512),[[d]])]),_:1})]),_:1},8,["dark"])]),_:1},8,["modelValue"])]))}};export{ne as default};
