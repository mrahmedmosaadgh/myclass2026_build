import{r as e,u as l,f as a,h as t,b as o,c as s,d as i,o as u,e as n,aS as d}from"./app-YpH5vqWh.js";import{Q as r}from"./QSelect-jBpShTzY.js";import{Q as c}from"./QTable-CgaOzZjZ.js";import{f as p,a as m,o as v,I as f,J as y,K as k,R as b,b as V,N as g,z as h,O as _,F as w,Q as C,V as x,y as S,_ as j}from"./vendor-BWKGNkNB.js";import{_ as U}from"./AppLayout-B3PyevP7.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";import"./QMarkupTable-DGv5_oX8.js";import"./QLinearProgress-DZgk7T4R.js";import"./use-fullscreen-DDGrUiCT.js";const N={class:"q-pa-md"},O={class:"row q-col-gutter-md items-center"},J={class:"p-0 flex scale-75"},T={key:0},q={key:1},I={class:"row q-col-gutter-md"},P={class:"text-h6"},A={class:"text-caption text-grey"},z={key:0,class:"q-mt-sm"},Q={key:1,class:"q-mt-xs text-grey-7"},L={key:2,class:"q-mt-xs text-blue-7 text-caption"},F={class:"q-mt-xs text-caption"},E={class:"text-h6"},$={key:0,class:"text-negative q-mt-sm"},B={key:0,class:"text-negative q-mt-sm"},R=e({__name:"ProjectTracker",setup(e){const R=l(),D=p([]),K=p(!1),M=p(!1),G=p({id:null,title:"",path:"",description:"",priority:"",type:"",status:"",notes:""}),H=p({search:"",status:null,type:null,priority:null}),W=["todo","in_progress","done"],X=["UI","Backend","Feature"],Y=["low","medium","high"],Z=[{name:"title",label:"Title",field:"title",align:"left"},{name:"type",label:"Type",field:"type",align:"left"},{name:"priority",label:"Priority",field:"priority",align:"left"},{name:"status",label:"Status",field:"status",align:"left"},{name:"updated_at",label:"Updated",field:"updated_at",align:"left"},{name:"actions",label:"Actions",field:"actions",align:"right"}],ee=async()=>{K.value=!0;const{data:e}=await j.get("/api/project-tasks");D.value=e,K.value=!1},le=m(()=>D.value.filter(e=>{const l=!H.value.search||e.title.toLowerCase().includes(H.value.search.toLowerCase())||e.description&&e.description.toLowerCase().includes(H.value.search.toLowerCase()),a=!H.value.status||e.status===H.value.status,t=!H.value.type||e.type===H.value.type,o=!H.value.priority||e.priority===H.value.priority;return l&&a&&t&&o}));function ae(e=null){G.value=e?{...e}:{id:null,title:"",path:"",description:"",priority:"",type:"",status:"",notes:""},M.value=!0}async function te(){G.value.id?await j.put(`/api/project-tasks/${G.value.id}`,G.value):await j.post("/api/project-tasks",G.value),M.value=!1,ee()}async function oe(e){await j.delete(`/api/project-tasks/${e}`),ee()}async function se(e){await j.put(`/api/project-tasks/${e.id}`,{...e,status:"done"}),ee()}const ie=p(!1),ue=p(""),ne=p(""),de=p(!1),re=p(""),ce=p("");function pe(){const e=JSON.stringify(D.value,null,2);navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{R.notify({type:"positive",message:"Tasks copied as JSON to clipboard."})},()=>{R.notify({type:"negative",message:"Clipboard write failed."})}):window.prompt("Copy JSON:",e)}function me(){ue.value="",ne.value=""}function ve(){let e;ne.value="";try{e=JSON.parse(ue.value)}catch(l){return void(ne.value="Invalid JSON.")}if(Array.isArray(e)){for(const l of e)if(!l.title||!l.type||!l.status)return void(ne.value="Each task must have title, type, and status.");D.value=e,ie.value=!1,me(),R.notify({type:"positive",message:"Tasks imported from JSON."})}else ne.value="JSON must be an array of tasks."}function fe(){re.value="",ce.value=""}function ye(){let e;ce.value="";try{e=JSON.parse(re.value)}catch(l){return void(ce.value="Invalid JSON.")}if("object"==typeof e&&!Array.isArray(e)&&e){for(const l of Object.keys(G.value))""!==G.value[l]&&null!==G.value[l]||!e[l]||(G.value[l]=e[l]);de.value=!1,fe(),R.notify({type:"positive",message:"Form fields filled from JSON."})}else ce.value="JSON must be a single task object."}return v(ee),(e,l)=>(y(),f(U,{title:"Project Tracker"},{default:k(()=>[b("div",N,[V(i,{flat:"",bordered:""},{default:k(()=>[V(a,null,{default:k(()=>[b("div",O,[V(t,{modelValue:H.value.search,"onUpdate:modelValue":l[0]||(l[0]=e=>H.value.search=e),label:"Search",class:"col",dense:""},null,8,["modelValue"]),V(r,{modelValue:H.value.status,"onUpdate:modelValue":l[1]||(l[1]=e=>H.value.status=e),options:W,label:"Status",class:"col",dense:"",clearable:""},null,8,["modelValue"]),V(r,{modelValue:H.value.type,"onUpdate:modelValue":l[2]||(l[2]=e=>H.value.type=e),options:X,label:"Type",class:"col",dense:"",clearable:""},null,8,["modelValue"]),V(r,{modelValue:H.value.priority,"onUpdate:modelValue":l[3]||(l[3]=e=>H.value.priority=e),options:Y,label:"Priority",class:"col",dense:"",clearable:""},null,8,["modelValue"]),b("div",J,[V(o,{color:"primary",label:"Add Task",onClick:l[4]||(l[4]=e=>ae()),class:"q-ml-sm"}),V(o,{color:"secondary",label:"Export as JSON",onClick:pe,class:"q-ml-sm"})])])]),_:1}),V(s),V(a,null,{default:k(()=>[h(R).screen.gt.sm?(y(),g("div",T,[V(c,{rows:le.value,columns:Z,"row-key":"id",flat:"",dense:"",loading:K.value},{"body-cell-actions":k(e=>[V(o,{size:"sm",icon:"edit",onClick:l=>ae(e.row),flat:""},null,8,["onClick"]),V(o,{size:"sm",icon:"delete",color:"negative",onClick:l=>oe(e.row.id),flat:""},null,8,["onClick"]),"done"!==e.row.status?(y(),f(o,{key:0,size:"sm",icon:"check_circle",color:"positive",onClick:l=>se(e.row),flat:""},null,8,["onClick"])):_("",!0)]),_:1},8,["rows","loading"])])):(y(),g("div",q,[b("div",I,[(y(!0),g(w,null,C(le.value,e=>(y(),g("div",{key:e.id,class:"col-12"},[V(i,{class:"q-mb-md"},{default:k(()=>[V(a,null,{default:k(()=>[b("div",P,x(e.title),1),b("div",A,x(e.type)+" | "+x(e.priority||"no priority")+" | "+x(e.status),1),e.description?(y(),g("div",z,x(e.description),1)):_("",!0),e.notes?(y(),g("div",Q,x(e.notes),1)):_("",!0),e.path?(y(),g("div",L,x(e.path),1)):_("",!0),b("div",F,"Updated: "+x(e.updated_at),1)]),_:2},1024),V(u,{align:"right"},{default:k(()=>[V(o,{size:"sm",icon:"edit",onClick:l=>ae(e),flat:""},null,8,["onClick"]),V(o,{size:"sm",icon:"delete",color:"negative",onClick:l=>oe(e.id),flat:""},null,8,["onClick"]),"done"!==e.status?(y(),f(o,{key:0,size:"sm",icon:"check_circle",color:"positive",onClick:l=>se(e),flat:""},null,8,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)]))),128))])]))]),_:1})]),_:1})]),V(n,{modelValue:M.value,"onUpdate:modelValue":l[13]||(l[13]=e=>M.value=e)},{default:k(()=>[V(i,{style:{"min-width":"350px"}},{default:k(()=>[V(a,null,{default:k(()=>[b("div",E,x(G.value.id?"Edit Task":"Add Task"),1)]),_:1}),V(a,null,{default:k(()=>[V(t,{modelValue:G.value.title,"onUpdate:modelValue":l[5]||(l[5]=e=>G.value.title=e),label:"Title",dense:""},null,8,["modelValue"]),V(t,{modelValue:G.value.path,"onUpdate:modelValue":l[6]||(l[6]=e=>G.value.path=e),label:"Path",dense:""},null,8,["modelValue"]),V(t,{modelValue:G.value.description,"onUpdate:modelValue":l[7]||(l[7]=e=>G.value.description=e),label:"Description",dense:""},null,8,["modelValue"]),V(r,{modelValue:G.value.priority,"onUpdate:modelValue":l[8]||(l[8]=e=>G.value.priority=e),options:Y,label:"Priority",dense:""},null,8,["modelValue"]),V(r,{modelValue:G.value.type,"onUpdate:modelValue":l[9]||(l[9]=e=>G.value.type=e),options:X,label:"Type",dense:""},null,8,["modelValue"]),V(r,{modelValue:G.value.status,"onUpdate:modelValue":l[10]||(l[10]=e=>G.value.status=e),options:W,label:"Status",dense:""},null,8,["modelValue"]),V(t,{modelValue:G.value.notes,"onUpdate:modelValue":l[11]||(l[11]=e=>G.value.notes=e),label:"Notes",type:"textarea",dense:""},null,8,["modelValue"]),V(o,{color:"secondary",label:"Import JSON to Form",onClick:l[12]||(l[12]=e=>de.value=!0),class:"q-mt-md"})]),_:1}),V(u,{align:"right"},{default:k(()=>[S(V(o,{flat:"",label:"Cancel"},null,512),[[d]]),V(o,{color:"primary",label:"Save",onClick:te})]),_:1})]),_:1})]),_:1},8,["modelValue"]),V(n,{modelValue:de.value,"onUpdate:modelValue":l[15]||(l[15]=e=>de.value=e)},{default:k(()=>[V(i,{style:{"min-width":"350px"}},{default:k(()=>[V(a,null,{default:k(()=>l[18]||(l[18]=[b("div",{class:"text-h6"},"Import JSON to Form",-1)])),_:1}),V(a,null,{default:k(()=>[V(t,{modelValue:re.value,"onUpdate:modelValue":l[14]||(l[14]=e=>re.value=e),type:"textarea",label:"Paste JSON here",autogrow:""},null,8,["modelValue"]),ce.value?(y(),g("div",$,x(ce.value),1)):_("",!0)]),_:1}),V(u,{align:"right"},{default:k(()=>[S(V(o,{flat:"",label:"Cancel",onClick:fe},null,512),[[d]]),V(o,{color:"primary",label:"Import",onClick:ye})]),_:1})]),_:1})]),_:1},8,["modelValue"]),V(n,{modelValue:ie.value,"onUpdate:modelValue":l[17]||(l[17]=e=>ie.value=e)},{default:k(()=>[V(i,{style:{"min-width":"400px"}},{default:k(()=>[V(a,null,{default:k(()=>l[19]||(l[19]=[b("div",{class:"text-h6"},"Import Tasks from JSON",-1)])),_:1}),V(a,null,{default:k(()=>[V(t,{modelValue:ue.value,"onUpdate:modelValue":l[16]||(l[16]=e=>ue.value=e),type:"textarea",label:"Paste JSON here",autogrow:""},null,8,["modelValue"]),ne.value?(y(),g("div",B,x(ne.value),1)):_("",!0)]),_:1}),V(u,{align:"right"},{default:k(()=>[S(V(o,{flat:"",label:"Cancel",onClick:me},null,512),[[d]]),V(o,{color:"primary",label:"Import",onClick:ve})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},[["__scopeId","data-v-bb9d4de5"]]);export{R as default};
