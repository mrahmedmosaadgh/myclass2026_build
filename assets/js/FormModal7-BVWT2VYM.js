import{_ as e}from"./InputError-DsbrcuwC.js";import{_ as a}from"./InputLabel-D7_a4jhT.js";import{_ as s}from"./PrimaryButton-Cw-PZntm.js";import{_ as l}from"./SecondaryButton-BDKLxmbK.js";import{f as t,k as o,o as i,e as d,a as r,M as n,Q as m,J as u,N as c,V as p,a0 as b,F as f,R as v,I as y,b as g,K as x,W as h,y as w,ab as k,U as _}from"./vendor-DuKqz2x4.js";const q={key:0,class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50"},j={class:"p-6"},S={class:"text-lg font-medium text-gray-900"},I={class:"space-y-6"},E={key:0,class:"flex items-center"},C=["id","checked","onChange","disabled"],B={key:0,class:"text-red-500"},L=["id","onUpdate:modelValue","required","disabled"],F={value:""},O=["value"],U=["id","value","onInput","required","disabled","rows","placeholder"],V=["id","type","value","onInput","required","disabled","min","max","maxlength","placeholder"],W={class:"mt-6 flex justify-end space-x-3"},A={__name:"FormModal7",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},fields:{type:Array,required:!0},form:{type:Object,required:!0},errors:{type:Object,default:()=>({})},submitting:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},options:{type:Object,required:!0,validator:e=>e&&"object"==typeof e}},emits:["close","submit","update:form"],setup(A,{emit:D}){const M=D,P=t(null),R=A;t({school_id:"",name:"",description:"",active:!0,copy_date:null,academic_year_id:"",semester_id:"",week_number:null,status:"draft",metadata:null,notes:""});const z=t({...R.form});o(()=>R.form,e=>{z.value={...e}},{deep:!0}),o(()=>R.show,e=>{e&&(z.value={...R.form})});const G=(e,a)=>{z.value[e]=a,M("update:form",{...z.value})},J=()=>{M("submit",{form:z.value,onSuccess:()=>{K()},onError:e=>{}})},K=()=>{M("close")},N=e=>{"Escape"===e.key&&R.show&&!R.submitting&&K()};i(()=>{document.addEventListener("keydown",N)}),d(()=>{document.removeEventListener("keydown",N)});const Q=r(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"}[R.maxWidth])),Y=r(()=>R.fields.map(e=>{var a,s,l;let t=e.options;if("select"===e.type)switch(e.name){case"status":t=(null==(a=R.options.statuses)?void 0:a.map(e=>({value:e.id||e.value,label:e.name||e.label})))||[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"archived",label:"Archived"}];break;case"school_id":t=(null==(s=R.options.schools)?void 0:s.map(e=>({value:e.id,label:e.name})))||[];break;case"academic_year_id":t=(null==(l=R.options.academicYears)?void 0:l.map(e=>({value:e.id,label:e.name})))||[]}return{type:"text",required:!1,placeholder:"",...e,options:t||[]}}));return(t,o)=>A.show?(u(),n("div",q,[c("div",{class:"fixed inset-0 transform transition-all",onClick:o[0]||(o[0]=e=>!A.submitting&&K())},o[1]||(o[1]=[c("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1)])),c("div",{ref_key:"modalRef",ref:P,class:_(["mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:mx-auto",Q.value])},[c("div",j,[c("h2",S,p(A.title),1),c("form",{onSubmit:b(J,["prevent"]),class:"mt-6"},[c("div",I,[(u(!0),n(f,null,v(Y.value,s=>(u(),n("div",{key:s.name,class:"mb-4"},["checkbox"===s.type?(u(),n("div",E,[c("input",{id:s.name,type:"checkbox",checked:z.value[s.name],onChange:e=>G(s.name,e.target.checked),class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:A.submitting},null,40,C),g(a,{for:s.name,class:"ml-2"},{default:x(()=>[h(p(s.label),1)]),_:2},1032,["for"])])):(u(),n(f,{key:1},[g(a,{for:s.name},{default:x(()=>[h(p(s.label)+" ",1),s.required?(u(),n("span",B,"*")):m("",!0)]),_:2},1032,["for"]),"select"===s.type?w((u(),n("select",{key:0,id:s.name,"onUpdate:modelValue":e=>z.value[s.name]=e,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:s.required,disabled:A.submitting},[c("option",F,"Select "+p(s.label),1),(u(!0),n(f,null,v(s.options,e=>(u(),n("option",{key:e.value,value:e.value},p(e.label),9,O))),128))],8,L)),[[k,z.value[s.name]]]):"textarea"===s.type?(u(),n("textarea",{key:1,id:s.name,value:z.value[s.name],onInput:e=>G(s.name,e.target.value),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:s.required,disabled:A.submitting,rows:s.rows||3,placeholder:s.placeholder},null,40,U)):(u(),n("input",{key:2,id:s.name,type:s.type,value:z.value[s.name],onInput:e=>G(s.name,e.target.value),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",required:s.required,disabled:A.submitting,min:s.min,max:s.max,maxlength:s.maxLength,placeholder:s.placeholder},null,40,V))],64)),A.errors[s.name]?(u(),y(e,{key:2,message:A.errors[s.name],class:"mt-2"},null,8,["message"])):m("",!0)]))),128))]),c("div",W,[g(l,{type:"button",onClick:K,disabled:A.submitting},{default:x(()=>o[2]||(o[2]=[h(" Cancel ")])),_:1},8,["disabled"]),g(s,{type:"submit",disabled:A.submitting,class:_({"opacity-75 cursor-not-allowed":A.submitting})},{default:x(()=>[h(p(A.submitting?"Saving...":"Save"),1)]),_:1},8,["disabled","class"])])],32)])],2)])):m("",!0)}};export{A as default};
