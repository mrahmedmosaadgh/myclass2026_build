import{_ as e}from"./AppLayout-B3PyevP7.js";import{r as s}from"./app-CWAnT6CT.js";import{N as a,J as r,R as t,O as l,a0 as i,U as o,an as n,F as c,Q as d,V as p,d as g,af as u,I as m,K as h,b as f}from"./vendor-BWKGNkNB.js";import{O as v}from"./OcrComparison-BFCnPe1t.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./_commonjs-dynamic-modules-BHR_E30J.js";const O={name:"OcrScanner",props:{apiKey:{type:String,required:!0,default:"K89883067088957"},language:{type:String,default:"eng"},detectOrientation:{type:Boolean,default:!0}},data:()=>({uploadId:`file-upload-${Math.random().toString(36).substr(2,9)}`,selectedImage:null,isDragging:!1,isProcessing:!1,ocrResult:null,error:null,fileToProcess:null}),methods:{handleDrop(e){this.isDragging=!1;const s=e.dataTransfer.files[0];s&&this.isValidImageFile(s)&&this.processFile(s)},handleFileSelect(e){const s=e.target.files[0];s&&this.isValidImageFile(s)&&this.processFile(s)},isValidImageFile(e){return!!["image/jpeg","image/png","image/gif","image/tiff"].includes(e.type)||(this.error="Please select a valid image file (PNG, JPG, GIF, TIFF)",!1)},processFile(e){this.error=null,this.fileToProcess=e;const s=new FileReader;s.onload=e=>{this.selectedImage=e.target.result,this.performOcr()},s.readAsDataURL(e)},async performOcr(){if(!this.fileToProcess)return;this.isProcessing=!0,this.ocrResult=null,this.error=null;const e=new FormData;e.append("file",this.fileToProcess),e.append("apikey",this.apiKey),e.append("language",this.language),e.append("detectOrientation",this.detectOrientation),e.append("isOverlayRequired",!0);try{const s=await fetch("https://api.ocr.space/parse/image",{method:"POST",body:e}),a=await s.json();if(a.ErrorMessage)throw new Error(a.ErrorMessage);if(!a.ParsedResults||0===a.ParsedResults.length)throw new Error("No text was detected in the image");this.ocrResult=a,this.$emit("ocr-complete",a)}catch(s){this.error=s.message||"An error occurred while processing the image",this.$emit("ocr-error",s)}finally{this.isProcessing=!1}},clearImage(){this.selectedImage=null,this.fileToProcess=null,this.ocrResult=null,this.error=null,this.$emit("clear")}}},b={class:"ocr-scanner"},y={class:"upload-section mb-4"},w=["for"],I=["id"],P={key:0,class:"preview-section mb-4"},R={class:"preview-header"},F={class:"preview-image-container"},C=["src"],S={key:1,class:"processing-status"},x={key:2,class:"results-section"},D={class:"results-content"},j={key:3,class:"error-message"};const k=g({components:{AppLayout:e,OcrScanner:s(O,[["render",function(e,s,g,u,m,h){return r(),a("div",b,[t("div",y,[t("label",{for:m.uploadId,class:o(["upload-label",{dragging:m.isDragging}]),onDragover:s[0]||(s[0]=i(e=>m.isDragging=!0,["prevent"])),onDragleave:s[1]||(s[1]=i(e=>m.isDragging=!1,["prevent"])),onDrop:s[2]||(s[2]=i((...e)=>h.handleDrop&&h.handleDrop(...e),["prevent"]))},s[5]||(s[5]=[n('<div class="upload-content" data-v-9bae7dcb><svg class="upload-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-9bae7dcb><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" data-v-9bae7dcb></path></svg><span class="upload-text" data-v-9bae7dcb> Drop image here or click to upload </span><span class="upload-hint" data-v-9bae7dcb> Supported formats: PNG, JPG, GIF, TIFF </span></div>',1)]),42,w),t("input",{id:m.uploadId,type:"file",accept:"image/*",class:"hidden",onChange:s[3]||(s[3]=(...e)=>h.handleFileSelect&&h.handleFileSelect(...e))},null,40,I)]),m.selectedImage?(r(),a("div",P,[t("div",R,[s[6]||(s[6]=t("h3",{class:"preview-title"},"Selected Image",-1)),t("button",{onClick:s[4]||(s[4]=(...e)=>h.clearImage&&h.clearImage(...e)),class:"clear-button"}," Clear ")]),t("div",F,[t("img",{src:m.selectedImage,alt:"Selected image",class:"preview-image"},null,8,C)])])):l("",!0),m.isProcessing?(r(),a("div",S,s[7]||(s[7]=[t("div",{class:"spinner"},null,-1),t("span",null,"Processing image...",-1)]))):l("",!0),m.ocrResult?(r(),a("div",x,[s[8]||(s[8]=t("h3",{class:"results-title"},"OCR Results",-1)),t("div",D,[(r(!0),a(c,null,d(m.ocrResult.ParsedResults[0].ParsedText.split("\n"),(e,s)=>(r(),a("p",{key:s,class:"result-line"},p(e),1))),128))])])):l("",!0),m.error?(r(),a("div",j,p(m.error),1)):l("",!0)])}],["__scopeId","data-v-9bae7dcb"]]),OcrComparison:v},methods:{handleOcrComplete(e){console.log("OCR completed:",e)},handleOcrError(e){console.error("OCR error:",e)}}}),T={class:"py-12"},E={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},A={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},G={class:"p-4"};const L=s(k,[["render",function(e,s,a,l,i,o){const n=u("OcrScanner"),c=u("OcrComparison"),d=u("AppLayout");return r(),m(d,{title:"OCR Scanner Test"},{header:h(()=>s[0]||(s[0]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," OCR Scanner Test ",-1)])),default:h(()=>[t("div",T,[t("div",E,[t("div",A,[f(n,{onOcrComplete:e.handleOcrComplete,onOcrError:e.handleOcrError},null,8,["onOcrComplete","onOcrError"])]),t("div",G,[f(c)])])])]),_:1})}]]);export{L as default};
