import{r as e,u as l,f as a,h as t,d as s,b as o,o as u,aS as d,e as r}from"./app-CWAnT6CT.js";import{Q as i}from"./QSelect-5P1Qxg14.js";import{Q as m}from"./QForm-BHNk-Zcq.js";import{Q as n}from"./QPage-Btgta_Ab.js";import{f as c,a as p,I as v,J as f,K as b,R as y,b as g,O as _,N as V,Q as q,F as x,V as j,W as T,y as h,_ as S}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";const Q={class:"row justify-center"},w={class:"col-12 col-md-8 col-lg-6"},C={class:"row q-col-gutter-md items-center"},F={class:"col-12 col-sm-5"},P={class:"col-12 col-sm-5"},U={class:"col-12 col-sm-2"},k={class:"row justify-end q-mt-lg"},O={class:"bg-grey-2 q-pa-md rounded-borders"},L=e({__name:"LessonPlanTemplateCreator",setup(e){const L=l(),N=c(""),I=c([]),J=c(!1),A=c(!1),E=c(!1),K=[{label:"Text Input",value:"text"},{label:"Text Area",value:"textarea"},{label:"Select Dropdown",value:"select"}],B=p(()=>JSON.stringify(I.value,null,2)),D=()=>{I.value.push({label:"",type:"text"})},M=async()=>{var e,l;if(!N.value||0===I.value.length)return void L.notify({type:"negative",message:"Please provide a template name and at least one field"});if(I.value.some(e=>!e.label.trim()))L.notify({type:"negative",message:"Please fill in all field labels"});else{J.value=!0;try{const e={name:N.value,structure:I.value};(await S.post("/api/lesson-plan-templates",e)).data.success&&(E.value=!0,R())}catch(a){console.error("Error saving template:",a),L.notify({type:"negative",message:(null==(l=null==(e=a.response)?void 0:e.data)?void 0:l.message)||"Error saving template"})}finally{J.value=!1}}},R=()=>{N.value="",I.value=[],A.value=!1};return I.value=[{label:"Objective",type:"textarea"},{label:"Materials",type:"text"},{label:"Procedure",type:"textarea"}],(e,l)=>(f(),v(n,{class:"q-pa-md"},{default:b(()=>[y("div",Q,[y("div",w,[g(s,null,{default:b(()=>[g(a,null,{default:b(()=>[l[4]||(l[4]=y("div",{class:"text-h5 q-mb-md"},"Lesson Plan Template Creator",-1)),g(m,{onSubmit:M,class:"q-gutter-md"},{default:b(()=>[g(t,{modelValue:N.value,"onUpdate:modelValue":l[0]||(l[0]=e=>N.value=e),label:"Template Name",filled:"",rules:[e=>!!e||"Template name is required"]},null,8,["modelValue","rules"]),l[2]||(l[2]=y("div",{class:"text-h6 q-mt-lg q-mb-md"},"Template Fields",-1)),(f(!0),V(x,null,q(I.value,(e,l)=>(f(),V("div",{key:l,class:"q-mb-md"},[g(s,{flat:"",bordered:""},{default:b(()=>[g(a,null,{default:b(()=>[y("div",C,[y("div",F,[g(t,{modelValue:e.label,"onUpdate:modelValue":l=>e.label=l,label:"Field Label",filled:"",rules:[e=>!!e||"Label is required"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),y("div",P,[g(i,{modelValue:e.type,"onUpdate:modelValue":l=>e.type=l,options:K,label:"Field Type",filled:"","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),y("div",U,[g(o,{color:"negative",icon:"delete",flat:"",round:"",onClick:e=>(e=>{I.value.splice(e,1)})(l)},null,8,["onClick"])])])]),_:2},1024)]),_:2},1024)]))),128)),g(o,{color:"primary",icon:"add",label:"Add Field",onClick:D,class:"q-mt-md"}),y("div",k,[g(o,{type:"submit",color:"positive",label:"Save Template",loading:J.value},null,8,["loading"])])]),_:1}),A.value?(f(),v(s,{key:0,class:"q-mt-lg"},{default:b(()=>[g(a,null,{default:b(()=>[l[3]||(l[3]=y("div",{class:"text-h6 q-mb-md"},"Template Structure (JSON)",-1)),y("pre",O,j(B.value),1)]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1})])]),g(r,{modelValue:E.value,"onUpdate:modelValue":l[1]||(l[1]=e=>E.value=e)},{default:b(()=>[g(s,null,{default:b(()=>[g(a,null,{default:b(()=>l[5]||(l[5]=[y("div",{class:"text-h6"},"Success",-1)])),_:1}),g(a,null,{default:b(()=>l[6]||(l[6]=[T(" Template saved successfully! ")])),_:1}),g(u,{align:"right"},{default:b(()=>[h(g(o,{flat:"",label:"OK",color:"primary"},null,512),[[d]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},[["__scopeId","data-v-6b7dcf9d"]]);export{L as default};
