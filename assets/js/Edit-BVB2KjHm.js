import{o as e,u as l,c as t,Q as r,a,m as s,f as o,g as d,h as i,i as u,d as n,j as c}from"./app-BwCflFkV.js";import{Q as m}from"./QForm-BCWodDs-.js";import{r as v,f,a as p,H as b,I as _,J as g,M as y,b as x,U as h,V as q,_ as j}from"./vendor-CUZ9QTQV.js";import{_ as L}from"./AppLayout-ClCiCQFL.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";const w={class:"q-pa-md"},k={class:"row items-center justify-between"},U={class:"text-subtitle2"},V={class:"row q-col-gutter-md"},C={class:"col-12 col-md-8"},E={class:"q-mb-md"},O={class:"q-mb-md"},S={class:"col-12 col-md-4"},A={class:"course-context"},F={class:"text-h6 text-primary"},I={class:"text-caption text-grey-7 q-mt-xs"},P={class:"level-preview"},Q={class:"text-subtitle1 text-primary"},B={class:"text-caption text-grey-7"},M={class:"row justify-end q-gutter-sm"},T=e({__name:"Edit",props:{level:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(e){const T=e,$=l(),H=v({title:T.level.title,order:T.level.order}),J=f(!1),N=p(()=>T.level.sections?T.level.sections.reduce((e,l)=>{var t;return e+((null==(t=l.lessons)?void 0:t.length)||0)},0):0),z=()=>{J.value=!0,j.put(route("course-management.levels.update",T.level.id),H,{onSuccess:()=>{$.notify({type:"positive",message:"Level updated successfully!",icon:"check_circle"})},onError:e=>{$.notify({type:"negative",message:"Please check the form for errors.",icon:"error"})},onFinish:()=>{J.value=!1}})};return(l,v)=>(_(),b(L,{title:"Edit Level"},{default:g(()=>[y("div",w,[x(s,{flat:"",bordered:""},{default:g(()=>[x(t,null,{default:g(()=>{var t;return[y("div",k,[y("div",null,[v[4]||(v[4]=y("div",{class:"text-h6"},"Edit Level",-1)),y("div",U,'Update level information for "'+h(null==(t=e.level.course)?void 0:t.name)+'"',1)]),x(r,{flat:"",color:"grey-7",icon:"arrow_back",label:"Back to Level",onClick:v[0]||(v[0]=t=>l.$inertia.visit(l.route("course-management.levels.show",e.level.id)))})])]}),_:1}),x(a),x(m,{onSubmit:z,class:"q-pa-md"},{default:g(()=>[y("div",V,[y("div",C,[x(s,{flat:"",bordered:""},{default:g(()=>[x(t,null,{default:g(()=>[v[5]||(v[5]=y("div",{class:"text-subtitle1 q-mb-md"},"Level Information",-1)),y("div",E,[x(o,{modelValue:H.title,"onUpdate:modelValue":v[1]||(v[1]=e=>H.title=e),label:"Level Title *",outlined:"",error:!!e.errors.title,"error-message":e.errors.title,placeholder:"e.g., Fractions, Algebra Basics"},null,8,["modelValue","error","error-message"])]),y("div",O,[x(o,{modelValue:H.order,"onUpdate:modelValue":v[2]||(v[2]=e=>H.order=e),modelModifiers:{number:!0},label:"Order",outlined:"",type:"number",min:"0",error:!!e.errors.order,"error-message":e.errors.order,hint:"Position of this level in the course"},null,8,["modelValue","error","error-message"])])]),_:1})]),_:1})]),y("div",S,[x(s,{flat:"",bordered:""},{default:g(()=>[x(t,null,{default:g(()=>{var l,t;return[v[6]||(v[6]=y("div",{class:"text-subtitle1 q-mb-md"},"Course Context",-1)),y("div",A,[y("div",F,h(null==(l=e.level.course)?void 0:l.name),1),y("div",I,h((null==(t=e.level.course)?void 0:t.description)||"No description"),1)])]}),_:1})]),_:1}),x(s,{flat:"",bordered:"",class:"q-mt-md"},{default:g(()=>[x(t,null,{default:g(()=>[v[8]||(v[8]=y("div",{class:"text-subtitle1 q-mb-md"},"Level Stats",-1)),x(d,{dense:""},{default:g(()=>[x(i,null,{default:g(()=>[x(u,{avatar:""},{default:g(()=>[x(n,{name:"menu_book",color:"green"})]),_:1}),x(u,null,{default:g(()=>[x(c,null,{default:g(()=>{var l;return[q(h((null==(l=e.level.sections)?void 0:l.length)||0)+" Sections",1)]}),_:1})]),_:1})]),_:1}),x(i,null,{default:g(()=>[x(u,{avatar:""},{default:g(()=>[x(n,{name:"school",color:"orange"})]),_:1}),x(u,null,{default:g(()=>[x(c,null,{default:g(()=>[q(h(N.value)+" Lessons",1)]),_:1})]),_:1})]),_:1}),x(i,null,{default:g(()=>[x(u,{avatar:""},{default:g(()=>[x(n,{name:"person",color:"purple"})]),_:1}),x(u,null,{default:g(()=>[x(c,null,{default:g(()=>{var l;return[q(h((null==(l=e.level.creator)?void 0:l.name)||"Unknown"),1)]}),_:1}),x(c,{caption:""},{default:g(()=>v[7]||(v[7]=[q("Creator")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),x(s,{flat:"",bordered:"",class:"q-mt-md"},{default:g(()=>[x(t,null,{default:g(()=>[v[9]||(v[9]=y("div",{class:"text-subtitle1 q-mb-md"},"Level Preview",-1)),y("div",P,[y("div",Q,h(H.title||"Level Title"),1),y("div",B," Order: "+h(H.order||"Auto"),1)])]),_:1})]),_:1})])]),x(a,{class:"q-my-md"}),y("div",M,[x(r,{flat:"",label:"Cancel",color:"grey-7",onClick:v[3]||(v[3]=t=>l.$inertia.visit(l.route("course-management.levels.show",e.level.id)))}),x(r,{type:"submit",label:"Update Level",color:"primary",icon:"save",loading:J.value},null,8,["loading"])])]),_:1})]),_:1})])]),_:1}))}},[["__scopeId","data-v-ae982984"]]);export{T as default};
