import{Q as e}from"./QSelect-DB_tK-Lk.js";import{o as l,c as t,Q as a,m as s,A as o}from"./app-B77gjd5a.js";import{f as r,o as n,k as i,a as d,M as c,Q as u,J as p,b as f,K as m,N as v,I as b,V as x,F as g,R as w,U as y}from"./vendor-DuKqz2x4.js";import"./rtl-Cr6c3OOr.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const h={key:0,class:"mb-6"},k={class:"mt-6 flex flex-col md:flex-row items-center justify-center gap-4 px-4"},S={class:"text-sm text-yellow-200 mt-3 font-bold tracking-widest uppercase opacity-80"},j={key:0,class:"text-center py-16"},_={key:1,class:"flex flex-col md:flex-row justify-center items-end gap-4 md:gap-8 min-h-[400px]"},C={class:"text-center mb-4 relative"},z={key:0,class:"text-8xl animate-bounce-slow drop-shadow-2xl filter brightness-125"},T={key:1,class:"text-7xl drop-shadow-xl opacity-90"},N={class:"p-6 text-center text-white relative z-10 flex-1 flex flex-col justify-between"},V={class:"text-3xl font-black italic tracking-wider mb-1 drop-shadow-md"},I={class:"flex-1 overflow-visible custom-scrollbar max-h-40 space-y-2 mt-4"},R=["src"],A={class:"text-left overflow-visible min-w-0"},U={class:"font-bold overflow-visible"},B={class:"shiny-name text-6xl"},F={class:"shiny-name-small text-xl ml-1"},O={class:"text-xs opacity-80 text-yellow-200"},Q={class:"bg-gradient-to-b from-gray-800 to-gray-900 rounded-2xl p-6 border-2 border-gray-700"},J={class:"space-y-2 max-h-96 overflow-y-auto custom-scrollbar"},M={class:"flex items-center gap-4"},D={class:"flex-shrink-0 w-12 h-12 rounded-full bg-gradient-to-br from-yellow-600 to-orange-600 flex items-center justify-center border-2 border-yellow-400"},H={class:"text-white font-black text-lg"},P={class:"flex-1 flex flex-wrap gap-3"},W=["src"],$={class:"font-bold"},K={class:"shiny-name text-xl"},L={class:"shiny-name-small text-xs ml-1"},q={class:"text-xs text-yellow-300"},E=l({__name:"TopLeaderboard copy 4",props:{students:{type:Array,default:()=>[]},studentBehaviors:{type:Object,default:()=>({})},periodCode:{type:String,default:""},date:{type:String,default:""}},setup(l){const E=l,G=r({label:"Current Session",value:"session"}),X=r(5),Y=[{label:"Current Session",value:"session"},{label:"Today",value:"today"},{label:"This Week",value:"week"},{label:"All Time",value:"all"}];n(()=>{const e=localStorage.getItem("leaderboard_preferences");if(e)try{const l=JSON.parse(e),t=Y.find(e=>e.value===l.scope);t&&(G.value=t),l.topCount&&(X.value=l.topCount)}catch(l){console.error("Failed to load leaderboard preferences:",l)}}),i([G,X],()=>{localStorage.setItem("leaderboard_preferences",JSON.stringify({scope:G.value.value,topCount:X.value}))},{deep:!0});const Z=d(()=>{if(!E.students.length)return[];const e=E.students.map(e=>{const l=E.studentBehaviors[e.id]||{},t=(l.points_plus||0)-(l.points_minus||0);return{...e,total:t}}).filter(e=>e.total>0).sort((e,l)=>l.total-e.total),l=[];if(0===e.length)return[];let t={rank:1,total:e[0].total,students:[e[0]]};for(let a=1;a<e.length;a++){const s=e[a];s.total===t.total?t.students.push(s):(l.push(t),t={rank:l.length+1,total:s.total,students:[s]})}return l.push(t),l.slice(0,X.value)}),ee=d(()=>Z.value.slice(0,3)),le=d(()=>Z.value.slice(3)),te=d(()=>{const e=ee.value,l=e.find(e=>1===e.rank);return[e.find(e=>2===e.rank),l,e.find(e=>3===e.rank)].filter(Boolean)});function ae(){console.log("Filters applied:",{scope:G.value,topCount:X.value})}function se(){G.value={label:"Current Session",value:"session"},X.value=5}function oe(e){return 1===e?"bg-gradient-to-b from-yellow-400 via-yellow-500 to-yellow-700 border-yellow-300 shadow-yellow-500/50":2===e?"bg-gradient-to-b from-gray-300 via-gray-400 to-gray-600 border-gray-200 shadow-gray-500/50":3===e?"bg-gradient-to-b from-orange-400 via-orange-500 to-orange-700 border-orange-300 shadow-orange-500/50":""}function re(e){const l=["TH","ST","ND","RD"],t=e%100;return e+(l[(t-20)%10]||l[t]||l[0])}function ne(e){const l=(e||"S").split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase();return`data:image/svg+xml,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40"><rect width="40" height="40" fill="#e2e8f0"/><text x="20" y="20" dy="6" text-anchor="middle" font-family="Arial" font-weight="bold" fill="#64748b">${l}</text></svg>`)}`}return(r,n)=>l.students.length?(p(),c("div",h,[f(s,{class:"shadow-2xl rounded-3xl overflow-hidden bg-gray-900 border-4 border-yellow-500 relative"},{default:m(()=>[n[7]||(n[7]=v("div",{class:"absolute inset-0 overflow-hidden pointer-events-none"},[v("div",{class:"stars"}),v("div",{class:"twinkling"})],-1)),f(t,{class:"relative z-10 text-center py-6 bg-gradient-to-b from-transparent to-black/50"},{default:m(()=>[n[2]||(n[2]=v("h1",{class:"text-4xl md:text-6xl font-black tracking-wider text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-yellow-100 to-yellow-500 drop-shadow-lg animate-shine"}," ðŸ† CHAMPIONS ðŸ† ",-1)),v("div",k,[f(e,{modelValue:G.value,"onUpdate:modelValue":[n[0]||(n[0]=e=>G.value=e),ae],options:Y,outlined:"",dense:"",dark:"",label:"Filter Scope",class:"w-full md:w-48 bg-black/30"},null,8,["modelValue"]),f(e,{modelValue:X.value,"onUpdate:modelValue":[n[1]||(n[1]=e=>X.value=e),ae],options:[{label:"Top 5",value:5},{label:"Top 10",value:10}],outlined:"",dense:"",dark:"",label:"Show Places",class:"w-full md:w-32 bg-black/30","emit-value":"","map-options":""},null,8,["modelValue"]),f(a,{color:"yellow-7",icon:"refresh",label:"Reset",onClick:se,size:"md",class:"w-full md:w-auto"})]),v("p",S,x(G.value.label)+" â€¢ Top "+x(X.value),1)]),_:1}),f(t,{class:"p-4 md:p-8 relative z-10"},{default:m(()=>[0===ee.value.length?(p(),c("div",j,n[3]||(n[3]=[v("p",{class:"text-3xl text-yellow-400 font-bold animate-pulse"}," The arena is empty... Who will rise? âš”ï¸ ",-1)]))):(p(),c("div",_,[(p(!0),c(g,null,w(te.value,(e,l)=>{return p(),c(g,{key:e.rank},[e?(p(),c("div",{key:0,class:y(["w-full md:w-1/3 flex flex-col transition-all duration-700",["podium-card",1===e.rank?"order-2 md:order-2 z-20 md:mb-20":2===e.rank?"order-1 md:order-1 z-10 md:mb-10":"order-3 md:order-3 z-10"]])},[v("div",C,[1===e.rank?(p(),c("div",z,"ðŸ‘‘")):(p(),c("div",T,x((t=e.rank,1===t?"ðŸ¥‡":2===t?"ðŸ¥ˆ":3===t?"ðŸ¥‰":"")),1))]),v("div",{class:y(["relative rounded-2xl overflow-hidden border-4 shadow-2xl backdrop-blur-md flex-1 flex flex-col",oe(e.rank)])},[n[5]||(n[5]=v("div",{class:"absolute inset-0 bg-gradient-to-tr from-white/0 via-white/20 to-white/0 w-[200%] h-full animate-shine-move pointer-events-none"},null,-1)),v("div",N,[v("div",null,[v("h2",V,x(re(e.rank)),1),n[4]||(n[4]=v("div",{class:"h-1 w-16 mx-auto bg-white/50 rounded-full mb-4"},null,-1))]),v("div",I,[(p(!0),c(g,null,w(e.students,e=>(p(),c("div",{key:e.id,class:"flex relative overflow-visible flex-row justify-center items-center gap-3 bg-black rounded-lg p-2 backdrop-blur-sm"},[f(o,{size:"120px",class:"shadow-sm absolute z-50 left-0 -top-24 border border-white/30"},{default:m(()=>[v("img",{src:e.avatar||ne(e.name)},null,8,R)]),_:2},1024),v("div",A,[v("div",U,[v("div",B,x(e.firstName),1),v("div",F,x(e.lastName),1)]),v("div",O,x(e.total)+" pts",1)])]))),128))])])],2)],2)):u("",!0)],64);var t}),128))]))]),_:1}),le.value.length>0?(p(),b(t,{key:0,class:"p-4 md:p-8 pt-0 relative z-10"},{default:m(()=>[v("div",Q,[n[6]||(n[6]=v("h3",{class:"text-2xl font-bold text-yellow-400 mb-4 text-center"}," ðŸŒŸ Rising Stars ðŸŒŸ ",-1)),v("div",J,[(p(!0),c(g,null,w(le.value,e=>(p(),c("div",{key:e.rank,class:"bg-gradient-to-r from-gray-700 to-gray-800 rounded-xl p-4 border border-gray-600 hover:border-yellow-500 transition-all hover:scale-105"},[v("div",M,[v("div",D,[v("span",H,x(e.rank),1)]),v("div",P,[(p(!0),c(g,null,w(e.students,e=>(p(),c("div",{key:e.id,class:"flex items-center gap-2 bg-gray-900/50 rounded-lg p-2 pr-4"},[f(o,{size:"36px",class:"shadow-sm border-2 border-yellow-500/30"},{default:m(()=>[v("img",{src:e.avatar||ne(e.name)},null,8,W)]),_:2},1024),v("div",null,[v("div",$,[v("span",K,x(e.firstName),1),v("span",L,x(e.lastName),1)]),v("div",q,x(e.total)+" pts",1)])]))),128))])])]))),128))])])]),_:1})):u("",!0)]),_:1})])):u("",!0)}},[["__scopeId","data-v-de944539"]]);export{E as default};
