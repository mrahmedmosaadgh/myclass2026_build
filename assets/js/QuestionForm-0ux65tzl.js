import{Q as e}from"./QSpace-qzKo_-If.js";import{p as a,u as l,d as t,aD as o,Q as u,g as s,o as r,m as i,n,b as d}from"./app-BzjXrVp9.js";import{Q as p}from"./QSelect-CciNNEfD.js";import{Q as m}from"./QForm-qY0qTz8Q.js";import{f as v,a as g,k as c,H as y,I as b,J as f,b as V,M as q,x as h,U as _,$ as w,O as x}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./rtl-Cr6c3OOr.js";const Q={class:"text-h6"},U={class:"q-gutter-md"},A=a({__name:"QuestionForm",props:{modelValue:{type:Boolean,default:!1},question:{type:Object,default:null},categories:{type:Array,default:()=>["General","Technical","Behavioral","Experience","Education"]},questionTypes:{type:Array,default:()=>["text","textarea","select","multi-select","media","file"]}},emits:["update:modelValue","save"],setup(a,{expose:A,emit:j}){const S=a,T=j,E=l(),O=v(S.modelValue),B=v(!1),F=v({}),M=v({title:"",type:"",category:[],language:"en",tags:[],options:"",default_answer:"",is_required:!1,description:""}),C=g(()=>[{label:"Text Input",value:"text"},{label:"Textarea",value:"textarea"},{label:"Single Select",value:"select"},{label:"Multi Select",value:"multi-select"},{label:"Media Upload",value:"media"},{label:"File Upload",value:"file"}]),D=g(()=>S.categories),I=g(()=>[{label:"English",value:"en"},{label:"Spanish",value:"es"},{label:"French",value:"fr"},{label:"Arabic",value:"ar"}]),k=v(["core","optional","advanced","beginner","intermediate"]),L=g(()=>!!S.question),$=g(()=>M.value.title&&M.value.type&&M.value.category.length>0&&M.value.language),z=e=>{e?M.value={title:e.title||"",type:e.type||"",category:Array.isArray(e.category)?e.category:[e.category].filter(Boolean),language:e.language||"en",tags:Array.isArray(e.tags)?e.tags:[],options:Array.isArray(e.options)?e.options.join(", "):e.options||"",default_answer:e.default_answer||"",is_required:e.is_required||!1,description:e.description||""}:(M.value={title:"",type:"",category:[],language:"en",tags:[],options:"",default_answer:"",is_required:!1,description:""},F.value={})},G=()=>{if(!$.value)return void E.notify({type:"negative",message:"Please fill in all required fields",position:"top"});B.value=!0,F.value={};const e={...M.value,options:M.value.options?M.value.options.split(",").map(e=>e.trim()).filter(Boolean):[]};L.value&&(e.id=S.question.id),T("save",e)};return c(()=>S.modelValue,e=>{O.value=e,e&&z(S.question)}),c(()=>S.question,e=>{O.value&&z(e)}),A({handleSaveComplete:()=>{B.value=!1,O.value=!1},handleSaveError:e=>{var a,l;B.value=!1,(null==(l=null==(a=e.response)?void 0:a.data)?void 0:l.errors)&&(F.value=e.response.data.errors)}}),(a,l)=>(b(),y(d,{modelValue:O.value,"onUpdate:modelValue":[l[9]||(l[9]=e=>O.value=e),l[10]||(l[10]=e=>a.$emit("update:modelValue",e))],persistent:""},{default:f(()=>[V(n,{style:{"min-width":"500px","max-width":"700px",width:"100%"}},{default:f(()=>[V(t,{class:"row items-center q-pb-none"},{default:f(()=>[q("div",Q,_(L.value?"Edit Question":"Add New Question"),1),V(e),h(V(u,{icon:"close",flat:"",round:"",dense:""},null,512),[[o]])]),_:1}),V(m,{onSubmit:w(G,["prevent"]),class:"q-gutter-md"},{default:f(()=>[V(t,{class:"q-pt-none"},{default:f(()=>[q("div",U,[V(s,{modelValue:M.value.title,"onUpdate:modelValue":l[0]||(l[0]=e=>M.value.title=e),label:"Question Title *",outlined:"",dense:"",rules:[e=>!!e||"Title is required"],error:!!F.value.title,"error-message":F.value.title},null,8,["modelValue","rules","error","error-message"]),V(p,{modelValue:M.value.type,"onUpdate:modelValue":l[1]||(l[1]=e=>M.value.type=e),options:C.value,label:"Question Type *",outlined:"",dense:"","emit-value":"","map-options":"",rules:[e=>!!e||"Type is required"],error:!!F.value.type,"error-message":F.value.type},null,8,["modelValue","options","rules","error","error-message"]),V(p,{modelValue:M.value.category,"onUpdate:modelValue":l[2]||(l[2]=e=>M.value.category=e),options:D.value,label:"Category *",outlined:"",dense:"",multiple:"","use-chips":"","use-input":"","input-debounce":"0","new-value-mode":"add-unique",rules:[e=>e&&e.length>0||"At least one category is required"],error:!!F.value.category,"error-message":F.value.category},null,8,["modelValue","options","rules","error","error-message"]),V(p,{modelValue:M.value.language,"onUpdate:modelValue":l[3]||(l[3]=e=>M.value.language=e),options:I.value,label:"Language *",outlined:"",dense:"","emit-value":"","map-options":"",rules:[e=>!!e||"Language is required"],error:!!F.value.language,"error-message":F.value.language},null,8,["modelValue","options","rules","error","error-message"]),V(p,{modelValue:M.value.tags,"onUpdate:modelValue":l[4]||(l[4]=e=>M.value.tags=e),options:k.value,label:"Tags",outlined:"",dense:"",multiple:"","use-chips":"","use-input":"","input-debounce":"0","new-value-mode":"add-unique",hint:"Optional tags for categorization"},null,8,["modelValue","options"]),"select"===M.value.type||"multi-select"===M.value.type?(b(),y(s,{key:0,modelValue:M.value.options,"onUpdate:modelValue":l[5]||(l[5]=e=>M.value.options=e),label:"Options (comma separated)",outlined:"",dense:"",type:"textarea",rows:"3",hint:"Enter options separated by commas"},null,8,["modelValue"])):x("",!0),V(s,{modelValue:M.value.default_answer,"onUpdate:modelValue":l[6]||(l[6]=e=>M.value.default_answer=e),label:"Default Answer",outlined:"",dense:"",type:"textarea",rows:"3",hint:"Optional default answer or placeholder text"},null,8,["modelValue"]),V(r,{modelValue:M.value.is_required,"onUpdate:modelValue":l[7]||(l[7]=e=>M.value.is_required=e),label:"This question is required",color:"primary"},null,8,["modelValue"]),V(s,{modelValue:M.value.description,"onUpdate:modelValue":l[8]||(l[8]=e=>M.value.description=e),label:"Description",outlined:"",dense:"",type:"textarea",rows:"2",hint:"Optional description or instructions for this question"},null,8,["modelValue"])])]),_:1}),V(i,{align:"right",class:"q-pa-md"},{default:f(()=>[h(V(u,{flat:"",label:"Cancel",color:"grey-7",disable:B.value},null,8,["disable"]),[[o]]),V(u,{type:"submit",label:"Save",color:"primary",loading:B.value,disable:!$.value},null,8,["loading","disable"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},[["__scopeId","data-v-1434750a"]]);export{A as default};
