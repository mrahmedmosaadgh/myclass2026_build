import{p as e,u as t,aq as s}from"./app-DXXarK7I.js";import{f as o,o as r,ac as i,L as a,I as n,b as p,H as l,F as m,Z as d}from"./vendor-EI0FRBVb.js";import c from"./LessonPlayer-AedmSscL.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./QSpinnerDots-iSvAMlO9.js";import"./QBadge-ZjTd_Ty8.js";import"./QPage-DizYFv9k.js";import"./QPageContainer-Sg738lbK.js";import"./QLayout-YMXxQbug.js";import"./QuestionSlide-D0lZvvs3.js";import"./EnhancedQuestionEditor-D_uYM4LH.js";import"./QuestionEditor-D4jjwDhq.js";import"./RichTextEditor-gncSim_r.js";import"./QColor-k9ZQo2Mz.js";import"./QSlider-CR6iWVp_.js";import"./QTabs-BC5MrYhV.js";import"./rtl-Cr6c3OOr.js";import"./QTab-DzZGFS5V.js";import"./QTabPanels-BXLgHK63.js";import"./use-panel-v2pzMR_n.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-Cip5Q1JD.js";import"./purify.es-C2Ba6vpb.js";import"./MathEditor-L5RfSJvW.js";import"./katex-BXKQVcz-.js";import"./MathPastePreview-Bzd3Bz3u.js";import"./QSelect-OI6RFhnT.js";import"./StepByStepEditor-BqApx5yj.js";import"./QuestionTypeSelector-BwIgN9KD.js";import"./QuizEngine-usQ7KPEQ.js";import"./useQuizI18n-Bzgnl5cn.js";import"./PlayerSidebar-BOETrq2G.js";import"./QDrawer-CmhfkAoQ.js";import"./SectionCard-DVUy8XMn.js";import"./SectionBanner-DBdiFtHB.js";import"./QLinearProgress-BEkk-xFg.js";import"./SlideRenderer-BR-iGj7h.js";import"./FingerDrawingSlide-gRXrb-9m.js";import"./QPopupProxy-CSpgzgFh.js";import"./QSpace-B3qNlK-o.js";import"./NavigationFooter-vNvOnwUa.js";import"./DrawingOverlay-9U3uDtrQ.js";import"./DrawingCanvas-JckEaKTC.js";import"./DrawingToolbar-DvzTQ6Jd.js";import"./QBtnToggle-Lw6F7ljP.js";import"./SlideAnnotationOverlay-C_BLCNlX.js";const u={key:1,class:"h-screen flex items-center justify-center bg-gray-50"},j=e({__name:"StudentLessonView",props:{presentationId:{type:[String,Number],required:!0},studentId:{type:[String,Number],required:!0},sections:{type:Array,default:()=>[]}},setup(e){const j=t(),y=e,g=o({}),v=o([]),Q=o(null),b=o(!0),f=async()=>{try{b.value=!0;const e=await d.get(route("lesson-presentation.show",{id:y.presentationId}));g.value=e.data,v.value=(e.data.slides||[]).map(e=>({...e,section:e.section||"learn"}));const t=(await d.get(route("lesson-presentation.progress.student",{studentId:y.studentId}))).data.find(e=>e.lesson_presentation_id==y.presentationId);Q.value=t}catch(e){console.error("Failed to load data:",e),j.notify({type:"negative",message:"Failed to load lesson data"})}finally{b.value=!1}},S=async()=>{try{await d.put(route("lesson-presentation.progress.complete-learn",{id:Q.value.id})),await f(),j.notify({type:"positive",message:"Learn section completed! Practice unlocked."})}catch(e){console.error("Failed to complete learn:",e)}},w=async()=>{await f(),j.notify({type:"positive",message:"Practice submitted! Waiting for teacher review."})};return r(()=>{f()}),(t,o)=>{const r=i("Head");return n(),a(m,null,[p(r,{title:g.value.name?`Lesson: ${g.value.name}`:"Lesson View"},null,8,["title"]),b.value?(n(),a("div",u,[p(s,{color:"primary",size:"3em"})])):(n(),l(c,{key:0,presentation:g.value,sections:e.sections,slides:v.value,progress:Q.value,loading:b.value,onCompleteLearn:S,onSubmitPractice:w},null,8,["presentation","sections","slides","progress","loading"]))],64)}}},[["__scopeId","data-v-436cc26f"]]);export{j as default};
