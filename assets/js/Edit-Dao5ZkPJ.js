import{r as e,u as t,f as l,b as s,c as a,d as o,h as r,G as i,i as d,j as n,k as u,Q as c,l as m}from"./app-Dtv5Fi9L.js";import{Q as v}from"./QSelect-BslHFD89.js";import{Q as f}from"./QForm-Cyf9p9ZM.js";import{r as p,f as b,a as y,I as g,J as x,K as _,R as h,b as q,V as j,O as V,N as w,W as L,Q as k,F as O,$ as U}from"./vendor-BWKGNkNB.js";import{_ as C}from"./AppLayout-B3PyevP7.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";const Q={class:"q-pa-md"},S={class:"row items-center justify-between"},B={class:"text-subtitle2"},E={class:"row q-col-gutter-md"},A={class:"col-12 col-md-8"},F={class:"q-mb-md"},I={class:"q-mb-md"},z={class:"q-mb-md"},D={class:"row q-col-gutter-md"},P={class:"col-12 col-md-6"},$={class:"col-12 col-md-6"},M={class:"q-mt-md"},T={class:"col-12 col-md-4"},W={class:"section-context"},G={class:"text-h6 text-primary"},J={class:"text-caption text-grey-7 q-mt-xs"},K={class:"text-caption text-grey-7"},N={class:"lesson-preview"},R={class:"text-subtitle1 text-primary"},H={key:0,class:"text-caption text-grey-7 q-mt-xs"},X={key:1,class:"q-mt-md row q-col-gutter-xs"},Y={key:0,class:"col-auto"},Z={key:1,class:"col-auto"},ee={class:"text-caption text-grey-7 q-mt-sm"},te={class:"row justify-end q-gutter-sm"},le=e({__name:"Edit",props:{lesson:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(e){var le,se,ae;const oe=e,re=t(),ie=p({title:oe.lesson.title,text:oe.lesson.text||"",order:oe.lesson.order,duration:(null==(le=oe.lesson.data)?void 0:le.duration)||null,difficulty:(null==(se=oe.lesson.data)?void 0:se.difficulty)||null}),de=b((null==(ae=oe.lesson.data)?void 0:ae.objectives)?oe.lesson.data.objectives.join("\n"):""),ne=b(!1),ue=[{label:"Beginner",value:"beginner"},{label:"Intermediate",value:"intermediate"},{label:"Advanced",value:"advanced"}],ce=y(()=>de.value?de.value.split("\n").map(e=>e.trim()).filter(e=>e.length>0):[]),me=e=>({beginner:"green-8",intermediate:"orange-8",advanced:"red-8"}[e]||"grey-8"),ve=()=>{ne.value=!0;const e={title:ie.title,text:ie.text,order:ie.order,data:{}};ie.duration&&(e.data.duration=ie.duration),ie.difficulty&&(e.data.difficulty=ie.difficulty),ce.value.length>0&&(e.data.objectives=ce.value),U.put(route("course-management.lessons.update",oe.lesson.id),e,{onSuccess:()=>{re.notify({type:"positive",message:"Lesson updated successfully!",icon:"check_circle"})},onError:e=>{re.notify({type:"negative",message:"Please check the form for errors.",icon:"error"})},onFinish:()=>{ne.value=!1}})};return(t,p)=>(x(),g(C,{title:"Edit Lesson"},{default:_(()=>[h("div",Q,[q(o,{flat:"",bordered:""},{default:_(()=>[q(l,null,{default:_(()=>{var l;return[h("div",S,[h("div",null,[p[8]||(p[8]=h("div",{class:"text-h6"},"Edit Lesson",-1)),h("div",B,'Update lesson information for "'+j(null==(l=e.lesson.section)?void 0:l.title)+'"',1)]),q(s,{flat:"",color:"grey-7",icon:"arrow_back",label:"Back to Lesson",onClick:p[0]||(p[0]=l=>t.$inertia.visit(t.route("course-management.lessons.show",e.lesson.id)))})])]}),_:1}),q(a),q(f,{onSubmit:ve,class:"q-pa-md"},{default:_(()=>[h("div",E,[h("div",A,[q(o,{flat:"",bordered:""},{default:_(()=>[q(l,null,{default:_(()=>[p[9]||(p[9]=h("div",{class:"text-subtitle1 q-mb-md"},"Lesson Information",-1)),h("div",F,[q(r,{modelValue:ie.title,"onUpdate:modelValue":p[1]||(p[1]=e=>ie.title=e),label:"Lesson Title *",outlined:"",error:!!e.errors.title,"error-message":e.errors.title,placeholder:"e.g., What is a Fraction?, Basic Addition"},null,8,["modelValue","error","error-message"])]),h("div",I,[q(r,{modelValue:ie.text,"onUpdate:modelValue":p[2]||(p[2]=e=>ie.text=e),label:"Lesson Description",outlined:"",type:"textarea",rows:"3",error:!!e.errors.text,"error-message":e.errors.text,placeholder:"Brief description of what this lesson covers..."},null,8,["modelValue","error","error-message"])]),h("div",z,[q(r,{modelValue:ie.order,"onUpdate:modelValue":p[3]||(p[3]=e=>ie.order=e),modelModifiers:{number:!0},label:"Order",outlined:"",type:"number",min:"0",error:!!e.errors.order,"error-message":e.errors.order,hint:"Position of this lesson in the section"},null,8,["modelValue","error","error-message"])])]),_:1})]),_:1}),q(o,{flat:"",bordered:"",class:"q-mt-md"},{default:_(()=>[q(l,null,{default:_(()=>[p[10]||(p[10]=h("div",{class:"text-subtitle1 q-mb-md"},"Lesson Settings",-1)),h("div",D,[h("div",P,[q(r,{modelValue:ie.duration,"onUpdate:modelValue":p[4]||(p[4]=e=>ie.duration=e),modelModifiers:{number:!0},label:"Duration (minutes)",outlined:"",type:"number",min:"1",placeholder:"30"},null,8,["modelValue"])]),h("div",$,[q(v,{modelValue:ie.difficulty,"onUpdate:modelValue":p[5]||(p[5]=e=>ie.difficulty=e),options:ue,outlined:"",label:"Difficulty Level","emit-value":"","map-options":"",clearable:""},null,8,["modelValue"])])]),h("div",M,[q(r,{modelValue:de.value,"onUpdate:modelValue":p[6]||(p[6]=e=>de.value=e),label:"Learning Objectives",outlined:"",type:"textarea",rows:"3",placeholder:"Enter each objective on a new line...",hint:"One objective per line"},null,8,["modelValue"])])]),_:1})]),_:1})]),h("div",T,[q(o,{flat:"",bordered:""},{default:_(()=>[q(l,null,{default:_(()=>{var t,l,s,a,o,r;return[p[11]||(p[11]=h("div",{class:"text-subtitle1 q-mb-md"},"Section Context",-1)),h("div",W,[h("div",G,j(null==(t=e.lesson.section)?void 0:t.title),1),h("div",J,' Section in "'+j(null==(s=null==(l=e.lesson.section)?void 0:l.level)?void 0:s.title)+'" ',1),h("div",K,' Course: "'+j(null==(r=null==(o=null==(a=e.lesson.section)?void 0:a.level)?void 0:o.course)?void 0:r.name)+'" ',1)])]}),_:1})]),_:1}),q(o,{flat:"",bordered:"",class:"q-mt-md"},{default:_(()=>[q(l,null,{default:_(()=>{return[p[12]||(p[12]=h("div",{class:"text-subtitle1 q-mb-md"},"Lesson Preview",-1)),h("div",N,[h("div",R,j(ie.title||"Lesson Title"),1),ie.text?(x(),w("div",H,j(ie.text),1)):V("",!0),ie.duration||ie.difficulty?(x(),w("div",X,[ie.duration?(x(),w("div",Y,[q(i,{size:"sm",color:"blue-1","text-color":"blue-8",icon:"schedule"},{default:_(()=>[L(j(ie.duration)+" min ",1)]),_:1})])):V("",!0),ie.difficulty?(x(),w("div",Z,[q(i,{size:"sm",color:(e=ie.difficulty,{beginner:"green-1",intermediate:"orange-1",advanced:"red-1"}[e]||"grey-1"),"text-color":me(ie.difficulty),icon:"trending_up"},{default:_(()=>[L(j(ie.difficulty),1)]),_:1},8,["color","text-color"])])):V("",!0)])):V("",!0),h("div",ee," Order: "+j(ie.order||"Auto"),1)])];var e}),_:1})]),_:1}),ce.value.length>0?(x(),g(o,{key:0,flat:"",bordered:"",class:"q-mt-md"},{default:_(()=>[q(l,null,{default:_(()=>[p[13]||(p[13]=h("div",{class:"text-subtitle1 q-mb-md"},"Learning Objectives",-1)),q(d,{dense:""},{default:_(()=>[(x(!0),w(O,null,k(ce.value,(e,t)=>(x(),g(n,{key:t},{default:_(()=>[q(u,{avatar:""},{default:_(()=>[q(c,{name:"check_circle",color:"positive",size:"sm"})]),_:1}),q(u,null,{default:_(()=>[q(m,{class:"text-caption"},{default:_(()=>[L(j(e),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):V("",!0)])]),q(a,{class:"q-my-md"}),h("div",te,[q(s,{flat:"",label:"Cancel",color:"grey-7",onClick:p[7]||(p[7]=l=>t.$inertia.visit(t.route("course-management.lessons.show",e.lesson.id)))}),q(s,{type:"submit",label:"Update Lesson",color:"primary",icon:"save",loading:ne.value},null,8,["loading"])])]),_:1})]),_:1})])]),_:1}))}},[["__scopeId","data-v-a2690764"]]);export{le as default};
