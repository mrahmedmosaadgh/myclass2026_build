import{r as e,u as t,d as s,f as a,b as l,c as r,H as o,t as i,G as n,s as c,h as u,Q as d,e as m,o as v}from"./app-NYt77MEb.js";import{Q as g}from"./QSelect-BfJwO5J-.js";import{Q as p}from"./QTd-CfXGYoMH.js";import{Q as f}from"./QTable-ymr-NMZQ.js";import{f as b,a as _,N as h,J as y,b as x,z as w,a4 as A,K as C,R as k,V as j,W as T,I as S,O as q,F as Q,$ as V}from"./vendor-BWKGNkNB.js";import{_ as U}from"./AppLayout-B3PyevP7.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";import"./QMarkupTable-HkrXww2-.js";import"./QLinearProgress-_dal-41V.js";import"./use-fullscreen-CdeNMBy-.js";const z={class:"q-pa-md"},I={class:"row items-center justify-between"},D={class:"q-gutter-sm"},F={class:"col-12 col-sm-6 col-md-3"},R={class:"text-h5 text-bold text-blue-8"},$={class:"col-12 col-sm-6 col-md-3"},L={class:"text-h5 text-bold text-green-8"},P={class:"col-12 col-sm-6 col-md-3"},B={class:"text-h5 text-bold text-orange-8"},E={class:"col-12 col-sm-6 col-md-3"},M={class:"text-h5 text-bold text-purple-8"},G={class:"row full-width items-center q-gutter-md"},H={class:"row items-center q-gutter-sm"},J={class:"text-subtitle2"},K={class:"text-caption text-grey-7"},N={class:"text-subtitle2"},O={class:"text-caption text-grey-7"},W={class:"text-subtitle2"},X={class:"text-subtitle2"},Y=e({__name:"Index",props:{assignments:{type:Array,required:!0},courses:{type:Array,required:!0},teachers:{type:Array,required:!0}},setup(e){const Y=e,Z=t(),ee=b(""),te=b(null),se=b(!1),ae=b(null),le=[{label:"Active",value:!0},{label:"Inactive",value:!1}],re=[{name:"teacher",label:"Teacher",field:"teacher",align:"left",sortable:!0},{name:"course",label:"Course",field:"course",align:"left",sortable:!0},{name:"status",label:"Status",field:"is_active",align:"center",sortable:!0},{name:"assigned_at",label:"Assigned Date",field:"assigned_at",align:"left",sortable:!0},{name:"actions",label:"Actions",align:"center"}],oe=_(()=>Y.assignments.filter(e=>e.is_active).length),ie=_(()=>new Set(Y.assignments.map(e=>e.teacher_id)).size),ne=_(()=>new Set(Y.assignments.map(e=>e.course_id)).size),ce=()=>{ae.value&&V.delete(route("course-management.teachers.remove-assignment",ae.value.id),{onSuccess:()=>{Z.notify({type:"positive",message:"Assignment removed successfully.",icon:"check_circle"}),se.value=!1,ae.value=null},onError:()=>{Z.notify({type:"negative",message:"Failed to remove assignment.",icon:"error"})}})};return(t,b)=>(y(),h(Q,null,[x(w(A),{title:"Teacher Course Assignments"}),x(U,{title:"Teacher Course Assignments"},{default:C(()=>[k("div",z,[x(s,{flat:"",bordered:""},{default:C(()=>[x(a,null,{default:C(()=>[k("div",I,[b[7]||(b[7]=k("div",null,[k("div",{class:"text-h6"},"Teacher Course Assignments"),k("div",{class:"text-subtitle2"},"Manage course assignments for teachers")],-1)),k("div",D,[x(l,{flat:"",color:"grey-7",icon:"arrow_back",label:"Back to Courses",onClick:b[0]||(b[0]=e=>t.$inertia.visit(t.route("course-management.courses.index")))}),x(l,{color:"orange",icon:"person_add",label:"Assign by Teacher",onClick:b[1]||(b[1]=e=>t.$inertia.visit(t.route("course-management.teachers.assign-by-teacher")))}),x(l,{color:"primary",icon:"school",label:"Assign by Course",onClick:b[2]||(b[2]=e=>t.$inertia.visit(t.route("course-management.teachers.assign-by-course")))})])])]),_:1}),x(a,{class:"row q-col-gutter-md"},{default:C(()=>[k("div",F,[x(s,{class:"bg-blue-1 text-center"},{default:C(()=>[x(a,null,{default:C(()=>[k("div",R,j(e.assignments.length),1),b[8]||(b[8]=k("div",{class:"text-subtitle2 text-grey-8"},"Total Assignments",-1))]),_:1})]),_:1})]),k("div",$,[x(s,{class:"bg-green-1 text-center"},{default:C(()=>[x(a,null,{default:C(()=>[k("div",L,j(oe.value),1),b[9]||(b[9]=k("div",{class:"text-subtitle2 text-grey-8"},"Active Assignments",-1))]),_:1})]),_:1})]),k("div",P,[x(s,{class:"bg-orange-1 text-center"},{default:C(()=>[x(a,null,{default:C(()=>[k("div",B,j(ie.value),1),b[10]||(b[10]=k("div",{class:"text-subtitle2 text-grey-8"},"Teachers Assigned",-1))]),_:1})]),_:1})]),k("div",E,[x(s,{class:"bg-purple-1 text-center"},{default:C(()=>[x(a,null,{default:C(()=>[k("div",M,j(ne.value),1),b[11]||(b[11]=k("div",{class:"text-subtitle2 text-grey-8"},"Courses Assigned",-1))]),_:1})]),_:1})])]),_:1}),x(r),x(a,null,{default:C(()=>[b[13]||(b[13]=k("div",{class:"text-h6 q-mb-md"},"Current Assignments",-1)),x(f,{rows:e.assignments,columns:re,"row-key":"id",flat:"",bordered:"",pagination:{rowsPerPage:15},filter:ee.value},{top:C(()=>[k("div",G,[x(u,{modelValue:ee.value,"onUpdate:modelValue":b[3]||(b[3]=e=>ee.value=e),outlined:"",dense:"",placeholder:"Search assignments...",clearable:"",class:"col-12 col-md-4"},{prepend:C(()=>[x(d,{name:"search"})]),_:1},8,["modelValue"]),x(g,{modelValue:te.value,"onUpdate:modelValue":b[4]||(b[4]=e=>te.value=e),options:le,outlined:"",dense:"",label:"Filter by Status",clearable:"",class:"col-12 col-md-3"},null,8,["modelValue"])])]),"body-cell-teacher":C(e=>[x(p,{props:e},{default:C(()=>{var t,s;return[k("div",H,[x(c,{size:"32px",color:"primary","text-color":"white"},{default:C(()=>{var t,s;return[T(j((s=null==(t=e.row.teacher)?void 0:t.name,s?s.split(" ").map(e=>e.charAt(0)).join("").toUpperCase():"?")),1)]}),_:2},1024),k("div",null,[k("div",J,j(null==(t=e.row.teacher)?void 0:t.name),1),k("div",K,j(null==(s=e.row.teacher)?void 0:s.email),1)])])]}),_:2},1032,["props"])]),"body-cell-course":C(e=>[x(p,{props:e},{default:C(()=>{var t,s,a;return[k("div",null,[k("div",N,j(null==(t=e.row.course)?void 0:t.name),1),k("div",O,j((null==(a=null==(s=e.row.course)?void 0:s.levels)?void 0:a.length)||0)+" levels ",1)])]}),_:2},1032,["props"])]),"body-cell-status":C(e=>[x(p,{props:e},{default:C(()=>[x(n,{color:e.row.is_active?"green":"grey","text-color":e.row.is_active?"white":"black",size:"sm"},{default:C(()=>[T(j(e.row.is_active?"Active":"Inactive"),1)]),_:2},1032,["color","text-color"])]),_:2},1032,["props"])]),"body-cell-assigned_at":C(e=>[x(p,{props:e},{default:C(()=>{return[T(j((t=e.row.assigned_at,new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))),1)];var t}),_:2},1032,["props"])]),"body-cell-actions":C(e=>[x(p,{props:e},{default:C(()=>[x(o,{flat:""},{default:C(()=>[x(l,{flat:"",dense:"",color:e.row.is_active?"orange":"green",icon:e.row.is_active?"pause":"play_arrow",onClick:t=>{return s=e.row,void V.patch(route("course-management.teachers.toggle-assignment",s.id),{},{onSuccess:()=>{Z.notify({type:"positive",message:"Assignment status updated successfully.",icon:"check_circle"})},onError:()=>{Z.notify({type:"negative",message:"Failed to update assignment status.",icon:"error"})}});var s}},{default:C(()=>[x(i,null,{default:C(()=>[T(j(e.row.is_active?"Deactivate":"Activate"),1)]),_:2},1024)]),_:2},1032,["color","icon","onClick"]),x(l,{flat:"",dense:"",color:"negative",icon:"delete",onClick:t=>{return s=e.row,ae.value=s,void(se.value=!0);var s}},{default:C(()=>[x(i,null,{default:C(()=>b[12]||(b[12]=[T("Remove Assignment")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","filter"])]),_:1})]),_:1})]),x(m,{modelValue:se.value,"onUpdate:modelValue":b[6]||(b[6]=e=>se.value=e),persistent:""},{default:C(()=>[x(s,null,{default:C(()=>[x(a,{class:"row items-center"},{default:C(()=>[x(c,{icon:"warning",color:"negative","text-color":"white"}),b[14]||(b[14]=k("span",{class:"q-ml-sm"},"Are you sure you want to remove this assignment?",-1))]),_:1}),ae.value?(y(),S(a,{key:0},{default:C(()=>{var e,t;return[k("div",W," Teacher: "+j(null==(e=ae.value.teacher)?void 0:e.name),1),k("div",X," Course: "+j(null==(t=ae.value.course)?void 0:t.name),1),b[15]||(b[15]=k("div",{class:"text-caption text-grey-7"},"This action cannot be undone.",-1))]}),_:1})):q("",!0),x(v,{align:"right"},{default:C(()=>[x(l,{flat:"",label:"Cancel",color:"primary",onClick:b[5]||(b[5]=e=>se.value=!1)}),x(l,{flat:"",label:"Remove",color:"negative",onClick:ce})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})],64))}},[["__scopeId","data-v-2114594a"]]);export{Y as default};
