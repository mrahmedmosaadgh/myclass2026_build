import{d as e,g as a,e as l,aD as t,Q as s,n as i}from"./app-Dccx8xF5.js";import{Q as o}from"./QSelect-aOnYle6d.js";import{Q as u}from"./QDate-DaSCfvok.js";import{Q as d}from"./QPopupProxy-CwYc8fjZ.js";import{Q as n}from"./QForm-Df8AW4W_.js";import{f as r,a as p,o as c,H as m,I as f,J as v,b as _,M as k,U as b,x as V}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./rtl-Cr6c3OOr.js";import"./use-render-cache-CmTcazfP.js";import"./use-datetime-VIQQDLMP.js";import"./date-BjTvdhiV.js";const j={class:"text-h6"},y={class:"row items-center justify-end"},w={class:"row justify-end q-mt-md"},Q={__name:"TaskForm",props:{task:{type:Object,required:!0},parentTasks:{type:Array,default:()=>[]},classifications:{type:Array,default:()=>[]}},emits:["save","cancel"],setup(Q,{emit:T}){const D=Q,x=T,U=r({id:D.task.id||null,title:D.task.title||"",description:D.task.description||"",parent_id:D.task.parent_id||null,classification:D.task.classification||null,due_date:D.task.due_date||null,completed_at:D.task.completed_at||null}),h=p(()=>D.parentTasks.filter(e=>{if(U.value.id===e.id)return!1;let a=e;for(;a.parent_id;){if(a.parent_id===U.value.id)return!1;const e=D.parentTasks.find(e=>e.id===a.parent_id);if(!e)break;a=e}return!0})),q=p(()=>[...new Set([...D.classifications,U.value.classification].filter(Boolean))]),C=()=>{x("save",{...U.value})};return c(()=>{U.value={id:D.task.id||null,title:D.task.title||"",description:D.task.description||"",parent_id:D.task.parent_id||null,classification:D.task.classification||null,due_date:D.task.due_date||null,completed_at:D.task.completed_at||null}}),(r,p)=>(f(),m(i,{style:{width:"500px","max-width":"80vw"}},{default:v(()=>[_(e,null,{default:v(()=>[k("div",j,b(Q.task.id?"Edit Task":"New Task"),1)]),_:1}),_(e,null,{default:v(()=>[_(n,{onSubmit:C,class:"q-gutter-md"},{default:v(()=>[_(a,{modelValue:U.value.title,"onUpdate:modelValue":p[0]||(p[0]=e=>U.value.title=e),label:"Title *",rules:[e=>!!e||"Title is required"],autofocus:""},null,8,["modelValue","rules"]),_(a,{modelValue:U.value.description,"onUpdate:modelValue":p[1]||(p[1]=e=>U.value.description=e),label:"Description",type:"textarea",rows:"3"},null,8,["modelValue"]),_(o,{modelValue:U.value.parent_id,"onUpdate:modelValue":p[2]||(p[2]=e=>U.value.parent_id=e),options:h.value,label:"Parent Task","option-value":"id","option-label":"title","emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"]),_(o,{modelValue:U.value.classification,"onUpdate:modelValue":p[3]||(p[3]=e=>U.value.classification=e),options:q.value,label:"Classification","use-input":"","input-debounce":"0","new-value-mode":"add-unique",clearable:""},null,8,["modelValue","options"]),_(a,{modelValue:U.value.due_date,"onUpdate:modelValue":p[5]||(p[5]=e=>U.value.due_date=e),label:"Due Date",clearable:""},{append:v(()=>[_(l,{name:"event",class:"cursor-pointer"},{default:v(()=>[_(d,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:v(()=>[_(u,{modelValue:U.value.due_date,"onUpdate:modelValue":p[4]||(p[4]=e=>U.value.due_date=e),mask:"YYYY-MM-DD"},{default:v(()=>[k("div",y,[V(_(s,{label:"Close",color:"primary",flat:""},null,512),[[t]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),k("div",w,[V(_(s,{label:"Cancel",color:"grey-7",flat:"",onClick:p[6]||(p[6]=e=>r.$emit("cancel"))},null,512),[[t]]),_(s,{label:"Save",type:"submit",color:"primary"})])]),_:1})]),_:1})]),_:1}))}};export{Q as default};
