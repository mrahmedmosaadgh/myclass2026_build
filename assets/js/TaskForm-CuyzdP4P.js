import{c as e,f as a,d as l,aP as t,Q as s,m as i}from"./app-BwCflFkV.js";import{Q as o}from"./QSelect-Cyosk05W.js";import{Q as u}from"./QDate-C5KdY473.js";import{Q as d}from"./QPopupProxy-CUxsJkoO.js";import{Q as n}from"./QForm-BCWodDs-.js";import{f as r,a as p,o as c,H as m,I as f,J as v,b as _,M as k,U as b,x as V}from"./vendor-CUZ9QTQV.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";import"./rtl-Cr6c3OOr.js";import"./use-render-cache-CmTcazfP.js";import"./use-datetime-Bag368MV.js";import"./date-CwehRNYO.js";const j={class:"text-h6"},y={class:"row items-center justify-end"},w={class:"row justify-end q-mt-md"},Q={__name:"TaskForm",props:{task:{type:Object,required:!0},parentTasks:{type:Array,default:()=>[]},classifications:{type:Array,default:()=>[]}},emits:["save","cancel"],setup(Q,{emit:T}){const U=Q,x=T,h=r({id:U.task.id||null,title:U.task.title||"",description:U.task.description||"",parent_id:U.task.parent_id||null,classification:U.task.classification||null,due_date:U.task.due_date||null,completed_at:U.task.completed_at||null}),D=p(()=>U.parentTasks.filter(e=>{if(h.value.id===e.id)return!1;let a=e;for(;a.parent_id;){if(a.parent_id===h.value.id)return!1;const e=U.parentTasks.find(e=>e.id===a.parent_id);if(!e)break;a=e}return!0})),q=p(()=>[...new Set([...U.classifications,h.value.classification].filter(Boolean))]),C=()=>{x("save",{...h.value})};return c(()=>{h.value={id:U.task.id||null,title:U.task.title||"",description:U.task.description||"",parent_id:U.task.parent_id||null,classification:U.task.classification||null,due_date:U.task.due_date||null,completed_at:U.task.completed_at||null}}),(r,p)=>(f(),m(i,{style:{width:"500px","max-width":"80vw"}},{default:v(()=>[_(e,null,{default:v(()=>[k("div",j,b(Q.task.id?"Edit Task":"New Task"),1)]),_:1}),_(e,null,{default:v(()=>[_(n,{onSubmit:C,class:"q-gutter-md"},{default:v(()=>[_(a,{modelValue:h.value.title,"onUpdate:modelValue":p[0]||(p[0]=e=>h.value.title=e),label:"Title *",rules:[e=>!!e||"Title is required"],autofocus:""},null,8,["modelValue","rules"]),_(a,{modelValue:h.value.description,"onUpdate:modelValue":p[1]||(p[1]=e=>h.value.description=e),label:"Description",type:"textarea",rows:"3"},null,8,["modelValue"]),_(o,{modelValue:h.value.parent_id,"onUpdate:modelValue":p[2]||(p[2]=e=>h.value.parent_id=e),options:D.value,label:"Parent Task","option-value":"id","option-label":"title","emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"]),_(o,{modelValue:h.value.classification,"onUpdate:modelValue":p[3]||(p[3]=e=>h.value.classification=e),options:q.value,label:"Classification","use-input":"","input-debounce":"0","new-value-mode":"add-unique",clearable:""},null,8,["modelValue","options"]),_(a,{modelValue:h.value.due_date,"onUpdate:modelValue":p[5]||(p[5]=e=>h.value.due_date=e),label:"Due Date",clearable:""},{append:v(()=>[_(l,{name:"event",class:"cursor-pointer"},{default:v(()=>[_(d,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:v(()=>[_(u,{modelValue:h.value.due_date,"onUpdate:modelValue":p[4]||(p[4]=e=>h.value.due_date=e),mask:"YYYY-MM-DD"},{default:v(()=>[k("div",y,[V(_(s,{label:"Close",color:"primary",flat:""},null,512),[[t]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),k("div",w,[V(_(s,{label:"Cancel",color:"grey-7",flat:"",onClick:p[6]||(p[6]=e=>r.$emit("cancel"))},null,512),[[t]]),_(s,{label:"Save",type:"submit",color:"primary"})])]),_:1})]),_:1})]),_:1}))}};export{Q as default};
