import{a as e,f as a,H as t,I as l,J as s,M as r,b as o,L as i,O as m,V as n,U as d,_ as c}from"./vendor-EI0FRBVb.js";import{_ as u}from"./AppLayout-CE2yjlSr.js";import{_ as p}from"./DataTable-ByHcWWGX.js";import{_ as b}from"./FormModal-C-n-oFqk.js";import{_ as v}from"./ImportExcel-CQRIBkf3.js";import{_ as y}from"./Pagination-wcG7j81T.js";import{_}from"./PrimaryButton-D4MqeasW.js";import{_ as f}from"./SecondaryButton-UHI6KqaH.js";import{e as j}from"./exportHelper-DgqGG-tE.js";import"./LucideIcon-DP3BSI4t.js";import"./createLucideIcon-APVJ2SH-.js";import"./align-right-CnRMXp62.js";import"./underline-PDlIMkNx.js";import"./image-CpjPXLZL.js";import"./printer-DTcC0fi8.js";import"./Modal-DOPZQLRD.js";import"./app-BzjXrVp9.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./xlsx-cMC2LkxH.js";const x={class:"py-12"},h={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},k={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},S={class:"mb-6 flex justify-between"},g={class:"flex space-x-2"},w={key:0,class:"mt-4"},D="Semester Tests Management",I="/admin/semester-test",A={__name:"Index",props:{records:Object,options:Object},setup(A){var E,N,T,Y;const q=A,L=e(()=>{var e;return(null==(e=q.records)?void 0:e.data)||[]}),M=e(()=>{var e;return(null==(e=q.records)?void 0:e.links)||null}),O=[{key:"name",label:"Name"},{key:"semester_number",label:"Semester Number"},{key:"start_date",label:"Start Date"},{key:"end_date",label:"End Date"},{key:"school.name",label:"School"},{key:"academicYear.name",label:"Academic Year"},{key:"active",label:"Status",type:"status"}],P=[{name:"name",label:"Name",type:"text",required:!0},{name:"semester_number",label:"Semester Number",type:"number",required:!0},{name:"start_date",label:"Start Date",type:"date"},{name:"end_date",label:"End Date",type:"date"},{name:"school_id",label:"School",type:"select",required:!0,options:(null==(N=null==(E=q.options)?void 0:E.schools)?void 0:N.map(e=>({value:e.id,label:e.name})))||[]},{name:"academic_year_id",label:"Academic Year",type:"select",required:!0,options:(null==(Y=null==(T=q.options)?void 0:T.academicYears)?void 0:Y.map(e=>({value:e.id,label:e.name})))||[]},{name:"active",label:"Status",type:"select",options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}]}],$=a(!1),C=a(null),B=(e=null)=>{C.value=e,$.value=!0},H=()=>{$.value=!1,C.value=null},U=()=>{c.reload({only:["records"]})},F=async({form:e,onSuccess:a,onError:t})=>{const l=C.value?`${I}/${C.value.id}`:I;try{await axios.post(l,{...C.value&&{_method:"PUT"},...e}),a(),H(),U()}catch(s){t(s)}},J=async e=>{if(confirm("Are you sure you want to delete this record?"))try{await axios.delete(`${I}/${e.id}`),U()}catch(a){console.error("Deletion error:",a),alert("An error occurred while deleting the record.")}},Q=()=>{j({items:L.value,columns:O,fileName:"semester_tests.xlsx"})},V=[{key:"name",label:"Name"},{key:"semester_number",label:"Semester Number"},{key:"start_date",label:"Start Date"},{key:"end_date",label:"End Date"},{key:"school_id",label:"School ID"},{key:"academic_year_id",label:"Academic Year ID"},{key:"active",label:"Status"}];return(e,a)=>(l(),t(u,{title:D},{header:s(()=>[r("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},d(D))]),default:s(()=>[r("div",x,[r("div",h,[r("div",k,[r("div",S,[r("div",g,[o(_,{onClick:a[0]||(a[0]=e=>B())},{default:s(()=>a[1]||(a[1]=[n(" Add New Semester Test ")])),_:1}),o(v,{onImported:U,"validate-url":I+"/validate-import","import-url":I+"/import",columns:V},null,8,["validate-url","import-url"]),o(f,{onClick:Q},{default:s(()=>a[2]||(a[2]=[n(" Export ")])),_:1})])]),o(p,{items:L.value,columns:O,onEdit:B,onDelete:J},null,8,["items"]),M.value?(l(),i("div",w,[o(y,{links:M.value},null,8,["links"])])):m("",!0)])])]),o(b,{show:$.value,title:"Semester Test",fields:P,editing:C.value,onClose:H,onSubmitted:F},null,8,["show","editing"])]),_:1}))}};export{A as default};
