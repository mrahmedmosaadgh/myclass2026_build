import e from"./timeline-DjlEjJvr.js";import{f as t,k as l,a as o,r as i,N as r,J as s,O as n,R as a,b as u,V as d,y as m,ac as c}from"./vendor-BWKGNkNB.js";import"./UpcomingEvents-VVt7VyyA.js";import"./UpcomingEvent-D354rQGp.js";import"./CurrentEventCard-B5mOcAZh.js";import"./EventCard-B72qxOgw.js";import"./EventTimingBadge-CMwEXH_O.js";import"./EventDurationBadge-C87Bb232.js";import"./app-BxJhpxku.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const f={class:"p-6"},p={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},v={class:"bg-white rounded-lg p-6 w-full max-w-md"},b={class:"text-lg font-semibold mb-4"},g={class:"space-y-4"},x={class:"flex gap-4"},y={class:"flex-1"},h={class:"flex-1"},j=["min"],w={class:"mt-6 flex justify-end gap-3"},E={class:"mb-4 flex justify-between items-center"},k={class:"text-xl font-bold"},C={__name:"timeline_main",props:{title:{type:String,default:""},events:{type:Array,default:()=>[]}},emits:["update:events"],setup(C,{emit:D}){const U=C,A=D,T=e=>{const t=new Date,[l,o]=e.split(":");return t.setHours(parseInt(l),parseInt(o),0,0),t},V=t([...U.events]);l(()=>U.events,e=>{V.value=[...e]},{deep:!0});const $=o(()=>{const e=[...V.value].sort((e,t)=>T(e.from)-T(t.from));return e.map(t=>{const l=T(t.from),o=T(t.to),i=e.filter(e=>{if(e.id===t.id)return!1;const i=T(e.from),r=T(e.to);return l<r&&o>i}),r=i.length>0?i.length:0,s=Math.max(r+1,1);return{...t,column:r,totalColumns:s,startTime:l,endTime:o}})}),_=t(!1),B=t(null),I=i({title:"",description:"",from:"",to:""}),N=()=>{I.title="",I.description="",I.from="",I.to=""},S=()=>{_.value=!1,B.value=null,N()},q=()=>{N(),_.value=!0},z=e=>{B.value=e,I.title=e.title,I.description=e.description,I.from=e.from,I.to=e.to,_.value=!0},F=()=>{if(!I.title.trim()||!I.from||!I.to)return void alert("Please fill in all required fields");if(I.from>=I.to)return void alert("End time must be after start time");const e=T(I.from),t=T(I.to),l=V.value.find(l=>{var o;if((null==(o=B.value)?void 0:o.id)===l.id)return!1;const i=T(l.from),r=T(l.to);return e<r&&t>i});if(l&&!confirm(`There is already an event "${l.title}" from ${l.from} to ${l.to}. Do you want to schedule anyway?`))return;const o={title:I.title,description:I.description,from:I.from,to:I.to};let i;i=B.value?V.value.map(e=>e.id===B.value.id?{...e,...o}:e):[...V.value,{id:Date.now(),...o}],V.value=i,A("update:events",i),S()},H=e=>{if(confirm("Are you sure you want to delete this event?")){const t=V.value.filter(t=>t.id!==e.id);V.value=t,A("update:events",t)}};return(t,l)=>(s(),r("div",f,[_.value?(s(),r("div",p,[a("div",v,[a("h3",b,d(B.value?"Edit Event":"Add New Event"),1),a("div",g,[a("div",null,[l[4]||(l[4]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Title",-1)),m(a("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>I.title=e),type:"text",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,I.title]])]),a("div",null,[l[5]||(l[5]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),m(a("textarea",{"onUpdate:modelValue":l[1]||(l[1]=e=>I.description=e),class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,I.description]])]),a("div",x,[a("div",y,[l[6]||(l[6]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"From",-1)),m(a("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>I.from=e),type:"time",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,I.from]])]),a("div",h,[l[7]||(l[7]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"To",-1)),m(a("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>I.to=e),type:"time",min:I.from,class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,j),[[c,I.to]])])])]),a("div",w,[a("button",{onClick:S,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),a("button",{onClick:F,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"},d(B.value?"Update":"Add"),1)])])])):n("",!0),a("div",E,[a("h2",k,d(C.title||"Daily Schedule"),1),a("button",{onClick:q,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," Add Event ")]),u(e,{events:$.value,onAdd:q,onEdit:z,onDelete:H},null,8,["events"])]))}};export{C as default};
