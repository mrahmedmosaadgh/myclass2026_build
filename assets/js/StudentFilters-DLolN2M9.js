import{f as e,L as a,I as l,M as o,b as s,x as u,aa as t,F as d,Q as r,U as n,J as i,V as v,Z as c}from"./vendor-CUZ9QTQV.js";import{_ as m}from"./PrimaryButton-DNYxrPcC.js";const p={class:"flex space-x-4"},g={class:"w-48"},b=["value"],f={class:"w-48"},y=["disabled"],h=["value"],w={class:"w-48"},x=["disabled"],k=["value"],_={class:"w-48"},S=["disabled"],C=["value"],F={__name:"StudentFilters",props:{schools:{type:Array,required:!0,default:()=>[]}},emits:["filter-applied"],setup(F,{emit:U}){const V=U,E=e([]),$=e([]),j=e([]),A=e(""),B=e(""),P=e(""),q=e(""),G=e(!1),I=()=>{B.value="",P.value="",q.value="",E.value=[],$.value=[],j.value=[],G.value=!1,A.value&&Q(A.value)},J=async()=>{P.value="",q.value="",$.value=[],j.value=[],G.value=!1,B.value&&await Z(B.value)},L=async()=>{q.value="",j.value=[],G.value=!1,P.value&&await z(P.value)},M=()=>{G.value=Boolean(q.value)},Q=e=>{c.get(`/admin/stages/by-school/${e}`).then(e=>{E.value=e.data}).catch(e=>{var a,l;console.error("Error loading stages:",e),E.value=[],(null==(l=null==(a=e.response)?void 0:a.data)?void 0:l.message)?alert(e.response.data.message):alert("Failed to load stages")})},Z=async e=>{try{const a=await c.get(`/admin/grades/by-stage/${e}`);$.value=a.data}catch(a){console.error("Error loading grades:",a),$.value=[]}},z=async e=>{try{const a=await c.get(`/admin/classrooms/by-grade/${e}`);j.value=a.data}catch(a){console.error("Error loading classrooms:",a),j.value=[]}},D=()=>{if(!A.value)return void alert("Please select a school first");const e={school_id:A.value,stage_id:B.value,grade_id:P.value,classroom_id:q.value};V("filter-applied",e)};return(e,c)=>(l(),a("div",p,[o("div",g,[u(o("select",{"onUpdate:modelValue":c[0]||(c[0]=e=>A.value=e),onChange:I,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[c[4]||(c[4]=o("option",{value:""},"Select School",-1)),(l(!0),a(d,null,r(F.schools,e=>(l(),a("option",{key:e.id,value:e.id},n(e.name),9,b))),128))],544),[[t,A.value]])]),o("div",f,[u(o("select",{"onUpdate:modelValue":c[1]||(c[1]=e=>B.value=e),onChange:J,disabled:!A.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[c[5]||(c[5]=o("option",{value:""},"Select Stage",-1)),(l(!0),a(d,null,r(E.value,e=>(l(),a("option",{key:e.id,value:e.id},n(e.name),9,h))),128))],40,y),[[t,B.value]])]),o("div",w,[u(o("select",{"onUpdate:modelValue":c[2]||(c[2]=e=>P.value=e),onChange:L,disabled:!B.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[c[6]||(c[6]=o("option",{value:""},"Select Grade",-1)),(l(!0),a(d,null,r($.value,e=>(l(),a("option",{key:e.id,value:e.id},n(e.name),9,k))),128))],40,x),[[t,P.value]])]),o("div",_,[u(o("select",{"onUpdate:modelValue":c[3]||(c[3]=e=>q.value=e),onChange:M,disabled:!P.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"},[c[7]||(c[7]=o("option",{value:""},"Select Classroom",-1)),(l(!0),a(d,null,r(j.value,e=>(l(),a("option",{key:e.id,value:e.id},n(e.name),9,C))),128))],40,S),[[t,q.value]])]),s(m,{onClick:D,disabled:!G.value,class:"h-full"},{default:i(()=>c[8]||(c[8]=[v(" Apply Filters ")])),_:1},8,["disabled"])]))}};export{F as default};
