import{Q as e}from"./QSpace-1qvgFvrB.js";import{o as a,u as t,Q as l,c as o,f as i,m as s,b as n,aP as r}from"./app-CqJgtQaN.js";import{Q as d}from"./QBar-dUcuj-Ci.js";import c from"./html2canvas.esm-Cq3pa7K9.js";import{E as u}from"./jspdf.es.min-BZKw8HNe.js";import{a as f,f as m,I as p,J as v,K as b,b as g,N as x,y as w,V as y}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const h={class:"flex gap-4 mb-6 w-full max-w-4xl justify-center print:hidden"},V={class:"absolute inset-0 flex flex-col items-center justify-center text-black font-serif"},j={class:"absolute top-[42%] w-full text-center px-20"},k={class:"text-8xl font-bold text-gray-900 capitalize",style:{"font-family":"'Pinyon Script', cursive, serif"}},_={class:"absolute bottom-[18%] left-[15%] text-2xl font-bold text-gray-700"},D={class:"absolute bottom-[18%] right-[15%] text-2xl font-bold text-gray-700"},C={class:"absolute top-[25%] right-[15%] text-2xl font-bold text-gray-700"},N=a({__name:"CertificateGenerator",props:{modelValue:Boolean,student:Object,defaultDate:String},emits:["update:modelValue"],setup(a,{emit:N}){const P=t(),S=a,Q=N,U=f({get:()=>S.modelValue,set:e=>Q("update:modelValue",e)}),Y=m({academicYear:"2024-2025",week:"1",date:S.defaultDate||(new Date).toLocaleDateString()}),R=m(!1),F=m(null);async function G(){R.value=!0;try{const e=F.value;if(!e)throw new Error("Certificate element not found");const a=(await c(e,{scale:2,useCORS:!0,logging:!1})).toDataURL("image/png"),t=new u({orientation:"landscape",unit:"px",format:[1123,794]});t.addImage(a,"PNG",0,0,1123,794),t.save(`${S.student.firstName}_Certificate.pdf`),P.notify({message:"Certificate downloaded!",color:"positive"})}catch(e){console.error(e),P.notify({message:"Failed to generate PDF",color:"negative"})}finally{R.value=!1}}function I(){window.print()}return(t,c)=>(v(),p(n,{modelValue:U.value,"onUpdate:modelValue":c[3]||(c[3]=e=>U.value=e),maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:b(()=>[g(s,{class:"bg-gray-900 text-white flex flex-col print:bg-white print:text-black"},{default:b(()=>[g(d,{class:"bg-gray-800 p-4 print:hidden"},{default:b(()=>[c[4]||(c[4]=x("div",{class:"text-h6"},"ðŸŽ“ Certificate Generator",-1)),g(e),w(g(l,{dense:"",flat:"",icon:"close"},null,512),[[r]])]),_:1}),g(o,{class:"flex-1 flex flex-col items-center justify-center p-4 overflow-auto print:p-0 print:overflow-visible"},{default:b(()=>{var e,t;return[x("div",h,[g(i,{modelValue:Y.value.academicYear,"onUpdate:modelValue":c[0]||(c[0]=e=>Y.value.academicYear=e),label:"Academic Year",dark:"",outlined:"",dense:"",class:"w-40"},null,8,["modelValue"]),g(i,{modelValue:Y.value.week,"onUpdate:modelValue":c[1]||(c[1]=e=>Y.value.week=e),label:"Week Number",dark:"",outlined:"",dense:"",class:"w-40"},null,8,["modelValue"]),g(i,{modelValue:Y.value.date,"onUpdate:modelValue":c[2]||(c[2]=e=>Y.value.date=e),label:"Date",dark:"",outlined:"",dense:"",class:"w-40"},null,8,["modelValue"]),g(l,{color:"primary",icon:"download",label:"Download PDF",onClick:G,loading:R.value},null,8,["loading"]),g(l,{color:"secondary",icon:"print",label:"Print",onClick:I})]),x("div",{ref_key:"certificateRef",ref:F,class:"certificate-container relative shadow-2xl border-4 border-gray-700 overflow-hidden print:shadow-none print:border-0",style:{width:"100%",height:"100%"}},[c[5]||(c[5]=x("img",{src:"/images/certificate1.png",class:"absolute inset-0 w-full h-full object-cover"},null,-1)),x("div",V,[x("div",j,[x("h1",k,y(null==(e=a.student)?void 0:e.firstName)+" "+y(null==(t=a.student)?void 0:t.lastName),1)]),x("div",_,y(Y.value.academicYear),1),x("div",D,y(Y.value.date),1),x("div",C," Week: "+y(Y.value.week),1)])],512)]}),_:1})]),_:1})]),_:1},8,["modelValue"]))}},[["__scopeId","data-v-47d6bf4a"]]);export{N as default};
