import{c as e,f as a,d as l,aP as t,Q as s,m as i}from"./app-BB4Fw2oM.js";import{Q as o}from"./QSelect-BImwntZk.js";import{Q as u}from"./QDate-B2T8MIPr.js";import{Q as d}from"./QPopupProxy-vIS-EZda.js";import{Q as n}from"./QForm-zhfWFjRn.js";import{f as r,a as p,o as c,I as m,J as f,K as v,b as _,N as k,V as b,y as V}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./rtl-Cr6c3OOr.js";import"./use-render-cache-CmTcazfP.js";import"./use-datetime-scH7jWW4.js";import"./date-BcHEbKQH.js";const j={class:"text-h6"},y={class:"row items-center justify-end"},w={class:"row justify-end q-mt-md"},T={__name:"TaskForm",props:{task:{type:Object,required:!0},parentTasks:{type:Array,default:()=>[]},classifications:{type:Array,default:()=>[]}},emits:["save","cancel"],setup(T,{emit:Q}){const h=T,x=Q,D=r({id:h.task.id||null,title:h.task.title||"",description:h.task.description||"",parent_id:h.task.parent_id||null,classification:h.task.classification||null,due_date:h.task.due_date||null,completed_at:h.task.completed_at||null}),U=p(()=>h.parentTasks.filter(e=>{if(D.value.id===e.id)return!1;let a=e;for(;a.parent_id;){if(a.parent_id===D.value.id)return!1;const e=h.parentTasks.find(e=>e.id===a.parent_id);if(!e)break;a=e}return!0})),q=p(()=>[...new Set([...h.classifications,D.value.classification].filter(Boolean))]),P=()=>{x("save",{...D.value})};return c(()=>{D.value={id:h.task.id||null,title:h.task.title||"",description:h.task.description||"",parent_id:h.task.parent_id||null,classification:h.task.classification||null,due_date:h.task.due_date||null,completed_at:h.task.completed_at||null}}),(r,p)=>(f(),m(i,{style:{width:"500px","max-width":"80vw"}},{default:v(()=>[_(e,null,{default:v(()=>[k("div",j,b(T.task.id?"Edit Task":"New Task"),1)]),_:1}),_(e,null,{default:v(()=>[_(n,{onSubmit:P,class:"q-gutter-md"},{default:v(()=>[_(a,{modelValue:D.value.title,"onUpdate:modelValue":p[0]||(p[0]=e=>D.value.title=e),label:"Title *",rules:[e=>!!e||"Title is required"],autofocus:""},null,8,["modelValue","rules"]),_(a,{modelValue:D.value.description,"onUpdate:modelValue":p[1]||(p[1]=e=>D.value.description=e),label:"Description",type:"textarea",rows:"3"},null,8,["modelValue"]),_(o,{modelValue:D.value.parent_id,"onUpdate:modelValue":p[2]||(p[2]=e=>D.value.parent_id=e),options:U.value,label:"Parent Task","option-value":"id","option-label":"title","emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"]),_(o,{modelValue:D.value.classification,"onUpdate:modelValue":p[3]||(p[3]=e=>D.value.classification=e),options:q.value,label:"Classification","use-input":"","input-debounce":"0","new-value-mode":"add-unique",clearable:""},null,8,["modelValue","options"]),_(a,{modelValue:D.value.due_date,"onUpdate:modelValue":p[5]||(p[5]=e=>D.value.due_date=e),label:"Due Date",clearable:""},{append:v(()=>[_(l,{name:"event",class:"cursor-pointer"},{default:v(()=>[_(d,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:v(()=>[_(u,{modelValue:D.value.due_date,"onUpdate:modelValue":p[4]||(p[4]=e=>D.value.due_date=e),mask:"YYYY-MM-DD"},{default:v(()=>[k("div",y,[V(_(s,{label:"Close",color:"primary",flat:""},null,512),[[t]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),k("div",w,[V(_(s,{label:"Cancel",color:"grey-7",flat:"",onClick:p[6]||(p[6]=e=>r.$emit("cancel"))},null,512),[[t]]),_(s,{label:"Save",type:"submit",color:"primary"})])]),_:1})]),_:1})]),_:1}))}};export{T as default};
