import{r as e,Q as t,f as a,br as l,b as o,h as i,c as n,o as s,d}from"./app-NYt77MEb.js";import{f as r,a as u,k as m,o as p,e as v,I as c,J as g,K as b,b as S,R as y,W as f,N as T,O as V,V as x}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const h={class:"text-h6 flex items-center gap-2"},q={key:0,class:"q-mt-md q-ml-lg"},D={key:0,class:"q-gutter-sm"},_={key:1,class:"q-gutter-sm"},k={class:"text-caption text-grey-7"},w={class:"text-h6 text-positive"},C={key:1,class:"q-mt-md q-ml-lg q-gutter-sm"},I=e({__name:"PointsDisplaySettings",props:{mode:{type:String,default:"overall"},competitionStartTime:{type:String,default:null},dateFrom:{type:String,default:null},dateTo:{type:String,default:null},leaderboardMode:{type:String,default:"top5"}},emits:["update:mode","update:competitionStartTime","update:dateFrom","update:dateTo","update:leaderboardMode","apply","reset"],setup(e,{emit:I}){const M=e,$=I,j=r(M.mode),F=r(M.dateFrom),U=r(M.dateTo),O=r(M.leaderboardMode),R=r("00:00");let A=null;const L=[{label:"Overall Total (All Time)",value:"overall"},{label:"Current Session (Today)",value:"session"},{label:"Competition Mode",value:"competition"},{label:"Custom Date Range",value:"custom"}],N=[{label:"Top 5 Students",value:"top5"},{label:"Top 10 Students",value:"top10"},{label:"Winner Groups (by total points)",value:"groups"}],P=u(()=>"competition"===j.value&&M.competitionStartTime),W=e=>{if(!e)return"";return new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})},z=()=>{if(!M.competitionStartTime)return;const e=new Date(M.competitionStartTime),t=new Date,a=Math.floor((t-e)/1e3),l=Math.floor(a/60),o=a%60;R.value=`${String(l).padStart(2,"0")}:${String(o).padStart(2,"0")}`},E=()=>{const e=(new Date).toISOString();$("update:competitionStartTime",e),A=setInterval(z,1e3)},G=()=>{$("update:competitionStartTime",null),$("update:mode","overall"),j.value="overall",A&&(clearInterval(A),A=null),R.value="00:00"},J=()=>{$("reset")},K=()=>{$("apply")};return m(()=>M.competitionStartTime,e=>{e&&"competition"===j.value?(z(),A||(A=setInterval(z,1e3))):A&&(clearInterval(A),A=null)},{immediate:!0}),p(()=>{P.value&&(z(),A=setInterval(z,1e3))}),v(()=>{A&&clearInterval(A)}),(r,u)=>(g(),c(d,{class:"points-display-settings"},{default:b(()=>[S(a,{class:"bg-primary text-white"},{default:b(()=>[y("div",h,[S(t,{name:"tune"}),u[8]||(u[8]=f(" Points Display Settings "))])]),_:1}),S(a,{class:"q-gutter-md"},{default:b(()=>[y("div",null,[u[9]||(u[9]=y("div",{class:"text-subtitle2 text-weight-bold q-mb-sm"},"View Mode",-1)),S(l,{modelValue:j.value,"onUpdate:modelValue":[u[0]||(u[0]=e=>j.value=e),u[1]||(u[1]=e=>r.$emit("update:mode",e))],options:L,color:"primary"},null,8,["modelValue"]),"competition"===j.value?(g(),T("div",q,[P.value?(g(),T("div",_,[y("div",k," Started: "+x(W(e.competitionStartTime)),1),y("div",w," Timer: "+x(R.value),1),S(o,{color:"negative",icon:"stop",label:"End Competition",onClick:G,outline:"",size:"sm"})])):(g(),T("div",D,[S(o,{color:"positive",icon:"flag",label:"ðŸ Start Competition",onClick:E,unelevated:""})]))])):V("",!0),"custom"===j.value?(g(),T("div",C,[S(i,{modelValue:F.value,"onUpdate:modelValue":[u[2]||(u[2]=e=>F.value=e),u[3]||(u[3]=e=>r.$emit("update:dateFrom",e))],type:"date",label:"From Date *",dense:"",outlined:""},{prepend:b(()=>[S(t,{name:"event"})]),_:1},8,["modelValue"]),S(i,{modelValue:U.value,"onUpdate:modelValue":[u[4]||(u[4]=e=>U.value=e),u[5]||(u[5]=e=>r.$emit("update:dateTo",e))],type:"date",label:"To Date (optional - leave empty for 'till now')",dense:"",outlined:""},{prepend:b(()=>[S(t,{name:"event"})]),_:1},8,["modelValue"])])):V("",!0)]),S(n),y("div",null,[u[10]||(u[10]=y("div",{class:"text-subtitle2 text-weight-bold q-mb-sm"},"Leaderboard Display",-1)),S(l,{modelValue:O.value,"onUpdate:modelValue":[u[6]||(u[6]=e=>O.value=e),u[7]||(u[7]=e=>r.$emit("update:leaderboardMode",e))],options:N,color:"secondary"},null,8,["modelValue"])])]),_:1}),S(s,{align:"right"},{default:b(()=>[S(o,{flat:"",label:"Reset to Normal",color:"grey",onClick:J}),S(o,{unelevated:"",label:"Apply",color:"primary",onClick:K})]),_:1})]),_:1}))}},[["__scopeId","data-v-39e42180"]]);export{I as default};
