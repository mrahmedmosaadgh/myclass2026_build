import{r as a,Q as e}from"./app-DraepSDZ.js";import o from"./DrawingCanvas-CDVIyMJa.js";import r from"./DrawingToolbar-DgF_l5X9.js";import{f as l,a as n,N as s,J as t,b as u,K as i,O as v,W as p,V as d,B as g}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./QBtnToggle-BX1j-GCf.js";import"./QColor-BP49t1EZ.js";import"./QSlider-BjyDc8rZ.js";import"./QTabs-BgqCfsdX.js";import"./rtl-Cr6c3OOr.js";import"./QTab-BTRoGWkY.js";import"./QTabPanels-Dk5dhPlu.js";import"./use-panel-BIFIFpms.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-BcQ_0NuW.js";import"./QPopupProxy-Xrf1W99g.js";const c={class:"drawing-overlay-wrapper"},m={key:0,class:"drawing-mode-indicator"},w=a({__name:"DrawingOverlay",emits:["drawing-state-changed"],setup(a,{expose:w,emit:j}){const b=j,f=l(null),P=l(!1),k=l("pen"),Q=l("#FF0000"),y=l(3),T=l("transparent"),h=l(1),z=l(1),U=l(0),_=n(()=>{const a=window.location.pathname.match(/\/lesson-presentation\/student\/(\d+)/);return a?`drawing-lesson-${a[1]}`:"drawing-pages"}),C=()=>{P.value=!P.value,P.value||(T.value="transparent"),b("drawing-state-changed",P.value)},x=a=>{T.value=a},D=()=>{f.value&&f.value.undo()},N=()=>{U.value++},A=()=>{h.value>1&&h.value--},B=()=>{h.value++,f.value&&f.value.addNewPage(h.value),h.value>z.value&&(z.value=h.value)},M=()=>{z.value++,h.value=z.value,f.value&&f.value.addNewPage(h.value)},S=a=>{},F=a=>{a>z.value&&(z.value=a)};return w({toggleDrawing:C,isActive:P}),(a,l)=>(t(),s("div",c,[u(o,{ref_key:"canvasRef",ref:f,"is-active":P.value,"drawing-tool":k.value,"pen-color":Q.value,"pen-size":y.value,"background-color":T.value,"current-page":h.value,"clear-trigger":U.value,"storage-key":_.value,onStrokesUpdated:S,onPagesUpdated:F,onPageBackgroundChanged:x},null,8,["is-active","drawing-tool","pen-color","pen-size","background-color","current-page","clear-trigger","storage-key"]),u(r,{"is-active":P.value,"drawing-tool":k.value,"onUpdate:drawingTool":l[0]||(l[0]=a=>k.value=a),"pen-color":Q.value,"onUpdate:penColor":l[1]||(l[1]=a=>Q.value=a),"pen-size":y.value,"onUpdate:penSize":l[2]||(l[2]=a=>y.value=a),"background-color":T.value,"onUpdate:backgroundColor":l[3]||(l[3]=a=>T.value=a),"current-page":h.value,"total-pages":z.value,onToggle:C,onUndo:D,onClear:N,onPrevPage:A,onNextPage:B,onAddPage:M},null,8,["is-active","drawing-tool","pen-color","pen-size","background-color","current-page","total-pages"]),u(g,{name:"fade"},{default:i(()=>[P.value?(t(),s("div",m,[u(e,{name:"pen"===k.value?"brush":"cleaning_services",size:"sm",class:"q-mr-xs"},null,8,["name"]),p(" "+d("pen"===k.value?"Drawing Mode":"Eraser Mode")+" - Page "+d(h.value),1)])):v("",!0)]),_:1})]))}},[["__scopeId","data-v-61825dae"]]);export{w as default};
