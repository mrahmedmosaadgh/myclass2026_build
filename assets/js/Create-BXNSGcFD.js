import{d as e,o as a,g as l,i as t,j as s,A as o,k as r,Q as u,n}from"./app-DXXarK7I.js";import{Q as i}from"./QSelect-OI6RFhnT.js";import{Q as d}from"./QForm-BR4sPudX.js";import{f as p,H as m,I as v,J as c,M as f,b,L as g,O as _,ad as y,ae as j,V as x,U as h,y as C,_ as V}from"./vendor-EI0FRBVb.js";import{_ as w}from"./AppLayout-CE2yjlSr.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./rtl-Cr6c3OOr.js";const U={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},A={key:0},Q={class:"flex justify-end q-mt-lg"},S={__name:"Create",props:{users:{type:Array,default:()=>[]}},setup(S){const N=window.route,P=p(!1),k=p(""),F=p([]),G=p(!1),L=e=>{if(!e)return"primary";const a=["primary","secondary","accent","positive","negative","info","warning"];return a[e.split("").reduce((e,a)=>e+a.charCodeAt(0),0)%a.length]},M=()=>{G.value=!0;const e=P.value?F.value.map(e=>e.id):[F.value.id];V.post(N("conversations.store"),{user_ids:e,name:P.value?k.value:null},{onFinish:()=>{G.value=!1}})};return(p,V)=>(v(),m(w,{title:"New Conversation"},{header:c(()=>V[3]||(V[3]=[f("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," New Conversation ",-1)])),default:c(()=>[f("div",U,[f("div",q,[b(n,{flat:"",bordered:""},{default:c(()=>[b(e,null,{default:c(()=>[V[4]||(V[4]=f("div",{class:"text-h5 q-mb-md"},"Start a New Conversation",-1)),b(d,{onSubmit:M,class:"q-gutter-md"},{default:c(()=>[f("div",null,[b(a,{modelValue:P.value,"onUpdate:modelValue":V[0]||(V[0]=e=>P.value=e),label:"Create a group chat",color:"primary"},null,8,["modelValue"])]),P.value?(v(),g("div",A,[b(l,{modelValue:k.value,"onUpdate:modelValue":V[1]||(V[1]=e=>k.value=e),label:"Group Name",rules:[e=>!!e||"Group name is required"]},null,8,["modelValue","rules"])])):_("",!0),f("div",null,[b(i,{modelValue:F.value,"onUpdate:modelValue":V[2]||(V[2]=e=>F.value=e),options:S.users,"option-label":"name","option-value":e=>e.id,label:P.value?"Add Participants":"Select User",multiple:P.value,"use-chips":"",rules:[e=>e.length>0||"Please select at least one user"]},{option:c(e=>[b(t,y(j(e.itemProps)),{default:c(()=>[b(s,{avatar:""},{default:c(()=>[b(o,{color:L(e.opt.name)},{default:c(()=>{return[x(h((a=e.opt.name,a?a.split(" ").map(e=>e[0]).join("").toUpperCase():"?")),1)];var a}),_:2},1032,["color"])]),_:2},1024),b(s,null,{default:c(()=>[b(r,null,{default:c(()=>[x(h(e.opt.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options","option-value","label","multiple","rules"])]),f("div",Q,[b(u,{flat:"",color:"negative",label:"Cancel",to:C(N)("conversations.index"),class:"q-mr-sm"},null,8,["to"]),b(u,{type:"submit",color:"primary",label:"Create Conversation",loading:G.value},null,8,["loading"])])]),_:1})]),_:1})]),_:1})])])]),_:1}))}};export{S as default};
