import{c as e,f as a,d as l,aP as t,Q as s,m as i}from"./app-CqJgtQaN.js";import{Q as o}from"./QSelect-DIrzf0A1.js";import{Q as u}from"./QDate-Ba4RCp42.js";import{Q as d}from"./QPopupProxy-Blg_zONg.js";import{Q as n}from"./QForm-B30T44oJ.js";import{f as r,a as p,o as c,I as m,J as f,K as v,b as _,N as k,V as b,y as V}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./rtl-Cr6c3OOr.js";import"./use-render-cache-CmTcazfP.js";import"./use-datetime-C49MdXhF.js";import"./date-Caiy_slx.js";const j={class:"text-h6"},y={class:"row items-center justify-end"},w={class:"row justify-end q-mt-md"},Q={__name:"TaskForm",props:{task:{type:Object,required:!0},parentTasks:{type:Array,default:()=>[]},classifications:{type:Array,default:()=>[]}},emits:["save","cancel"],setup(Q,{emit:T}){const U=Q,h=T,x=r({id:U.task.id||null,title:U.task.title||"",description:U.task.description||"",parent_id:U.task.parent_id||null,classification:U.task.classification||null,due_date:U.task.due_date||null,completed_at:U.task.completed_at||null}),D=p(()=>U.parentTasks.filter(e=>{if(x.value.id===e.id)return!1;let a=e;for(;a.parent_id;){if(a.parent_id===x.value.id)return!1;const e=U.parentTasks.find(e=>e.id===a.parent_id);if(!e)break;a=e}return!0})),q=p(()=>[...new Set([...U.classifications,x.value.classification].filter(Boolean))]),C=()=>{h("save",{...x.value})};return c(()=>{x.value={id:U.task.id||null,title:U.task.title||"",description:U.task.description||"",parent_id:U.task.parent_id||null,classification:U.task.classification||null,due_date:U.task.due_date||null,completed_at:U.task.completed_at||null}}),(r,p)=>(f(),m(i,{style:{width:"500px","max-width":"80vw"}},{default:v(()=>[_(e,null,{default:v(()=>[k("div",j,b(Q.task.id?"Edit Task":"New Task"),1)]),_:1}),_(e,null,{default:v(()=>[_(n,{onSubmit:C,class:"q-gutter-md"},{default:v(()=>[_(a,{modelValue:x.value.title,"onUpdate:modelValue":p[0]||(p[0]=e=>x.value.title=e),label:"Title *",rules:[e=>!!e||"Title is required"],autofocus:""},null,8,["modelValue","rules"]),_(a,{modelValue:x.value.description,"onUpdate:modelValue":p[1]||(p[1]=e=>x.value.description=e),label:"Description",type:"textarea",rows:"3"},null,8,["modelValue"]),_(o,{modelValue:x.value.parent_id,"onUpdate:modelValue":p[2]||(p[2]=e=>x.value.parent_id=e),options:D.value,label:"Parent Task","option-value":"id","option-label":"title","emit-value":"","map-options":"",clearable:""},null,8,["modelValue","options"]),_(o,{modelValue:x.value.classification,"onUpdate:modelValue":p[3]||(p[3]=e=>x.value.classification=e),options:q.value,label:"Classification","use-input":"","input-debounce":"0","new-value-mode":"add-unique",clearable:""},null,8,["modelValue","options"]),_(a,{modelValue:x.value.due_date,"onUpdate:modelValue":p[5]||(p[5]=e=>x.value.due_date=e),label:"Due Date",clearable:""},{append:v(()=>[_(l,{name:"event",class:"cursor-pointer"},{default:v(()=>[_(d,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:v(()=>[_(u,{modelValue:x.value.due_date,"onUpdate:modelValue":p[4]||(p[4]=e=>x.value.due_date=e),mask:"YYYY-MM-DD"},{default:v(()=>[k("div",y,[V(_(s,{label:"Close",color:"primary",flat:""},null,512),[[t]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),k("div",w,[V(_(s,{label:"Cancel",color:"grey-7",flat:"",onClick:p[6]||(p[6]=e=>r.$emit("cancel"))},null,512),[[t]]),_(s,{label:"Save",type:"submit",color:"primary"})])]),_:1})]),_:1})]),_:1}))}};export{Q as default};
