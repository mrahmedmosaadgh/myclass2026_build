import{I as e,J as s,K as t,O as a,L as o,a7 as l,f as i,N as n,b as r,Q as c,z as m,W as u,U as d,F as p,R as f,V as v}from"./vendor-BJyC5yAd.js";import{_ as k}from"./ActionMessage-BRwqJB-X.js";import{_ as g}from"./ActionSection-CHpLHpVH.js";import{_ as y}from"./Checkbox-DPu7Yv1v.js";import{M as x}from"./Modal-CxCPTite.js";import{D as h}from"./DangerButton-CicDUfIl.js";import{_ as b}from"./DialogModal-YjHwUT4a.js";import{_}from"./FormSection-B4hrWrNU.js";import{_ as w}from"./InputError-mw4fhWLc.js";import{_ as j}from"./InputLabel-DkPgZLNs.js";import{_ as C}from"./PrimaryButton-VxYbFNzZ.js";import{_ as P}from"./SecondaryButton-C4Qwh3yJ.js";import{S}from"./SectionBorder-5sGG6ns-.js";import{_ as A}from"./TextInput-B_qVVLq5.js";import"./SectionTitle-CyewrpaR.js";import"./app-DTyzyps1.js";import"./offline-BzIlwqNM.js";import"./i18n-BDgsCcB6.js";import"./ui-DFn3cvMd.js";const I={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},M={class:"sm:flex sm:items-start"},T={class:"mt-3 text-center sm:mt-0 sm:ms-4 sm:text-start"},B={class:"text-lg font-medium text-gray-900"},z={class:"mt-4 text-sm text-gray-600"},D={class:"flex flex-row justify-end px-6 py-4 bg-gray-100 text-end"},L={__name:"ConfirmationModal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0}},emits:["close"],setup(l,{emit:i}){const n=i,r=()=>{n("close")};return(i,n)=>(s(),e(x,{show:l.show,"max-width":l.maxWidth,closeable:l.closeable,onClose:r},{default:t(()=>[a("div",I,[a("div",M,[n[0]||(n[0]=a("div",{class:"mx-auto shrink-0 flex items-center justify-center size-12 rounded-full bg-red-100 sm:mx-0 sm:size-10"},[a("svg",{class:"size-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})])],-1)),a("div",T,[a("h3",B,[o(i.$slots,"title")]),a("div",z,[o(i.$slots,"content")])])])]),a("div",D,[o(i.$slots,"footer")])]),_:3},8,["show","max-width","closeable"]))}},$={class:"col-span-6 sm:col-span-4"},U={key:0,class:"col-span-6"},V={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},F={class:"flex items-center"},W={class:"ms-2 text-sm text-gray-600"},N={key:0},q={class:"mt-10 sm:mt-0"},E={class:"space-y-6"},H={class:"break-all"},J={class:"flex items-center ms-2"},K={key:0,class:"text-sm text-gray-400"},O=["onClick"],Q=["onClick"],R={key:0,class:"mt-4 bg-gray-100 px-4 py-2 rounded font-mono text-sm text-gray-500 break-all"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},G={class:"flex items-center"},X={class:"ms-2 text-sm text-gray-600"},Z={__name:"ApiTokenManager",props:{tokens:Array,availablePermissions:Array,defaultPermissions:Array},setup(e){const o=l({name:"",permissions:e.defaultPermissions}),x=l({permissions:[]}),I=l({}),M=i(!1),T=i(null),B=i(null),z=()=>{o.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{M.value=!0,o.reset()}})},D=()=>{x.put(route("api-tokens.update",T.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>T.value=null})},Z=()=>{I.delete(route("api-tokens.destroy",B.value),{preserveScroll:!0,preserveState:!0,onSuccess:()=>B.value=null})};return(l,i)=>(s(),n("div",null,[r(_,{onSubmitted:z},{title:t(()=>i[9]||(i[9]=[u(" Create API Token ")])),description:t(()=>i[10]||(i[10]=[u(" API tokens allow third-party services to authenticate with our application on your behalf. ")])),form:t(()=>[a("div",$,[r(j,{for:"name",value:"Name"}),r(A,{id:"name",modelValue:m(o).name,"onUpdate:modelValue":i[0]||(i[0]=e=>m(o).name=e),type:"text",class:"mt-1 block w-full",autofocus:""},null,8,["modelValue"]),r(w,{message:m(o).errors.name,class:"mt-2"},null,8,["message"])]),e.availablePermissions.length>0?(s(),n("div",U,[r(j,{for:"permissions",value:"Permissions"}),a("div",V,[(s(!0),n(p,null,f(e.availablePermissions,e=>(s(),n("div",{key:e},[a("label",F,[r(y,{checked:m(o).permissions,"onUpdate:checked":i[1]||(i[1]=e=>m(o).permissions=e),value:e},null,8,["checked","value"]),a("span",W,v(e),1)])]))),128))])])):c("",!0)]),actions:t(()=>[r(k,{on:m(o).recentlySuccessful,class:"me-3"},{default:t(()=>i[11]||(i[11]=[u(" Created. ")])),_:1},8,["on"]),r(C,{class:d({"opacity-25":m(o).processing}),disabled:m(o).processing},{default:t(()=>i[12]||(i[12]=[u(" Create ")])),_:1},8,["class","disabled"])]),_:1}),e.tokens.length>0?(s(),n("div",N,[r(S),a("div",q,[r(g,null,{title:t(()=>i[13]||(i[13]=[u(" Manage API Tokens ")])),description:t(()=>i[14]||(i[14]=[u(" You may delete any of your existing tokens if they are no longer needed. ")])),content:t(()=>[a("div",E,[(s(!0),n(p,null,f(e.tokens,t=>(s(),n("div",{key:t.id,class:"flex items-center justify-between"},[a("div",H,v(t.name),1),a("div",J,[t.last_used_ago?(s(),n("div",K," Last used "+v(t.last_used_ago),1)):c("",!0),e.availablePermissions.length>0?(s(),n("button",{key:1,class:"cursor-pointer ms-6 text-sm text-gray-400 underline",onClick:e=>(e=>{x.permissions=e.abilities,T.value=e})(t)}," Permissions ",8,O)):c("",!0),a("button",{class:"cursor-pointer ms-6 text-sm text-red-500",onClick:e=>(e=>{B.value=e})(t)}," Delete ",8,Q)])]))),128))])]),_:1})])])):c("",!0),r(b,{show:M.value,onClose:i[3]||(i[3]=e=>M.value=!1)},{title:t(()=>i[15]||(i[15]=[u(" API Token ")])),content:t(()=>[i[16]||(i[16]=a("div",null," Please copy your new API token. For your security, it won't be shown again. ",-1)),l.$page.props.jetstream.flash.token?(s(),n("div",R,v(l.$page.props.jetstream.flash.token),1)):c("",!0)]),footer:t(()=>[r(P,{onClick:i[2]||(i[2]=e=>M.value=!1)},{default:t(()=>i[17]||(i[17]=[u(" Close ")])),_:1})]),_:1},8,["show"]),r(b,{show:null!=T.value,onClose:i[6]||(i[6]=e=>T.value=null)},{title:t(()=>i[18]||(i[18]=[u(" API Token Permissions ")])),content:t(()=>[a("div",Y,[(s(!0),n(p,null,f(e.availablePermissions,e=>(s(),n("div",{key:e},[a("label",G,[r(y,{checked:m(x).permissions,"onUpdate:checked":i[4]||(i[4]=e=>m(x).permissions=e),value:e},null,8,["checked","value"]),a("span",X,v(e),1)])]))),128))])]),footer:t(()=>[r(P,{onClick:i[5]||(i[5]=e=>T.value=null)},{default:t(()=>i[19]||(i[19]=[u(" Cancel ")])),_:1}),r(C,{class:d(["ms-3",{"opacity-25":m(x).processing}]),disabled:m(x).processing,onClick:D},{default:t(()=>i[20]||(i[20]=[u(" Save ")])),_:1},8,["class","disabled"])]),_:1},8,["show"]),r(L,{show:null!=B.value,onClose:i[8]||(i[8]=e=>B.value=null)},{title:t(()=>i[21]||(i[21]=[u(" Delete API Token ")])),content:t(()=>i[22]||(i[22]=[u(" Are you sure you would like to delete this API token? ")])),footer:t(()=>[r(P,{onClick:i[7]||(i[7]=e=>B.value=null)},{default:t(()=>i[23]||(i[23]=[u(" Cancel ")])),_:1}),r(h,{class:d(["ms-3",{"opacity-25":m(I).processing}]),disabled:m(I).processing,onClick:Z},{default:t(()=>i[24]||(i[24]=[u(" Delete ")])),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{Z as default};
