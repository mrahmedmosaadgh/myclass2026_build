import{p as e,u as a,Q as t,n as s,d as l,m as r,aD as o,b as i,f as d,e as c,o as n,a as m}from"./app-BzjXrVp9.js";import{Q as u}from"./QBadge-D2ciqrkO.js";import{f as p,L as v,I as x,b,M as g,y as f,a3 as y,H as h,J as w,x as _,V as q,F as j,Q as k,O as C,U as Q,Z as S,_ as I}from"./vendor-EI0FRBVb.js";import V from"./YearForm-BZ1fY0aV.js";import T from"./SemesterCard-DlPaeJ-X.js";import E from"./MissingDaysList-BlD13imA.js";import A from"./CalendarPreview-B2WH_asS.js";import{E as Y}from"./ExcelManager-CFkRbW8N.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./QSpace-qzKo_-If.js";import"./QForm-qY0qTz8Q.js";import"./QSpinnerGears-C1-Bwr7o.js";import"./QTab-Cx9aTRVb.js";import"./QTabs-BwLFzVWR.js";import"./rtl-Cr6c3OOr.js";import"./QTabPanel-BWvsj8on.js";import"./use-panel-DdQZ_Vdk.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanels-C2OMgZHe.js";import"./QFile-B8nEG4QC.js";import"./use-file-C1yaxB6a.js";import"./QTable-BcXT6C-J.js";import"./QMarkupTable-_1wJRVO3.js";import"./QSelect-CciNNEfD.js";import"./QLinearProgress-L5RdawR6.js";import"./use-fullscreen-BnDnBhbA.js";import"./QTr-BlCWrkqo.js";import"./xlsx-cMC2LkxH.js";const z={class:"q-pa-lg"},U={class:"q-mb-xl"},M={class:"row items-center q-mb-sm"},D={class:"col-auto"},P={class:"row q-gutter-sm"},F={class:"q-mb-md"},N={key:0,class:"q-gutter-y-xl"},L={class:"row items-end justify-between q-mb-lg"},O={class:"col"},W={class:"row items-center q-mb-sm q-gutter-sm"},J={class:"text-h4 text-weight-black q-ma-none q-mb-sm"},R={class:"row items-center q-gutter-md text-grey-7"},$={class:"row items-center q-gutter-xs"},H={class:"text-weight-bold"},B={class:"row items-center q-gutter-xs"},G={class:"text-weight-bold"},K={class:"col-auto"},Z={class:"row q-gutter-md"},X={class:"text-h4 text-weight-black"},ee={class:"text-h4 text-weight-black"},ae={class:"row q-col-gutter-md q-mb-lg"},te={class:"col"},se={class:"text-subtitle2 text-blue-2"},le=e({__name:"Index",props:{academicYears:Array},setup(e){const le=a(),re=p(!1),oe=p(!1),ie=p([{date:"2025-09-01",semester:1,status:1,status_label:"Work Day",week_number:1,event:"",notes:""},{date:"2025-09-02",semester:1,status:1,status_label:"Work Day",week_number:1,event:"",notes:""},{date:"2025-09-03",semester:1,status:0,status_label:"Day Off",week_number:1,event:"Weekend",notes:""}]),de=e=>e.semesters.reduce((e,a)=>e+a.calendar_count,0),ce=p(!1),ne=p(null),me=()=>{ce.value=!1,ne.value=null},ue=async e=>{var a,t,s,l;try{const s=(await S.post(route("admin.academic_calendar.import"),{data:e})).data.results,l=(null==(a=s.success)?void 0:a.length)||0,r=(null==(t=s.errors)?void 0:t.length)||0;l>0&&le.notify({message:`Successfully imported ${l} calendar records.`,color:"positive",position:"top"}),r>0&&(le.notify({message:`${r} errors occurred during import. Check console for details.`,color:"warning",position:"top"}),console.log("Import errors:",s.errors)),I.reload({preserveScroll:!0})}catch(r){le.notify({message:"Import failed: "+((null==(l=null==(s=r.response)?void 0:s.data)?void 0:l.message)||r.message),color:"negative",position:"top"})}},pe=e=>{le.notify({message:"Calendar data exported successfully!",color:"positive",position:"top"})};return(a,p)=>(x(),v(j,null,[b(f(y),{title:"Academic Calendar Management"}),g("div",z,[g("div",U,[g("div",M,[p[6]||(p[6]=g("div",{class:"col-auto"},[g("div",{style:{width:"6px",height:"40px",background:"#1976d2","border-radius":"3px"},class:"q-mr-md"})],-1)),p[7]||(p[7]=g("div",{class:"col"},[g("h1",{class:"text-h3 text-weight-bold q-ma-none"},"Academic Calendar")],-1)),g("div",D,[g("div",P,[b(t,{color:"primary",icon:"add",label:"New Academic Year",onClick:p[0]||(p[0]=e=>re.value=!0),unelevated:"",size:"md"}),b(t,{color:"secondary",icon:"import_export",label:"Import/Export",onClick:p[1]||(p[1]=e=>oe.value=!0),unelevated:"",size:"md"})])])]),p[8]||(p[8]=g("p",{class:"text-grey-7 text-weight-medium q-ma-none"},"Manage academic years, semesters, and daily calendar records with precision.",-1))]),b(i,{modelValue:re.value,"onUpdate:modelValue":p[3]||(p[3]=e=>re.value=e),persistent:""},{default:w(()=>[b(s,{style:{"min-width":"600px"}},{default:w(()=>[b(l,{class:"bg-primary text-white"},{default:w(()=>p[9]||(p[9]=[g("div",{class:"text-h6"},"Create New Academic Year",-1)])),_:1}),b(l,null,{default:w(()=>[b(V,{onCreated:p[2]||(p[2]=e=>re.value=!1)})]),_:1}),b(r,{align:"right"},{default:w(()=>[_(b(t,{flat:"",label:"Close",color:"primary"},null,512),[[o]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),b(i,{modelValue:oe.value,"onUpdate:modelValue":p[4]||(p[4]=e=>oe.value=e),maximized:""},{default:w(()=>[b(s,null,{default:w(()=>[b(l,{class:"bg-secondary text-white row items-center"},{default:w(()=>[p[10]||(p[10]=g("div",{class:"col"},[g("div",{class:"text-h6"},"Import/Export Calendar Data"),g("div",{class:"text-caption"},"Upload Excel files to bulk import calendar records or export existing data")],-1)),_(b(t,{flat:"",round:"",dense:"",icon:"close"},null,512),[[o]])]),_:1}),b(l,{class:"q-pa-lg"},{default:w(()=>[g("div",F,[b(d,{class:"bg-blue-1 text-blue-9 rounded-borders"},{avatar:w(()=>[b(c,{name:"info",color:"blue-9"})]),default:w(()=>[p[11]||(p[11]=g("strong",null,"Semester Column:",-1)),p[12]||(p[12]=q(' Use semester numbers only (1, 2, 3, 4) instead of "Semester 1", "Semester 2", etc. '))]),_:1})]),b(Y,{"export-data":ie.value,"export-file-name":"calendar_data.xlsx","initial-tab":"import",onImportedJson:ue,onExported:pe},null,8,["export-data"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e.academicYears.length>0?(x(),v("div",N,[(x(!0),v(j,null,k(e.academicYears,a=>(x(),v("div",{key:a.id},[b(s,{flat:"",bordered:"",class:"q-pa-md q-mb-lg"},{default:w(()=>[g("div",L,[g("div",O,[g("div",W,[b(n,{"model-value":a.active,"onUpdate:modelValue":e=>(e=>{I.put(route("admin.academic_calendar.year.toggle",e.id),{},{preserveScroll:!0})})(a),color:"primary",size:"lg","checked-icon":"check","unchecked-icon":"clear"},null,8,["model-value","onUpdate:modelValue"]),b(u,{color:a.active?"primary":"grey-5","text-color":a.active?"white":"grey-8",class:"text-weight-bold"},{default:w(()=>[q(Q(a.active?"âœ“ ACTIVE":"INACTIVE")+" YEAR ",1)]),_:2},1032,["color","text-color"])]),g("h2",J,Q(a.name),1),g("div",R,[g("div",$,[b(c,{name:"event",size:"sm"}),g("span",H,Q(a.start_date.split("T")[0]),1)]),b(c,{name:"arrow_forward",size:"xs"}),g("div",B,[g("span",G,Q(a.end_date.split("T")[0]),1)])])]),g("div",K,[g("div",Z,[b(s,{flat:"",bordered:"",class:"q-pa-md text-center",style:{"min-width":"120px"}},{default:w(()=>[p[13]||(p[13]=g("div",{class:"text-caption text-grey-6 text-weight-bold"},"SEMESTERS",-1)),g("div",X,Q(a.semesters.length),1)]),_:2},1024),b(s,{flat:"",bordered:"",class:"q-pa-md text-center",style:{"min-width":"120px"}},{default:w(()=>[p[14]||(p[14]=g("div",{class:"text-caption text-grey-6 text-weight-bold"},"TOTAL DAYS",-1)),g("div",ee,Q(de(a)),1)]),_:2},1024),b(t,{onClick:e=>(e=>{ne.value=e,ce.value=!0})(a),color:"primary",unelevated:"",icon:"visibility",label:"Preview Calendar",class:"text-weight-bold",size:"md"},null,8,["onClick"])])])])]),_:2},1024),g("div",ae,[(x(!0),v(j,null,k(a.semesters,e=>(x(),v("div",{key:e.id,class:"col-12 col-md-6 col-xl-3"},[b(T,{semester:e},null,8,["semester"])]))),128))]),b(E,{yearId:a.id},null,8,["yearId"]),e.academicYears.length>1?(x(),h(m,{key:0,class:"q-my-xl"})):C("",!0)]))),128))])):(x(),h(s,{key:1,flat:"",bordered:"",class:"q-pa-xl text-center"},{default:w(()=>[b(c,{name:"event",size:"80px",color:"grey-4",class:"q-mb-md"}),p[15]||(p[15]=g("h3",{class:"text-h5 text-weight-black q-mb-sm"},"No Academic Years Found",-1)),p[16]||(p[16]=g("p",{class:"text-grey-6 text-weight-medium q-mb-lg",style:{"max-width":"500px","margin-left":"auto","margin-right":"auto"}}," Start by creating an academic year. We'll automatically generate the standard four semesters for you. ",-1))]),_:1})),b(i,{modelValue:ce.value,"onUpdate:modelValue":p[5]||(p[5]=e=>ce.value=e),maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:w(()=>[b(s,null,{default:w(()=>[b(l,{class:"bg-primary text-white row items-center q-pb-md"},{default:w(()=>{var e;return[g("div",te,[p[17]||(p[17]=g("div",{class:"text-h5 text-weight-bold"},"Calendar Preview",-1)),g("div",se,Q(null==(e=ne.value)?void 0:e.name),1)]),b(t,{flat:"",round:"",dense:"",icon:"close",onClick:me})]}),_:1}),b(l,{class:"q-pa-lg",style:{"max-height":"calc(100vh - 100px)","overflow-y":"auto"}},{default:w(()=>[ne.value?(x(),h(A,{key:0,yearId:ne.value.id},null,8,["yearId"])):C("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}},[["__scopeId","data-v-2a8bc127"]]);export{le as default};
