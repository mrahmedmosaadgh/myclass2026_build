import{Q as e}from"./QSpace-1qvgFvrB.js";import{f as l,d as a,Q as s}from"./app-CqJgtQaN.js";import{Q as o}from"./QTd-ByoVTzgk.js";import{Q as t}from"./QTable-BsElv-Vz.js";import{f as r,a as d,k as u,M as i,J as c,b as n,N as m,K as p,I as v,F as f,W as b,V as w,R as j,a2 as y}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./QMarkupTable-zlNNuWrg.js";import"./QSelect-DIrzf0A1.js";import"./rtl-Cr6c3OOr.js";import"./QLinearProgress-YbspEMZC.js";import"./use-fullscreen-Dd3XWOIZ.js";const V={class:"q-pa-md"},g={class:"q-table__title"},Q={class:"q-mt-md row q-col-gutter-sm items-center"},k={class:"col-12 col-sm-auto"},q={class:"q-mt-md"},S={__name:"1 copy",props:{rows:{type:Array,required:!0,default:()=>[]},columns:{type:Array,required:!0,default:()=>[]},title:{type:String,default:"Array Editor"}},emits:["update:rows"],setup(S,{emit:_}){const U=S,h=_,A=r([...U.rows]),T=r([...U.columns]),C=r([]),P=r(""),x=r({rowsPerPage:10,page:1}),D=r({}),I=()=>{D.value=T.value.reduce((e,l)=>("id"!==l.field&&(e[l.field]=""),e),{})};I();const K=d(()=>Object.values(D.value).some(e=>""!==e));u(()=>U.rows,e=>{A.value=[...e]},{deep:!0});const M=()=>{if(!K.value)return;const e={id:Date.now().toString(),...D.value};A.value.push(e),h("update:rows",A.value),I()},O=()=>{const e=C.value.map(e=>e.id);A.value=A.value.filter(l=>!e.includes(l.id)),C.value=[],h("update:rows",A.value)},R=()=>{A.value=[...U.rows],C.value=[],P.value="",h("update:rows",A.value)};return(r,d)=>(c(),i("div",V,[n(t,{rows:A.value,columns:T.value,"row-key":"id",filter:P.value,pagination:x.value,selection:"multiple",selected:C.value,"onUpdate:selected":d[1]||(d[1]=e=>C.value=e)},{top:p(()=>[m("div",g,w(S.title),1),n(e),n(l,{modelValue:P.value,"onUpdate:modelValue":d[0]||(d[0]=e=>P.value=e),dense:"",placeholder:"Search",class:"q-ml-md"},{append:p(()=>[n(a,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell":p(e=>[n(o,{props:e},{default:p(()=>[e.col.editable?(c(),v(l,{key:0,modelValue:e.row[e.col.field],"onUpdate:modelValue":[l=>e.row[e.col.field]=l,l=>(e=>{const l=A.value.findIndex(l=>l.id===e.id);-1!==l&&(A.value[l]={...e},h("update:rows",A.value))})(e.row)],dense:"",autofocus:""},null,8,["modelValue","onUpdate:modelValue"])):(c(),i(f,{key:1},[b(w(e.row[e.col.field]),1)],64))]),_:2},1032,["props"])]),_:1},8,["rows","columns","filter","pagination","selected"]),m("div",Q,[(c(!0),i(f,null,j(T.value.filter(e=>"id"!==e.field),e=>(c(),i("div",{key:e.field,class:"col-12 col-sm-3"},[n(l,{modelValue:D.value[e.field],"onUpdate:modelValue":l=>D.value[e.field]=l,label:e.label,dense:"",onKeyup:y(M,["enter"])},null,8,["modelValue","onUpdate:modelValue","label"])]))),128)),m("div",k,[n(s,{label:"Add",color:"primary",onClick:M,disable:!K.value},null,8,["disable"])])]),m("div",q,[n(s,{label:"Delete Selected",color:"negative",onClick:O,disable:!C.value.length,class:"q-mr-sm"},null,8,["disable"]),n(s,{label:"Reset",color:"warning",onClick:R,flat:""})])]))}};export{S as default};
