import{f as e,o as t,e as r,a as s,L as n,I as a,M as l,O as i,U as o,S as d,V as u,F as c,Q as b,am as g}from"./vendor-DNM7Y6Xn.js";const p={class:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm relative overflow-hidden"},m={class:"flex justify-between items-start mb-4"},f=["innerHTML"],y={class:"flex flex-col items-end gap-2"},x={class:"text-xs font-medium px-2.5 py-0.5 rounded bg-blue-100 text-blue-800"},v={key:1,class:"text-xs text-gray-500"},w={class:"space-y-3"},h={key:0,class:"space-y-2"},k=["onClick"],_=["innerHTML"],q={key:0,class:"fas fa-check-circle text-blue-500"},A={key:1,class:"space-y-2"},C=["onClick"],T={key:0,class:"fas fa-check text-white text-xs"},L=["innerHTML"],j={key:2,class:"flex gap-4"},I={key:3,class:"space-y-2"},M=["value","disabled"],H={key:4,class:"space-y-2"},S=["value","disabled"],B={class:"mt-6 pt-4 border-t border-gray-100"},F={key:0},N=["disabled"],O={key:1},Q={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3"},U={key:1},G={key:0,class:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-3"},P={class:"flex items-center gap-3 mb-2"},V={class:"text-sm text-orange-700"},Y={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},z={class:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200"},D=["innerHTML"],E={__name:"StudentQuestionCard",props:{question:{type:Object,required:!0},answer:{type:[String,Number,Array,Boolean],default:null},attempts:{type:Number,default:0},solved:{type:Boolean,default:!1},submitted:{type:Boolean,default:!1}},emits:["update:answer","update:attempts","update:solved","update:submitted"],setup(E,{emit:J}){const K=E,R=J,W=e(K.question.timer||0);let X=null;t(()=>{K.question.timer>0&&!K.solved&&(X=setInterval(()=>{W.value>0?W.value--:clearInterval(X)},1e3))}),r(()=>{X&&clearInterval(X)});const Z=e=>{R("update:answer",e)},$=e=>Array.isArray(K.answer)?K.answer.includes(e):K.answer===e,ee=s(()=>Array.isArray(K.answer)?K.answer.length>0:null!==K.answer&&void 0!==K.answer&&""!==K.answer),te=()=>{const e=K.question,t=K.answer;if(null==t)return!1;if("single_choice"===e.type){const r=e.options.find(e=>e.is_correct);return r&&t===r.id}if("multiple_choice"===e.type){const r=e.options.filter(e=>e.is_correct).map(e=>e.id);return!(!Array.isArray(t)||t.length!==r.length)&&t.every(e=>r.includes(e))}return"true_false"===e.type?t===(!0===e.correct_answer||"true"===e.correct_answer||1===e.correct_answer):!!["short_answer","number"].includes(e.type)&&String(t).trim().toLowerCase()===String(e.correct_answer).trim().toLowerCase()},re=s(()=>te()),se=s(()=>{var e;const t=K.question;return"single_choice"===t.type?(null==(e=t.options.find(e=>e.is_correct))?void 0:e.text)||"Unknown":"multiple_choice"===t.type?t.options.filter(e=>e.is_correct).map(e=>e.text).join(", "):"true_false"===t.type?!0===t.correct_answer||"true"===t.correct_answer||1===t.correct_answer?"True":"False":["short_answer","number"].includes(t.type)?t.correct_answer:""}),ne=()=>{const e=K.attempts+1;R("update:attempts",e),R("update:submitted",!0),(te()||e>=3)&&(R("update:solved",!0),X&&clearInterval(X))},ae=()=>{R("update:submitted",!1)},le=e=>{var t;const r=$(e);if(!K.submitted)return r?"bg-blue-50 border-blue-500 ring-1 ring-blue-500":"bg-white border-gray-200 hover:border-blue-300";const s=null==(t=K.question.options.find(t=>t.id===e))?void 0:t.is_correct;return s?"bg-green-50 border-green-500 ring-1 ring-green-500":r&&!s?"bg-red-50 border-red-500 ring-1 ring-red-500":"bg-white border-gray-200 opacity-50"},ie=e=>{const t=$(e);if(!K.submitted)return t?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300";const r=(!0===K.question.correct_answer||"true"===K.question.correct_answer||1===K.question.correct_answer)===e;return r?"bg-green-600 text-white border-green-600":t&&!r?"bg-red-600 text-white border-red-600":"bg-white text-gray-400 border-gray-200"};return(e,t)=>(a(),n("div",p,[l("div",m,[l("h3",{class:"text-lg font-medium text-gray-900 flex-1 mr-4",innerHTML:E.question.text},null,8,f),l("div",y,[l("span",x,o(E.question.points)+" Points ",1),E.question.timer>0?(a(),n("div",{key:0,class:d(["flex items-center gap-1 text-sm font-mono",W.value<10?"text-red-600 font-bold":"text-gray-600"])},[t[4]||(t[4]=l("i",{class:"fas fa-clock"},null,-1)),u(" "+o(W.value)+"s ",1)],2)):i("",!0),E.solved?i("",!0):(a(),n("div",v," Attempts: "+o(E.attempts)+"/3 ",1))])]),l("div",w,["single_choice"===E.question.type?(a(),n("div",h,[(a(!0),n(c,null,b(E.question.options,e=>(a(),n("button",{key:e.id,onClick:t=>!E.submitted&&Z(e.id),class:d(["w-full text-left p-4 rounded-lg border transition-all flex items-center justify-between group",le(e.id)])},[l("span",{innerHTML:e.text},null,8,_),$(e.id)?(a(),n("i",q)):i("",!0)],10,k))),128))])):i("",!0),"multiple_choice"===E.question.type?(a(),n("div",A,[(a(!0),n(c,null,b(E.question.options,e=>{return a(),n("button",{key:e.id,onClick:t=>!E.submitted&&(e=>{const t=Array.isArray(K.answer)?[...K.answer]:[],r=t.indexOf(e);-1===r?t.push(e):t.splice(r,1),R("update:answer",t)})(e.id),class:d(["w-full text-left p-4 rounded-lg border transition-all flex items-center gap-3",(t=e.id,le(t))])},[l("div",{class:d(["w-5 h-5 border rounded flex items-center justify-center",$(e.id)?"bg-blue-600 border-blue-600":"border-gray-300"])},[$(e.id)?(a(),n("i",T)):i("",!0)],2),l("span",{innerHTML:e.text},null,8,L)],10,C);var t}),128))])):i("",!0),"true_false"===E.question.type?(a(),n("div",j,[l("button",{onClick:t[0]||(t[0]=e=>!E.submitted&&Z(!0)),class:d(["flex-1 p-4 rounded-lg border text-center font-medium transition-all",ie(!0)])}," True ",2),l("button",{onClick:t[1]||(t[1]=e=>!E.submitted&&Z(!1)),class:d(["flex-1 p-4 rounded-lg border text-center font-medium transition-all",ie(!1)])}," False ",2)])):i("",!0),["short_answer","number"].includes(E.question.type)?(a(),n("div",I,[l("input",{type:"text",value:E.answer||"",onInput:t[2]||(t[2]=e=>!E.submitted&&Z(e.target.value)),class:"w-full p-4 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",disabled:E.submitted,placeholder:"Type your answer here..."},null,40,M)])):i("",!0),"long_answer"===E.question.type?(a(),n("div",H,[l("textarea",{value:E.answer||"",onInput:t[3]||(t[3]=e=>!E.submitted&&Z(e.target.value)),class:"w-full p-4 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all min-h-[120px]",disabled:E.submitted,placeholder:"Type your answer here..."},null,40,S)])):i("",!0)]),l("div",B,[E.submitted?(a(),n("div",O,[re.value?(a(),n("div",Q,t[5]||(t[5]=[l("div",{class:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},[l("i",{class:"fas fa-check text-green-600 text-xl"})],-1),l("div",null,[l("h4",{class:"font-bold text-green-800"},"Correct!"),l("p",{class:"text-sm text-green-700"},"Great job!")],-1)]))):(a(),n("div",U,[E.attempts<3?(a(),n("div",G,[l("div",P,[t[7]||(t[7]=l("div",{class:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0"},[l("i",{class:"fas fa-exclamation-triangle text-orange-600 text-xl"})],-1)),l("div",null,[t[6]||(t[6]=l("h4",{class:"font-bold text-orange-800"},"Incorrect",-1)),l("p",V,"You have "+o(3-E.attempts)+" attempts remaining.",1)])]),l("button",{onClick:ae,class:"mt-2 inline-flex items-center px-4 py-2 border border-orange-300 shadow-sm text-sm font-medium rounded-md text-orange-700 bg-white hover:bg-orange-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"},t[8]||(t[8]=[l("i",{class:"fas fa-redo mr-2"},null,-1),u(" Try Again ")]))])):(a(),n("div",Y,[t[10]||(t[10]=g('<div class="flex items-center gap-3 mb-3"><div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0"><i class="fas fa-times text-red-600 text-xl"></i></div><div><h4 class="font-bold text-red-800">Incorrect</h4><p class="text-sm text-red-700">No attempts remaining.</p></div></div>',1)),l("div",z,[t[9]||(t[9]=l("span",{class:"font-bold text-gray-900"},"Correct Answer:",-1)),l("span",{class:"font-medium ml-1",innerHTML:se.value},null,8,D)])]))]))])):(a(),n("div",F,[l("button",{onClick:ne,disabled:!ee.value,class:"w-full sm:w-auto px-6 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm"}," Submit Answer ",8,N)]))])]))}};export{E as default};
