import{u as e,c as l,Q as a,C as o,m as t,f as i,l as r,aP as s,b as n}from"./app-B77gjd5a.js";import{Q as u}from"./QTd-Cd1TbwhN.js";import{Q as d}from"./QTable-Dzgz30xz.js";import{Q as c}from"./QPagination-ZwCMST1R.js";import{Q as m}from"./QSelect-DB_tK-Lk.js";import{Q as p}from"./QForm-BQsH4F1U.js";import{a as v,f,r as b,af as y,M as g,J as k,b as x,N as V,K as h,I as j,Q as _,a0 as w,W as Q,V as q,F as C,R as S,y as P,a7 as E}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./QMarkupTable-xKG6mM4A.js";import"./QLinearProgress-B9hMkhRG.js";import"./use-fullscreen-Cf3Zl1YN.js";import"./rtl-Cr6c3OOr.js";const U={class:"py-12"},A={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},O={class:"row items-center justify-between q-mb-md"},N={__name:"Index",props:{records:Object,options:Object},setup(N){const I=e(),M=N,T=v(()=>{var e;return(null==(e=M.records)?void 0:e.data)||[]}),$=v(()=>{var e;return(null==(e=M.records)?void 0:e.links)||null}),D=f(1),F=f(!1),R=f(!1),H=f(null),J=b({}),K=[{name:"name",label:"Name",field:"name",sortable:!0,align:"left"},{name:"description",label:"Description",field:"description",sortable:!0,align:"left"},{name:"school.name",label:"School",field:e=>{var l;return null==(l=e.school)?void 0:l.name},sortable:!0,align:"left"},{name:"active",label:"Status",field:"active",sortable:!0,align:"center"},{name:"actions",label:"Actions",field:"actions",align:"center"}],L=[{name:"name",label:"Name",type:"text",required:!0},{name:"description",label:"Description",type:"textarea"},{name:"school_id",label:"School",type:"select",required:!0,options:v(()=>{var e,l;return(null==(l=null==(e=M.options)?void 0:e.schools)?void 0:l.map(e=>({value:e.id,label:e.name})))||[]})},{name:"active",label:"Status",type:"select",options:v(()=>{var e;return(null==(e=M.options)?void 0:e.statusOptions)||[]})}],W=(e=null)=>{H.value=e,Object.keys(J).forEach(e=>{delete J[e]}),e&&L.forEach(l=>{void 0!==e[l.name]&&(J[l.name]=e[l.name])}),R.value=!0},z=()=>{H.value=null,R.value=!1},B=e=>{e&&(window.location.href=route("period-activities.index",{page:e}))};return(e,v)=>{const f=y("Head");return k(),g(C,null,[x(f,{title:"Period Activities"}),V("div",U,[V("div",A,[x(t,{flat:"",bordered:"",class:"q-mb-md"},{default:h(()=>[x(l,null,{default:h(()=>[V("div",O,[v[4]||(v[4]=V("div",{class:"text-h5"},"Period Activities",-1)),x(a,{color:"primary",icon:"add",label:"Add New",onClick:v[0]||(v[0]=e=>W())})]),x(d,{rows:T.value,columns:K,loading:F.value,"row-key":"id",flat:"",bordered:""},{"body-cell-active":h(e=>[x(u,{props:e},{default:h(()=>[x(o,{color:e.value?"positive":"negative","text-color":"white",dense:""},{default:h(()=>[Q(q(e.value?"Active":"Inactive"),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-actions":h(e=>[x(u,{props:e},{default:h(()=>[x(a,{icon:"edit",color:"primary",flat:"",dense:"",onClick:w(l=>W(e.row),["stop"])},null,8,["onClick"]),x(a,{icon:"delete",color:"negative",flat:"",dense:"",onClick:w(l=>{return a=e.row,void I.dialog({title:"Confirm",message:"Are you sure you want to delete this period activity?",cancel:!0,persistent:!0}).onOk(()=>{F.value=!0,E().delete(route("period-activities.destroy",a.id),{onSuccess:()=>{I.notify({color:"positive",message:"Period activity deleted successfully",icon:"check"}),F.value=!1},onError:()=>{I.notify({color:"negative",message:"Error deleting period activity",icon:"error"}),F.value=!1}})});var a},["stop"])},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading"]),$.value&&$.value.last_page?(k(),j(c,{key:0,modelValue:D.value,"onUpdate:modelValue":[v[1]||(v[1]=e=>D.value=e),B],max:$.value.last_page||1,class:"q-mt-md"},null,8,["modelValue","max"])):_("",!0)]),_:1})]),_:1}),x(n,{modelValue:R.value,"onUpdate:modelValue":v[3]||(v[3]=e=>R.value=e),persistent:""},{default:h(()=>[x(t,{style:{"min-width":"500px"}},{default:h(()=>[x(l,null,{default:h(()=>[V("div",{class:"text-h6"},q("Period Activity"))]),_:1}),x(l,null,{default:h(()=>[x(p,{class:"q-gutter-md"},{default:h(()=>[(k(),g(C,null,S(L,e=>V("div",{key:e.name},["text"===e.type?(k(),j(i,{key:0,modelValue:J[e.name],"onUpdate:modelValue":l=>J[e.name]=l,label:e.label,rules:e.required?[l=>!!l||`${e.label} is required`]:[],outlined:""},null,8,["modelValue","onUpdate:modelValue","label","rules"])):"textarea"===e.type?(k(),j(i,{key:1,modelValue:J[e.name],"onUpdate:modelValue":l=>J[e.name]=l,label:e.label,type:"textarea",rules:e.required?[l=>!!l||`${e.label} is required`]:[],outlined:"",autogrow:""},null,8,["modelValue","onUpdate:modelValue","label","rules"])):"select"===e.type?(k(),j(m,{key:2,modelValue:J[e.name],"onUpdate:modelValue":l=>J[e.name]=l,options:e.options,label:e.label,rules:e.required?[l=>!!l||`${e.label} is required`]:[],"emit-value":"","map-options":"",outlined:""},null,8,["modelValue","onUpdate:modelValue","options","label","rules"])):_("",!0)])),64))]),_:1})]),_:1}),x(r,{align:"right"},{default:h(()=>[P(x(a,{flat:"",label:"Cancel",color:"grey",onClick:z},null,512),[[s]]),x(a,{flat:"",label:"Save",color:"primary",onClick:v[2]||(v[2]=e=>{return l=J,F.value=!0,void(H.value?E(l).put(route("period-activities.update",H.value.id),{onSuccess:()=>{I.notify({color:"positive",message:"Period activity updated successfully",icon:"check"}),z(),F.value=!1},onError:()=>{I.notify({color:"negative",message:"Error updating period activity",icon:"error"}),F.value=!1}}):E(l).post(route("period-activities.store"),{onSuccess:()=>{I.notify({color:"positive",message:"Period activity created successfully",icon:"check"}),z(),F.value=!1},onError:()=>{I.notify({color:"negative",message:"Error creating period activity",icon:"error"}),F.value=!1}}));var l})})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])],64)}}};export{N as default};
