import{p as e,u as t,Q as a,d as l,e as o,n,a as s,g as i,f as r,C as u,h as d,i as c,j as p,A as m,k as v,b2 as f,m as _,aD as h,b as y,q as g}from"./app-BzjXrVp9.js";import{Q as b}from"./QSelect-CciNNEfD.js";import{Q as q}from"./QTab-Cx9aTRVb.js";import{Q as x}from"./QTabs-BwLFzVWR.js";import{Q as w}from"./QFile-B8nEG4QC.js";import{Q as C}from"./QTabPanel-BWvsj8on.js";import{Q as k}from"./QTabPanels-C2OMgZHe.js";import{Q as P}from"./QMarkupTable-_1wJRVO3.js";import{f as V,a as j,o as S,L as E,I as W,b as O,M as F,y as Q,a3 as J,H as N,O as L,J as T,V as U,U as I,F as R,Q as A,x as B,Z as M,_ as $}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./rtl-Cr6c3OOr.js";import"./use-file-C1yaxB6a.js";import"./use-panel-DdQZ_Vdk.js";import"./use-render-cache-CmTcazfP.js";const z={class:"question-import-page"},D={class:"q-pa-md"},G={class:"row items-center q-mb-lg"},H={class:"row justify-center"},Y={class:"col-12 col-md-10"},K={class:"text-h6"},Z={class:"row q-col-gutter-md"},X={class:"col-12 col-md-6"},ee={class:"col-12 col-md-6"},te={class:"col-12 col-md-4"},ae={class:"col-12 col-md-4"},le={class:"col-12 col-md-4"},oe={class:"col-12 col-md-6"},ne={class:"col-12 col-md-6"},se={class:"text-h6"},ie={class:"row q-gutter-sm"},re={key:0,class:"text-center q-pa-lg"},ue={key:1},de={class:"text-body2 q-mb-md"},ce={class:"row items-center justify-between q-mb-sm"},pe={class:"text-subtitle2 text-green-9"},me={class:"example-data"},ve={class:"row q-gutter-sm"},fe={key:0,class:"text-center q-pa-lg"},_e={key:1},he={class:"row q-gutter-sm q-mb-md"},ye={class:"row q-gutter-sm"},ge={class:"text-h6"},be={class:"row q-gutter-md q-mb-md"},qe={class:"text-subtitle2 q-mb-sm"},xe={style:{"max-height":"500px","overflow-y":"auto"},class:"q-mb-md"},we={key:0,class:"q-mt-xs"},Ce={key:0,class:"q-ml-sm"},ke={key:0,class:"q-mt-md"},Pe={class:"text-h6 q-mb-md"},Ve={class:"text-body2"},je={class:"text-h6"},Se=e({__name:"QuestionImport",setup(e){const Se=t(),Ee=V(null),We=V(null),Oe=V(!1),Fe=V(!1),Qe=V(!1),Je=V("file"),Ne=V(""),Le=V(""),Te=V({question_type_id:null,difficulty:null,grade_id:null,subject_id:null,topic_id:null,bloom_level:null,status:"draft"}),Ue=V([]),Ie=V([]),Re=V([]),Ae=V([]),Be=["Easy","Medium","Hard"],Me=["draft","active","archived","review"],$e=[{label:"Level 1 - Remember",value:1},{label:"Level 2 - Understand",value:2},{label:"Level 3 - Apply",value:3},{label:"Level 4 - Analyze",value:4},{label:"Level 5 - Evaluate",value:5},{label:"Level 6 - Create",value:6}],ze=j(()=>Ue.value.find(e=>e.id===Te.value.question_type_id)),De=j(()=>Te.value.grade_id?Re.value.filter(e=>e.grade_id===Te.value.grade_id):Re.value),Ge=j(()=>Te.value.subject_id?Ae.value.filter(e=>e.subject_id===Te.value.subject_id):Ae.value),He=j(()=>We.value&&We.value.questions?We.value.questions:[]),Ye=j(()=>{var e;return(null==(e=ze.value)?void 0:e.has_options)?'[\n  {\n    "question_text": "What is 2+2?",\n    "option_a": "2",\n    "option_b": "3",\n    "option_c": "4",\n    "option_d": "5",\n    "correct_answer": "C"\n  },\n  {\n    "question_text": "What is the capital of France?",\n    "option_a": "London",\n    "option_b": "Paris",\n    "option_c": "Berlin",\n    "option_d": "Madrid",\n    "correct_answer": "B"\n  },\n  {\n    "question_text": "Which planet is closest to the Sun?",\n    "option_a": "Venus",\n    "option_b": "Earth",\n    "option_c": "Mercury",\n    "option_d": "Mars",\n    "correct_answer": "C"\n  }\n]':'[\n  {\n    "question_text": "What is the chemical symbol for water?"\n  },\n  {\n    "question_text": "Who wrote Romeo and Juliet?"\n  },\n  {\n    "question_text": "What is the largest ocean on Earth?"\n  }\n]'}),Ke=j(()=>{var e;return(null==(e=ze.value)?void 0:e.has_options)?"question_text\toption_a\toption_b\toption_c\toption_d\tcorrect_answer\nWhat is 2+2?\t2\t3\t4\t5\tC\nWhat is the capital of France?\tLondon\tParis\tBerlin\tMadrid\tB\nWhich planet is closest to the Sun?\tVenus\tEarth\tMercury\tMars\tC":"question_text\nWhat is the chemical symbol for water?\nWho wrote Romeo and Juliet?\nWhat is the largest ocean on Earth?"}),Ze=j(()=>{var e;return(null==(e=ze.value)?void 0:e.has_options)?'Paste JSON array here...\n\nExample:\n[\n  {\n    "question_text": "What is 2+2?",\n    "option_a": "2",\n    "option_b": "3",\n    "option_c": "4",\n    "option_d": "5",\n    "correct_answer": "C"\n  }\n]':'Paste JSON array here...\n\nExample:\n[\n  {\n    "question_text": "What is the chemical symbol for water?"\n  }\n]'}),Xe=j(()=>{var e;return(null==(e=ze.value)?void 0:e.has_options)?"Copy from Excel and paste here...\n\nExample (tab-separated):\nquestion_text\toption_a\toption_b\toption_c\toption_d\tcorrect_answer\nWhat is 2+2?\t2\t3\t4\t5\tC\nCapital of France?\tLondon\tParis\tBerlin\tMadrid\tB":"Copy from Excel and paste here...\n\nExample:\nquestion_text\nWhat is the chemical symbol for water?\nWho wrote Romeo and Juliet?"}),et=()=>{$.visit("/questions")},tt=e=>{const t={};return["A","B","C","D","E","F"].forEach(a=>{const l=`option_${a.toLowerCase()}`;e[l]&&(t[a]=e[l])}),t},at=()=>{Te.value.subject_id=null,Te.value.topic_id=null},lt=()=>{Te.value.topic_id=null},ot=async e=>{if(!e)return void(We.value=null);if(!Te.value.question_type_id)return Se.notify({type:"warning",message:"Please select a question type first",caption:"Choose the question type in Step 1 before uploading"}),void(Ee.value=null);const t=e.name.toLowerCase();if(![".xlsx",".xls",".csv"].some(e=>t.endsWith(e)))return Se.notify({type:"negative",message:"Invalid file type",caption:"Please upload an Excel (.xlsx, .xls) or CSV (.csv) file"}),void(Ee.value=null);await nt(e)},nt=async e=>{try{Se.loading.show({message:"Parsing file..."});const t=await st(e);if(0===t.length)return Se.notify({type:"warning",message:"No questions found in file",caption:"Please check your file format"}),void(Ee.value=null);await pt(t)}catch(t){console.error("Failed to parse file:",t),Se.notify({type:"negative",message:"Failed to parse file",caption:t.message||"Please check your file format"}),Ee.value=null}finally{Se.loading.hide()}},st=e=>new Promise((t,a)=>{const l=new FileReader,o=e.name.toLowerCase();l.onload=e=>{try{const l=e.target.result;let n=[];if(o.endsWith(".csv")||o.endsWith(".txt"))n=it(l);else if(o.endsWith(".xlsx")||o.endsWith(".xls"))return void a(new Error('Excel files: Please copy the data and use "Paste from Excel" tab instead'));t(n)}catch(l){a(l)}},l.onerror=()=>a(new Error("Failed to read file")),l.readAsText(e)}),it=e=>{const t=e.trim().split("\n");if(t.length<2)return[];const a=t[0].split(",").map(e=>e.trim().replace(/^"|"$/g,"")),l=[];for(let o=1;o<t.length;o++){const e=t[o].split(",").map(e=>e.trim().replace(/^"|"$/g,""));if(0===e.length||!e[0])continue;const n={};a.forEach((t,a)=>{e[a]&&(n[t]=e[a])}),l.push(n)}return l},rt=async()=>{var e,t,a,l,o,n,s,i;if(We.value&&Te.value.question_type_id){Oe.value=!0;try{const e=We.value.questions||[];if(0===e.length)return Se.notify({type:"warning",message:"No questions to import",caption:"Please add questions first"}),void(Oe.value=!1);console.log("Importing questions:",{count:e.length,metadata:Te.value,firstQuestion:e[0]});const t=await M.post("/api/questions/import",{questions:e,preview:!1,...Te.value});if(console.log("Import response:",t.data),t.data.success){const e=t.data.data;Se.notify({type:"positive",message:"Import completed successfully!",caption:`Imported ${e.successful} questions`,timeout:3e3}),$.visit("/questions")}else Se.notify({type:"warning",message:"Import completed with issues",caption:t.data.message||"Some questions may not have been imported"})}catch(r){console.error("Failed to import questions:",r),console.error("Error response:",null==(e=r.response)?void 0:e.data);const u=(null==(a=null==(t=r.response)?void 0:t.data)?void 0:a.message)||(null==(n=null==(o=null==(l=r.response)?void 0:l.data)?void 0:o.error)?void 0:n.message)||r.message,d=(null==(i=null==(s=r.response)?void 0:s.data)?void 0:i.errors)?JSON.stringify(r.response.data.errors):"";Se.notify({type:"negative",message:"Failed to import questions",caption:u+(d?": "+d:""),timeout:5e3})}finally{Oe.value=!1}}},ut=()=>{Ee.value=null,We.value=null},dt=()=>{var e;if(Ne.value.trim())if(Te.value.question_type_id)try{const t=Ne.value.trim().split("\n"),a=[],l=t[0].includes("\t")?"\t":",";for(let o=t[0].toLowerCase().includes("question")?1:0;o<t.length;o++){const n=t[o].split(l).map(e=>e.trim().replace(/^"|"$/g,""));if(0===n.length||!n[0])continue;const s={question_text:n[0]};(null==(e=ze.value)?void 0:e.has_options)&&(s.option_a=n[1]||"",s.option_b=n[2]||"",s.option_c=n[3]||"",s.option_d=n[4]||"",s.correct_answer=n[5]||""),a.push(s)}if(0===a.length)return void Se.notify({type:"warning",message:"No valid questions found",caption:"Please check your pasted data"});pt(a)}catch(t){console.error("Failed to parse pasted data:",t),Se.notify({type:"negative",message:"Failed to parse data",caption:"Please check the format and try again"})}else Se.notify({type:"warning",message:"Please select a question type first",caption:"Choose the question type in Step 1"})},ct=()=>{if(Le.value.trim())if(Te.value.question_type_id)try{const e=JSON.parse(Le.value);if(!Array.isArray(e))throw new Error("JSON must be an array of questions");if(0===e.length)return void Se.notify({type:"warning",message:"No questions found in JSON",caption:"Please provide at least one question"});pt(e)}catch(e){console.error("Failed to parse JSON:",e),Se.notify({type:"negative",message:"Invalid JSON format",caption:e.message||"Please check your JSON and try again"})}else Se.notify({type:"warning",message:"Please select a question type first",caption:"Choose the question type in Step 1"})},pt=async e=>{var t,a,l,o,n,s,i;try{Se.loading.show({message:"Processing questions..."});const t=await M.post("/api/questions/import",{questions:e,preview:!0,...Te.value});(t.data.success||t.data.data)&&(We.value={...t.data.data,questions:e},Se.notify({type:"positive",message:"Questions processed successfully",caption:`Found ${We.value.valid} valid questions`}))}catch(r){console.error("Failed to process questions:",r);const e=(null==(a=null==(t=r.response)?void 0:t.data)?void 0:a.message)||(null==(n=null==(o=null==(l=r.response)?void 0:l.data)?void 0:o.error)?void 0:n.message)||r.message,u=(null==(i=null==(s=r.response)?void 0:s.data)?void 0:i.errors)?JSON.stringify(r.response.data.errors):"";Se.notify({type:"negative",message:"Failed to process questions",caption:e+(u?": "+u:"")})}finally{Se.loading.hide()}},mt=()=>{var e,t,a,l;const o=ze.value;let n="";n=(null==o?void 0:o.has_options)?`Generate 10 ${o.name} questions in JSON format. Use this exact structure:\n\n[\n  {\n    "question_text": "What is 2+2?",\n    "option_a": "2",\n    "option_b": "3",\n    "option_c": "4",\n    "option_d": "5",\n    "correct_answer": "C"\n  },\n  {\n    "question_text": "What is the capital of France?",\n    "option_a": "London",\n    "option_b": "Paris",\n    "option_c": "Berlin",\n    "option_d": "Madrid",\n    "correct_answer": "B"\n  }\n]\n\nRequirements:\n- Generate exactly 10 questions\n- Each question must have 4 options (option_a, option_b, option_c, option_d)\n- correct_answer must be A, B, C, or D\n- Return ONLY the JSON array, no additional text\n- Make questions appropriate for ${Te.value.grade_id?null==(e=Ie.value.find(e=>e.id===Te.value.grade_id))?void 0:e.name:"students"}\n${Te.value.subject_id?"- Subject: "+(null==(t=Re.value.find(e=>e.id===Te.value.subject_id))?void 0:t.name):""}\n${Te.value.difficulty?"- Difficulty: "+Te.value.difficulty:""}`:`Generate 10 ${o.name} questions in JSON format. Use this exact structure:\n\n[\n  {\n    "question_text": "What is the chemical symbol for water?"\n  },\n  {\n    "question_text": "Who wrote Romeo and Juliet?"\n  }\n]\n\nRequirements:\n- Generate exactly 10 questions\n- Return ONLY the JSON array, no additional text\n- Make questions appropriate for ${Te.value.grade_id?null==(a=Ie.value.find(e=>e.id===Te.value.grade_id))?void 0:a.name:"students"}\n${Te.value.subject_id?"- Subject: "+(null==(l=Re.value.find(e=>e.id===Te.value.subject_id))?void 0:l.name):""}\n${Te.value.difficulty?"- Difficulty: "+Te.value.difficulty:""}`,navigator.clipboard.writeText(n).then(()=>{Se.notify({type:"positive",message:"AI Prompt copied!",caption:"Paste it into ChatGPT or Claude",icon:"content_copy"})}).catch(()=>{Se.notify({type:"negative",message:"Failed to copy",caption:"Please copy manually"})})},vt=()=>{const e=ze.value;let t,a;(null==e?void 0:e.has_options)?(t=["question_text","option_a","option_b","option_c","option_d","correct_answer"],a=["What is 2+2?","2","3","4","5","C"]):(t=["question_text"],a=["What is the chemical symbol for water?"]);const l=[t.join(","),a.map(e=>`"${e}"`).join(",")].join("\n"),o=new Blob([l],{type:"text/csv;charset=utf-8;"}),n=window.URL.createObjectURL(o),s=document.createElement("a");s.href=n,s.download=`question_import_template_${(null==e?void 0:e.slug)||"simple"}.csv`,s.click(),window.URL.revokeObjectURL(n),Se.notify({type:"positive",message:"Template downloaded",caption:"Check your downloads folder"})},ft=()=>{navigator.clipboard.writeText(Ke.value).then(()=>{Se.notify({type:"positive",message:"Example data copied!",caption:"Paste in Excel to see the format",icon:"content_copy"})}).catch(()=>{Se.notify({type:"negative",message:"Failed to copy",caption:"Please copy manually"})})},_t=()=>{navigator.clipboard.writeText(Ye.value).then(()=>{Se.notify({type:"positive",message:"JSON example copied!",caption:"Paste and modify with your questions",icon:"content_copy"})}).catch(()=>{Se.notify({type:"negative",message:"Failed to copy",caption:"Please copy manually"})})};return S(()=>{(async()=>{try{const[e,t,a,l]=await Promise.all([M.get("/api/question-types"),M.get("/api/grades"),M.get("/api/subjects"),M.get("/api/subjects")]);Ue.value=e.data.data||e.data,console.log("questionTypes.value",Ue.value),Ie.value=t.data.data||t.data,Re.value=a.data.data||a.data,Ae.value=l.data.data||l.data}catch(e){console.error("Failed to load metadata:",e)}})()}),(e,t)=>(W(),E(R,null,[O(Q(J),{title:"Import Questions"}),F("div",z,[F("div",D,[F("div",G,[O(a,{flat:"",icon:"arrow_back",label:"Back to Question Bank",onClick:et,class:"q-mr-md"}),t[17]||(t[17]=F("div",null,[F("h4",{class:"q-ma-none"},"Import Questions"),F("p",{class:"text-grey-7 q-mb-none"},"Easy import - Just provide questions and answers, we'll handle the rest!")],-1))]),F("div",H,[F("div",Y,[O(n,{flat:"",bordered:"",class:"q-mb-md"},{default:T(()=>[O(l,{class:"bg-primary text-white"},{default:T(()=>[F("div",K,[O(o,{name:"settings",class:"q-mr-sm"}),t[18]||(t[18]=U(" Step 1: Choose Settings for All Questions "))]),t[19]||(t[19]=F("p",{class:"q-mb-none text-caption"},"These settings will apply to all questions you import",-1))]),_:1}),O(l,null,{default:T(()=>[F("div",Z,[F("div",X,[U("questionTypes:"+I(Ue.value)+" ",1),O(b,{modelValue:Te.value.question_type_id,"onUpdate:modelValue":t[0]||(t[0]=e=>Te.value.question_type_id=e),options:Ue.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",label:"Question Type *",hint:"Required - What type of questions are you importing?",rules:[e=>!!e||"Question type is required"]},{prepend:T(()=>[O(o,{name:"quiz",color:"primary"})]),_:1},8,["modelValue","options","rules"])]),F("div",ee,[O(b,{modelValue:Te.value.difficulty,"onUpdate:modelValue":t[1]||(t[1]=e=>Te.value.difficulty=e),options:Be,outlined:"",label:"Difficulty Level",clearable:"",hint:"Optional - How hard are these questions?"},{prepend:T(()=>[O(o,{name:"speed",color:"warning"})]),_:1},8,["modelValue"])]),F("div",te,[O(b,{modelValue:Te.value.grade_id,"onUpdate:modelValue":[t[2]||(t[2]=e=>Te.value.grade_id=e),at],options:Ie.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",label:"Grade Level",clearable:"",hint:"Optional - Which grade?"},{prepend:T(()=>[O(o,{name:"school",color:"positive"})]),_:1},8,["modelValue","options"])]),F("div",ae,[O(b,{modelValue:Te.value.subject_id,"onUpdate:modelValue":[t[3]||(t[3]=e=>Te.value.subject_id=e),lt],options:De.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",label:"Subject",clearable:"",hint:"Optional - Which subject?",disable:!Te.value.grade_id&&Re.value.length>0},{prepend:T(()=>[O(o,{name:"subject",color:"info"})]),_:1},8,["modelValue","options","disable"])]),F("div",le,[O(b,{modelValue:Te.value.topic_id,"onUpdate:modelValue":t[4]||(t[4]=e=>Te.value.topic_id=e),options:Ge.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",outlined:"",label:"Topic",clearable:"",hint:"Optional - Specific topic?",disable:!Te.value.subject_id&&Ae.value.length>0},{prepend:T(()=>[O(o,{name:"label",color:"secondary"})]),_:1},8,["modelValue","options","disable"])]),F("div",oe,[O(b,{modelValue:Te.value.bloom_level,"onUpdate:modelValue":t[5]||(t[5]=e=>Te.value.bloom_level=e),options:$e,"emit-value":"","map-options":"",outlined:"",label:"Bloom's Taxonomy Level",clearable:"",hint:"Optional - Cognitive complexity"},{prepend:T(()=>[O(o,{name:"psychology",color:"purple"})]),_:1},8,["modelValue"])]),F("div",ne,[O(b,{modelValue:Te.value.status,"onUpdate:modelValue":t[6]||(t[6]=e=>Te.value.status=e),options:Me,outlined:"",label:"Status",hint:"Questions will be created with this status"},{prepend:T(()=>[O(o,{name:"flag",color:"orange"})]),_:1},8,["modelValue"])])])]),_:1})]),_:1}),O(n,{flat:"",bordered:"",class:"q-mb-md"},{default:T(()=>[O(l,{class:"bg-secondary text-white"},{default:T(()=>[F("div",se,[O(o,{name:"upload_file",class:"q-mr-sm"}),t[20]||(t[20]=U(" Step 2: Provide Your Questions "))]),t[21]||(t[21]=F("p",{class:"q-mb-none text-caption"},"Choose your preferred method!",-1))]),_:1}),O(l,null,{default:T(()=>[O(x,{modelValue:Je.value,"onUpdate:modelValue":t[7]||(t[7]=e=>Je.value=e),dense:"",class:"text-grey-7 q-mb-md","active-color":"primary","indicator-color":"primary",align:"justify"},{default:T(()=>[O(q,{name:"file",icon:"upload_file",label:"Upload File"}),O(q,{name:"paste",icon:"content_paste",label:"Paste from Excel"}),O(q,{name:"json",icon:"code",label:"Paste JSON"})]),_:1},8,["modelValue"]),O(s,{class:"q-mb-md"}),O(k,{modelValue:Je.value,"onUpdate:modelValue":t[14]||(t[14]=e=>Je.value=e),animated:""},{default:T(()=>[O(C,{name:"file"},{default:T(()=>[O(w,{modelValue:Ee.value,"onUpdate:modelValue":[t[8]||(t[8]=e=>Ee.value=e),ot],outlined:"",label:"Choose file (Excel or CSV)",accept:".xlsx,.xls,.csv","max-file-size":"10485760",class:"q-mb-md"},{prepend:T(()=>[O(o,{name:"attach_file"})]),hint:T(()=>t[22]||(t[22]=[U(" Supported: .xlsx, .xls, .csv (Max 10MB) ")])),_:1},8,["modelValue"]),F("div",ie,[O(a,{flat:"",color:"primary",icon:"download",label:"Download Template",onClick:vt}),O(a,{flat:"",color:"info",icon:"help",label:"View Example",onClick:t[9]||(t[9]=e=>Fe.value=!0)})])]),_:1}),O(C,{name:"paste"},{default:T(()=>[ze.value?(W(),E("div",ue,[F("div",de,[O(o,{name:"info",color:"info"}),t[24]||(t[24]=U(" Copy cells from Excel/Google Sheets and paste here "))]),O(n,{flat:"",bordered:"",class:"bg-green-1 q-mb-md"},{default:T(()=>[O(l,null,{default:T(()=>[F("div",ce,[F("div",pe,[O(o,{name:"table_chart",class:"q-mr-xs"}),U(" Example Data for "+I(ze.value.name),1)]),O(a,{flat:"",dense:"",size:"sm",color:"green-9",icon:"content_copy",label:"Copy Example",onClick:ft})]),t[25]||(t[25]=F("div",{class:"text-caption text-green-9 q-mb-sm"}," Copy this example, paste in Excel to see the format, then replace with your questions: ",-1)),F("pre",me,I(Ke.value),1)]),_:1})]),_:1}),O(i,{modelValue:Ne.value,"onUpdate:modelValue":t[10]||(t[10]=e=>Ne.value=e),type:"textarea",outlined:"",label:"Paste your data here (Ctrl+V)",rows:"10",placeholder:Xe.value,class:"q-mb-md"},{prepend:T(()=>[O(o,{name:"content_paste"})]),_:1},8,["modelValue","placeholder"]),F("div",ve,[O(a,{color:"primary",icon:"check",label:"Process Pasted Data",onClick:dt,disable:!Ne.value},null,8,["disable"]),O(a,{flat:"",color:"grey-7",icon:"clear",label:"Clear",onClick:t[11]||(t[11]=e=>Ne.value="")})]),O(r,{class:"bg-blue-1 text-blue-9 q-mt-md"},{avatar:T(()=>[O(o,{name:"lightbulb",color:"blue"})]),default:T(()=>[t[26]||(t[26]=F("strong",null,"Tip:",-1)),t[27]||(t[27]=U(' Click "Copy Example" above, paste in Excel to see the format, then replace with your questions! '))]),_:1})])):(W(),E("div",re,[O(o,{name:"arrow_upward",size:"48px",color:"grey-5"}),t[23]||(t[23]=F("p",{class:"text-grey-7"},"Please select a question type in Step 1 first",-1))]))]),_:1}),O(C,{name:"json"},{default:T(()=>[ze.value?(W(),E("div",_e,[F("div",he,[O(a,{color:"purple",icon:"smart_toy",label:"Copy AI Prompt",onClick:mt}),O(a,{flat:"",color:"green",icon:"content_copy",label:"Copy JSON Example",onClick:_t})]),O(i,{modelValue:Le.value,"onUpdate:modelValue":t[12]||(t[12]=e=>Le.value=e),type:"textarea",outlined:"",label:"Paste JSON here",rows:"12",placeholder:Ze.value,class:"q-mb-md",style:{"font-family":"monospace"}},{prepend:T(()=>[O(o,{name:"code"})]),_:1},8,["modelValue","placeholder"]),F("div",ye,[O(a,{color:"primary",icon:"check",label:"Process JSON",onClick:ct,disable:!Le.value},null,8,["disable"]),O(a,{flat:"",color:"grey-7",icon:"clear",label:"Clear",onClick:t[13]||(t[13]=e=>Le.value="")})]),O(r,{class:"bg-purple-1 text-purple-9 q-mt-md"},{avatar:T(()=>[O(o,{name:"auto_awesome",color:"purple"})]),default:T(()=>[t[29]||(t[29]=F("strong",null,"AI Tip:",-1)),t[30]||(t[30]=U(' Click "Copy AI Prompt" and paste it into ChatGPT/Claude to generate questions in the correct format! '))]),_:1})])):(W(),E("div",fe,[O(o,{name:"arrow_upward",size:"48px",color:"grey-5"}),t[28]||(t[28]=F("p",{class:"text-grey-7"},"Please select a question type in Step 1 first",-1))]))]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),We.value?(W(),N(n,{key:0,flat:"",bordered:"",class:"q-mb-md"},{default:T(()=>[O(l,{class:"bg-positive text-white"},{default:T(()=>[F("div",ge,[O(o,{name:"preview",class:"q-mr-sm"}),t[31]||(t[31]=U(" Step 3: Review & Import "))])]),_:1}),O(l,null,{default:T(()=>[F("div",be,[O(u,{color:"positive","text-color":"white",icon:"check_circle",size:"md"},{default:T(()=>[U(I(We.value.valid)+" Ready to Import ",1)]),_:1}),We.value.warnings>0?(W(),N(u,{key:0,color:"warning","text-color":"white",icon:"warning",size:"md"},{default:T(()=>[U(I(We.value.warnings)+" Warnings ",1)]),_:1})):L("",!0),We.value.errors>0?(W(),N(u,{key:1,color:"negative","text-color":"white",icon:"error",size:"md"},{default:T(()=>[U(I(We.value.errors)+" Errors ",1)]),_:1})):L("",!0)]),O(s,{class:"q-my-md"}),F("div",qe," Preview All Questions ("+I(He.value.length)+" total): ",1),F("div",xe,[O(d,{bordered:"",separator:""},{default:T(()=>[(W(!0),E(R,null,A(He.value,(e,t)=>(W(),N(c,{key:t},{default:T(()=>[O(p,{avatar:""},{default:T(()=>[O(m,{color:e.valid?"positive":"negative","text-color":"white",size:"md"},{default:T(()=>[U(I(t+1),1)]),_:2},1032,["color"])]),_:2},1024),O(p,null,{default:T(()=>[O(v,{class:"text-weight-medium"},{default:T(()=>[U(I(e.question_text),1)]),_:2},1024),e.option_a?(W(),E("div",we,[(W(!0),E(R,null,A(tt(e),(t,a)=>(W(),N(u,{key:a,size:"sm",color:e.correct_answer&&e.correct_answer.includes(a)?"positive":"grey-3","text-color":e.correct_answer&&e.correct_answer.includes(a)?"white":"grey-8",dense:"",class:"q-mr-xs"},{default:T(()=>[F("strong",null,I(a)+":",1),U(" "+I(t),1)]),_:2},1032,["color","text-color"]))),128))])):L("",!0),O(v,{caption:"",class:"q-mt-xs"},{default:T(()=>{var a;return[U(" Question #"+I(t+1)+" | "+I((null==(a=ze.value)?void 0:a.name)||"Unknown Type")+" ",1),e.correct_answer?(W(),E("span",Ce," | Correct: "+I(e.correct_answer),1)):L("",!0)]}),_:2},1024),e.error?(W(),N(v,{key:1,caption:"",class:"text-negative q-mt-xs"},{default:T(()=>[O(o,{name:"error",size:"xs"}),U(" "+I(e.error),1)]),_:2},1024)):L("",!0)]),_:2},1024),O(p,{side:""},{default:T(()=>[O(o,{name:!1!==e.valid?"check_circle":"error",color:!1!==e.valid?"positive":"negative",size:"md"},null,8,["name","color"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),We.value.errors&&We.value.errors.length>0?(W(),E("div",ke,[O(f,{icon:"error",label:"Error Details",caption:`${We.value.errors.length} questions failed validation`,"header-class":"bg-negative text-white"},{default:T(()=>[O(n,null,{default:T(()=>[O(l,null,{default:T(()=>[O(d,{separator:""},{default:T(()=>[(W(!0),E(R,null,A(We.value.errors,(e,t)=>(W(),N(c,{key:t},{default:T(()=>[O(p,null,{default:T(()=>[O(v,null,{default:T(()=>[U("Row "+I(e.row),1)]),_:2},1024),O(v,{caption:"",class:"text-negative"},{default:T(()=>[U(I(e.message),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["caption"])])):L("",!0)]),_:1}),O(_,{align:"right",class:"q-pa-md"},{default:T(()=>[O(a,{flat:"",label:"Cancel",color:"grey-7",icon:"close",onClick:ut}),O(a,{unelevated:"",label:"Import Questions",color:"primary",icon:"cloud_upload",disable:0===We.value.valid||!Te.value.question_type_id,loading:Oe.value,onClick:rt},null,8,["disable","loading"])]),_:1})]),_:1})):L("",!0),O(n,{flat:"",bordered:""},{default:T(()=>[O(l,null,{default:T(()=>[F("div",Pe,[O(o,{name:"info",color:"info",class:"q-mr-sm"}),t[32]||(t[32]=U(" Simple File Format "))]),F("div",Ve,[t[41]||(t[41]=F("p",{class:"text-weight-medium"},"Your file only needs these columns:",-1)),O(d,{bordered:"",class:"q-mb-md"},{default:T(()=>{var e,a;return[O(c,null,{default:T(()=>[O(p,{avatar:""},{default:T(()=>[O(o,{name:"check",color:"positive"})]),_:1}),O(p,null,{default:T(()=>[O(v,null,{default:T(()=>t[33]||(t[33]=[F("code",null,"question_text",-1)])),_:1}),O(v,{caption:""},{default:T(()=>t[34]||(t[34]=[U("The question itself")])),_:1})]),_:1})]),_:1}),(null==(e=ze.value)?void 0:e.has_options)?(W(),N(c,{key:0},{default:T(()=>[O(p,{avatar:""},{default:T(()=>[O(o,{name:"check",color:"positive"})]),_:1}),O(p,null,{default:T(()=>[O(v,null,{default:T(()=>t[35]||(t[35]=[F("code",null,"option_a, option_b, option_c, option_d",-1)])),_:1}),O(v,{caption:""},{default:T(()=>t[36]||(t[36]=[U("Answer choices (for multiple choice questions)")])),_:1})]),_:1})]),_:1})):L("",!0),(null==(a=ze.value)?void 0:a.has_options)?(W(),N(c,{key:1},{default:T(()=>[O(p,{avatar:""},{default:T(()=>[O(o,{name:"check",color:"positive"})]),_:1}),O(p,null,{default:T(()=>[O(v,null,{default:T(()=>t[37]||(t[37]=[F("code",null,"correct_answer",-1)])),_:1}),O(v,{caption:""},{default:T(()=>t[38]||(t[38]=[U("Which option is correct (A, B, C, or D)")])),_:1})]),_:1})]),_:1})):L("",!0)]}),_:1}),O(r,{class:"bg-blue-1 text-blue-9"},{avatar:T(()=>[O(o,{name:"lightbulb",color:"blue"})]),default:T(()=>[t[39]||(t[39]=F("strong",null,"That's it!",-1)),t[40]||(t[40]=U(" No need for IDs or complex data. We'll use the settings you chose in Step 1 for all questions. "))]),_:1})])]),_:1})]),_:1})])])]),O(y,{modelValue:Fe.value,"onUpdate:modelValue":t[15]||(t[15]=e=>Fe.value=e)},{default:T(()=>[O(n,{style:{"min-width":"600px"}},{default:T(()=>[O(l,{class:"bg-info text-white"},{default:T(()=>t[42]||(t[42]=[F("div",{class:"text-h6"},"Example File Format",-1)])),_:1}),O(l,null,{default:T(()=>[t[45]||(t[45]=F("p",null,"Here's what your CSV/Excel file should look like:",-1)),O(P,{flat:"",bordered:""},{default:T(()=>t[43]||(t[43]=[F("thead",null,[F("tr",null,[F("th",null,"question_text"),F("th",null,"option_a"),F("th",null,"option_b"),F("th",null,"option_c"),F("th",null,"option_d"),F("th",null,"correct_answer")])],-1),F("tbody",null,[F("tr",null,[F("td",null,"What is 2+2?"),F("td",null,"2"),F("td",null,"3"),F("td",null,"4"),F("td",null,"5"),F("td",null,"C")]),F("tr",null,[F("td",null,"What is the capital of France?"),F("td",null,"London"),F("td",null,"Paris"),F("td",null,"Berlin"),F("td",null,"Madrid"),F("td",null,"B")])],-1)])),_:1}),O(r,{class:"q-mt-md bg-green-1 text-green-9"},{avatar:T(()=>[O(o,{name:"check_circle",color:"green"})]),default:T(()=>[t[44]||(t[44]=U(" Simple and clean! Just questions and answers. "))]),_:1})]),_:1}),O(_,{align:"right"},{default:T(()=>[B(O(a,{flat:"",label:"Close",color:"primary"},null,512),[[h]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),O(y,{modelValue:Qe.value,"onUpdate:modelValue":t[16]||(t[16]=e=>Qe.value=e)},{default:T(()=>[O(n,{style:{"min-width":"700px","max-width":"800px"}},{default:T(()=>[O(l,{class:"bg-purple text-white"},{default:T(()=>[F("div",je,[O(o,{name:"code",class:"q-mr-sm"}),t[46]||(t[46]=U(" JSON Format Example "))])]),_:1}),O(l,null,{default:T(()=>[t[50]||(t[50]=F("p",{class:"text-body2"},"Copy this format and modify with your questions:",-1)),O(i,{"model-value":Ye.value,type:"textarea",outlined:"",readonly:"",rows:"15",class:"q-mb-md",style:{"font-family":"monospace","font-size":"12px"}},{append:T(()=>[O(a,{flat:"",round:"",dense:"",icon:"content_copy",onClick:_t},{default:T(()=>[O(g,null,{default:T(()=>t[47]||(t[47]=[U("Copy to clipboard")])),_:1})]),_:1})]),_:1},8,["model-value"]),O(r,{class:"bg-purple-1 text-purple-9"},{avatar:T(()=>[O(o,{name:"auto_awesome",color:"purple"})]),default:T(()=>[t[48]||(t[48]=F("strong",null,"Pro Tip:",-1)),t[49]||(t[49]=U(' Use the "Copy AI Prompt" button to generate this automatically with AI! '))]),_:1})]),_:1}),O(_,{align:"right"},{default:T(()=>[B(O(a,{flat:"",label:"Close",color:"primary"},null,512),[[h]])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64))}},[["__scopeId","data-v-625438c3"]]);export{Se as default};
