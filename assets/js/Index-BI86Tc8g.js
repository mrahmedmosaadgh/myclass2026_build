import{f as e,a as t,N as o,J as a,b as l,z as r,a4 as s,K as i,F as m}from"./vendor-BWKGNkNB.js";import{_ as n}from"./AppLayout-B3PyevP7.js";import u from"./import_reusable-DDg0bF6U.js";import{r as p,u as c}from"./app-CmR0nRZC.js";import"./QStepper-BgYcKVtw.js";import"./use-panel-CkLmuBWI.js";import"./use-render-cache-CmTcazfP.js";import"./QMarkupTable-D7EQqc1V.js";import"./QTable-twXUsOYs.js";import"./QSelect-CiD02PIi.js";import"./rtl-Cr6c3OOr.js";import"./QLinearProgress-CQupa4Ep.js";import"./use-fullscreen-DVo7i5vz.js";import"./QBadge-BkyG8a2n.js";import"./ImportExcel-CTGqBXRN.js";import"./Modal-CN4QIdw_.js";import"./xlsx-BHXqx-YI.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const d=p({__name:"Index",setup(p){const d=c(),f=e(1),v=e(!1);e(!1);const b=e(null),_=e(null),j=e([]);e([]);const y=e(0),g=e(0),w=route("import_students.import.validate"),x=route("import_students.import.process"),I=["number classroom full_name columns are required",'Section column is optional (will use "General" if empty)',"Duplicate full_name will be skipped","Courses, levels, and sections will be created if they don't exist","Order will be assigned automatically"],k=[["number","classroom","full_name"],["number","classroom","full_name"],["number","classroom","full_name"]],h=[{key:"number",label:"number",required:!1},{key:"classroom",label:"classroom",required:!0},{key:"full_name",label:"full_name",required:!0}],S=[{name:"number",label:"number",field:"number",align:"center"},{name:"classroom",label:"classroom",field:"classroom",align:"left"},{name:"full_name",label:"full_name",field:"full_name",align:"left"}];t(()=>0===g.value?0:y.value/g.value);const C=e=>{var t;b.value=e,e.fileData&&(j.value=e.fileData.map((e,t)=>({index:t+2,...e}))),f.value=3,d.notify({type:"positive",message:"File validation successful!",caption:`${(null==(t=e.stats)?void 0:t.valid_rows)||0} valid rows found`,icon:"check_circle"})},Q=e=>{b.value=null,d.notify({type:"negative",message:"File validation failed",caption:e.message||"Please check your file format",icon:"error"})},E=e=>{var t;_.value=e.stats,v.value=!0,d.notify({type:"positive",message:"Import completed successfully!",caption:`${(null==(t=e.stats)?void 0:t.lessons_created)||0} lessons imported`,icon:"check_circle"})},q=e=>{d.notify({type:"negative",message:"Import failed",caption:e.message||"Please try again",icon:"error"})};return(e,t)=>(a(),o(m,null,[l(r(s),{title:"Import Courses"}),l(n,{title:"Import Courses"},{default:i(()=>[l(u,{"validate-url":r(w),"import-url":r(x),"undo-url":"","import-columns":h,"full-preview-columns":S,"button-text":"Choose Excel File","preview-title":"Course Import Preview","confirm-button-text":"Confirm & Start Import","template-route":e.route("import_students.import.template"),"back-route":e.route("import_students.import.index"),"view-route":e.route("import_students.import.index"),notes:I,"sample-rows":k,onValidationSuccess:C,onValidationError:Q,onImportSuccess:E,onImportError:q},null,8,["validate-url","import-url","template-route","back-route","view-route"])]),_:1})],64))}},[["__scopeId","data-v-f0cb409a"]]);export{d as default};
