import{H as e,I as t,J as s,b as r,M as a,y as o,a3 as i,L as d,O as n,U as l,F as c,Q as x,_ as u}from"./vendor-CUZ9QTQV.js";import{A as p}from"./AdminLayout-Cz9E6Kag.js";import"./app-BwCflFkV.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";const g={class:"py-6 mx-auto max-w-7xl sm:px-6 lg:px-8"},m={class:"mb-8 flex justify-between items-center"},b={class:"flex space-x-3"},f={class:"grid grid-cols-1 gap-5 sm:grid-cols-2 mb-8"},y={class:"bg-white overflow-hidden shadow-sm rounded-xl p-5"},v={class:"flex items-center"},h={class:"ml-5 w-0 flex-1"},w={class:"text-lg font-bold text-gray-900"},k={class:"bg-white overflow-hidden shadow-sm rounded-xl p-5"},j={class:"flex items-center"},J={class:"ml-5 w-0 flex-1"},_={class:"text-lg font-bold text-gray-900"},C={class:"bg-white rounded-xl shadow-sm p-6 mb-8 border border-gray-100"},A={key:0,class:"text-center py-8 text-gray-500"},F={key:1,class:"overflow-x-auto"},M={class:"min-w-full divide-y divide-gray-200"},D={class:"bg-white divide-y divide-gray-200"},L={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},N={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},R={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},I={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},U={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},q={key:0,class:"text-center py-8 text-gray-500"},z={key:1,class:"space-y-4"},B={class:"flex justify-between items-start mb-2"},O={class:"flex-1"},P={class:"text-sm font-medium text-gray-900"},H={class:"text-xs text-gray-500 mt-1"},T={class:"text-xs text-gray-500"},E={class:"flex space-x-2"},G=["onClick"],K=["onClick"],S={class:"mt-2 bg-red-50 border border-red-200 rounded p-2"},V={class:"text-xs font-mono text-red-800"},W={__name:"Jobs",props:{pendingJobs:Array,failedJobs:Array,stats:Object},setup(W){const X=()=>{confirm("Retry all failed jobs?")&&u.post(route("v2.super-system.jobs.retry-all"))},Y=()=>{confirm("Delete ALL failed jobs? This cannot be undone.")&&u.delete(route("v2.super-system.jobs.flush"))};return(Z,$)=>(t(),e(p,null,{default:s(()=>[r(o(i),{title:"Jobs Monitor"}),a("div",g,[a("div",m,[$[0]||($[0]=a("div",null,[a("h1",{class:"text-3xl font-bold text-gray-900 tracking-tight"},"Queue Jobs Monitor"),a("p",{class:"text-sm text-gray-500 mt-1"},"Monitor and manage background jobs")],-1)),a("div",b,[W.stats.failed_count>0?(t(),d("button",{key:0,onClick:X,class:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Retry All Failed ")):n("",!0),W.stats.failed_count>0?(t(),d("button",{key:1,onClick:Y,class:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150"}," Flush All Failed ")):n("",!0)])]),a("div",f,[a("div",y,[a("div",v,[$[2]||($[2]=a("div",{class:"flex-shrink-0 p-3 rounded-md bg-blue-100"},[a("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("div",h,[a("dl",null,[$[1]||($[1]=a("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Pending Jobs",-1)),a("dd",w,l(W.stats.pending_count),1)])])])]),a("div",k,[a("div",j,[$[4]||($[4]=a("div",{class:"flex-shrink-0 p-3 rounded-md bg-red-100"},[a("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),a("div",J,[a("dl",null,[$[3]||($[3]=a("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Failed Jobs",-1)),a("dd",_,l(W.stats.failed_count),1)])])])])]),a("div",C,[$[6]||($[6]=a("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Pending Jobs",-1)),0===W.pendingJobs.length?(t(),d("div",A," No pending jobs ")):(t(),d("div",F,[a("table",M,[$[5]||($[5]=a("thead",{class:"bg-gray-50"},[a("tr",null,[a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Job Name"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Queue"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Attempts"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Created")])],-1)),a("tbody",D,[(t(!0),d(c,null,x(W.pendingJobs,e=>(t(),d("tr",{key:e.id},[a("td",L,l(e.id),1),a("td",N,l(e.name),1),a("td",Q,l(e.queue),1),a("td",R,l(e.attempts),1),a("td",I,l(e.created_at),1)]))),128))])])]))]),a("div",U,[$[7]||($[7]=a("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Failed Jobs",-1)),0===W.failedJobs.length?(t(),d("div",q," No failed jobs ")):(t(),d("div",z,[(t(!0),d(c,null,x(W.failedJobs,e=>(t(),d("div",{key:e.id,class:"border border-gray-200 rounded-lg p-4"},[a("div",B,[a("div",O,[a("h3",P,l(e.name),1),a("p",H,"Queue: "+l(e.queue)+" | UUID: "+l(e.uuid),1),a("p",T,"Failed at: "+l(e.failed_at),1)]),a("div",E,[a("button",{onClick:t=>{return s=e.id,void(confirm("Retry this job?")&&u.post(route("v2.super-system.jobs.retry",s)));var s},class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700"}," Retry ",8,G),a("button",{onClick:t=>{return s=e.id,void(confirm("Delete this failed job?")&&u.delete(route("v2.super-system.jobs.forget",s)));var s},class:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700"}," Delete ",8,K)])]),a("div",S,[a("p",V,l(e.exception)+"...",1)])]))),128))]))])])]),_:1}))}};export{W as default};
