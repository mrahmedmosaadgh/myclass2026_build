import{_ as e}from"./SecondaryButton-UHI6KqaH.js";import{e as t}from"./exportHelper-DgqGG-tE.js";import{f as a,a as l,k as n,ac as o,L as s,I as r,O as c,M as i,x as u,ab as d,b as p,J as m,V as y,aa as v,F as g,Q as h,U as x,af as f,S as b,K as k,H as w}from"./vendor-EI0FRBVb.js";import"./xlsx-cMC2LkxH.js";const C={class:"w-full"},S={key:0,class:"mb-4 flex justify-between items-center"},P={class:"flex items-center space-x-2"},E={key:0,class:"relative"},z={class:"flex items-center space-x-2"},N={key:1,class:"flex items-center space-x-2"},B=["value"],T={class:"flex items-center space-x-2"},A={key:0,class:"relative"},V={key:0,class:"absolute right-0 mt-2 bg-white border rounded-lg shadow-lg z-10 p-2"},j={class:"flex items-center space-x-2 p-2 hover:bg-gray-100"},$=["value"],H={key:1,class:"flex items-center space-x-2"},L=["value"],F={class:"overflow-x-auto border rounded-lg"},M={class:"min-w-full divide-y divide-gray-200"},U={class:"bg-gray-50"},_={key:0,class:"w-12 px-6 py-3"},D=["checked"],I=["onClick"],q={class:"flex items-center space-x-1"},O={key:0,class:"text-gray-400"},G={key:0},J={key:1},K={key:1},Q={key:1,class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},R={class:"bg-white divide-y divide-gray-200"},W={key:0,class:"w-12 px-6 py-4"},X=["value"],Y={key:1,class:"px-6 py-4 whitespace-nowrap text-right text-sm"},Z=["onClick"],ee={key:0},te=["colspan"],ae={key:1,class:"mt-4 flex justify-between items-center"},le={key:0,class:"text-sm text-gray-600"},ne={key:1,class:"flex justify-end"},oe={class:"flex items-center space-x-2"},se=["disabled"],re={class:"text-sm text-gray-600"},ce=["disabled"],ie={__name:"DataTableV2",props:{items:{type:Array,required:!0},columns:{type:Array,required:!0},actions:{type:Array,default:()=>[]},selectable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},sortable:{type:Boolean,default:!1},columnToggle:{type:Boolean,default:!1},showToolbar:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},showPagination:{type:Boolean,default:!0},showPerPage:{type:Boolean,default:!0},perPage:{type:Number,default:10},currentPage:{type:Number,default:1},emptyMessage:{type:String,default:"No items found"},bulkActions:{type:Array,default:()=>[]},totalPages:{type:Number,default:1},exportFileName:{type:String,default:"export"},exportSheetName:{type:String,default:"Sheet1"},printSettings:{type:Object,default:()=>({title:"Data Report",showTimestamp:!0,timestampFormat:"long",orientation:"portrait",paperSize:"a4",fontSize:"12pt",headerBgColor:"#f8f9fa",borderColor:"#ddd",filename:"report",logo:"",footerText:"",columnSettings:{}})}},emits:["action","sort","search","update:perPage","page-change","selection-change","bulk-action"],setup(ie,{emit:ue}){const de=ie,pe=ue,me=()=>{t({items:Ne.value,columns:de.columns,fileName:de.exportFileName,sheetName:de.exportSheetName})},ye=(e={})=>{const t={...de.printSettings,...e},a=window.open("","_blank"),l=document.createElement("table"),n=document.createElement("style");n.textContent=`\n        @page {\n            size: ${t.paperSize} ${t.orientation};\n            margin: 0.5cm;\n        }\n        body {\n            font-size: ${t.fontSize};\n            font-family: Arial, sans-serif;\n            margin: 20px;\n        }\n        table {\n            border-collapse: collapse;\n            width: 100%;\n            margin-bottom: 20px;\n        }\n        th, td {\n            border: 1px solid ${t.borderColor};\n            padding: 8px;\n            text-align: left;\n        }\n        th {\n            background-color: ${t.headerBgColor};\n        }\n        .report-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            margin-bottom: 20px;\n        }\n        .report-title {\n            font-size: 1.5em;\n            font-weight: bold;\n            text-align: center;\n        }\n        .report-timestamp {\n            text-align: right;\n            font-size: 0.9em;\n            color: #666;\n        }\n        .report-footer {\n            text-align: center;\n            margin-top: 20px;\n            font-size: 0.9em;\n            color: #666;\n        }\n        @media print {\n            .no-print { display: none; }\n        }\n    `;const o=document.createElement("div");if(o.className="report-header",t.logo){const e=document.createElement("img");e.src=t.logo,e.style.height="50px",o.appendChild(e)}const s=document.createElement("h1");if(s.className="report-title",s.textContent=t.title,o.appendChild(s),t.showTimestamp){const e=document.createElement("div");e.className="report-timestamp";const a=new Date,l={long:a.toLocaleString(),short:a.toLocaleDateString(),date:a.toLocaleDateString(),time:a.toLocaleTimeString()};e.textContent=`Generated: ${l[t.timestampFormat]}`,o.appendChild(e)}const r=document.createElement("thead"),c=document.createElement("tr");Ee.value.forEach(e=>{const a=t.columnSettings[e.key]||{};if(a.exclude)return;const l=document.createElement("th");l.textContent=e.label,a.width&&(l.style.width=a.width),c.appendChild(l)}),r.appendChild(c),l.appendChild(r);const i=document.createElement("tbody");if(Ne.value.forEach(e=>{const a=document.createElement("tr");Ee.value.forEach(l=>{const n=t.columnSettings[l.key]||{};if(n.exclude)return;const o=document.createElement("td"),s=Ae(e,l.key);o.textContent=n.formatter?n.formatter(s,e):s,a.appendChild(o)}),i.appendChild(a)}),l.appendChild(i),t.footerText){const e=document.createElement("div");e.className="report-footer",e.textContent=t.footerText,a.document.body.appendChild(e)}a.document.title=t.filename,a.document.head.appendChild(n),a.document.body.appendChild(o),a.document.body.appendChild(l),a.document.close(),a.focus(),setTimeout(()=>{a.print(),a.close()},250)},ve=a(""),ge=a(""),he=a("asc"),xe=a([]),fe=a(!1),be=a(de.columns.map(e=>e.key)),ke=a(de.perPage),we=a(""),Ce=l(()=>de.actions.length>0),Se=l(()=>de.bulkActions.length>0),Pe=[10,25,50,100],Ee=l(()=>de.columns.filter(e=>be.value.includes(e.key))),ze=l(()=>{let e=Ee.value.length;return de.selectable&&e++,Ce.value&&e++,e}),Ne=l(()=>{let e=[...de.items];return ve.value&&(e=e.filter(e=>Ee.value.some(t=>{const a=Ae(e,t.key);return String(a).toLowerCase().includes(ve.value.toLowerCase())}))),ge.value&&e.sort((e,t)=>{const a=Ae(e,ge.value),l=Ae(t,ge.value);return"asc"===he.value?a>l?1:-1:a<l?1:-1}),e}),Be=l(()=>de.items.length>0&&xe.value.length===de.items.length),Te=l(()=>Math.ceil(Ne.value.length/ke.value)),Ae=(e,t)=>{var a;return null!=(a=t.split(".").reduce((e,t)=>null==e?void 0:e[t],e))?a:""},Ve=(e,t)=>{var a;return null!=(a=e.id)?a:t},je=(e,t)=>"function"==typeof e.class?e.class(Ae(t,e.key),t):e.class,$e=()=>{pe("search",ve.value)},He=(e,t)=>"function"!=typeof e.show||e.show(t),Le=e=>e.class||"text-blue-600 hover:text-blue-800",Fe=()=>{Be.value?xe.value=[]:xe.value=de.items.map(e=>Ve(e))},Me=()=>{we.value&&(pe("bulk-action",{action:we.value,selected:xe.value}),we.value="")},Ue=e=>{pe("page-change",e)};return n(xe,e=>{pe("selection-change",e)}),(t,a)=>{const l=o("HeroIcon");return r(),s("div",C,[ie.showToolbar?(r(),s("div",S,[i("div",P,[ie.searchable?(r(),s("div",E,[u(i("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>ve.value=e),placeholder:"Search...",class:"px-2 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onInput:$e},null,544),[[d,ve.value]])])):c("",!0),i("div",z,[p(e,{onClick:ye,class:"flex items-center text-sm"},{default:m(()=>a[9]||(a[9]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z","clip-rule":"evenodd"})],-1)])),_:1}),p(e,{onClick:me,class:"flex items-center text-sm"},{default:m(()=>a[10]||(a[10]=[i("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[i("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),y(" Export ")])),_:1})]),Se.value&&xe.value.length>0?(r(),s("div",N,[u(i("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>we.value=e),class:"border rounded-lg px-2 py-1"},[a[11]||(a[11]=i("option",{value:""},"Bulk Actions",-1)),(r(!0),s(g,null,h(ie.bulkActions,e=>(r(),s("option",{key:e.value,value:e.value},x(e.label),9,B))),128))],512),[[v,we.value]]),i("button",{onClick:Me,class:"px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700"}," Apply ")])):c("",!0)]),i("div",T,[ie.columnToggle?(r(),s("div",A,[i("button",{onClick:a[2]||(a[2]=e=>fe.value=!fe.value),class:"px-3 py-1 border rounded-lg hover:bg-gray-100"}," Columns "),fe.value?(r(),s("div",V,[(r(!0),s(g,null,h(ie.columns,e=>(r(),s("div",{key:e.key,class:"whitespace-nowrap"},[i("label",j,[u(i("input",{type:"checkbox","onUpdate:modelValue":a[3]||(a[3]=e=>be.value=e),value:e.key},null,8,$),[[f,be.value]]),i("span",null,x(e.label),1)])]))),128))])):c("",!0)])):c("",!0),ie.showPerPage?(r(),s("div",H,[a[12]||(a[12]=i("span",{class:"text-sm text-gray-600"},"Show:",-1)),u(i("select",{"onUpdate:modelValue":a[4]||(a[4]=e=>ke.value=e),class:"border rounded-lg px-2 py-1",onChange:a[5]||(a[5]=e=>t.$emit("update:perPage",ke.value))},[(r(),s(g,null,h(Pe,e=>i("option",{key:e,value:e},x(e),9,L)),64))],544),[[v,ke.value]])])):c("",!0)])])):c("",!0),i("div",F,[i("table",M,[i("thead",U,[i("tr",null,[ie.selectable?(r(),s("th",_,[i("input",{type:"checkbox",checked:Be.value,onChange:Fe,class:"rounded border-gray-300"},null,40,D)])):c("",!0),(r(!0),s(g,null,h(Ee.value,e=>(r(),s("th",{key:e.key,class:b(["px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",{"cursor-pointer":e.sortable}]),onClick:t=>{return e.sortable&&(a=e.key,ge.value===a?he.value="asc"===he.value?"desc":"asc":(ge.value=a,he.value="asc"),void pe("sort",{key:a,order:he.value}));var a}},[i("div",q,[i("span",null,x(e.label),1),e.sortable?(r(),s("span",O,[ge.value===e.key?(r(),s(g,{key:0},["asc"===he.value?(r(),s("span",G,"↑")):(r(),s("span",J,"↓"))],64)):(r(),s("span",K,"↕"))])):c("",!0)])],10,I))),128)),Ce.value?(r(),s("th",Q," Actions ")):c("",!0)])]),i("tbody",R,[(r(!0),s(g,null,h(Ne.value,(e,n)=>(r(),s("tr",{key:Ve(e,n)},[ie.selectable?(r(),s("td",W,[u(i("input",{type:"checkbox","onUpdate:modelValue":a[6]||(a[6]=e=>xe.value=e),value:Ve(e),class:"rounded border-gray-300"},null,8,X),[[f,xe.value]])])):c("",!0),(r(!0),s(g,null,h(Ee.value,a=>(r(),s("td",{key:a.key,class:b(["px-6 py-4 whitespace-nowrap",je(a,e)])},[a.template?k(t.$slots,a.key,{key:0,item:e,value:Ae(e,a.key)},()=>[y(x(Ae(e,a.key)),1)]):a.formatter?(r(),s(g,{key:1},[y(x(a.formatter(Ae(e,a.key),e)),1)],64)):(r(),s(g,{key:2},[y(x(Ae(e,a.key)),1)],64))],2))),128)),Ce.value?(r(),s("td",Y,[(r(!0),s(g,null,h(ie.actions,(t,a)=>(r(),s(g,{key:a},[He(t,e)?(r(),s("button",{key:0,onClick:a=>((e,t)=>{pe("action",{type:e.type,item:t})})(t,e),class:b([Le(t),"ml-2 first:ml-0"])},[t.icon?(r(),w(l,{key:0,class:b(["w-4 h-4",t.class]),icon:t.icon,mini:!0,outline:""},null,8,["icon","class"])):c("",!0),y(" "+x(t.label),1)],10,Z)):c("",!0)],64))),128))])):c("",!0)]))),128)),0===Ne.value.length?(r(),s("tr",ee,[i("td",{colspan:ze.value,class:"px-6 py-8 text-center text-gray-500"},x(ie.emptyMessage),9,te)])):c("",!0)])])]),ie.showFooter?(r(),s("div",ae,[ie.selectable&&xe.value.length>0?(r(),s("div",le,x(xe.value.length)+" item(s) selected ",1)):c("",!0),ie.showPagination?(r(),s("div",ne,[k(t.$slots,"pagination",{},()=>[i("div",oe,[i("button",{onClick:a[7]||(a[7]=e=>Ue(ie.currentPage-1)),disabled:1===ie.currentPage,class:"px-3 py-1 border rounded-lg disabled:opacity-50"}," Previous ",8,se),i("span",re," Page "+x(ie.currentPage)+" of "+x(Te.value),1),i("button",{onClick:a[8]||(a[8]=e=>Ue(ie.currentPage+1)),disabled:ie.currentPage===Te.value,class:"px-3 py-1 border rounded-lg disabled:opacity-50"}," Next ",8,ce)])])])):c("",!0)])):c("",!0)])}}};export{ie as default};
