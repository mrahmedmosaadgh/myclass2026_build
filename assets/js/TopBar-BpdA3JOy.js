import{u as e}from"./presentationStore-CqoL_spc.js";import{_ as t}from"./LucideIcon-CYYJCXCs.js";import l from"./Dropdown8-D0Gi8TPh.js";import{l as a}from"./ui-B7TfxbV_.js";import{r as n}from"./app-CmR0nRZC.js";import{f as s,a as o,N as i,J as r,R as c,O as d,b as u,y as p,ac as m,K as g,I as v,U as b,W as f,F as h,Q as y,V as x}from"./vendor-BWKGNkNB.js";import"./createLucideIcon-bevK9Pnz.js";import"./printer-yyUpIzJF.js";import"./image-T1FtDBZI.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";const k={class:"presentation-header"},S={class:"title-container"},_={class:"header-controls"},C={class:"btn-primary"},w={key:0,class:"controls-panel"},z={class:"element-type-selector"},j={class:"control-btn"},I=["onClick"],A=n({__name:"TopBar",props:{readonly:{type:Boolean,default:!1},isSaving:{type:Boolean,default:!1}},emits:["add-element","toggle-elements","zoom-change","background-change","quickSave","saveAs","startPresentation","load_all_slides_to_file"],setup(n,{emit:A}){const F=A,T=e(),B=s("text"),P=s(1),$=s(null),E=[{value:"fit",label:"Fit Width"},{value:.5,label:"50%"},{value:1,label:"100%"},{value:1.2,label:"120%"},{value:1.5,label:"150%"},{value:2,label:"200%"},{value:2.5,label:"250%"}],L=o({get:()=>T.presentationTitle||"Untitled Presentation",set:e=>T.setTitle(e)}),U=()=>{try{L.value=L.value.replace(/[^a-z0-9\s-]/gi,"").trim().replace(/\s+/g,"_")}catch(e){console.error("Error updating title:",e),a.error("Failed to update title")}},V=(e,t,l)=>{try{T.currentSlide&&T.currentSlide.content||console.log("Debug - Current slide state:",{currentSlideIndex:T.currentSlideIndex,totalSlides:T.slides.length,currentSlide:T.currentSlide}),F("add-element",{x:e,y:t,type:l})}catch(n){console.error("Add element error:",n),a.error("Failed to add element")}},W=()=>{try{if(!T.currentSlide)return void a.warning("No slide selected");F("toggle-elements")}catch(e){console.error("Toggle elements error:",e),a.error("Failed to toggle elements")}},q=e=>{try{if(!e.target.files||!e.target.files[0])return;F("background-change",e)}catch(t){console.error("Background image error:",t),a.error("Failed to change background")}};return(e,s)=>(r(),i("div",null,[c("div",k,[c("div",S,[u(t,{name:"file-presentation",class:"text-indigo-500",size:"20"}),p(c("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>L.value=e),class:"title-input",placeholder:"Untitled Presentation",onChange:U},null,544),[[m,L.value]])]),c("div",_,[u(l,{align:"right",width:"48","auto-hide":!0},{trigger:g(()=>[c("button",C,[n.isSaving?(r(),v(t,{key:0,name:"loader-2",size:"18",class:"animate-spin"})):(r(),v(t,{key:1,name:"save",size:"18"})),s[9]||(s[9]=c("span",null,"Save",-1)),u(t,{name:"chevron-down",size:"16",class:"ml-1 opacity-70"})])]),content:g(()=>[c("button",{onClick:s[1]||(s[1]=t=>e.$emit("quickSave")),class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2"},[u(t,{name:"save",size:"18",class:"text-indigo-600"}),s[10]||(s[10]=c("span",null,"Quick Save",-1))]),c("button",{onClick:s[2]||(s[2]=t=>e.$emit("saveAs")),class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2"},[u(t,{name:"file-down",size:"18",class:"text-indigo-600"}),s[11]||(s[11]=c("span",null,"Save As...",-1))]),c("button",{onClick:s[3]||(s[3]=t=>e.$emit("load_all_slides_to_file")),class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100 flex items-center gap-2"},[u(t,{name:"file-down",size:"18",class:"text-indigo-600"}),s[12]||(s[12]=c("span",null,"load slides ...",-1))])]),_:1}),c("button",{onClick:s[4]||(s[4]=t=>e.$emit("startPresentation")),class:"btn-present"},[u(t,{name:"play",size:"18"}),s[13]||(s[13]=c("span",null,"Present",-1))])])]),n.readonly?d("",!0):(r(),i("div",w,[c("input",{type:"file",id:"bgInput",accept:"image/*",style:{display:"none"},onChange:q,ref_key:"bgInput",ref:$},null,544),c("button",{onClick:s[5]||(s[5]=t=>e.$refs.bgInput.click()),class:"control-btn"},"Choose Background"),c("button",{onClick:W,class:"control-btn"},"Show/Hide All"),c("div",z,[c("button",{onClick:s[6]||(s[6]=e=>{B.value="text",V(20,20,"text")}),class:b([{active:"text"===B.value},"element-btn"]),title:"Add Text Element"},s[14]||(s[14]=[c("span",{class:"icon-text"},"T",-1),f(" Text ")]),2),c("button",{onClick:s[7]||(s[7]=e=>{B.value="list",V(20,20,"list")}),class:b([{active:"list"===B.value},"element-btn"]),title:"Add List Element"},s[15]||(s[15]=[c("span",{class:"icon-list"},"≡",-1),f(" List ")]),2),c("button",{onClick:s[8]||(s[8]=e=>{B.value="video",V(20,20,"video")}),class:b([{active:"video"===B.value},"element-btn"]),title:"Add Video Element"},s[16]||(s[16]=[c("span",{class:"icon-video"},"▶",-1),f(" Video ")]),2)]),u(l,{align:"right",width:"48","auto-hide":!0},{trigger:g(()=>[c("button",j,[f(x("fit"===P.value?"Fit Width":100*P.value+"%")+" ",1),u(t,{name:"chevron-down",size:"16",class:"ml-1 opacity-70"})])]),content:g(()=>[(r(),i(h,null,y(E,e=>c("button",{key:e.value,onClick:t=>(e=>{try{P.value=e,F("zoom-change",e)}catch(t){console.error("Zoom change error:",t),a.error("Failed to change zoom level")}})(e.value),class:"w-full px-4 py-2 text-left text-sm hover:bg-gray-100"},x(e.label),9,I)),64))]),_:1})]))]))}},[["__scopeId","data-v-30b27012"]]);export{A as default};
