import{M as e}from"./Modal-v4FIiBw3.js";import{_ as a}from"./PrimaryButton-Cw-PZntm.js";import{_ as l}from"./SecondaryButton-BDKLxmbK.js";import{f as t,k as o,I as s,J as n,K as i,N as d,V as u,a0 as r,M as m,R as c,y as p,Q as f,ae as y,F as v,ad as b,ab as g,b as x,W as k}from"./vendor-DuKqz2x4.js";const h={class:"p-6"},w={class:"text-lg font-medium text-gray-900"},q={class:"space-y-6"},_={key:0,class:"flex items-center"},j=["id","onUpdate:modelValue"],V=["for"],S={key:0,class:"ml-2 text-sm text-gray-500"},U=["for"],C=["onUpdate:modelValue","type","id","min","required"],E=["id","onUpdate:modelValue","required"],M={value:""},B=["value"],F={class:"mt-6 flex justify-end space-x-3"},N={__name:"FormModal",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},fields:{type:Array,required:!0},editing:{type:Object,default:null}},emits:["close","submitted"],setup(N,{emit:$}){const A=N,D=$,I=t(!1),J=t({}),K=t({}),O=()=>{const e={};if(!A.fields)return e;A.fields.forEach(a=>{var l,t,o,s,n,i;a.options&&"object"==typeof a.options&&"value"in a.options&&(a.options=a.options.value),"checkbox"===a.type?e[a.name]=null!=(o=null!=(t=null==(l=A.editing)?void 0:l[a.name])?t:a.value)&&o:e[a.name]=null!=(i=null!=(n=null==(s=A.editing)?void 0:s[a.name])?n:a.default)?i:""}),K.value=e};o(()=>A.editing,()=>{O()},{immediate:!0}),o(()=>A.show,e=>{e&&O()});const P=()=>{D("close"),J.value={}},Q=()=>{I.value=!0,console.log("submitForm inside:"+K.value),console.log(K.value),D("submitted",{form:K.value,onSuccess:()=>{I.value=!1,P()},onError:e=>{I.value=!1,J.value=e}})};return(t,o)=>(n(),s(e,{show:N.show,onClose:P},{default:i(()=>[d("div",h,[d("h2",w,u(N.editing?`Edit ${N.title}`:`Create New ${N.title}`),1),d("form",{onSubmit:r(Q,["prevent"]),class:"mt-6"},[d("div",q,[(n(!0),m(v,null,c(N.fields,e=>(n(),m("div",{key:e.name,class:"mb-4"},["checkbox"===e.type?(n(),m("div",_,[p(d("input",{id:e.name,"onUpdate:modelValue":a=>K.value[e.name]=a,type:"checkbox",class:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,8,j),[[y,K.value[e.name]]]),d("label",{for:e.name,class:"ml-2 block text-sm text-gray-900"},u(e.label),9,V),e.help?(n(),m("span",S,u(e.help),1)):f("",!0)])):(n(),m(v,{key:1},[d("label",{for:e.name,class:"block text-sm font-medium text-gray-700"},u(e.label),9,U),"text"===e.type||"number"===e.type||"date"===e.type?p((n(),m("input",{key:0,"onUpdate:modelValue":a=>K.value[e.name]=a,type:e.type,id:e.name,min:e.min,required:e.required,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},null,8,C)),[[b,K.value[e.name]]]):f("",!0),"select"===e.type?p((n(),m("select",{key:1,id:e.name,"onUpdate:modelValue":a=>K.value[e.name]=a,required:e.required,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"},[d("option",M,"Select "+u(e.label),1),(n(!0),m(v,null,c(e.options,e=>(n(),m("option",{key:e.value,value:e.value},u(e.label),9,B))),128))],8,E)),[[g,K.value[e.name]]]):f("",!0)],64))]))),128))]),d("div",F,[x(l,{onClick:P},{default:i(()=>o[0]||(o[0]=[k("Cancel")])),_:1}),x(a,{type:"submit"},{default:i(()=>o[1]||(o[1]=[k("Save")])),_:1})])],32)])]),_:1},8,["show"]))}};export{N as _};
