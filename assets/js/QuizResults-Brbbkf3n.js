import{o as s,u as e,Q as l,c as t,d as i,m as a}from"./app-C-WHvmzS.js";import{Q as r}from"./QCircularProgress-D1OQbBrJ.js";import{Q as u}from"./QBtnToggle-CCP12HZn.js";import{Q as o}from"./QBadge-DrVfQiJT.js";import{f as c,a as n,o as _,N as v,J as d,O as z,b as q,z as p,$ as m,V as f,K as g,F as b,R as k,Q as h,U as x,I as w}from"./vendor-nQjeLEvd.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";const Q={class:"quiz-results"},I={class:"quiz-results__header"},y={class:"quiz-results__header-content"},C={class:"quiz-results__title"},j={class:"quiz-results__summary"},R={class:"quiz-results__score-circle"},N={class:"quiz-results__score-value"},T={class:"quiz-results__score-label"},S={class:"quiz-results__stats-grid"},B={class:"quiz-results__stat"},$={class:"quiz-results__stat-value"},A={class:"quiz-results__stat"},V={class:"quiz-results__stat-value"},J={class:"quiz-results__stat"},M={class:"quiz-results__stat-value"},P={class:"quiz-results__actions"},E={class:"quiz-results__review"},G={class:"quiz-results__review-header"},H={class:"quiz-results__questions"},K={class:"quiz-results__question-header"},L={class:"quiz-results__question-number"},O=["innerHTML"],U={class:"quiz-results__options"},D={class:"quiz-results__option-label"},F={class:"quiz-results__option-text"},W={class:"quiz-results__option-icon"},X={key:0,class:"quiz-results__explanation"},Y={class:"quiz-results__explanation-header"},Z=s({__name:"QuizResults",props:{quizId:Number},setup(s){const Z=e(),ss=s,es=c({quizId:null,quizName:"",answers:{},questions:[],score:0,correctAnswers:0,totalQuestions:0,timeTaken:0}),ls=c("all"),ts=n(()=>"all"===ls.value?es.value.questions:es.value.questions.filter((s,e)=>{const l=is(s,e);return"correct"===ls.value?l:!l})),is=(s,e)=>{var l;const t=es.value.answers[e],i=null==(l=s.options)?void 0:l.find(s=>s.is_correct);return t===(null==i?void 0:i.id)},as=(s,e,l)=>{const t=es.value.answers[l]===s.id,i=s.is_correct;return{"quiz-results__option--correct":i,"quiz-results__option--incorrect":t&&!i,"quiz-results__option--selected":t}},rs=(s,e)=>({"quiz-results__question-card--correct":is(s,e),"quiz-results__question-card--incorrect":!is(s,e)}),us=s=>s>=90?"Excellent!":s>=80?"Great Job!":s>=70?"Good Work!":s>=60?"Not Bad!":"Keep Practicing!",os=()=>{sessionStorage.removeItem("quizResults"),m.visit(`/quizzes/${ss.quizId}/test`)};return _(()=>{(()=>{const s=sessionStorage.getItem("quizResults");s?es.value=JSON.parse(s):(Z.notify({type:"warning",message:"No quiz results found. Please take the quiz first.",icon:"warning"}),m.visit(`/quizzes/${ss.quizId}/test`))})()}),(s,e)=>(d(),v("div",Q,[z("div",I,[q(l,{flat:"",round:"",icon:"arrow_back",onClick:e[0]||(e[0]=s=>p(m).visit("/quizzes"))}),z("div",y,[z("h1",C,f(es.value.quizName),1),e[3]||(e[3]=z("p",{class:"quiz-results__subtitle"},"Quiz Results",-1))])]),z("div",j,[q(a,{class:"quiz-results__score-card"},{default:g(()=>[q(t,{class:"text-center"},{default:g(()=>{return[z("div",R,[q(r,{value:es.value.score,size:"180px",thickness:.12,color:(t=es.value.score,t>=80?"positive":t>=60?"warning":"negative"),"track-color":"grey-3","show-value":"",class:"quiz-results__progress"},{default:g(()=>[z("div",N,f(es.value.score)+"% ",1)]),_:1},8,["value","color"])]),z("h2",T,f(us(es.value.score)),1),z("div",S,[z("div",B,[q(i,{name:"check_circle",size:"32px",color:"positive"}),z("div",$,f(es.value.correctAnswers),1),e[4]||(e[4]=z("div",{class:"quiz-results__stat-label"},"Correct",-1))]),z("div",A,[q(i,{name:"cancel",size:"32px",color:"negative"}),z("div",V,f(es.value.totalQuestions-es.value.correctAnswers),1),e[5]||(e[5]=z("div",{class:"quiz-results__stat-label"},"Incorrect",-1))]),z("div",J,[q(i,{name:"schedule",size:"32px",color:"info"}),z("div",M,f((s=es.value.timeTaken,`${Math.floor(s/60)}:${String(s%60).padStart(2,"0")}`)),1),e[6]||(e[6]=z("div",{class:"quiz-results__stat-label"},"Time Taken",-1))])]),z("div",P,[q(l,{flat:"",label:"Back to Dashboard",icon:"arrow_back",onClick:e[1]||(e[1]=s=>p(m).visit("/quizzes"))}),q(l,{unelevated:"",color:"primary",label:"Retake Quiz",icon:"refresh",onClick:os})])];var s,t}),_:1})]),_:1})]),z("div",E,[z("div",G,[e[7]||(e[7]=z("h3",null,"Question Review",-1)),q(u,{modelValue:ls.value,"onUpdate:modelValue":e[2]||(e[2]=s=>ls.value=s),options:[{label:"All",value:"all"},{label:"Correct",value:"correct"},{label:"Incorrect",value:"incorrect"}],unelevated:"",dense:""},null,8,["modelValue"])]),z("div",H,[(d(!0),v(b,null,k(ts.value,(s,l)=>(d(),v("div",{key:s.id,class:"quiz-results__question-card"},[q(a,{class:x(rs(s,l))},{default:g(()=>[q(t,null,{default:g(()=>[z("div",K,[z("div",L," Question "+f(l+1),1),q(o,{color:is(s,l)?"positive":"negative",icon:is(s,l)?"check":"close",label:is(s,l)?"Correct":"Incorrect"},null,8,["color","icon","label"])]),z("div",{class:"quiz-results__question-text",innerHTML:s.question_text},null,8,O),z("div",U,[(d(!0),v(b,null,k(s.options,(s,e)=>(d(),v("div",{key:s.id,class:x(["quiz-results__option",as(s,0,l)])},[z("div",D,f(String.fromCharCode(65+e)),1),z("div",F,f(s.option_text),1),z("div",W,[s.is_correct?(d(),w(i,{key:0,name:"check_circle",color:"positive",size:"24px"})):es.value.answers[l]===s.id?(d(),w(i,{key:1,name:"cancel",color:"negative",size:"24px"})):h("",!0)])],2))),128))]),s.explanation?(d(),v("div",X,[z("div",Y,[q(i,{name:"lightbulb",color:"warning"}),e[8]||(e[8]=z("strong",null,"Explanation",-1))]),z("p",null,f(s.explanation),1)])):h("",!0)]),_:2},1024)]),_:2},1032,["class"])]))),128))])])]))}},[["__scopeId","data-v-4c838e7d"]]);export{Z as default};
