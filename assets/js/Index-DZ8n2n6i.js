import{d as e,Q as a,n as t,e as s,h as o,R as r,i as n,A as i,j as l,k as d}from"./app-Dccx8xF5.js";import{Q as c}from"./QBadge-BoQNzKR2.js";import{_ as m}from"./AppLayout-CE2yjlSr.js";import{H as u,I as p,J as y,M as f,b as _,L as g,y as v,Q as x,x as h,O as b,V as k,U as w,F as j}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";const C={class:"py-12"},L={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},S={key:0,class:"text-center py-8"},A={key:0,class:"text-grey-7 text-caption"},D={key:0},Q={__name:"Index",props:{conversations:{type:Array,default:()=>[]}},setup(Q){const q=window.route,N=e=>{const a=new Date(e),t=new Date-a;return t<864e5?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t<6048e5?a.toLocaleDateString([],{weekday:"short"}):a.toLocaleDateString([],{month:"short",day:"numeric"})},z=e=>{if(!e)return"primary";const a=["primary","secondary","accent","positive","negative","info","warning"];return a[e.split("").reduce((e,a)=>e+a.charCodeAt(0),0)%a.length]};return(I,U)=>(p(),u(m,{title:"Conversations"},{header:y(()=>U[0]||(U[0]=[f("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Conversations ",-1)])),default:y(()=>[f("div",C,[f("div",L,[_(t,{flat:"",bordered:"",class:"q-mb-md"},{default:y(()=>[_(e,{class:"flex justify-between items-center"},{default:y(()=>[U[1]||(U[1]=f("div",{class:"text-h5"},"Your Conversations",-1)),_(a,{color:"primary",to:v(q)("conversations.create"),icon:"add",label:"New Conversation"},null,8,["to"])]),_:1})]),_:1}),0===Q.conversations.length?(p(),g("div",S,[_(s,{name:"chat",size:"4em",color:"grey-5"}),U[2]||(U[2]=f("div",{class:"text-h6 q-mt-md"},"No conversations yet",-1)),U[3]||(U[3]=f("div",{class:"text-grey-7 q-mb-md"},"Start a new conversation to chat with someone",-1)),_(a,{color:"primary",to:v(q)("conversations.create"),label:"Start a Conversation"},null,8,["to"])])):(p(),u(o,{key:1,bordered:"",separator:"",class:"rounded-borders"},{default:y(()=>[(p(!0),g(j,null,x(Q.conversations,e=>h((p(),u(n,{key:e.id,to:v(q)("conversations.show",e.id),clickable:""},{default:y(()=>[_(l,{avatar:""},{default:y(()=>[e.is_group?(p(),u(i,{key:0},{default:y(()=>[_(s,{name:"group",size:"md"})]),_:1})):(p(),u(i,{key:1,color:z(e.name)},{default:y(()=>{return[k(w((a=e.name,a?a.split(" ").map(e=>e[0]).join("").toUpperCase():"?")),1)];var a}),_:2},1032,["color"]))]),_:2},1024),_(l,null,{default:y(()=>[_(d,{class:"flex justify-between"},{default:y(()=>[f("span",null,w(e.name),1),e.latest_message?(p(),g("span",A,w(N(e.latest_message.created_at)),1)):b("",!0)]),_:2},1024),e.latest_message?(p(),u(d,{key:0,caption:"",lines:"1"},{default:y(()=>[e.latest_message.is_mine?(p(),g("span",D,"You: ")):b("",!0),k(" "+w(e.latest_message.body),1)]),_:2},1024)):(p(),u(d,{key:1,caption:""},{default:y(()=>U[4]||(U[4]=[f("span",{class:"text-grey-7"},"No messages yet",-1)])),_:1}))]),_:2},1024),e.unread_count>0?(p(),u(l,{key:0,side:""},{default:y(()=>[_(c,{color:"primary",rounded:""},{default:y(()=>[k(w(e.unread_count),1)]),_:2},1024)]),_:2},1024)):b("",!0)]),_:2},1032,["to"])),[[r]])),128))]),_:1}))])])]),_:1}))}};export{Q as default};
