import e from"./EnhancedQuestionEditor-DzTqQgQr.js";import t from"./QuestionTypeSelector-CzZfUg3W.js";import{p as s,a as r,b as l,Q as a}from"./QuizEngine-DW37yIyH.js";import{o}from"./app-ggGwxJON.js";import{f as i,o as n,e as d,a as u,N as c,J as p,O as m,Q as b,U as g,V as f,W as v,F as y,R as x,z as w,an as h,I as _,b as q}from"./vendor-nQjeLEvd.js";const k={class:"flex justify-between items-start mb-4"},C=["innerHTML"],j={class:"flex flex-col items-end gap-2"},V={key:1,class:"text-xs text-gray-500"},T={class:"space-y-3"},I={key:0,class:"space-y-2"},A=["onClick"],M=["innerHTML"],S={key:0,class:"fas fa-check-circle text-blue-500"},L={key:1,class:"space-y-2"},U=["onClick"],Q={key:0,class:"fas fa-check text-white text-xs"},O=["innerHTML"],z={key:2,class:"flex gap-4"},H={key:3,class:"space-y-2"},N=["value","disabled"],F={key:4,class:"space-y-2"},B=["value","disabled"],E={class:"mt-6 pt-4 border-t border-gray-100"},R={key:0},P=["disabled"],W={key:1},$={key:0,class:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3"},D={key:1},G={key:0,class:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-3"},J={class:"flex items-center gap-3 mb-2"},Y={class:"text-sm text-orange-700"},K={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4"},X={class:"text-sm text-gray-700 bg-white p-3 rounded border border-gray-200"},Z=["innerHTML"],ee=o({__name:"UniversalQuestionPlayer",props:{question:{type:Object,required:!0},answer:{type:[String,Number,Array,Boolean],default:null},attempts:{type:Number,default:0},solved:{type:Boolean,default:!1},submitted:{type:Boolean,default:!1},mode:{type:String,default:"learn"},juniorMode:{type:Boolean,default:!1}},emits:["update:answer","update:attempts","update:solved","update:submitted"],setup(e,{emit:t}){const a=e,o=t,_=i(a.question.timer||0);let q=null;n(()=>{a.question.timer>0&&!a.solved&&(q=setInterval(()=>{_.value>0?_.value--:clearInterval(q)},1e3))}),d(()=>{q&&clearInterval(q)});const ee=e=>o("update:answer",e),te=e=>Array.isArray(a.answer)?a.answer.includes(e):a.answer===e,se=u(()=>Array.isArray(a.answer)?a.answer.length>0:null!==a.answer&&void 0!==a.answer&&""!==a.answer),re=()=>{const e=a.question,t=a.answer;if(null==t)return!1;if("single_choice"===e.type){const s=e.options.find(e=>e.is_correct);return s&&t===s.id}if("multiple_choice"===e.type){const s=e.options.filter(e=>e.is_correct).map(e=>e.id);return!(!Array.isArray(t)||t.length!==s.length)&&t.every(e=>s.includes(e))}return"true_false"===e.type?t===(!0===e.correct_answer||"true"===e.correct_answer||1===e.correct_answer):!!["short_answer","number"].includes(e.type)&&String(t).trim().toLowerCase()===String(e.correct_answer).trim().toLowerCase()},le=u(()=>re()),ae=u(()=>{var e;const t=a.question;return"single_choice"===t.type?(null==(e=t.options.find(e=>e.is_correct))?void 0:e.text)||"":"multiple_choice"===t.type?t.options.filter(e=>e.is_correct).map(e=>e.text).join(", "):"true_false"===t.type?!0===t.correct_answer||"true"===t.correct_answer||1===t.correct_answer?"True":"False":["short_answer","number"].includes(t.type)?t.correct_answer:""}),oe=()=>{o("update:submitted",!1)},ie=e=>{var t;const s=te(e);if(!a.submitted)return s?"bg-blue-50 border-blue-500 ring-1 ring-blue-500":"bg-white border-gray-200 hover:border-blue-300";const r=null==(t=a.question.options.find(t=>t.id===e))?void 0:t.is_correct;return r?"bg-green-50 border-green-500 ring-1 ring-green-500":s&&!r?"bg-red-50 border-red-500 ring-1 ring-red-500":"bg-white border-gray-200 opacity-50"},ne=e=>{const t=te(e);if(!a.submitted)return t?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:border-blue-300";const s=(!0===a.question.correct_answer||"true"===a.question.correct_answer||1===a.question.correct_answer)===e;return s?"bg-green-600 text-white border-green-600":t&&!s?"bg-red-600 text-white border-red-600":"bg-white text-gray-400 border-gray-200"};return(t,i)=>(p(),c("div",{class:g(["bg-white p-6 rounded-lg border border-gray-200 shadow-sm overflow-hidden",e.juniorMode?"bg-gradient-to-r from-indigo-100 via-purple-100 to-pink-100":""])},[m("div",k,[m("h3",{class:"text-lg font-medium text-gray-900 flex-1 mr-4",innerHTML:e.question.text},null,8,C),m("div",j,[m("span",{class:g(["text-xs font-medium px-2.5 py-0.5 rounded",e.juniorMode?"bg-yellow-200 text-yellow-800":"bg-blue-100 text-blue-800"])},f(e.question.points)+" Points ",3),e.question.timer>0?(p(),c("div",{key:0,class:g(["flex items-center gap-1 text-sm font-mono",_.value<10?"text-red-600 font-bold":"text-gray-600"])},[i[5]||(i[5]=m("i",{class:"fas fa-clock"},null,-1)),v(" "+f(_.value)+"s ",1)],2)):b("",!0),e.solved?b("",!0):(p(),c("div",V," Attempts: "+f(e.attempts)+"/3 ",1))])]),m("div",T,["single_choice"===e.question.type?(p(),c("div",I,[(p(!0),c(y,null,x(e.question.options,t=>(p(),c("button",{key:t.id,onClick:()=>{!e.submitted&&ee(t.id),w(s)()},class:g(["w-full text-left p-4 rounded-lg border transition-all flex items-center justify-between",ie(t.id)])},[m("span",{innerHTML:t.text},null,8,M),te(t.id)?(p(),c("i",S)):b("",!0)],10,A))),128))])):"multiple_choice"===e.question.type?(p(),c("div",L,[(p(!0),c(y,null,x(e.question.options,t=>(p(),c("button",{key:t.id,onClick:()=>{!e.submitted&&(e=>{const t=Array.isArray(a.answer)?[...a.answer]:[],s=t.indexOf(e);-1===s?t.push(e):t.splice(s,1),o("update:answer",t)})(t.id),w(s)()},class:g(["w-full text-left p-4 rounded-lg border transition-all flex items-center gap-3",ie(t.id)])},[m("div",{class:g(["w-5 h-5 border rounded flex items-center justify-center",te(t.id)?"bg-blue-600 border-blue-600":"border-gray-300"])},[te(t.id)?(p(),c("i",Q)):b("",!0)],2),m("span",{innerHTML:t.text},null,8,O)],10,U))),128))])):"true_false"===e.question.type?(p(),c("div",z,[m("button",{onClick:i[0]||(i[0]=()=>{!e.submitted&&ee(!0),w(s)()}),class:g(["flex-1 p-4 rounded-lg border text-center font-medium transition-all",ne(!0)])}," True ",2),m("button",{onClick:i[1]||(i[1]=()=>{!e.submitted&&ee(!1),w(s)()}),class:g(["flex-1 p-4 rounded-lg border text-center font-medium transition-all",ne(!1)])}," False ",2)])):["short_answer","number"].includes(e.question.type)?(p(),c("div",H,[m("input",{type:"text",value:e.answer||"",onInput:i[2]||(i[2]=t=>!e.submitted&&ee(t.target.value)),class:"w-full p-4 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",disabled:e.submitted,placeholder:"Type your answer..."},null,40,N)])):"long_answer"===e.question.type?(p(),c("div",F,[m("textarea",{value:e.answer||"",onInput:i[3]||(i[3]=t=>!e.submitted&&ee(t.target.value)),class:"w-full p-4 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all min-h-[120px]",disabled:e.submitted,placeholder:"Type your answer..."},null,40,B)])):b("",!0)]),m("div",E,[e.submitted?(p(),c("div",W,[le.value?(p(),c("div",$,i[6]||(i[6]=[m("div",{class:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0"},[m("i",{class:"fas fa-check text-green-600 text-xl"})],-1),m("div",null,[m("h4",{class:"font-bold text-green-800"},"Correct!"),m("p",{class:"text-sm text-green-700"},"Great job!")],-1)]))):(p(),c("div",D,[e.attempts<3?(p(),c("div",G,[m("div",J,[i[8]||(i[8]=m("div",{class:"w-10 h-10 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0"},[m("i",{class:"fas fa-exclamation-triangle text-orange-600 text-xl"})],-1)),m("div",null,[i[7]||(i[7]=m("h4",{class:"font-bold text-orange-800"},"Incorrect",-1)),m("p",Y,"You have "+f(3-e.attempts)+" attempts remaining.",1)])]),m("button",{onClick:oe,class:"mt-2 inline-flex items-center px-4 py-2 border border-orange-300 shadow-sm text-sm font-medium rounded-md text-orange-700 bg-white hover:bg-orange-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500"},i[9]||(i[9]=[m("i",{class:"fas fa-redo mr-2"},null,-1),v(" Try Again ")]))])):(p(),c("div",K,[i[11]||(i[11]=h('<div class="flex items-center gap-3 mb-3" data-v-18192a02><div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center flex-shrink-0" data-v-18192a02><i class="fas fa-times text-red-600 text-xl" data-v-18192a02></i></div><div data-v-18192a02><h4 class="font-bold text-red-800" data-v-18192a02>Incorrect</h4><p class="text-sm text-red-700" data-v-18192a02>No attempts remaining.</p></div></div>',1)),m("div",X,[i[10]||(i[10]=m("span",{class:"font-bold text-gray-900"},"Correct Answer:",-1)),m("span",{class:"font-medium ml-1",innerHTML:ae.value},null,8,Z)])]))]))])):(p(),c("div",R,[m("button",{onClick:i[4]||(i[4]=()=>{(()=>{const e=a.attempts+1;o("update:attempts",e),o("update:submitted",!0),re()?(r(),o("update:solved",!0),q&&clearInterval(q)):(l(),e>=3&&(o("update:solved",!0),q&&clearInterval(q)))})(),w(s)()}),disabled:!se.value,class:"w-full sm:w-auto px-6 py-2 bg-blue-600 text-white rounded-md font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm"}," Submit Answer ",8,P)]))])],2))}},[["__scopeId","data-v-18192a02"]]),te={class:"min-h-full flex flex-col"},se={key:0,class:"flex-1 space-y-4 p-1"},re={key:0,class:"text-center py-10 text-gray-500"},le={class:"mt-4 pt-4 border-t border-gray-200"},ae={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},oe={class:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},ie={class:"p-6"},ne={key:1,class:"flex-1"},de={key:2,class:"flex-1 space-y-8"},ue=o({__name:"QuestionSlide",props:{modelValue:{type:Object,default:()=>({questions:[]})},mode:{type:String,default:"edit",validator:e=>["edit","play"].includes(e)},quizConfig:{type:Object,default:()=>({allowReviewMode:!1,autoAdvance:!1,showRationaleOnCorrect:!0})},attemptId:{type:[String,Number],default:void 0},legacyMode:{type:String,default:"learn"}},emits:["update:modelValue","answer-selected","quiz-completed"],setup(s,{emit:r}){const l=s,o=r,n=i(!1),d=i({}),g=i({}),f=i({}),w=i({}),h=u(()=>{const e=l.modelValue.questions||[];if(0===e.length)return!1;const t=["single_choice","multiple_choice","true_false"];return e.every(e=>t.includes(e.type))}),k=u(()=>(l.modelValue.questions||[]).map((e,t)=>{const s={id:C(e.type),slug:e.type,name:j(e.type),hasOptions:["single_choice","multiple_choice","true_false"].includes(e.type),supportsHints:!0,supportsExplanation:!0};let r=[];return"single_choice"===e.type||"multiple_choice"===e.type?r=(e.options||[]).map((t,s)=>{const r="single_choice"===e.type?e.correct_answer===t.id:(e.correct_answer||[]).includes(t.id);return{id:t.id||`opt_${s}`,text:t.text||"",isCorrect:r,rationale:t.rationale||void 0}}):"true_false"===e.type&&(r=[{id:"true",text:"True",isCorrect:!0===e.correct_answer,rationale:void 0},{id:"false",text:"False",isCorrect:!1===e.correct_answer,rationale:void 0}]),{id:e.id||`q_${t}`,questionNumber:t+1,questionTypeId:s.id,questionType:s,question:e.text||e.question||"",answerOptions:r,explanation:e.explanation||void 0,hints:e.hints||void 0,bloomLevel:e.bloomLevel||void 0,difficultyLevel:e.difficultyLevel||void 0,estimatedTimeSec:e.timer||void 0,metadata:{originalType:e.type,points:e.points||0}}})),C=e=>({single_choice:1,multiple_choice:2,true_false:3,fill_blank:4,short_answer:5,essay:6}[e]||1),j=e=>({single_choice:"Multiple Choice",multiple_choice:"Multi-Select",true_false:"True/False",fill_blank:"Fill in the Blank",short_answer:"Short Answer",essay:"Essay"}[e]||"Unknown"),V=e=>{o("answer-selected",e)},T=e=>{console.log("Question changed to:",e)},I=e=>{o("quiz-completed",e)},A=e=>{const t=l.modelValue.questions||[],s={id:"q_"+Math.random().toString(36).substr(2,6),type:e.value,active:!0};"classic"===e.category?(s.text="",s.timer=0,"single_choice"===e.value||"multiple_choice"===e.value?(s.options=[{id:"opt_1",text:"Option 1"},{id:"opt_2",text:"Option 2"}],s.correct_answer="single_choice"===e.value?null:[]):"true_false"===e.value?s.correct_answer=!0:"step_by_step"===e.value&&(s.steps=[])):(s.title="",s.description="",s.points=10,s.timeLimit=0,s.version="default","labelled-diagram"===e.value?(s.imageUrl="",s.labels=[],s.instructions="Click on each point to label it"):"match-up"===e.value?(s.pairs=[],s.shuffleRight=!0):"speaking-cards"===e.value?(s.cards=[],s.recordingRequired=!1):"image-quiz"===e.value?(s.question="",s.options=[]):"group-sort"===e.value?(s.categories=[],s.items=[]):"sequence"===e.value?s.items=[]:"missing-word"===e.value?(s.sentence="",s.blanks=[]):"anagram"===e.value&&(s.scrambledWord="",s.correctWord="")),t.push(s),o("update:modelValue",{...l.modelValue,questions:t}),n.value=!1};return(r,i)=>(p(),c("div",te,["edit"===s.mode?(p(),c("div",se,[s.modelValue.questions&&0!==s.modelValue.questions.length?b("",!0):(p(),c("div",re,' No questions added yet. Click "Add Question" to get started. ')),(p(!0),c(y,null,x(s.modelValue.questions||[],(t,s)=>(p(),_(e,{key:t.id||s,modelValue:t,"onUpdate:modelValue":e=>((e,t)=>{const s=[...l.modelValue.questions||[]];s[e]=t,o("update:modelValue",{...l.modelValue,questions:s})})(s,e),onDelete:e=>(e=>{const t=[...l.modelValue.questions||[]];t.splice(e,1),o("update:modelValue",{...l.modelValue,questions:t})})(s),uniqueId:t.id||`q_${s}`},null,8,["modelValue","onUpdate:modelValue","onDelete","uniqueId"]))),128)),m("div",le,[m("button",{onClick:i[0]||(i[0]=e=>n.value=!0),class:"w-full py-3 border-2 border-dashed border-blue-300 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors font-medium flex items-center justify-center gap-2"},i[2]||(i[2]=[m("i",{class:"fas fa-plus-circle"},null,-1),v(" Add Question ")]))]),n.value?(p(),c("div",ae,[m("div",oe,[m("div",ie,[q(t,{onSelect:A,onCancel:i[1]||(i[1]=e=>n.value=!1)})])])])):b("",!0)])):"play"===s.mode&&h.value?(p(),c("div",ne,[q(a,{quiz:k.value,config:s.quizConfig,attemptId:s.attemptId,onAnswerSelected:V,onQuestionChanged:T,onQuizCompleted:I},null,8,["quiz","config","attemptId"])])):"play"===s.mode?(p(),c("div",de,[(p(!0),c(y,null,x(s.modelValue.questions||[],(e,t)=>(p(),_(ee,{key:e.id||t,question:e,answer:d.value[e.id],"onUpdate:answer":t=>d.value[e.id]=t,attempts:g.value[e.id],"onUpdate:attempts":t=>g.value[e.id]=t,solved:f.value[e.id],"onUpdate:solved":t=>f.value[e.id]=t,submitted:w.value[e.id],"onUpdate:submitted":t=>w.value[e.id]=t,mode:s.legacyMode},null,8,["question","answer","onUpdate:answer","attempts","onUpdate:attempts","solved","onUpdate:solved","submitted","onUpdate:submitted","mode"]))),128))])):b("",!0)]))}},[["__scopeId","data-v-7f514f61"]]),ce=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"}));export{ue as Q,ee as U,ce as a};
