import{o as e,u as t,aE as s}from"./app-DOc39CFu.js";import{f as r,o,af as i,M as a,J as n,b as p,I as l,F as m,_ as d}from"./vendor-DuKqz2x4.js";import c from"./LessonPlayer-D4g4xsra.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./QSpinnerDots-2or4BCK2.js";import"./QBadge-Dz6oAuer.js";import"./QPage-BRLrVhzc.js";import"./QPageContainer-DNRh_oAV.js";import"./QLayout-B3wlLWC0.js";import"./QuestionSlide-BLO-GVlJ.js";import"./EnhancedQuestionEditor-BzoyDvJT.js";import"./QuestionEditor-e5pv9ht-.js";import"./RichTextEditor-GKfLp6JO.js";import"./QColor-CEDfwM6j.js";import"./QSlider-XDiT4A1X.js";import"./QTabs-CQbEg8iR.js";import"./rtl-Cr6c3OOr.js";import"./QTab-Dldfuhzv.js";import"./QTabPanels-D4WV1jNy.js";import"./use-panel-Ddka6S_L.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-C5l4w7rK.js";import"./purify.es-C2Ba6vpb.js";import"./MathEditor-Ce7MGnlH.js";import"./katex-BXKQVcz-.js";import"./MathPastePreview-BCn9eoEl.js";import"./QSelect-Dkiz84LX.js";import"./StepByStepEditor-BnzzT2BB.js";import"./QuestionTypeSelector-hbNzzz9J.js";import"./QuizEngine-Db2L0HYy.js";import"./useQuizI18n-CN14QUvc.js";import"./PlayerSidebar-r0HJyM5A.js";import"./QDrawer-Ci4YbwG7.js";import"./SectionCard-v0-Cx6dC.js";import"./SectionBanner-D_WHtFh4.js";import"./QLinearProgress-DkNjmMsH.js";import"./SlideRenderer-u9U2iF5T.js";import"./FingerDrawingSlide-CpmFYhM2.js";import"./QPopupProxy-C5nzHUTg.js";import"./QSpace-DuS_4lXE.js";import"./NavigationFooter-CYxjM14V.js";import"./DrawingOverlay-nQt0EqS-.js";import"./DrawingCanvas-CiAQ8s9o.js";import"./DrawingToolbar-BdB5z1e4.js";import"./QBtnToggle-CdtgOgxF.js";import"./SlideAnnotationOverlay-DzbvY4JB.js";const u={key:1,class:"h-screen flex items-center justify-center bg-gray-50"},j=e({__name:"StudentLessonView",props:{presentationId:{type:[String,Number],required:!0},studentId:{type:[String,Number],required:!0},sections:{type:Array,default:()=>[]}},setup(e){const j=t(),y=e,g=r({}),v=r([]),b=r(null),Q=r(!0),f=async()=>{try{Q.value=!0;const e=await d.get(route("lesson-presentation.show",{id:y.presentationId}));g.value=e.data,v.value=(e.data.slides||[]).map(e=>({...e,section:e.section||"learn"}));const t=(await d.get(route("lesson-presentation.progress.student",{studentId:y.studentId}))).data.find(e=>e.lesson_presentation_id==y.presentationId);b.value=t}catch(e){console.error("Failed to load data:",e),j.notify({type:"negative",message:"Failed to load lesson data"})}finally{Q.value=!1}},S=async()=>{try{await d.put(route("lesson-presentation.progress.complete-learn",{id:b.value.id})),await f(),j.notify({type:"positive",message:"Learn section completed! Practice unlocked."})}catch(e){console.error("Failed to complete learn:",e)}},w=async()=>{await f(),j.notify({type:"positive",message:"Practice submitted! Waiting for teacher review."})};return o(()=>{f()}),(t,r)=>{const o=i("Head");return n(),a(m,null,[p(o,{title:g.value.name?`Lesson: ${g.value.name}`:"Lesson View"},null,8,["title"]),Q.value?(n(),a("div",u,[p(s,{color:"primary",size:"3em"})])):(n(),l(c,{key:0,presentation:g.value,sections:e.sections,slides:v.value,progress:b.value,loading:Q.value,onCompleteLearn:S,onSubmitPractice:w},null,8,["presentation","sections","slides","progress","loading"]))],64)}}},[["__scopeId","data-v-436cc26f"]]);export{j as default};
