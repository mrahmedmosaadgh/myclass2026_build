import{p as e,u as t,aq as s}from"./app-BXm70mdJ.js";import{f as i,o,H as r,L as a,I as n,b as p,Z as l}from"./vendor-DNM7Y6Xn.js";import d from"./LessonPlayer-DcWh0k_5.js";import"./offline-BzIlwqNM.js";import"./i18n-CBOKL2HS.js";import"./ui-BP0GJNn5.js";import"./QuestionSlide-D0sVKVDi.js";import"./EnhancedQuestionEditor-Cs8uFUOt.js";import"./QuestionEditor-zbB_kPoz.js";import"./RichTextEditor-CxB-jvy6.js";import"./QSlider-BotkHKKU.js";import"./QTabs-CDJ215OP.js";import"./rtl-Cr6c3OOr.js";import"./QTab-DhKL91H_.js";import"./QTabPanels-LFwTBPSC.js";import"./use-panel-D2HepUiw.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-sB32VrK8.js";import"./purify.es-C2Ba6vpb.js";import"./MathEditor-BSejsytI.js";import"./katex-BXKQVcz-.js";import"./MathPastePreview-CJnG0Z0g.js";import"./QBadge-ZzhN1X9C.js";import"./QSelect-CnZtzPIC.js";import"./StepByStepEditor-B4BGjvgG.js";import"./QuestionTypeSelector-CB_cjRod.js";import"./QuizEngine-IQNXJWyB.js";import"./useQuizI18n-BM0hw-zK.js";import"./LessonSidebar-BAr4v8Nk.js";import"./QPagination-CaPaC77P.js";const m={key:1,class:"h-screen flex items-center justify-center bg-gray-50"},c=e({__name:"StudentLessonView",props:{presentationId:{type:[String,Number],required:!0},studentId:{type:[String,Number],required:!0},sections:{type:Array,default:()=>[]}},setup(e){const c=t(),u=e,j=i({}),y=i([]),b=i(null),g=i(!0),v=async()=>{try{g.value=!0;const e=await l.get(route("lesson-presentation.show",{id:u.presentationId}));j.value=e.data,y.value=(e.data.slides||[]).map(e=>({...e,section:e.section||"learn"}));const t=(await l.get(route("lesson-presentation.progress.student",{studentId:u.studentId}))).data.find(e=>e.lesson_presentation_id==u.presentationId);b.value=t}catch(e){console.error("Failed to load data:",e),c.notify({type:"negative",message:"Failed to load lesson data"})}finally{g.value=!1}},f=async()=>{try{await l.put(route("lesson-presentation.progress.complete-learn",{id:b.value.id})),await v(),c.notify({type:"positive",message:"Learn section completed! Practice unlocked."})}catch(e){console.error("Failed to complete learn:",e)}},Q=async()=>{await v(),c.notify({type:"positive",message:"Practice submitted! Waiting for teacher review."})};return o(()=>{v()}),(t,i)=>g.value?(n(),a("div",m,[p(s,{color:"primary",size:"3em"})])):(n(),r(d,{key:0,presentation:j.value,sections:e.sections,slides:y.value,progress:b.value,loading:g.value,onCompleteLearn:f,onSubmitPractice:Q},null,8,["presentation","sections","slides","progress","loading"]))}},[["__scopeId","data-v-683abdec"]]);export{c as default};
