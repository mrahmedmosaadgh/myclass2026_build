import{p as e,u as a,Q as l,a as s,n as t,b as i,d as o,m as u,aD as d}from"./app-DXXarK7I.js";import{Q as r}from"./QTab-DzZGFS5V.js";import{Q as n}from"./QTabs-BC5MrYhV.js";import{Q as v}from"./QTabPanel-Cip5Q1JD.js";import{Q as m}from"./QTabPanels-BXLgHK63.js";import{aM as c,aN as p,f as b,a as f,H as h,I as _,J as y,b as g,M as j,U as V,L as k,Q,F as w,x,Z as C}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./rtl-Cr6c3OOr.js";import"./use-panel-v2pzMR_n.js";import"./use-render-cache-CmTcazfP.js";const q={class:"row items-center justify-between q-mb-md"},M={class:"text-h6"},B={class:"column q-gutter-md"},I={class:"row items-center justify-between"},U={class:"text-subtitle1 text-primary"},N={class:"point-badge plus"},T={class:"column q-gutter-md"},P={class:"row items-center justify-between"},A={class:"text-subtitle1 text-negative"},H={class:"point-badge minus"},J={class:"q-mt-sm"},O=e({__name:"BehaviorManager",props:c({behaviors:Array,student:Object,studentBehaviorId:Number},{modelValue:{type:Boolean,default:!1},modelModifiers:{}}),emits:c(["recorded"],["update:modelValue"]),setup(e,{emit:c}){const O=p(e,"modelValue"),D=e,E=c,F=a(),K=b("positive"),L=b(!1),W=b(null),Z=f(()=>D.behaviors.filter(e=>e.value>0)),z=f(()=>D.behaviors.filter(e=>e.value<0)),G=e=>{W.value=e,L.value=!0},R=async()=>{F.loading.show();try{await C.post("/api/student-behaviors",{student_behaviors_id:D.studentBehaviorId,reason_id:W.value.id,value:W.value.value,action_type:"behavior",note:null}),E("recorded"),O.value=!1}catch(e){console.error(e),F.notify({type:"negative",message:"Error adding behavior"})}F.loading.hide()};return(a,c)=>(_(),h(i,{modelValue:O.value,"onUpdate:modelValue":c[4]||(c[4]=e=>O.value=e),persistent:""},{default:y(()=>[g(t,{class:"q-pa-md",style:{width:"380px"}},{default:y(()=>{var a;return[j("div",q,[j("div",M,V(null==(a=e.student)?void 0:a.name),1),g(l,{dense:"",flat:"",icon:"close",onClick:c[0]||(c[0]=e=>O.value=!1)})]),g(n,{modelValue:K.value,"onUpdate:modelValue":c[1]||(c[1]=e=>K.value=e),"active-color":"primary","indicator-color":"primary"},{default:y(()=>[g(r,{name:"positive",label:"Positive"}),g(r,{name:"negative",label:"Needs Work"})]),_:1},8,["modelValue"]),g(s,{class:"q-my-sm"}),g(m,{modelValue:K.value,"onUpdate:modelValue":c[2]||(c[2]=e=>K.value=e),animated:""},{default:y(()=>[g(v,{name:"positive"},{default:y(()=>[j("div",B,[(_(!0),k(w,null,Q(Z.value,e=>(_(),h(t,{key:e.id,class:"behavior-btn behavior-positive",clickable:"",onClick:a=>G(e)},{default:y(()=>[j("div",I,[j("div",U,V(e.name),1),j("div",N,"+"+V(e.value),1)])]),_:2},1032,["onClick"]))),128))])]),_:1}),g(v,{name:"negative"},{default:y(()=>[j("div",T,[(_(!0),k(w,null,Q(z.value,e=>(_(),h(t,{key:e.id,class:"behavior-btn behavior-negative",clickable:"",onClick:a=>G(e)},{default:y(()=>[j("div",P,[j("div",A,V(e.name),1),j("div",H,"-"+V(Math.abs(e.value)),1)])]),_:2},1032,["onClick"]))),128))])]),_:1})]),_:1},8,["modelValue"]),g(i,{modelValue:L.value,"onUpdate:modelValue":c[3]||(c[3]=e=>L.value=e)},{default:y(()=>[g(t,null,{default:y(()=>[g(o,null,{default:y(()=>{var e,a;return[c[5]||(c[5]=j("div",{class:"text-h6"},"Confirm Behavior",-1)),j("div",J,V(null==(e=W.value)?void 0:e.name)+" ("+V(null==(a=W.value)?void 0:a.value)+")",1)]}),_:1}),g(u,{align:"right"},{default:y(()=>[x(g(l,{flat:"",label:"Cancel"},null,512),[[d]]),g(l,{color:"primary",label:"Apply",onClick:R})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1})]),_:1},8,["modelValue"]))}},[["__scopeId","data-v-30fedf9a"]]);export{O as default};
