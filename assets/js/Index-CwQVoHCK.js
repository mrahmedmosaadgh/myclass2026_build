import{f as e,a as o,N as t,J as a,b as s,z as r,a4 as l,K as i,F as n}from"./vendor-BWKGNkNB.js";import{_ as u}from"./AppLayout-B3PyevP7.js";import m from"./import_reusable-CMr0qCoz.js";import{r as c,u as p}from"./app-YpH5vqWh.js";import"./QStepper-CjPHh5ur.js";import"./use-panel-Di-bjwYZ.js";import"./use-render-cache-CmTcazfP.js";import"./QMarkupTable-DGv5_oX8.js";import"./QTable-CgaOzZjZ.js";import"./QSelect-jBpShTzY.js";import"./rtl-Cr6c3OOr.js";import"./QLinearProgress-DZgk7T4R.js";import"./use-fullscreen-DDGrUiCT.js";import"./QBadge-DepkVBS8.js";import"./ImportExcel-DMuVivPh.js";import"./Modal-DfUGIOzP.js";import"./xlsx-BHXqx-YI.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const d=c({__name:"Index",setup(c){const d=p(),f=e(1),v=e(!1);e(!1);const g=e(null),y=e(null),b=e([]);e([]);const j=e(0),L=e(0),x=route("course-management.import.validate"),w=route("course-management.import.process"),k=["Course, Level, and Lesson columns are required",'Section column is optional (will use "General" if empty)',"Duplicate lessons will be skipped","Courses, levels, and sections will be created if they don't exist","Order will be assigned automatically"],C=[["Grade 5 Math","Fractions","Add unlike fractions","Lesson A"],["Grade 5 Math","Fractions","Add unlike fractions","Lesson B"],["English Literature","Poetry","","Introduction to Poetry"]],I=[{key:"Course",label:"Course",required:!0},{key:"Level",label:"Level",required:!0},{key:"Section",label:"Section (Optional)",required:!1},{key:"Lesson",label:"Lesson",required:!0}],S=[{name:"index",label:"Row",field:"index",align:"center"},{name:"Course",label:"Course",field:"Course",align:"left"},{name:"Level",label:"Level",field:"Level",align:"left"},{name:"Section",label:"Section",field:"Section",align:"left"},{name:"Lesson",label:"Lesson",field:"Lesson",align:"left"}];o(()=>0===L.value?0:j.value/L.value);const _=e=>{var o;g.value=e,e.fileData&&(b.value=e.fileData.map((e,o)=>({index:o+2,...e}))),f.value=3,d.notify({type:"positive",message:"File validation successful!",caption:`${(null==(o=e.stats)?void 0:o.valid_rows)||0} valid rows found`,icon:"check_circle"})},h=e=>{g.value=null,d.notify({type:"negative",message:"File validation failed",caption:e.message||"Please check your file format",icon:"error"})},E=e=>{var o;y.value=e.stats,v.value=!0,d.notify({type:"positive",message:"Import completed successfully!",caption:`${(null==(o=e.stats)?void 0:o.lessons_created)||0} lessons imported`,icon:"check_circle"})},F=e=>{d.notify({type:"negative",message:"Import failed",caption:e.message||"Please try again",icon:"error"})};return(e,o)=>(a(),t(n,null,[s(r(l),{title:"Import Courses"}),s(u,{title:"Import Courses"},{default:i(()=>[s(m,{"validate-url":r(x),"import-url":r(w),"undo-url":"","import-columns":I,"full-preview-columns":S,"button-text":"Choose Excel File","preview-title":"Course Import Preview","confirm-button-text":"Confirm & Start Import","template-route":e.route("course-management.import.template"),"back-route":e.route("course-management.courses.index"),"view-route":e.route("course-management.courses.index"),notes:k,"sample-rows":C,onValidationSuccess:_,onValidationError:h,onImportSuccess:E,onImportError:F},null,8,["validate-url","import-url","template-route","back-route","view-route"])]),_:1})],64))}},[["__scopeId","data-v-acf59b33"]]);export{d as default};
