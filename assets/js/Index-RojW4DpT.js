import{f as e,a as t,H as l,I as a,J as o,V as r,b as s,M as n,U as i,L as u,S as d,F as c,Q as v,x as p,aa as m,ad as g,ab as y,a1 as f,$ as b,O as h,_ as x,Z as w}from"./vendor-CUZ9QTQV.js";import{_ as k}from"./AppLayout-ClCiCQFL.js";import{_}from"./PrimaryButton-DNYxrPcC.js";import{_ as j}from"./SecondaryButton-BH3tlEGv.js";import{_ as S}from"./InputLabel-C_PsaydV.js";import{_ as C}from"./InputError-CPHDefI0.js";import{_ as V}from"./TextInput-DDVm4lUS.js";import T from"./DataTableV7-BQqHB9CY.js";import A from"./FormModal8-CFoGahXs.js";import E from"./slide_content-sFC2Ql1k.js";import{l as I}from"./ui-LrZmvB2D.js";import{e as U}from"./exportHelper-DgqGG-tE.js";import"./LucideIcon-BIJr1cpK.js";import"./createLucideIcon-D8qi68V_.js";import"./align-right-BZZ7ajs4.js";import"./underline-o77cex9c.js";import"./image-odJN2dKV.js";import"./printer-D7revZzT.js";import"./Pagination7-ChZ75mNA.js";import"./app-BwCflFkV.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ImportExcel-3BOLBL-P.js";import"./Modal-Bxqmvcy5.js";import"./xlsx-cMC2LkxH.js";import"./Editor7tiptap-YlCu9_PZ.js";import"./TodoList7-7AIe-NWy.js";import"./TabButtons-D0mhADnF.js";import"./ReusableHtmlViewer_Editor9-CCbTfwcD.js";import"./purify.es-C2Ba6vpb.js";import"./use_paste-CDWXvEvT.js";import"./AdvancedClipboardHandler-CrSLsqXo.js";const q={class:"p-6"},M={class:"mb-4 flex justify-end"},N={key:0},D={key:1},H=["innerHTML"],O={key:1,class:"whitespace-pre-wrap"},L=["src"],J={key:3,class:"space-y-2"},B={key:4,class:"text-red-600"},P={class:"mt-2 text-sm text-gray-600"},z={class:"py-12"},$={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},F={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},R={class:"text-lg font-medium text-gray-900"},Q={class:"space-y-6"},G=["value"],K=["value"],Z={class:"space-y-6"},W={class:"flex justify-between items-center bg-gradient-to-r from-indigo-500 to-purple-600 p-4 rounded-lg shadow-lg"},X={class:"text-lg font-medium text-white flex items-center gap-2"},Y={class:"p-0 relative"},ee={class:"px-2 scale-50 absolute rounded-full bg-black -top-4 -left-4"},te={class:"grid gap-6"},le={class:"bg-gradient-to-r from-indigo-500 to-purple-600 px-6 py-4 flex justify-between items-center border-b"},ae={class:"font-medium text-gray-700 flex items-center gap-2"},oe={class:"bg-indigo-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm"},re=["onClick"],se={class:"p-6 space-y-4 bg-gradient-to-r from-blue-300 to-blue-200"},ne={class:"group"},ie={open:!0},ue={class:"group"},de={key:0,class:"flex items-center gap-2"},ce={key:1},ve={class:"group"},pe=["id","onUpdate:modelValue"],me={class:"bg-gradient-to-r from-blue-300 to-blue-200 rounded-xl shadow-md p-6 border border-gray-100"},ge={class:"text-sm text-gray-500"},ye={class:"space-y-4"},fe={class:"flex items-center gap-2"},be={class:"relative flex-1"},he=["onKeydown"],xe={class:"flex flex-wrap gap-2"},we={class:"text-indigo-700"},ke=["onClick"],_e={key:0,class:"text-gray-400 text-sm italic"},je={class:"flex items-center justify-end gap-4"},Se={key:0,class:"flex items-center gap-2"},Ce={key:1},Ve="Documentation",Te="/admin/documentation",Ae={__name:"Index",props:{records:Object,options:Object},setup(Ae){const Ee=Ae,Ie=[{value:"code",label:"Code"},{value:"comment",label:"Comment"},{value:"idea",label:"Idea"},{value:"tutorial",label:"Tutorial"},{value:"reference",label:"Reference"},{value:"question",label:"Question"},{value:"note",label:"Note"},{value:"research",label:"Research"},{value:"guide",label:"Guide"},{value:"api",label:"API"}],Ue=[{value:"draft",label:"Draft"},{value:"published",label:"Published"},{value:"archived",label:"Archived"}],qe=e(!1),Me=e(!1),Ne=e(null),De=e(!1),He=e({}),Oe=e(""),Le=e({title:"",content:[],type:"note",status:"draft",tags:[]}),Je=e(""),Be=e(!1),Pe=e(!1),ze=e(!1),$e=e(null),Fe=e(!1),Re=()=>{ze.value=!1,Fe.value=!1},Qe=e(null),Ge=e([{type:"preview",label:"Preview",icon:"eye",class:"text-indigo-600 hover:text-indigo-800"},{type:"edit",label:"Edit",icon:"pencil",class:"text-blue-600 hover:text-blue-800"},{type:"delete",label:"Delete",icon:"trash",class:"text-red-600 hover:text-red-800"}]),Ke=[{key:"title",label:"Title",required:!0},{key:"type",label:"Type",required:!0},{key:"status",label:"Status",required:!0},{key:"content",label:"Content",required:!0},{key:"tags",label:"Tags"}],Ze=t(()=>Ee.records.data||[]),We=t(()=>{var e;return(null==(e=Ee.records)?void 0:e.links)?Ee.records.links.map(e=>({...e,label:e.label.replace("&laquo;","«").replace("&raquo;","»")})):[]}),Xe=t(()=>Ne.value?`Edit ${Ve}`:`Add New ${Ve}`),Ye=t(()=>""!==Le.value.title.trim()&&""!==Le.value.type&&""!==Le.value.status&&Array.isArray(Le.value.content)&&Le.value.content.length>0&&Le.value.content.every(e=>""!==e.slide_title.trim()&&""!==e.slide_content.trim())),et=()=>({slide_title:"",slide_content:"",content_type:"text",notes:"",timestamp:(new Date).toISOString()}),tt=()=>{Le.value.content.push(et())},lt=()=>{Array.isArray(Le.value.tags)||(Le.value.tags=[]);const e=Oe.value.trim();e&&!Le.value.tags.includes(e)&&Le.value.tags.push(e),Oe.value=""},at=(e=null)=>{if(e){let l;try{l="string"==typeof e.content?JSON.parse(e.content):e.content}catch(t){console.warn("Invalid content format, using empty array"),l=[et()]}Le.value={id:e.id,title:e.title,type:e.type,status:e.status,content:l,tags:Array.isArray(e.tags)?e.tags:"string"==typeof e.tags?JSON.parse(e.tags):[]},Ne.value=e}else Le.value={title:"",content:[et()],type:"note",status:"draft",tags:[]},Ne.value=null;qe.value=!0},ot=()=>{qe.value=!1,Ne.value=null,Le.value={title:"",content:[et()],type:"note",status:"draft",tags:[]},He.value={}},rt=async()=>{if(Ye.value&&!De.value){De.value=!0;try{const e={...Le.value,content:JSON.stringify(Le.value.content),tags:JSON.stringify(Le.value.tags)};Ne.value?await w.put(route("documentation.update",Ne.value.id),e):await w.post(route("documentation.store"),e),ot(),I.success(`Documentation ${Ne.value?"updated":"created"} successfully`),x.reload()}catch(e){console.error("Error submitting form:",e),I.error("An error occurred while saving the documentation")}finally{De.value=!1}}},st=async()=>{if(Ye.value&&!De.value){De.value=!0;try{const e={...Le.value,content:JSON.stringify(Le.value.content),tags:JSON.stringify(Le.value.tags)};Ne.value?await w.put(route("documentation.update",Ne.value.id),e):await w.post(route("documentation.store"),e),x.reload()}catch(e){console.error("Error submitting form:",e),I.error("An error occurred while saving the documentation")}finally{De.value=!1}}},nt=()=>{x.reload({only:["records"]})},it=[{key:"id",label:"ID",sortable:!0},{key:"title",label:"Title",sortable:!0},{key:"type",label:"Type",sortable:!0},{key:"status",label:"Status",sortable:!0},{key:"author.name",label:"Author",sortable:!0}],ut=({key:e,order:t})=>{x.get(route("documentation.index"),{sort:e,direction:t,search:Je.value},{preserveState:!0,preserveScroll:!0})},dt=()=>{Je.value.trim()&&(Be.value=!0,Pe.value=!0,x.get(route("documentation.index"),{search:Je.value,page:1},{preserveState:!0,preserveScroll:!1,onFinish:()=>{Be.value=!1}}))},ct=()=>{Je.value="",Pe.value=!1,x.get(route("documentation.index"),{},{preserveState:!0,preserveScroll:!0})},vt=async({type:e,item:t})=>{var l,a;if(console.log({type:e,item:t}),"preview"!==e){if("edit"===e)try{at(t)}catch(o){console.error("Error preparing item for edit:",o),I.error("Error preparing content for editing")}else if("delete"===e){if(!confirm("Are you sure you want to delete this documentation?"))return;try{await w.delete(`${Te}/${t.id}`),nt(),I.success("Documentation deleted successfully")}catch(o){console.error("Error deleting documentation:",o),I.error((null==(a=null==(l=o.response)?void 0:l.data)?void 0:a.message)||"Error deleting documentation")}}}else(e=>{if(e)try{let t=e.content;if("string"==typeof t&&(t=JSON.parse(t)),!Array.isArray(t)||0===t.length)return void console.warn("Invalid content format - expected non-empty array");const l=t[0];$e.value={content_type:l.content_type||l.type||"text",slide_content:l.slide_content||l.content||""},console.log("Preview slide:",$e.value),ze.value=!0}catch(t){console.warn("Error parsing content:",t),I.error("Unable to preview content")}})(t)},pt=()=>{U({items:Ze.value,columns:[{key:"id",label:"ID"},{key:"title",label:"Title"},{key:"type",label:"Type"},{key:"status",label:"Status"},{key:"content",label:"Content"},{key:"tags",label:"Tags"}],fileName:"documentation",sheetName:"Documentation"})},mt=e=>{var t,l,a,o;e&&!Be.value&&(Be.value=!0,x.get(e,{search:Je.value,sort:null==(l=null==(t=Ee.records)?void 0:t.filters)?void 0:l.sort,direction:null==(o=null==(a=Ee.records)?void 0:a.filters)?void 0:o.direction},{preserveState:!0,preserveScroll:!0,onFinish:()=>{Be.value=!1}}))};return(e,t)=>(a(),l(k,{title:"Documentation Management"},{default:o(()=>{var e;return[r(i(null==(e=Qe.value)?void 0:e.content)+" ",1),s(A,{show:ze.value,onClose:Re,"max-width":"2xl",title:"Preview Documentation"},{footer:o(()=>[s(j,{onClick:t[1]||(t[1]=e=>ze.value=!1)},{default:o(()=>t[8]||(t[8]=[r(" Close ")])),_:1})]),default:o(()=>{var e,l,o,s,p,m;return[n("div",q,[n("div",M,[n("button",{onClick:t[0]||(t[0]=e=>Fe.value=!Fe.value),class:d(["px-3 py-1 text-sm rounded-md",Fe.value?"bg-indigo-600 text-white":"bg-gray-200 text-gray-700"])},[Fe.value?(a(),u("span",N,"Viewing as HTML")):(a(),u("span",D,"View as HTML"))],2)]),Fe.value||"html"===(null==(e=$e.value)?void 0:e.content_type)?(a(),u("div",{key:0,class:"prose max-w-none",innerHTML:$e.value.slide_content},null,8,H)):"text"===(null==(l=$e.value)?void 0:l.content_type)?(a(),u("div",O,i($e.value.slide_content),1)):"screenshot"===(null==(o=$e.value)?void 0:o.content_type)||"text_img"===(null==(s=$e.value)?void 0:s.content_type)?(a(),u("img",{key:2,src:$e.value.slide_content,class:"max-w-full h-auto",alt:"Screenshot"},null,8,L)):"todo_list"===(null==(p=$e.value)?void 0:p.content_type)?(a(),u("div",J,[(a(!0),u(c,null,v(JSON.parse($e.value.slide_content),(e,t)=>(a(),u("div",{key:t}," - "+i(e.text),1))),128))])):(a(),u("div",B,[r(" Unknown content type: "+i(null==(m=$e.value)?void 0:m.content_type)+" ",1),n("pre",P,i(JSON.stringify($e.value,null,2)),1)]))])]}),_:1},8,["show"]),n("div",z,[n("div",$,[n("div",F,[s(T,{items:Ze.value,columns:it,actions:Ge.value,loading:Be.value,"per-page":3,pagination:We.value,"base-url":Te,"import-columns":Ke,"is-filtered":Pe.value,"search-query":Je.value,onSort:ut,onAction:vt,onPageChanged:mt,onAddNew:at,onImport:nt,onExport:pt,onSearch:dt,onClearSearch:ct,"onUpdate:searchQuery":t[2]||(t[2]=e=>Je.value=e)},null,8,["items","actions","loading","pagination","is-filtered","search-query"])])]),s(A,{show:qe.value,title:Xe.value,submitting:De.value,onClose:ot,onSubmit:rt},{header:o(()=>[n("h2",R,i(Ne.value?"Edit Documentation":"Create Documentation"),1)]),footer:o(()=>[n("div",je,[s(j,{onClick:ot,disabled:De.value,class:"hover:bg-gray-100 transition-colors duration-200"},{default:o(()=>t[20]||(t[20]=[r(" Cancel ")])),_:1},8,["disabled"]),s(_,{onClick:rt,disabled:De.value||!Ye.value,class:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105"},{default:o(()=>[De.value?(a(),u("span",Se,t[21]||(t[21]=[n("svg",{class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),r(" Saving... ")]))):(a(),u("span",Ce,"Save"))]),_:1},8,["disabled"])])]),default:o(()=>{var e;return[n("div",Q,[n("div",null,[s(S,{for:"title",value:"Title"}),s(V,{id:"title",modelValue:Le.value.title,"onUpdate:modelValue":t[3]||(t[3]=e=>Le.value.title=e),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),s(C,{message:He.value.title,class:"mt-2"},null,8,["message"])]),n("div",null,[s(S,{for:"type",value:"Type"}),p(n("select",{id:"type","onUpdate:modelValue":t[4]||(t[4]=e=>Le.value.type=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",required:""},[(a(),u(c,null,v(Ie,e=>n("option",{key:e.value,value:e.value},i(e.label),9,G)),64))],512),[[m,Le.value.type]]),s(C,{message:He.value.type,class:"mt-2"},null,8,["message"])]),n("div",null,[s(S,{for:"status",value:"Status"}),p(n("select",{id:"status","onUpdate:modelValue":t[5]||(t[5]=e=>Le.value.status=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",required:""},[(a(),u(c,null,v(Ue,e=>n("option",{key:e.value,value:e.value},i(e.label),9,K)),64))],512),[[m,Le.value.status]]),s(C,{message:He.value.status,class:"mt-2"},null,8,["message"])]),n("div",Z,[n("div",W,[n("h3",X,[t[10]||(t[10]=n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})],-1)),n("div",Y,[n("div",ee,i(null==(e=Le.value.content)?void 0:e.length),1),t[9]||(t[9]=n("div",{class:"p-0"},"Slides",-1))]),t[11]||(t[11]=r(" : "))]),s(_,{type:"button",onClick:tt,class:"bg-white text-blue-600 hover:bg-indigo-50 transition-all duration-200 transform hover:scale-105"},{default:o(()=>t[12]||(t[12]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2 text-blue-600",fill:"blue",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),n("span",{class:"text-blue-600 hover:bg-indigo-50 transition-all duration-200 transform hover:scale-105"}," Add Slide ",-1)])),_:1})]),n("div",te,[(a(!0),u(c,null,v(Le.value.content,(e,l)=>(a(),u("div",{key:l,class:"bg-white rounded-xl shadow-md overflow-hidden transition-all duration-200 hover:shadow-xl border border-gray-100"},[n("div",le,[n("h4",ae,[n("span",oe,i(l+1),1),r(" Slide "+i(l+1),1)]),n("button",{type:"button",onClick:e=>(e=>{Le.value.content.splice(e,1)})(l),class:"text-red-500 hover:text-red-700 transition-colors duration-200 flex items-center gap-1"},t[13]||(t[13]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),r(" Remove ")]),8,re)]),n("div",se,[n("div",ne,[s(S,{for:"slide-title-"+l,value:"Slide Title",class:"text-gray-700"},null,8,["for"]),s(V,{id:"slide-title-"+l,modelValue:e.slide_title,"onUpdate:modelValue":t=>e.slide_title=t,type:"text",class:"mt-1 block w-full transition-all duration-200 focus:ring-2 focus:ring-indigo-500",required:"",placeholder:"Enter slide title..."},null,8,["id","modelValue","onUpdate:modelValue"])]),n("details",ie,[t[16]||(t[16]=n("summary",{class:"bg-blue-400 cursor-pointer hover:scale-105 transition-all"}," click to see contents ",-1)),n("div",ue,[s(S,{for:"slide-content-"+l,value:"Slide Content",class:"text-gray-700"},null,8,["for"]),t[15]||(t[15]=n("div",{class:"flex justify-between items-center mb-2"},null,-1)),p(n("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>Me.value=e)},null,512),[[g,Me.value]]),s(_,{onClick:st,disabled:De.value||!Ye.value,class:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105"},{default:o(()=>[De.value?(a(),u("span",de,t[14]||(t[14]=[n("svg",{class:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),r(" Saving... ")]))):(a(),u("span",ce,"Save keep_open"))]),_:1},8,["disabled"]),s(E,{id:"slide-content-"+l,modelValue:e.slide_content,"onUpdate:modelValue":t=>e.slide_content=t,contentType:e.content_type,"onUpdate:contentType":t=>e.content_type=t,rows:4,required:"",placeholder:"Enter slide content...",onSave_data:st},null,8,["id","modelValue","onUpdate:modelValue","contentType","onUpdate:contentType"])])]),n("div",ve,[s(S,{for:"slide-notes-"+l,value:"Notes",class:"text-gray-700"},null,8,["for"]),p(n("textarea",{id:"slide-notes-"+l,"onUpdate:modelValue":t=>e.notes=t,rows:"2",class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm transition-all duration-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Add any additional notes..."},null,8,pe),[[y,e.notes]])])])]))),128))]),n("div",me,[s(S,{for:"tags",value:"Tags",class:"text-gray-700 flex items-center justify-between"},{default:o(()=>[t[17]||(t[17]=n("span",null,"Tags",-1)),n("span",ge,i(Le.value.tags.length)+" tags",1)]),_:1}),n("div",ye,[n("div",fe,[n("div",be,[p(n("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>Oe.value=e),onKeydown:[f(b(lt,["prevent"]),["enter"]),f(b(lt,["prevent"]),["tab"]),f(b(lt,["prevent"]),["comma"])],placeholder:"Add tag and press Enter",class:"w-full rounded-lg border-gray-300 shadow-sm transition-all duration-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 pr-10"},null,40,he),[[y,Oe.value]]),t[18]||(t[18]=n("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm"}," press Enter ",-1))]),n("button",{onClick:lt,type:"button",class:"px-4 py-2 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 flex items-center gap-2"},t[19]||(t[19]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[n("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)]))]),n("div",xe,[(a(!0),u(c,null,v(Le.value.tags,(e,t)=>(a(),u("div",{key:t,class:"flex items-center gap-2 bg-gradient-to-r from-indigo-50 to-purple-50 px-3 py-1.5 rounded-full border border-indigo-100 group hover:from-indigo-100 hover:to-purple-100 transition-all duration-200"},[n("span",we,i("string"==typeof e?e:e.toString()),1),n("button",{type:"button",onClick:e=>(e=>{Le.value.tags.splice(e,1)})(t),class:"text-indigo-400 group-hover:text-indigo-600 transition-colors duration-200 hover:bg-indigo-100 rounded-full w-5 h-5 flex items-center justify-center"}," × ",8,ke)]))),128)),0===Le.value.tags.length?(a(),u("div",_e," No tags added yet ")):h("",!0)])])])])])]}),_:1},8,["show","title","submitting"])])]}),_:1}))}};export{Ae as default};
