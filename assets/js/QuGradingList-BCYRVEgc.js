import{Q as e}from"./QSpace-Bk4F2b8L.js";import{c as a,Q as t,p as l,C as r,m as s}from"./app-B77gjd5a.js";import{Q as o}from"./QSelect-DB_tK-Lk.js";import{Q as i}from"./QTd-Cd1TbwhN.js";import{Q as n}from"./QBadge-ZkvAqPBD.js";import{Q as d}from"./QTable-Dzgz30xz.js";import{Q as p}from"./QPagination-ZwCMST1R.js";import{r as m,f as u,af as c,M as g,J as f,b,N as _,K as v,I as x,Q as w,W as y,V as j,F as Q,$ as S}from"./vendor-DuKqz2x4.js";import{s as V}from"./i18n-DE5KxGn8.js";import{d as h}from"./date-DOBw9r3p.js";import"./offline-BzIlwqNM.js";import"./ui-BITzTqrO.js";import"./rtl-Cr6c3OOr.js";import"./QMarkupTable-xKG6mM4A.js";import"./QLinearProgress-B9hMkhRG.js";import"./use-fullscreen-Cf3Zl1YN.js";const k={class:"q-pa-md"},q={class:"row items-center"},G={class:"row q-gutter-md"},M={class:"text-subtitle2"},C={class:"text-caption text-grey-7"},D={class:"row justify-center"},P={__name:"QuGradingList",props:{attempts:Object,exams:Array,filters:Object},setup(P){var A,U;const Y=P,F=m({exam_id:(null==(A=Y.filters)?void 0:A.exam_id)||null,grading_status:(null==(U=Y.filters)?void 0:U.grading_status)||null}),H=u(Y.attempts.current_page),T=[{value:"pending",label:"Pending"},{value:"partial",label:"Partially Graded"},{value:"completed",label:"Completed"}],E=[{name:"student",label:"Student",field:"user",align:"left"},{name:"exam",label:"Exam",field:"exam",align:"left"},{name:"score",label:"Score",field:"score",align:"center"},{name:"grading_status",label:"Status",field:"grading_status",align:"center"},{name:"submitted_at",label:"Submitted",field:"completed_at",align:"center"},{name:"actions",label:"Actions",align:"center"}],L=()=>{S.get(V("qu-grading.index"),F,{preserveState:!0,preserveScroll:!0})},O=e=>{S.get(V("qu-grading.index",{...F,page:e}),{},{preserveState:!0,preserveScroll:!0})},B=e=>{if(!e.exam.passing_score)return"primary";return e.score/e.exam.total_marks*100>=e.exam.passing_score?"positive":"negative"};return(m,u)=>{const A=c("Head");return f(),g(Q,null,[b(A,{title:"Grading Dashboard"}),_("div",k,[b(s,null,{default:v(()=>[b(a,null,{default:v(()=>[_("div",q,[u[3]||(u[3]=_("div",{class:"text-h5"},"Grading Dashboard",-1)),b(e)])]),_:1}),b(a,null,{default:v(()=>[_("div",G,[b(o,{modelValue:F.exam_id,"onUpdate:modelValue":[u[0]||(u[0]=e=>F.exam_id=e),L],options:P.exams,"option-value":"id","option-label":"title",label:"Filter by Exam",clearable:"","emit-value":"","map-options":"",style:{"min-width":"250px"}},null,8,["modelValue","options"]),b(o,{modelValue:F.grading_status,"onUpdate:modelValue":[u[1]||(u[1]=e=>F.grading_status=e),L],options:T,"option-value":"value","option-label":"label",label:"Grading Status",clearable:"","emit-value":"","map-options":"",style:{"min-width":"200px"}},null,8,["modelValue"])])]),_:1}),b(a,null,{default:v(()=>[b(d,{rows:P.attempts.data,columns:E,"row-key":"id",flat:"",bordered:""},{"body-cell-student":v(e=>[b(i,{props:e},{default:v(()=>[_("div",M,j(e.row.user.name),1),_("div",C,j(e.row.user.email),1)]),_:2},1032,["props"])]),"body-cell-exam":v(e=>[b(i,{props:e},{default:v(()=>[y(j(e.row.exam.title),1)]),_:2},1032,["props"])]),"body-cell-score":v(e=>[b(i,{props:e},{default:v(()=>[b(r,{color:B(e.row),"text-color":"white"},{default:v(()=>[y(j(Math.round(e.row.score||0))+" / "+j(e.row.exam.total_marks),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-grading_status":v(e=>[b(i,{props:e},{default:v(()=>{return[b(n,{color:(t=e.row.grading_status,{pending:"grey",partial:"orange",completed:"positive"}[t]||"grey"),label:(a=e.row.grading_status,a?a.charAt(0).toUpperCase()+a.slice(1):"")},null,8,["color","label"])];var a,t}),_:2},1032,["props"])]),"body-cell-submitted_at":v(e=>[b(i,{props:e},{default:v(()=>{return[y(j((a=e.row.completed_at,h.formatDate(a,"YYYY-MM-DD HH:mm"))),1)];var a}),_:2},1032,["props"])]),"body-cell-actions":v(e=>[b(i,{props:e},{default:v(()=>[b(t,{flat:"",dense:"",round:"",color:"primary",icon:"grading",onClick:a=>{return t=e.row,void S.visit(V("qu-grading.show",t.id));var t}},{default:v(()=>[b(l,null,{default:v(()=>u[4]||(u[4]=[y("Grade Attempt")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1}),P.attempts.last_page>1?(f(),x(a,{key:0,class:"q-pt-none"},{default:v(()=>[_("div",D,[b(p,{modelValue:H.value,"onUpdate:modelValue":[u[2]||(u[2]=e=>H.value=e),O],max:P.attempts.last_page,"max-pages":7,"direction-links":"","boundary-links":""},null,8,["modelValue","max"])])]),_:1})):w("",!0)]),_:1})])],64)}}};export{P as default};
