import{Q as e}from"./QSpace-CtVAwmqA.js";import{o as a,u as t,Q as l,c as o,f as i,m as s,b as n,aP as r}from"./app-BwCflFkV.js";import{Q as d}from"./QBar-CApNFkN3.js";import c from"./html2canvas.esm-Cq3pa7K9.js";import{E as u}from"./jspdf.es.min-DHEO0PWX.js";import{a as f,f as m,H as p,I as v,J as b,b as x,M as g,x as w,U as y}from"./vendor-CUZ9QTQV.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";const h={class:"flex gap-4 mb-6 w-full max-w-4xl justify-center print:hidden"},V={class:"absolute inset-0 flex flex-col items-center justify-center text-black font-serif"},j={class:"absolute top-[42%] w-full text-center px-20"},k={class:"text-8xl font-bold text-gray-900 capitalize",style:{"font-family":"'Pinyon Script', cursive, serif"}},_={class:"absolute bottom-[18%] left-[15%] text-2xl font-bold text-gray-700"},D={class:"absolute bottom-[18%] right-[15%] text-2xl font-bold text-gray-700"},C={class:"absolute top-[25%] right-[15%] text-2xl font-bold text-gray-700"},P=a({__name:"CertificateGenerator",props:{modelValue:Boolean,student:Object,defaultDate:String},emits:["update:modelValue"],setup(a,{emit:P}){const S=t(),U=a,N=P,Q=f({get:()=>U.modelValue,set:e=>N("update:modelValue",e)}),Y=m({academicYear:"2024-2025",week:"1",date:U.defaultDate||(new Date).toLocaleDateString()}),R=m(!1),F=m(null);async function G(){R.value=!0;try{const e=F.value;if(!e)throw new Error("Certificate element not found");const a=(await c(e,{scale:2,useCORS:!0,logging:!1})).toDataURL("image/png"),t=new u({orientation:"landscape",unit:"px",format:[1123,794]});t.addImage(a,"PNG",0,0,1123,794),t.save(`${U.student.firstName}_Certificate.pdf`),S.notify({message:"Certificate downloaded!",color:"positive"})}catch(e){console.error(e),S.notify({message:"Failed to generate PDF",color:"negative"})}finally{R.value=!1}}function I(){window.print()}return(t,c)=>(v(),p(n,{modelValue:Q.value,"onUpdate:modelValue":c[3]||(c[3]=e=>Q.value=e),maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:b(()=>[x(s,{class:"bg-gray-900 text-white flex flex-col print:bg-white print:text-black"},{default:b(()=>[x(d,{class:"bg-gray-800 p-4 print:hidden"},{default:b(()=>[c[4]||(c[4]=g("div",{class:"text-h6"},"ðŸŽ“ Certificate Generator",-1)),x(e),w(x(l,{dense:"",flat:"",icon:"close"},null,512),[[r]])]),_:1}),x(o,{class:"flex-1 flex flex-col items-center justify-center p-4 overflow-auto print:p-0 print:overflow-visible"},{default:b(()=>{var e,t;return[g("div",h,[x(i,{modelValue:Y.value.academicYear,"onUpdate:modelValue":c[0]||(c[0]=e=>Y.value.academicYear=e),label:"Academic Year",dark:"",outlined:"",dense:"",class:"w-40"},null,8,["modelValue"]),x(i,{modelValue:Y.value.week,"onUpdate:modelValue":c[1]||(c[1]=e=>Y.value.week=e),label:"Week Number",dark:"",outlined:"",dense:"",class:"w-40"},null,8,["modelValue"]),x(i,{modelValue:Y.value.date,"onUpdate:modelValue":c[2]||(c[2]=e=>Y.value.date=e),label:"Date",dark:"",outlined:"",dense:"",class:"w-40"},null,8,["modelValue"]),x(l,{color:"primary",icon:"download",label:"Download PDF",onClick:G,loading:R.value},null,8,["loading"]),x(l,{color:"secondary",icon:"print",label:"Print",onClick:I})]),g("div",{ref_key:"certificateRef",ref:F,class:"certificate-container relative shadow-2xl border-4 border-gray-700 overflow-hidden print:shadow-none print:border-0",style:{width:"100%",height:"100%"}},[c[5]||(c[5]=g("img",{src:"/images/certificate1.png",class:"absolute inset-0 w-full h-full object-cover"},null,-1)),g("div",V,[g("div",j,[g("h1",k,y(null==(e=a.student)?void 0:e.firstName)+" "+y(null==(t=a.student)?void 0:t.lastName),1)]),g("div",_,y(Y.value.academicYear),1),g("div",D,y(Y.value.date),1),g("div",C," Week: "+y(Y.value.week),1)])],512)]}),_:1})]),_:1})]),_:1},8,["modelValue"]))}},[["__scopeId","data-v-47d6bf4a"]]);export{P as default};
