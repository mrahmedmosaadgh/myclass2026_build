import{a as e,f as a,I as r,J as s,K as t,R as l,b as o,N as i,O as n,V as u,W as d,_ as c,$ as p}from"./vendor-BWKGNkNB.js";import{_ as m}from"./AppLayout-B3PyevP7.js";import{_ as v}from"./PrimaryButton-DVJXOzHH.js";import{_ as b}from"./Pagination-DMF9MOGD.js";import{_ as f}from"./DataTable-zMwSNXZH.js";import{_ as y}from"./FormModal-Bx8JHk_R.js";import"./LucideIcon-CYYJCXCs.js";import"./createLucideIcon-bevK9Pnz.js";import"./printer-yyUpIzJF.js";import"./image-T1FtDBZI.js";import"./Modal-W7e3DFIO.js";import"./app-DlLesFGi.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./SecondaryButton-WaufSYeJ.js";const g={class:"py-12"},h={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},j={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},x={key:0,class:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4"},_={class:"mb-6"},w={key:1,class:"mt-4"},k="/admin/hr",S={__name:"Index",props:{records:{type:Object,required:!0},options:{type:Object,default:()=>({})}},setup(S){const $=S,A=e(()=>{var e;return(null==(e=$.records)?void 0:e.data)||[]}),I=e(()=>{var e;return(null==(e=$.records)?void 0:e.links)||null}),N="HR Management",R=[{key:"name",label:"Name"},{key:"active",label:"Status",type:"status"}],q=[{name:"name",label:"Name",type:"text",required:!0,autofocus:!0},{name:"active",label:"Status",type:"select",options:[{value:!0,label:"Active"},{value:!1,label:"Inactive"}]}];$.options.users&&q.push({name:"user_id",label:"User",type:"select",required:!0,options:$.options.users.map(e=>({value:e.id,label:e.name}))});const B=a(!1),C=a(null),D=a(!1),L=(e=null)=>{C.value=e,B.value=!0},M=()=>{B.value=!1,C.value=null},O=()=>{p.reload({only:["records"],preserveScroll:!0,preserveState:!0})},P=async({form:e,onSuccess:a,onError:r})=>{var s;if(D.value)return;D.value=!0;const t=null==(s=C.value)?void 0:s.id,l=t?`${k}/${t}`:k;try{await c.post(l,{...t&&{_method:"PUT"},...e}),a(),M(),O()}catch(o){r(o)}finally{D.value=!1}},E=async e=>{if(confirm("Are you sure you want to delete this record?"))try{await c.delete(`${k}/${e.id}`),O()}catch(a){console.error("Deletion error:",a),alert("An error occurred while deleting the record.")}};return(e,a)=>(s(),r(m,{title:N},{header:t(()=>[l("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},u(N))]),default:t(()=>{var r;return[l("div",g,[l("div",h,[l("div",j,[(null==(r=e.$page.props.flash)?void 0:r.success)?(s(),i("div",x,u(e.$page.props.flash.success),1)):n("",!0),l("div",_,[o(v,{onClick:a[0]||(a[0]=e=>L())},{default:t(()=>a[1]||(a[1]=[d(" Add New Record ")])),_:1})]),o(f,{items:A.value,columns:R,onEdit:L,onDelete:E},null,8,["items"]),I.value?(s(),i("div",w,[o(b,{links:I.value},null,8,["links"])])):n("",!0)])])]),o(y,{show:B.value,title:"Record",fields:q,editing:C.value,onClose:M,onSubmitted:P},null,8,["show","editing"])]}),_:1}))}};export{S as default};
