import{p as e,u as s,e as a,n as l}from"./app-BXm70mdJ.js";import{Q as t}from"./QSpinnerDots-BY_P7fmL.js";import{f as r,a as c,o,ac as i,L as n,I as d,b as u,M as m,y,H as v,O as p,V as b,U as h,J as g,F as k,Q as w,Z as x,R as S,_ as j}from"./vendor-DNM7Y6Xn.js";import f from"./WeeklyPlanMenu-CPPNbbnB.js";import{u as _}from"./i18n-CBOKL2HS.js";import"./offline-BzIlwqNM.js";import"./ui-BP0GJNn5.js";import"./QTab-DhKL91H_.js";import"./QTabs-CDJ215OP.js";import"./rtl-Cr6c3OOr.js";import"./QSpace-Bu8V-QDa.js";import"./WeeklySystemGuide-e9afDUCT.js";import"./QTabPanel-sB32VrK8.js";import"./use-panel-D2HepUiw.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanels-LFwTBPSC.js";import"./MainSchoolData-poTNtOLu.js";import"./QBadge-ZzhN1X9C.js";import"./schoolData-lzO9rVwn.js";import"./SchoolSettingsDialog-D2VgwIPk.js";import"./QSelect-CnZtzPIC.js";import"./QForm-DyZk5PSh.js";const q={class:"q-pa-md"},D={class:"row items-center q-mb-lg"},Q={class:"col"},P={class:"q-ma-none text-weight-bold"},$={class:"text-grey-7 q-mb-none"},z={key:0,class:"row justify-center q-pa-xl"},T={class:"text-h6 text-grey-7 q-mt-md"},C={class:"text-grey-6"},M={key:2,class:"timetable-container"},B={class:"grid-row header-row"},F={class:"grid-cell period-header"},E={class:"period-number"},H=["onClick"],I={class:"card-content"},J={class:"subject"},W={class:"classroom"},A={key:1,class:"free-period text-caption text-grey-5"},G={class:"row q-gutter-lg justify-center"},L={class:"text-center"},O={class:"text-h4 text-primary"},R={class:"text-caption text-grey-7"},U={class:"text-center"},V={class:"text-h4 text-secondary"},Z={class:"text-caption text-grey-7"},K={class:"text-center"},N={class:"text-h4 text-accent"},X={class:"text-caption text-grey-7"},Y=e({__name:"MySchedule",setup(e){const{t:Y}=_(),ee=s(),se=r([]),ae=r(!1),le=c(()=>[{value:1,label:Y("weeklyPlans.fullDays.1")},{value:2,label:Y("weeklyPlans.fullDays.2")},{value:3,label:Y("weeklyPlans.fullDays.3")},{value:4,label:Y("weeklyPlans.fullDays.4")},{value:5,label:Y("weeklyPlans.fullDays.5")}]),te=[1,2,3,4,5,6,7,8],re=c(()=>{const e={};return se.value.forEach(s=>{const a=`${s.day}-${s.period_number}`;e[a]=s}),e}),ce=c(()=>se.value.length),oe=c(()=>new Set(se.value.map(e=>{var s;return null==(s=e.cst)?void 0:s.classroom_id})).size),ie=c(()=>new Set(se.value.map(e=>{var s;return null==(s=e.cst)?void 0:s.subject_id})).size),ne=(e,s)=>re.value[`${e}-${s}`],de=(e,s)=>{const a=ne(e,s);return(null==a?void 0:a.cst)?{backgroundColor:a.cst.c_bg||"#e0e0e0",color:a.cst.c_text||"#333"}:{}};return o(()=>{(async()=>{ae.value=!0;try{const e=await x.get("/weekly-system/api/teacher/my-schedule");se.value=e.data.data||e.data||[]}catch(e){console.error("Error fetching schedule:",e),ee.notify({type:"negative",message:Y("weeklySystem.notifications.loadFailed")})}finally{ae.value=!1}})()}),(e,s)=>{const r=i("Head");return d(),n(k,null,[u(r,{title:y(Y)("weeklySystem.mySchedule.title")},null,8,["title"]),m("div",q,[u(f),m("div",D,[m("div",Q,[m("h4",P,[u(a,{name:"calendar_month",class:"q-mr-sm",color:"primary"}),b(" "+h(y(Y)("weeklySystem.mySchedule.title")),1)]),m("p",$,h(y(Y)("weeklySystem.mySchedule.subtitle")),1)])]),ae.value?(d(),n("div",z,[u(t,{size:"50px",color:"primary"})])):se.value.length?(d(),n("div",M,[m("div",B,[s[0]||(s[0]=m("div",{class:"grid-cell period-header"},null,-1)),(d(!0),n(k,null,w(le.value,e=>(d(),n("div",{key:e.value,class:"grid-cell day-header"},h(y(Y)(`weeklyPlans.shortDays.${e.value}`)),1))),128))]),(d(),n(k,null,w(te,e=>m("div",{key:e,class:"grid-row"},[m("div",F,[m("div",E,h(e),1)]),(d(!0),n(k,null,w(le.value,s=>{var l,t;return d(),n("div",{key:`${s.value}-${e}`,class:"grid-cell"},[ne(s.value,e)?(d(),n("div",{key:0,class:"schedule-card",style:S(de(s.value,e)),onClick:a=>((e,s)=>{const a=ne(e,s);a&&j.visit("/my_table_mnger/weekly_system/teacher/my-weekly-plans",{data:{schedule_id:a.id}})})(s.value,e)},[m("div",I,[m("div",J,h(null==(l=ne(s.value,e).cst)?void 0:l.subject_name),1),m("div",W,[u(a,{name:"meeting_room",size:"xs"}),b(" "+h(null==(t=ne(s.value,e).cst)?void 0:t.classroom_name),1)])])],12,H)):(d(),n("div",A,h(y(Y)("weeklySystem.mySchedule.free")),1))])}),128))])),64))])):(d(),v(l,{key:1,flat:"",bordered:"",class:"text-center q-pa-xl"},{default:g(()=>[u(a,{name:"event_busy",size:"64px",color:"grey-5"}),m("p",T,h(y(Y)("weeklySystem.schoolBrowser.noDataTitle")),1),m("p",C,h(y(Y)("weeklySystem.mySchedule.emptyState")),1)]),_:1})),se.value.length?(d(),v(l,{key:3,flat:"",bordered:"",class:"q-mt-lg q-pa-md"},{default:g(()=>[m("div",G,[m("div",L,[m("div",O,h(ce.value),1),m("div",R,h(y(Y)("weeklySystem.mySchedule.totalClasses")),1)]),m("div",U,[m("div",V,h(oe.value),1),m("div",Z,h(y(Y)("weeklySystem.mySchedule.classrooms")),1)]),m("div",K,[m("div",N,h(ie.value),1),m("div",X,h(y(Y)("weeklySystem.mySchedule.subjects")),1)])])]),_:1})):p("",!0)])],64)}}},[["__scopeId","data-v-bd704b76"]]);export{Y as default};
