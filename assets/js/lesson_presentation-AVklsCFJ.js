import{E as e,aB as t,L as a,aj as o,Q as l,p as n,u as i,q as s,g as r,e as u,a as d,D as c,n as p,d as m,aD as v,b as f}from"./app-Dccx8xF5.js";import{f as g,a as y,n as _,p as h,h as w,k as b,o as x,z as j,ac as S,L as Q,I as k,b as q,J as V,M as C,V as P,H as D,O as L,U as O,a1 as E,A as $,al as T,x as U,F as I,Z as z}from"./vendor-EI0FRBVb.js";import{Q as N}from"./QBadge-BoQNzKR2.js";import{Q as F,a as R}from"./QToolbar-Z4lSvlPM.js";import{Q as B}from"./QHeader-C79ENXGw.js";import{Q as M}from"./QDrawer-CxUI2kMV.js";import{Q as A}from"./QSelect-aOnYle6d.js";import{Q as H}from"./QPage-CVroUcdy.js";import{Q as K}from"./QPageContainer-B66iJZHc.js";import{Q as J}from"./QLayout-Ci0W2uKQ.js";import{Q as G}from"./QSpace-BWA-UIs7.js";import Z from"./TextSlide-BXvlCVdj.js";import W from"./MediaSlide-DzKwWtVh.js";import{Q as X}from"./QuestionSlide-_NkNHPai.js";import Y from"./PDFSlide-DZLGKz9J.js";import ee from"./VideoSlide-rWRer0u5.js";import te from"./LessonSidebar-DAvVgqqf.js";import ae from"./LessonPlayer-CGT0-hNE.js";import oe from"./FingerDrawingSlide-Cx4JK8aq.js";import{u as le}from"./teacherStore-BELNLpdq.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./rtl-Cr6c3OOr.js";import"./RichTextEditor-B0dNrzE2.js";import"./QColor-CZtynnqq.js";import"./QSlider-CeOdoP27.js";import"./QTabs-4quOvtr1.js";import"./QTab-BJCUrT4L.js";import"./QTabPanels-DiqDdK2g.js";import"./use-panel-DP2_LoYb.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-QxVdoii7.js";import"./purify.es-C2Ba6vpb.js";import"./MathEditor-D-3Zqa0V.js";import"./katex-BXKQVcz-.js";import"./MathPastePreview-DOL5cqI6.js";import"./EnhancedQuestionEditor-CAhpoMhC.js";import"./QuestionEditor-C_sm-JaB.js";import"./StepByStepEditor-BaBd6E9v.js";import"./QuestionTypeSelector-BmUNOs9Q.js";import"./QuizEngine-BXnn5D6N.js";import"./useQuizI18n-Bzgnl5cn.js";import"./QLinearProgress-BYmNETNA.js";import"./QSpinnerDots-VYKIYOSs.js";import"./PlayerSidebar-BCUEwNGK.js";import"./SectionCard-U8D2z_CJ.js";import"./SectionBanner-BMzQrnZq.js";import"./SlideRenderer-29e3DTJq.js";import"./QPopupProxy-CwYc8fjZ.js";import"./NavigationFooter-xINsd9Rp.js";import"./DrawingOverlay-D2wdZ9H4.js";import"./DrawingCanvas-Dibfjyoe.js";import"./DrawingToolbar-CqxD4eJE.js";import"./QBtnToggle-CLn226h9.js";import"./SlideAnnotationOverlay-CVoERsIC.js";function ne(e,t=new WeakMap){if(Object(e)!==e)return e;if(t.has(e))return t.get(e);const a=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:"function"!=typeof e.constructor?Object.create(null):void 0!==e.prototype&&"function"==typeof e.prototype.constructor?e:new e.constructor;if("function"==typeof e.constructor&&"function"==typeof e.valueOf){const a=e.valueOf();if(Object(a)!==a){const o=new e.constructor(a);return t.set(e,o),o}}return t.set(e,a),e instanceof Set?e.forEach(e=>{a.add(ne(e,t))}):e instanceof Map&&e.forEach((e,o)=>{a.set(o,ne(e,t))}),Object.assign(a,...Object.keys(e).map(a=>({[a]:ne(e[a],t)})))}const ie=e({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:n,emit:i}){const{proxy:s}=h(),{$q:r}=s,u=g(null),d=g(""),c=g("");let p=!1;const m=y(()=>t({initialValue:d.value,validate:e.validate,set:v,cancel:f,updatePosition:b},"value",()=>c.value,e=>{c.value=e}));function v(){!1!==e.validate(c.value)&&(!0===x()&&(i("save",c.value,d.value),i("update:modelValue",c.value)),j())}function f(){!0===x()&&i("cancel",c.value,d.value),j()}function b(){_(()=>{u.value.updatePosition()})}function x(){return!1===a(c.value,d.value)}function j(){p=!0,u.value.hide()}function S(){p=!1,d.value=ne(e.modelValue),c.value=ne(e.modelValue),i("beforeShow")}function Q(){i("show")}function k(){!1===p&&!0===x()&&(!0===e.autoSave&&!0===e.validate(c.value)?(i("save",c.value,d.value),i("update:modelValue",c.value)):i("cancel",c.value,d.value)),i("beforeHide")}function q(){i("hide")}function V(){const t=void 0!==n.default?[].concat(n.default(m.value)):[];return e.title&&t.unshift(w("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),!0===e.buttons&&t.push(w("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[w(l,{flat:!0,color:e.color,label:e.labelCancel||r.lang.label.cancel,onClick:f}),w(l,{flat:!0,color:e.color,label:e.labelSet||r.lang.label.set,onClick:v})])),t}return Object.assign(s,{set:v,cancel:f,show(e){var t;null==(t=u.value)||t.show(e)},hide(e){var t;null==(t=u.value)||t.hide(e)},updatePosition:b}),()=>{if(!0!==e.disable)return w(o,{ref:u,class:"q-popup-edit",cover:e.cover,onBeforeShow:S,onShow:Q,onBeforeHide:k,onHide:q,onEscapeKey:f},V)}}}),se={class:"row items-center q-gutter-x-md"},re={class:"cursor-pointer"},ue={class:"text-caption text-blue-2 cursor-pointer ellipsis",style:{"max-width":"300px"}},de={class:"row items-center q-gutter-sm"},ce={class:"column q-mr-md text-right text-caption text-grey-1"},pe={class:"text-weight-bold"},me={class:"text-weight-bold"},ve={class:"col-12 col-lg-10",style:{"max-width":"1200px"}},fe={key:0,class:"bg-white rounded-borders shadow-1 q-pa-lg"},ge={class:"row items-center justify-between q-mb-md"},ye={class:"row items-center q-gutter-sm"},_e={class:"row items-center q-gutter-sm"},he={style:{"min-height":"500px"}},we={key:1,class:"column items-center justify-center text-grey-5 q-pa-xl bg-white rounded-borders shadow-1 fit",style:{"min-height":"500px"}},be={class:"text-h6 flex items-center gap-2"},xe=n({__name:"lesson_presentation",props:{presentationId:{type:[Number,String],default:null},defaultContext:{type:Object,default:()=>({school_id:1,teacher_id:1,subject_id:1})},sections:{type:Array,default:()=>[]}},setup(e){const t=e,a=le(),o=i(),n=new URLSearchParams(window.location.search).get("id"),_=t.presentationId||(n?parseInt(n):null),h=g(_),w=g({name:"New Lesson",description:"Lesson description",grade_id:null,quiz_id:null,slides:[]}),ne=g(t.sections),xe=g(""),je=g(!0),Se=g(null),Qe=g([]),ke=g(0),qe=g(!1),Ve=g(!1),Ce=g(!0);g(!0);const Pe=y({get:()=>!o.screen.lt.sm&&Ce.value,set(e){Ce.value=e}});y(()=>{const e=ne.value.find(e=>e.id===xe.value);return e?`Section: ${e.title}`:"Select a section"});const De=y(()=>Qe.value.filter(e=>e.section===xe.value)),Le=y(()=>0===De.value.length?null:De.value[ke.value]),Oe=y(()=>{if(!w.value.grade_id)return"No Grade";const e=a.grades.find(e=>e.id===w.value.grade_id);return e?e.name:"Unknown Grade"}),Ee=e=>{switch(e){case"text":default:return Z;case"question":return X;case"pdf":return Y;case"video":return ee;case"image":case"audio":return W;case"drawing":return oe}},$e=()=>{const e={slide_type:"text",slide_content:{},section:xe.value};Qe.value.push(e),ke.value=De.value.length-1},Te=e=>{const t=document.createElement("DIV");return t.innerHTML=e||"",t.textContent||t.innerText||""},Ue=()=>{ke.value>0&&ke.value--},Ie=()=>{ke.value<De.value.length-1&&ke.value++},ze=e=>{"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&("ArrowLeft"===e.key?(e.preventDefault(),Ue()):"ArrowRight"===e.key&&(e.preventDefault(),Ie()))},Ne=async()=>{if((()=>{var e,t;if(!w.value.name.trim())return o.notify({type:"warning",message:"Please enter a lesson name",icon:"warning",position:"top"}),!1;if(!w.value.grade_id)return o.notify({type:"warning",message:"Please select a grade",icon:"warning",position:"top"}),!1;for(let a=0;a<Qe.value.length;a++){const l=Qe.value[a];if("question"===l.slide_type){const t=(null==(e=l.slide_content)?void 0:e.questions)||[];if(0===t.length)return o.notify({type:"warning",message:`Slide ${a+1}: Please add at least one question`,icon:"warning",position:"top"}),ke.value=a,!1;for(let e=0;e<t.length;e++){const l=t[e];if(!Te(l.text).trim())return o.notify({type:"warning",message:`Slide ${a+1}, Question ${e+1}: Question text cannot be empty`,icon:"warning",position:"top"}),ke.value=a,!1;if(["short_answer","number"].includes(l.type)&&!l.correct_answer)return o.notify({type:"warning",message:`Slide ${a+1}, Question ${e+1}: Please provide a correct answer`,icon:"warning",position:"top"}),ke.value=a,!1;if("single_choice"===l.type&&!l.correct_answer)return o.notify({type:"warning",message:`Slide ${a+1}, Question ${e+1}: Please select a correct option`,icon:"warning",position:"top"}),ke.value=a,!1;if(["single_choice","multiple_choice"].includes(l.type)){if(!l.options||l.options.length<2)return o.notify({type:"warning",message:`Slide ${a+1}, Question ${e+1}: Must have at least 2 options`,icon:"warning",position:"top"}),ke.value=a,!1;for(let t=0;t<l.options.length;t++)if(!Te(l.options[t].text).trim())return o.notify({type:"warning",message:`Slide ${a+1}, Question ${e+1}, Option ${t+1}: Option text cannot be empty`,icon:"warning",position:"top"}),ke.value=a,!1}}}else if("text"===l.slide_type&&(null==(t=l.slide_content)?void 0:t.text)&&!Te(l.slide_content.text).trim())return o.notify({type:"warning",message:`Slide ${a+1}: Text content cannot be empty. Please add content or delete the slide.`,icon:"warning",position:"top"}),ke.value=a,!1}return!0})()){qe.value=!0;try{const e={...w.value,school_id:t.defaultContext.school_id,teacher_id:t.defaultContext.teacher_id,subject_id:t.defaultContext.subject_id,grade_id:w.value.grade_id||t.defaultContext.grade_id};let a;a=h.value?await z.put(route("lesson-presentation.update",{id:h.value}),e):await z.post(route("lesson-presentation.store"),e);const l=a.data;for(const t of Qe.value){const e={slide_type:t.slide_type,slide_content:t.slide_content||{},section:t.section||xe.value||"learn",order_index:t.order_index||0};t.id?await z.put(route("lesson-presentation.slides.update",{id:l.id,slideId:t.id}),e):await z.post(route("lesson-presentation.slides.add",{id:l.id}),e)}o.notify({type:"positive",message:"Lesson saved successfully! Redirecting...",icon:"check_circle",position:"top",timeout:1500}),setTimeout(()=>{window.location.href="/lesson-presentation/dashboard"},1500)}catch(e){console.error("Save failed:",e),o.notify({type:"negative",message:"Failed to save lesson. Please try again.",icon:"error",position:"top",timeout:3e3})}finally{qe.value=!1}}},Fe=async()=>{if(h.value)try{o.notify({type:"info",message:"Duplicating lesson...",icon:"content_copy",position:"top",timeout:1e3});const e={...w.value,name:`${w.value.name} (Copy)`,school_id:t.defaultContext.school_id,teacher_id:t.defaultContext.teacher_id,subject_id:t.defaultContext.subject_id},a=(await z.post(route("lesson-presentation.store"),e)).data;for(const t of Qe.value){const e={slide_type:t.slide_type,slide_content:t.slide_content,section:t.section};await z.post(route("lesson-presentation.slides.add",{id:a.id}),e)}o.notify({type:"positive",message:"Lesson duplicated successfully!",icon:"check_circle",position:"top",timeout:2e3}),setTimeout(()=>{window.location.href=`/lesson-presentation/edit?id=${a.id}`},500)}catch(e){console.error("Duplicate failed:",e),o.notify({type:"negative",message:"Failed to duplicate lesson",icon:"error",position:"top",timeout:3e3})}},Re=()=>{var e,a;try{const l=w.value.name||"Untitled_Lesson",n=(new Date).toISOString().split("T")[0],i=`lesson_${l.replace(/[^a-z0-9]/gi,"_").toLowerCase()}_${n}.json`,s={version:"1.0",exportDate:(new Date).toISOString(),lesson:{name:w.value.name,description:w.value.description,grade_id:w.value.grade_id,quiz_id:w.value.quiz_id},sections:ne.value,slides:Qe.value,metadata:{subject_name:null==(e=t.defaultContext)?void 0:e.subject_name,grade_name:null==(a=t.defaultContext)?void 0:a.grade_name,totalSlides:Qe.value.length}},r=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),u=URL.createObjectURL(r),d=document.createElement("a");d.href=u,d.download=i,d.click(),URL.revokeObjectURL(u),o.notify({type:"positive",message:`Lesson exported as ${i}`,icon:"download",position:"top",timeout:2e3})}catch(l){console.error("Export failed:",l),o.notify({type:"negative",message:"Failed to export lesson",icon:"error",position:"top"})}},Be=()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{const t=e.target.files[0];if(t)try{const e=await t.text(),a=JSON.parse(e);if(!a.lesson||!a.slides)throw new Error("Invalid lesson file format");o.dialog({title:"Import Lesson",message:`Import "${a.lesson.name}"? This will replace current unsaved changes.`,cancel:!0,persistent:!0,ok:{label:"Import",color:"primary"}}).onOk(()=>{w.value.name=a.lesson.name,w.value.description=a.lesson.description,w.value.grade_id=a.lesson.grade_id,w.value.quiz_id=a.lesson.quiz_id,Qe.value=a.slides.map(e=>({...e,id:null})),a.sections&&a.sections.length>0&&(ne.value=a.sections,!xe.value&&ne.value.length>0&&(xe.value=ne.value[0].id)),o.notify({type:"positive",message:`Lesson "${a.lesson.name}" imported successfully!`,icon:"upload",position:"top",timeout:2e3})})}catch(a){console.error("Import failed:",a),o.notify({type:"negative",message:"Failed to import lesson. Please check the file format.",icon:"error",position:"top",timeout:3e3})}},e.click()};return b(xe,()=>{ke.value=0}),x(async()=>{await a.fetchTeacherData(),window.addEventListener("keydown",ze),h.value?(await(async e=>{try{const t=await z.get(route("lesson-presentation.show",{id:e}));w.value={name:t.data.name,description:t.data.description,grade_id:t.data.grade_id,quiz_id:t.data.quiz_id},Qe.value=(t.data.slides||[]).map(e=>({...e,section:e.section||"learn"}))}catch(t){console.error("Fetch failed:",t),o.notify({type:"negative",message:"Failed to load lesson",icon:"error",position:"top"})}})(h.value),ne.value.length>0&&!xe.value&&(xe.value=ne.value[0].id)):(0===Qe.value.length&&$e(),ne.value.length>0&&(xe.value=ne.value[0].id),t.defaultContext.grade_id?w.value.grade_id=parseInt(t.defaultContext.grade_id):a.grades.length>0&&(w.value.grade_id=a.grades[0].id))}),j(()=>{window.removeEventListener("keydown",ze)}),(t,a)=>{const n=S("Head");return k(),Q(I,null,[q(n,{title:w.value.name?`Editing: ${w.value.name}`:"New Lesson"},null,8,["title"]),q(J,{view:"hHh Lpr fFf",class:"bg-grey-1"},{default:V(()=>[q(B,{elevated:"",class:"bg-primary text-white"},{default:V(()=>[q(F,null,{default:V(()=>{var t,o;return[q(l,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:a[0]||(a[0]=e=>je.value=!je.value)}),q(l,{flat:"",round:"",dense:"",icon:"arrow_back",component:"a",href:"/lesson-presentation/dashboard"},{default:V(()=>[q(s,null,{default:V(()=>a[13]||(a[13]=[P("Back")])),_:1})]),_:1}),q(R,{class:"q-ml-sm"},{default:V(()=>[C("div",se,[C("div",re,[P(O(w.value.name||"New Lesson")+" ",1),q(ie,{modelValue:w.value.name,"onUpdate:modelValue":a[1]||(a[1]=e=>w.value.name=e),"auto-save":""},{default:V(e=>[q(r,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",counter:"",onKeyup:E(e.set,["enter"]),label:"Lesson Name"},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:1},8,["modelValue"]),q(u,{name:"edit",size:"xs",class:"q-ml-xs opacity-50"})]),w.value.grade_id?(k(),D(N,{key:0,color:"white","text-color":"primary",label:Oe.value},null,8,["label"])):L("",!0)]),C("div",ue,[P(O(w.value.description||"Add description...")+" ",1),q(ie,{modelValue:w.value.description,"onUpdate:modelValue":a[2]||(a[2]=e=>w.value.description=e),"auto-save":""},{default:V(e=>[q(r,{modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",type:"textarea",onKeyup:E(e.set,["enter"]),label:"Description"},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),_:1},8,["modelValue"])])]),_:1}),C("div",de,[C("div",ce,[C("div",null,[a[14]||(a[14]=P("Subject: ")),C("span",pe,O(null==(t=e.defaultContext)?void 0:t.subject_name),1)]),C("div",null,[a[15]||(a[15]=P("Class: ")),C("span",me,O(null==(o=e.defaultContext)?void 0:o.grade_name),1)])]),q(d,{vertical:"",dark:"",class:"q-mx-sm"}),h.value?(k(),D(l,{key:0,flat:"",round:"",dense:"",icon:"content_copy",onClick:Fe},{default:V(()=>[q(s,null,{default:V(()=>a[16]||(a[16]=[P("Duplicate")])),_:1})]),_:1})):L("",!0),q(d,{vertical:"",dark:"",class:"q-mx-sm"}),q(l,{flat:"",round:"",dense:"",icon:"download",onClick:Re,color:"accent"},{default:V(()=>[q(s,null,{default:V(()=>a[17]||(a[17]=[P("Export Lesson as JSON")])),_:1})]),_:1}),q(l,{flat:"",round:"",dense:"",icon:"upload",onClick:Be,color:"secondary"},{default:V(()=>[q(s,null,{default:V(()=>a[18]||(a[18]=[P("Import Lesson from JSON")])),_:1})]),_:1}),q(d,{vertical:"",dark:"",class:"q-mx-sm"}),q(l,{flat:"",round:"",dense:"",icon:"visibility",onClick:a[3]||(a[3]=e=>Ve.value=!0),disable:!h.value},{default:V(()=>[q(s,null,{default:V(()=>a[19]||(a[19]=[P("Preview")])),_:1})]),_:1},8,["disable"]),q(l,{unelevated:"",color:"positive",icon:"save",label:"Save",onClick:Ne,loading:qe.value},null,8,["loading"])])]}),_:1})]),_:1}),q(M,{modelValue:je.value,"onUpdate:modelValue":a[8]||(a[8]=e=>je.value=e),"show-if-above":"",bordered:"",class:"bg-white",width:300},{default:V(()=>[q(te,{sections:ne.value,currentSection_data:Se.value,"onUpdate:currentSection_data":a[4]||(a[4]=e=>Se.value=e),currentSection:xe.value,"onUpdate:currentSection":a[5]||(a[5]=e=>xe.value=e),slides:Qe.value,showDrawer:Pe.value,"onUpdate:showDrawer":a[6]||(a[6]=e=>Pe.value=e),"can-edit":!0,"active-slide":Le.value,onSelectSlide:a[7]||(a[7]=e=>ke.value=De.value.indexOf(e)),onAddSlide:$e,class:"fit"},null,8,["sections","currentSection_data","currentSection","slides","showDrawer","active-slide"])]),_:1},8,["modelValue"]),q(K,null,{default:V(()=>[q(H,{class:"q-pa-md bg-grey-2 row justify-center"},{default:V(()=>[C("div",ve,[q($,{appear:"","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:V(()=>[Le.value?(k(),Q("div",fe,[C("div",ge,[C("div",ye,[q(u,{name:"edit_note",color:"primary",size:"md"}),a[23]||(a[23]=C("div",{class:"text-h6 text-grey-8"},"Slide Editor",-1)),q(d,{vertical:"",inset:"",class:"q-mx-sm"}),q(c,{outline:""},{default:V(()=>[q(l,{flat:"",dense:"",icon:"chevron_left",onClick:Ue,disable:0===ke.value,color:"primary"},{default:V(()=>[q(s,null,{default:V(()=>a[20]||(a[20]=[P("Previous Slide (â†)")])),_:1})]),_:1},8,["disable"]),q(l,{flat:"",dense:"","no-caps":"",label:`${ke.value+1} / ${De.value.length}`,color:"primary",class:"q-px-md"},{default:V(()=>[q(s,null,{default:V(()=>a[21]||(a[21]=[P("Current Slide")])),_:1})]),_:1},8,["label"]),q(l,{flat:"",dense:"",icon:"chevron_right",onClick:Ie,disable:ke.value>=De.value.length-1,color:"primary"},{default:V(()=>[q(s,null,{default:V(()=>a[22]||(a[22]=[P("Next Slide (â†’)")])),_:1})]),_:1},8,["disable"])]),_:1})]),C("div",_e,[q(A,{modelValue:Le.value.slide_type,"onUpdate:modelValue":a[9]||(a[9]=e=>Le.value.slide_type=e),options:[{label:"ðŸ“ Text",value:"text"},{label:"ðŸ–¼ï¸ Image",value:"image"},{label:"ðŸŽ¥ Video",value:"video"},{label:"ðŸŽµ Audio",value:"audio"},{label:"ðŸ“„ PDF",value:"pdf"},{label:"â“ Question",value:"question"},{label:"ðŸŽ¨ Drawing",value:"drawing"}],dense:"",outlined:"","emit-value":"","map-options":"","options-dense":"",color:"primary",label:"Slide Type",style:{"min-width":"150px"}},null,8,["modelValue"]),q(l,{flat:"",round:"",color:"negative",icon:"delete",onClick:a[10]||(a[10]=e=>{return t=Le.value,void o.dialog({title:"Delete Slide",message:"Are you sure you want to delete this slide? This action cannot be undone.",cancel:!0,persistent:!0,ok:{label:"Delete",color:"negative",flat:!0},cancel:{label:"Cancel",color:"grey",flat:!0}}).onOk(()=>{const e=Qe.value.indexOf(t);-1!==e&&(Qe.value.splice(e,1),De.value.length>0?ke.value>=De.value.length&&(ke.value=De.value.length-1):ke.value=0,o.notify({type:"positive",message:"Slide deleted successfully",icon:"check_circle",position:"top",timeout:1500}))});var t})},{default:V(()=>[q(s,null,{default:V(()=>a[24]||(a[24]=[P("Delete Slide")])),_:1})]),_:1})])]),q(d,{class:"q-mb-md"}),C("div",he,[(k(),D(T(Ee(Le.value.slide_type)),{modelValue:Le.value.slide_content,"onUpdate:modelValue":a[11]||(a[11]=e=>Le.value.slide_content=e),key:Le.value.id||ke.value},null,8,["modelValue"]))])])):(k(),Q("div",we,[q(u,{name:"touch_app",size:"80px",color:"primary",class:"opacity-20"}),a[25]||(a[25]=C("div",{class:"text-h5 q-mt-md text-weight-medium"},"Select a Slide",-1)),a[26]||(a[26]=C("div",{class:"text-subtitle1 q-mt-sm"},"Choose a section on the left to start editing",-1))]))]),_:1})])]),_:1})]),_:1})]),_:1}),q(f,{modelValue:Ve.value,"onUpdate:modelValue":a[12]||(a[12]=e=>Ve.value=e),maximized:""},{default:V(()=>[q(p,{class:"bg-white"},{default:V(()=>[q(m,{class:"row items-center q-pb-none bg-primary text-white"},{default:V(()=>[C("div",be,[q(u,{name:"visibility",size:"28px"}),a[27]||(a[27]=P(" Student View Preview "))]),q(G),U(q(l,{icon:"close",flat:"",round:"",dense:""},null,512),[[v]])]),_:1}),q(m,{class:"q-pa-none",style:{height:"calc(100vh - 60px)"}},{default:V(()=>[q(ae,{presentation:{...w.value,name:"Preview: "+w.value.name},sections:ne.value,slides:Qe.value,"is-preview":!0},null,8,["presentation","sections","slides"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-0afe32ed"]]);export{xe as default};
