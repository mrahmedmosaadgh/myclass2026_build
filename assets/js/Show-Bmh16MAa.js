import{o as e,c as l,Q as s,m as t,a,n as o,d as n,g as i,h as r,i as d,j as c}from"./app-Cs5CKgHw.js";import{Q as u}from"./QTree-CIaQmshC.js";import{_ as m}from"./AppLayout-33RltWFH.js";import{f as v,a as f,k as p,I as x,J as g,K as b,O as y,b as _,V as h,N as k,U as w,a0 as C,W as q}from"./vendor-nQjeLEvd.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";const $={class:"q-pa-md"},I={class:"row items-center justify-between"},j={class:"text-h5"},L={class:"text-subtitle2 text-grey-7"},S={class:"q-gutter-sm"},z={class:"col-12 col-sm-6 col-md-3"},D={class:"text-h5 text-bold text-blue-8"},T={class:"col-12 col-sm-6 col-md-3"},U={class:"text-h5 text-bold text-green-8"},E={class:"col-12 col-sm-6 col-md-3"},A={class:"text-h5 text-bold text-orange-8"},N={class:"col-12 col-sm-6 col-md-3"},V={class:"text-h5 text-bold text-purple-8"},Q={class:"row items-center justify-between q-mb-md"},B={key:0,class:"row"},H={class:"col-12 col-md-4 course-tree"},M={class:"row items-center justify-between full-width"},O={class:"flex items-center"},W={class:"text-weight-medium"},F={class:"row items-center justify-between full-width section-header"},J={class:"flex items-center"},K={class:"text-grey-8"},G={class:"row items-center justify-between full-width"},P={class:"flex items-center"},R={class:"q-mt-md text-center"},X={class:"col-12 col-md-8 q-pl-md-lg"},Y={class:"text-h6"},Z={class:"text-caption text-grey-7 q-mb-md"},ee={class:"lesson-content q-pa-md bg-grey-1 rounded-borders"},le=["innerHTML"],se={key:1,class:"text-grey-6 text-center q-pa-md"},te={class:"q-mt-md text-right"},ae={key:1,class:"flex flex-center full-height text-grey-6 q-pa-xl"},oe={class:"text-center"},ne={key:1,class:"text-center text-grey-6 q-pa-xl"},ie={class:"row q-col-gutter-md"},re={class:"col-12 col-md-6"},de={class:"col-12 col-md-6"},ce=e({__name:"Show",props:{course:{type:Object,required:!0}},setup(e){const ce=e,ue=v(null),me=v(null),ve=v(!1),fe=f(()=>ce.course.levels?ce.course.levels.map(e=>{const l={id:`level-${e.id}`,label:e.title,levelId:e.id,icon:"layers",nodeType:"level",children:[],header:"level"};return e.sections&&e.sections.length>0&&e.sections.forEach(e=>{if(ve.value&&e.title){const s={id:`section-${e.id}`,label:e.title,sectionId:e.id,icon:"folder",nodeType:"section",header:"section",children:[]};e.lessons&&e.lessons.length>0&&(s.children=e.lessons.map(e=>({id:`lesson-${e.id}`,label:e.title,lessonId:e.id,icon:"play_lesson",nodeType:"lesson",selectable:!0,header:"lesson",lessonData:e}))),l.children.push(s)}else if(e.lessons&&e.lessons.length>0){const s=!ve.value&&e.title?`${e.title}: `:"";e.lessons.forEach(e=>{l.children.push({id:`lesson-${e.id}`,label:s+e.title,lessonId:e.id,icon:"play_lesson",nodeType:"lesson",selectable:!0,header:"lesson",lessonData:e})})}}),l}):[]),pe=e=>{if(e&&e.startsWith("lesson-")){const l=parseInt(e.replace("lesson-",""));ce.course.levels.forEach(e=>{e.sections.forEach(e=>{const s=e.lessons.find(e=>e.id===l);s&&(ue.value=s)})})}};p(ve,()=>{const e=ue.value;me.value=null,e&&setTimeout(()=>{me.value=`lesson-${e.id}`},50)});const xe=f(()=>ce.course.levels?ce.course.levels.reduce((e,l)=>{var s;return e+((null==(s=l.sections)?void 0:s.length)||0)},0):0),ge=f(()=>ce.course.levels?ce.course.levels.reduce((e,l)=>l.sections?e+l.sections.reduce((e,l)=>{var s;return e+((null==(s=l.lessons)?void 0:s.length)||0)},0):e,0):0),be=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return(v,f)=>(g(),x(m,{title:e.course.name},{default:b(()=>[y("div",$,[_(t,{flat:"",bordered:""},{default:b(()=>[_(l,null,{default:b(()=>[y("div",I,[y("div",null,[y("div",j,h(e.course.name),1),y("div",L,h(e.course.description||"No description provided"),1)]),y("div",S,[_(s,{flat:"",color:"grey-7",icon:"arrow_back",label:"Back to Courses",onClick:f[0]||(f[0]=e=>v.$inertia.visit(v.route("course-management.courses.index")))}),_(s,{color:"orange",icon:"edit",label:"Edit Course",onClick:f[1]||(f[1]=l=>v.$inertia.visit(v.route("course-management.courses.edit",e.course.id)))}),_(s,{color:"primary",icon:"add",label:"Add Level",onClick:f[2]||(f[2]=l=>v.$inertia.visit(v.route("course-management.courses.levels.create",e.course.id)))})])])]),_:1}),_(l,{class:"row q-col-gutter-md"},{default:b(()=>[y("div",z,[_(t,{class:"bg-blue-1 text-center"},{default:b(()=>[_(l,null,{default:b(()=>{var l;return[y("div",D,h((null==(l=e.course.levels)?void 0:l.length)||0),1),f[7]||(f[7]=y("div",{class:"text-subtitle2 text-grey-8"},"Levels",-1))]}),_:1})]),_:1})]),y("div",T,[_(t,{class:"bg-green-1 text-center"},{default:b(()=>[_(l,null,{default:b(()=>[y("div",U,h(xe.value),1),f[8]||(f[8]=y("div",{class:"text-subtitle2 text-grey-8"},"Sections",-1))]),_:1})]),_:1})]),y("div",E,[_(t,{class:"bg-orange-1 text-center"},{default:b(()=>[_(l,null,{default:b(()=>[y("div",A,h(ge.value),1),f[9]||(f[9]=y("div",{class:"text-subtitle2 text-grey-8"},"Lessons",-1))]),_:1})]),_:1})]),y("div",N,[_(t,{class:"bg-purple-1 text-center"},{default:b(()=>[_(l,null,{default:b(()=>{return[y("div",V,h((l=e.course.created_at,new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"}))),1),f[10]||(f[10]=y("div",{class:"text-subtitle2 text-grey-8"},"Created",-1))];var l}),_:1})]),_:1})])]),_:1}),_(a),_(l,null,{default:b(()=>[y("div",Q,[f[11]||(f[11]=y("div",{class:"text-h6"},"Course Structure",-1)),_(o,{modelValue:ve.value,"onUpdate:modelValue":f[3]||(f[3]=e=>ve.value=e),label:"Show Sections",color:"primary","left-label":""},null,8,["modelValue"])]),e.course.levels&&e.course.levels.length>0?(g(),k("div",B,[y("div",H,[_(u,{nodes:fe.value,"node-key":"id",selected:me.value,"onUpdate:selected":pe},{"header-level":b(e=>[y("div",M,[y("div",O,[_(n,{name:"layers",size:"sm",class:"q-mr-xs text-blue-9"}),y("span",W,h(e.node.label),1)]),y("div",null,[_(s,{flat:"",dense:"",round:"",size:"sm",icon:"edit",color:"blue-9",onClick:C(l=>v.$inertia.visit(v.route("course-management.levels.edit",e.node.levelId)),["stop"])},null,8,["onClick"]),_(s,{flat:"",dense:"",round:"",size:"sm",icon:"add",color:"blue-9",onClick:C(l=>v.$inertia.visit(v.route("course-management.levels.sections.create",e.node.levelId)),["stop"])},null,8,["onClick"])])])]),"header-section":b(e=>[y("div",F,[y("div",J,[_(n,{name:"folder",size:"sm",class:"q-mr-xs text-grey-8"}),y("span",K,h(e.node.label),1)]),y("div",null,[_(s,{flat:"",dense:"",round:"",size:"xs",icon:"edit",color:"grey-8",onClick:C(l=>v.$inertia.visit(v.route("course-management.sections.edit",e.node.sectionId)),["stop"])},null,8,["onClick"]),_(s,{flat:"",dense:"",round:"",size:"xs",icon:"add",color:"grey-8",onClick:C(l=>v.$inertia.visit(v.route("course-management.sections.lessons.create",e.node.sectionId)),["stop"])},null,8,["onClick"])])])]),"header-lesson":b(e=>[y("div",G,[y("div",P,[_(n,{name:"play_lesson",size:"sm",class:"q-mr-xs",color:ue.value&&ue.value.id===e.node.lessonId?"blue-9":"grey-7"},null,8,["color"]),y("span",{class:w({"text-blue-9 text-weight-medium":ue.value&&ue.value.id===e.node.lessonId})},h(e.node.label),3)]),_(s,{flat:"",dense:"",round:"",size:"sm",icon:"edit",color:"orange",onClick:C(l=>v.$inertia.visit(v.route("course-management.lessons.edit",e.node.lessonId)),["stop"])},null,8,["onClick"])])]),_:1},8,["nodes","selected"]),y("div",R,[_(s,{color:"primary",icon:"add",label:"Add Level",onClick:f[4]||(f[4]=l=>v.$inertia.visit(v.route("course-management.courses.levels.create",e.course.id)))})])]),y("div",X,[ue.value?(g(),x(t,{key:0,flat:"",bordered:""},{default:b(()=>[_(l,null,{default:b(()=>[y("div",Y,h(ue.value.title),1),y("div",Z," Last updated: "+h(be(ue.value.updated_at)),1),y("div",ee,[ue.value.text?(g(),k("div",{key:0,innerHTML:ue.value.text},null,8,le)):(g(),k("div",se," No content available for this lesson. "))]),y("div",te,[_(s,{color:"primary",icon:"edit",label:"Edit Lesson",onClick:f[5]||(f[5]=e=>v.$inertia.visit(v.route("course-management.lessons.edit",ue.value.id)))})])]),_:1})]),_:1})):(g(),k("div",ae,[y("div",oe,[_(n,{name:"school",size:"4em"}),f[12]||(f[12]=y("p",{class:"q-mt-md"},"Select a lesson to view its content",-1))])]))])])):(g(),k("div",ne,[_(n,{name:"layers",size:"4em"}),f[13]||(f[13]=y("p",{class:"q-mt-md"},"No levels yet. Start building your course structure!",-1)),_(s,{color:"primary",label:"Add First Level",icon:"add",onClick:f[6]||(f[6]=l=>v.$inertia.visit(v.route("course-management.courses.levels.create",e.course.id)))})]))]),_:1}),_(a),_(l,null,{default:b(()=>[f[18]||(f[18]=y("div",{class:"text-subtitle1 q-mb-md"},"Course Information",-1)),y("div",ie,[y("div",re,[_(i,null,{default:b(()=>[_(r,null,{default:b(()=>[_(d,{avatar:""},{default:b(()=>[_(n,{name:"person",color:"primary"})]),_:1}),_(d,null,{default:b(()=>[_(c,null,{default:b(()=>f[14]||(f[14]=[q("Created By")])),_:1}),_(c,{caption:""},{default:b(()=>{var l;return[q(h((null==(l=e.course.creator)?void 0:l.name)||"Unknown"),1)]}),_:1})]),_:1})]),_:1}),_(r,null,{default:b(()=>[_(d,{avatar:""},{default:b(()=>[_(n,{name:"calendar_today",color:"primary"})]),_:1}),_(d,null,{default:b(()=>[_(c,null,{default:b(()=>f[15]||(f[15]=[q("Created Date")])),_:1}),_(c,{caption:""},{default:b(()=>[q(h(be(e.course.created_at)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),y("div",de,[_(i,null,{default:b(()=>[_(r,null,{default:b(()=>[_(d,{avatar:""},{default:b(()=>[_(n,{name:"update",color:"primary"})]),_:1}),_(d,null,{default:b(()=>[_(c,null,{default:b(()=>f[16]||(f[16]=[q("Last Updated")])),_:1}),_(c,{caption:""},{default:b(()=>[q(h(be(e.course.updated_at)),1)]),_:1})]),_:1})]),_:1}),_(r,null,{default:b(()=>[_(d,{avatar:""},{default:b(()=>[_(n,{name:"tag",color:"primary"})]),_:1}),_(d,null,{default:b(()=>[_(c,null,{default:b(()=>f[17]||(f[17]=[q("Course ID")])),_:1}),_(c,{caption:""},{default:b(()=>[q("#"+h(e.course.id),1)]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})])]),_:1},8,["title"]))}},[["__scopeId","data-v-c5044e83"]]);export{ce as default};
