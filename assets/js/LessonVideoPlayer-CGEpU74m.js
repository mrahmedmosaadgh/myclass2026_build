import{p as e}from"./app-BXm70mdJ.js";import{f as i,k as t,o,L as n,I as s,M as l}from"./vendor-DNM7Y6Xn.js";import"./offline-BzIlwqNM.js";import"./i18n-CBOKL2HS.js";import"./ui-BP0GJNn5.js";const r={class:"lesson-video-player"},a=["src"],d=e({__name:"LessonVideoPlayer",props:{slide:Object},emits:["timelineEvent"],setup(e,{expose:d,emit:u}){const v=e,p=u,m=i(null);let c=new Set;function f(e){var i;const t=m.value.currentTime;((null==(i=v.slide)?void 0:i.timeline)||[]).forEach(e=>{if("time"===e.trigger){const i=e.time||e.start||0;t>=i&&!c.has(e.id)&&(c.add(e.id),p("timelineEvent",e),"pause"===e.type&&m.value.pause())}})}function y(){p("timelineEvent",{type:"ended"})}return t(()=>v.slide,e=>{c=new Set,m.value&&e&&e.video&&"number"==typeof e.video.playFrom&&(m.value.currentTime=e.video.playFrom||0,m.value.play().catch(()=>{}))}),o(()=>{}),d({seekTo:function(e){m.value&&(m.value.currentTime=e)}}),(i,t)=>{var o,d;return s(),n("div",r,[l("video",{ref_key:"videoEl",ref:m,src:null==(d=null==(o=e.slide)?void 0:o.video)?void 0:d.src,controls:"",onTimeupdate:f,onEnded:y,style:{width:"100%",background:"#000"}},null,40,a)])}}},[["__scopeId","data-v-0e4dc3f8"]]);export{d as default};
