import{f as e,af as s,I as t,J as a,K as l,O as o,N as i,Q as n,V as r,W as u,_ as d}from"./vendor-nQjeLEvd.js";const c={class:"py-12"},p={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},v={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg p-6"},h={class:"mb-6"},m={key:0,class:"mt-2 p-3 bg-gray-100 rounded"},g={class:"mb-6"},b={key:0,class:"mt-2 p-3 bg-gray-100 rounded"},y={class:"mb-6"},x={key:0,class:"mt-2 p-3 bg-gray-100 rounded"},C={class:"mb-6"},k={key:0,class:"mt-2 p-3 bg-gray-100 rounded"},w={__name:"SanctumTest",setup(w){const f=e(null),S=e(null),_=e(null),R=e(null),A=async()=>{var e;try{const e=await d.get("/api/csrf-cookie",{withCredentials:!0});f.value=e.data}catch(s){f.value={error:s.message,details:null==(e=s.response)?void 0:e.data}}},T=async()=>{var e;try{const e=await d.get("/sanctum-test",{withCredentials:!0});f.value=e.data}catch(s){f.value={error:s.message,details:null==(e=s.response)?void 0:e.data}}},F=async()=>{var e;try{const e=await d.get("/sanctum-test",{withCredentials:!0});S.value={session_id:e.data.session_id,cookies:document.cookie.split(";").map(e=>e.trim())}}catch(s){S.value={error:s.message,details:null==(e=s.response)?void 0:e.data}}},M=async()=>{var e;try{const e=await d.get("/api/user",{withCredentials:!0});_.value=e.data}catch(s){_.value={error:s.message,details:null==(e=s.response)?void 0:e.data}}},j=async()=>{var e;try{const e=await d.get("/auth/status",{withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});R.value=e.data}catch(s){R.value={error:s.message,details:null==(e=s.response)?void 0:e.data}}};return(e,d)=>{const w=s("AppLayout");return a(),t(w,{title:"Sanctum Test"},{default:l(()=>[o("div",c,[o("div",p,[o("div",v,[d[4]||(d[4]=o("h2",{class:"text-2xl font-bold mb-4"},"Sanctum Authentication Test",-1)),o("div",h,[d[0]||(d[0]=o("h3",{class:"text-lg font-semibold mb-2"},"CSRF Cookie Status",-1)),o("div",{class:"flex space-x-4"},[o("button",{onClick:T,class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"}," Check CSRF Cookie "),o("button",{onClick:A,class:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"}," Set CSRF Cookie ")]),f.value?(a(),i("div",m,[o("pre",null,r(f.value),1)])):n("",!0)]),o("div",g,[d[1]||(d[1]=o("h3",{class:"text-lg font-semibold mb-2"},"Session Status",-1)),o("button",{onClick:F,class:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600"}," Check Session "),S.value?(a(),i("div",b,[o("pre",null,r(S.value),1)])):n("",!0)]),o("div",y,[d[2]||(d[2]=o("h3",{class:"text-lg font-semibold mb-2"},"User Status",-1)),o("button",{onClick:M,class:"px-4 py-2 bg-yellow-500 text-white rounded hover:bg-yellow-600"}," Check User "),_.value?(a(),i("div",x,[o("pre",null,r(_.value),1)])):n("",!0)]),o("div",C,[d[3]||(d[3]=o("h3",{class:"text-lg font-semibold mb-2"},"Complete Auth Status",-1)),o("button",{onClick:j,class:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"}," Check Auth Status "),R.value?(a(),i("div",k,[o("pre",null,r(R.value),1)])):n("",!0)]),d[5]||(d[5]=o("div",{class:"mt-8 p-4 border border-gray-200 rounded"},[o("h3",{class:"text-lg font-semibold mb-2"},"Troubleshooting Tips"),o("ul",{class:"list-disc pl-5 space-y-1"},[o("li",null,[u("Make sure your domain is in the "),o("code",null,"stateful"),u(" array in "),o("code",null,"config/sanctum.php")]),o("li",null,[u("Ensure "),o("code",null,"withCredentials: true"),u(" is set in your axios configuration")]),o("li",null,[u("Check that "),o("code",null,"supports_credentials: true"),u(" is set in your CORS configuration")]),o("li",null,"Verify that your session cookie is being set properly"),o("li",null,"Make sure your session domain matches your application domain")])],-1))])])])]),_:1})}}};export{w as default};
