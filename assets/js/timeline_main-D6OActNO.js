import e from"./timeline-QQjEr7if.js";import{f as t,k as l,a as o,r as i,M as r,J as s,Q as n,N as a,b as u,V as d,y as m,ac as c}from"./vendor-DuKqz2x4.js";import"./UpcomingEvents-Dke1MHVz.js";import"./UpcomingEvent-BvQjVm1Y.js";import"./CurrentEventCard-DJ2BYjL5.js";import"./EventCard-CQROBTYq.js";import"./EventTimingBadge-Cjl8KJlc.js";import"./EventDurationBadge-DAP-V8O1.js";import"./app-DOc39CFu.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const f={class:"p-6"},p={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},v={class:"bg-white rounded-lg p-6 w-full max-w-md"},b={class:"text-lg font-semibold mb-4"},g={class:"space-y-4"},x={class:"flex gap-4"},y={class:"flex-1"},w={class:"flex-1"},h=["min"],j={class:"mt-6 flex justify-end gap-3"},E={class:"mb-4 flex justify-between items-center"},k={class:"text-xl font-bold"},C={__name:"timeline_main",props:{title:{type:String,default:""},events:{type:Array,default:()=>[]}},emits:["update:events"],setup(C,{emit:U}){const D=C,T=U,A=e=>{const t=new Date,[l,o]=e.split(":");return t.setHours(parseInt(l),parseInt(o),0,0),t},V=t([...D.events]);l(()=>D.events,e=>{V.value=[...e]},{deep:!0});const S=o(()=>{const e=[...V.value].sort((e,t)=>A(e.from)-A(t.from));return e.map(t=>{const l=A(t.from),o=A(t.to),i=e.filter(e=>{if(e.id===t.id)return!1;const i=A(e.from),r=A(e.to);return l<r&&o>i}),r=i.length>0?i.length:0,s=Math.max(r+1,1);return{...t,column:r,totalColumns:s,startTime:l,endTime:o}})}),$=t(!1),_=t(null),B=i({title:"",description:"",from:"",to:""}),I=()=>{B.title="",B.description="",B.from="",B.to=""},M=()=>{$.value=!1,_.value=null,I()},N=()=>{I(),$.value=!0},P=e=>{_.value=e,B.title=e.title,B.description=e.description,B.from=e.from,B.to=e.to,$.value=!0},Q=()=>{if(!B.title.trim()||!B.from||!B.to)return void alert("Please fill in all required fields");if(B.from>=B.to)return void alert("End time must be after start time");const e=A(B.from),t=A(B.to),l=V.value.find(l=>{var o;if((null==(o=_.value)?void 0:o.id)===l.id)return!1;const i=A(l.from),r=A(l.to);return e<r&&t>i});if(l&&!confirm(`There is already an event "${l.title}" from ${l.from} to ${l.to}. Do you want to schedule anyway?`))return;const o={title:B.title,description:B.description,from:B.from,to:B.to};let i;i=_.value?V.value.map(e=>e.id===_.value.id?{...e,...o}:e):[...V.value,{id:Date.now(),...o}],V.value=i,T("update:events",i),M()},q=e=>{if(confirm("Are you sure you want to delete this event?")){const t=V.value.filter(t=>t.id!==e.id);V.value=t,T("update:events",t)}};return(t,l)=>(s(),r("div",f,[$.value?(s(),r("div",p,[a("div",v,[a("h3",b,d(_.value?"Edit Event":"Add New Event"),1),a("div",g,[a("div",null,[l[4]||(l[4]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Title",-1)),m(a("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>B.title=e),type:"text",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,B.title]])]),a("div",null,[l[5]||(l[5]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),m(a("textarea",{"onUpdate:modelValue":l[1]||(l[1]=e=>B.description=e),class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,B.description]])]),a("div",x,[a("div",y,[l[6]||(l[6]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"From",-1)),m(a("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>B.from=e),type:"time",class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[c,B.from]])]),a("div",w,[l[7]||(l[7]=a("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"To",-1)),m(a("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>B.to=e),type:"time",min:B.from,class:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,8,h),[[c,B.to]])])])]),a("div",j,[a("button",{onClick:M,class:"px-4 py-2 text-gray-600 hover:text-gray-800"}," Cancel "),a("button",{onClick:Q,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"},d(_.value?"Update":"Add"),1)])])])):n("",!0),a("div",E,[a("h2",k,d(C.title||"Daily Schedule"),1),a("button",{onClick:N,class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," Add Event ")]),u(e,{events:S.value,onAdd:N,onEdit:P,onDelete:q},null,8,["events"])]))}};export{C as default};
