import{f as e,O as s,a as t,M as a,J as l,N as r,b as n,K as i,z as o,P as d,L as u,V as c,U as m,Z as h,_ as g,o as v,I as f,F as p,R as x,y,W as b,Y as k,Q as w}from"./vendor-DuKqz2x4.js";import{o as _}from"./app-CqJgtQaN.js";const M={class:"min-h-screen bg-gray-100"},L={class:"bg-white border-b border-gray-100"},C={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},I={class:"flex justify-between h-16"},j={class:"flex"},V={class:"shrink-0 flex items-center"},$={class:"hidden sm:flex sm:items-center sm:ml-6"},S={class:"hidden sm:flex sm:items-center sm:ml-6"},A={class:"ml-3 relative"},B={class:"flex items-center"},U={class:"flex text-sm border-2 border-transparent rounded-full focus:outline-none focus:border-gray-300 transition"},O=["src"],W={key:1,class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-gray-500"},z={class:"text-sm font-medium leading-none text-white"},F={class:"ml-2 inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10"},R={class:"-mr-2 flex items-center sm:hidden"},E={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},J={class:"flex"},K={class:"w-64 bg-white shadow-sm h-screen fixed left-0 overflow-y-auto"},N={class:"flex-1 ml-64 p-8"},P={__name:"BaseLayout",setup(h){const g=e(!1),v=s(),f=t(()=>{var e;return null==(e=v.props.auth)?void 0:e.user}),p=t(()=>{var e;return(null==(e=f.value)?void 0:e.role)||"guest"});return(e,s)=>{var t,h,v;return l(),a("div",M,[r("nav",L,[r("div",C,[r("div",I,[r("div",j,[r("div",V,[n(o(d),{href:e.route("dashboard")},{default:i(()=>s[1]||(s[1]=[r("img",{class:"block h-9 w-auto",src:"/logo.svg",alt:"MyClass LMS"},null,-1)])),_:1},8,["href"])])]),r("div",$,[u(e.$slots,"navigation")]),r("div",S,[r("div",A,[r("div",B,[r("button",U,[(null==(t=f.value)?void 0:t.profile_photo_url)?(l(),a("img",{key:0,src:f.value.profile_photo_url,class:"h-8 w-8 rounded-full object-cover"},null,8,O)):(l(),a("span",W,[r("span",z,c((null==(v=null==(h=f.value)?void 0:h.name)?void 0:v[0])||"U"),1)]))]),r("span",F,c(p.value),1)])])]),r("div",R,[r("button",{onClick:s[0]||(s[0]=e=>g.value=!g.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"},[(l(),a("svg",E,[r("path",{class:m({hidden:g.value,"inline-flex":!g.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),r("path",{class:m({hidden:!g.value,"inline-flex":g.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),r("div",{class:m([{block:g.value,hidden:!g.value},"sm:hidden"])},[u(e.$slots,"responsive-navigation")],2)]),r("div",J,[r("aside",K,[u(e.$slots,"sidebar")]),r("main",N,[u(e.$slots,"default")])])])}}},Q=h("navigation",{state:()=>({menuItems:[],isLoading:!1,menuVersion:null}),getters:{visibleItems:e=>e.menuItems,hasItems:e=>e.menuItems.length>0,itemsByModule:e=>s=>e.menuItems.filter(e=>e.module===s),flatMenuItems:e=>{const s=(e,t=null)=>{let a=[];return e.forEach(e=>{a.push({...e,parent:t}),e.children&&e.children.length>0&&(a=a.concat(s(e.children,e)))}),a};return s(e.menuItems)}},actions:{async fetchMenu(e=null,s=!1){if(!this.isLoading){this.isLoading=!0;try{const t={};e&&(t.role=e),s&&(t.v2="true");const a=await g.get("/api/navigation/menu",{params:t});this.menuItems=a.data.data,this.menuVersion=a.data.version}catch(t){console.error("Failed to load navigation menu:",t)}finally{this.isLoading=!1}}},async refreshIfVersionChanged(e){e&&e!==this.menuVersion&&await this.fetchMenu()},async invalidateCache(){this.menuVersion=null,await this.fetchMenu()}}}),T={class:"flex space-x-4"},Y={class:"mr-1"},Z={class:"pt-2 pb-3 space-y-1"},q={key:0,class:"pl-3 pr-4 py-2 text-gray-500"},D=["onClick"],G={key:1,class:"ml-4"},H={class:"mt-5 px-2"},X={key:0,class:"text-gray-500 px-2 py-2"},ee={key:1,class:"space-y-1"},se={key:0,class:"space-y-1"},te=["onClick"],ae={class:"mr-3 flex-shrink-0"},le={class:"space-y-1"},re={class:"mr-3 flex-shrink-0"},ne={class:"mr-3 flex-shrink-0"},ie=_({__name:"AdminLayout",setup(s){const n=Q();v(()=>{n.fetchMenu()});const h=t(()=>n.visibleItems),g=t(()=>[{name:"Add User",href:route("dashboard"),icon:"âž•"},{name:"Create Class",href:route("dashboard"),icon:"ðŸ“š"},{name:"View Reports",href:route("dashboard"),icon:"ðŸ“Š"}]),_=e(new Set),M=e=>{_.value.has(e)?_.value.delete(e):_.value.add(e)};return(e,s)=>(l(),f(P,null,{navigation:i(()=>[r("div",T,[(l(!0),a(p,null,x(g.value,e=>(l(),f(o(d),{key:e.name,href:e.href,class:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-md text-indigo-600 bg-indigo-50 hover:bg-indigo-100"},{default:i(()=>[r("span",Y,c(e.icon),1),b(" "+c(e.name),1)]),_:2},1032,["href"]))),128))])]),"responsive-navigation":i(()=>[r("div",Z,[o(n).isLoading?(l(),a("div",q," Loading navigation... ")):(l(!0),a(p,{key:1},x(h.value,s=>(l(),a(p,{key:s.id},[s.children&&s.children.length>0?(l(),a("button",{key:0,onClick:e=>M(s.label),class:"w-full text-left block pl-3 pr-4 py-2 border-l-4 text-base font-medium hover:bg-gray-50 hover:border-gray-300"},c(s.icon)+" "+c(s.label),9,D)):w("",!0),s.children&&s.children.length>0&&_.value.has(s.label)?(l(),a("div",G,[(l(!0),a(p,null,x(s.children,s=>(l(),f(o(d),{key:s.id,href:s.route?e.route(s.route):"#",class:"block pl-3 pr-4 py-2 border-l-4 text-sm font-medium hover:bg-gray-50 hover:border-gray-300"},{default:i(()=>[b(c(s.icon)+" "+c(s.label),1)]),_:2},1032,["href"]))),128))])):s.children&&0!==s.children.length?w("",!0):(l(),f(o(d),{key:2,href:s.route?e.route(s.route):"#",class:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium hover:bg-gray-50 hover:border-gray-300"},{default:i(()=>[b(c(s.icon)+" "+c(s.label),1)]),_:2},1032,["href"]))],64))),128))])]),sidebar:i(()=>[r("nav",H,[o(n).isLoading?(l(),a("div",X," Loading navigation... ")):(l(),a("div",ee,[(l(!0),a(p,null,x(h.value,t=>(l(),a(p,{key:t.id},[t.children&&t.children.length>0?(l(),a("div",se,[r("button",{onClick:e=>M(t.label),class:"w-full group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"},[r("span",ae,c(t.icon),1),b(" "+c(t.label)+" ",1),(l(),a("svg",{class:m([_.value.has(t.label)?"transform rotate-90":"","ml-auto h-5 w-5"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},s[0]||(s[0]=[r("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)]),2))],8,te),y(r("div",le,[(l(!0),a(p,null,x(t.children,s=>(l(),f(o(d),{key:s.id,href:s.route?e.route(s.route):"#",class:m([s.route&&e.$page.url.startsWith(e.route(s.route))?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","group flex items-center pl-10 pr-2 py-2 text-sm font-medium rounded-md"])},{default:i(()=>[r("span",re,c(s.icon),1),b(" "+c(s.label),1)]),_:2},1032,["href","class"]))),128))],512),[[k,_.value.has(t.label)]])])):(l(),f(o(d),{key:1,href:t.route?e.route(t.route):"#",class:m([t.route&&e.$page.url.startsWith(e.route(t.route))?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","group flex items-center px-2 py-2 text-base font-medium rounded-md"])},{default:i(()=>[r("span",ne,c(t.icon),1),b(" "+c(t.label),1)]),_:2},1032,["href","class"]))],64))),128))]))]),s[1]||(s[1]=r("div",{class:"mt-8 px-4"},[r("h3",{class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider"}," System Overview "),r("div",{class:"mt-2 space-y-2"},[r("div",{class:"bg-white p-4 rounded-lg shadow-sm"},[r("p",{class:"text-sm font-medium text-gray-600"},"Active Users"),r("p",{class:"text-2xl font-semibold text-gray-900"},"1,234")]),r("div",{class:"bg-white p-4 rounded-lg shadow-sm"},[r("p",{class:"text-sm font-medium text-gray-600"},"Classes Today"),r("p",{class:"text-2xl font-semibold text-gray-900"},"42")]),r("div",{class:"bg-white p-4 rounded-lg shadow-sm"},[r("p",{class:"text-sm font-medium text-gray-600"},"System Status"),r("p",{class:"text-sm font-medium text-green-600"},"All Systems Operational")])])],-1))]),default:i(()=>[u(e.$slots,"default",{},void 0,!0)]),_:3}))}},[["__scopeId","data-v-3cfe6d8f"]]);export{ie as A,Q as u};
