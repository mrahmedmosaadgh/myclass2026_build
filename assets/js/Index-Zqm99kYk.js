import{a as e,Q as l}from"./QToolbar-COIP0AkA.js";import{u as a,e as r,Q as o,m as t,c as u,f as s,b as d,aU as i}from"./app-DOc39CFu.js";import{Q as n}from"./QTd-s0Iuqehk.js";import{Q as m}from"./QTable-BjpIccaO.js";import{Q as p}from"./QPagination-2pQnDm7i.js";import{Q as c}from"./QSelect-Dkiz84LX.js";import{Q as v}from"./QForm-CqUo2wlA.js";import{a as b,f as y,af as f,I as V,J as h,K as q,W as g,N as w,b as _,Q as x,V as j,$ as k}from"./vendor-DuKqz2x4.js";import{_ as Q}from"./ImportExcel-CoshmniA.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./QMarkupTable-37_xwH2D.js";import"./QLinearProgress-DkNjmMsH.js";import"./use-fullscreen-BV7570VS.js";import"./rtl-Cr6c3OOr.js";import"./SecondaryButton-BDKLxmbK.js";import"./PrimaryButton-Cw-PZntm.js";import"./Modal-CITCtqx7.js";import"./xlsx-cMC2LkxH.js";const F={class:"q-pa-md"},U={class:"row justify-between items-center q-mb-md"},N={class:"row q-gutter-sm"},A={class:"row q-gutter-md"},T={class:"col-6"},C={class:"col-6"},$={class:"row q-gutter-md"},S={class:"col-6"},E={class:"col-6"},P={class:"row q-gutter-md"},I={class:"col-6"},B={class:"col-6"},M={class:"row q-gutter-md"},D={class:"col-6"},G={class:"col-6"},L={class:"row q-gutter-md"},R={class:"col-6"},W={class:"col-6"},J={class:"row q-gutter-md"},K={class:"col-12"},O={class:"row q-gutter-md"},z={class:"col-12"},H={class:"q-mt-md row justify-end"},X="Teachers Management",Y="/admin/teacher",Z={__name:"Index",props:{records:{type:Object,required:!0},schools:{type:Array,required:!0}},setup(Z){const ee=a(),le=Z,ae=b(()=>{var e;return(null==(e=le.records)?void 0:e.data)||[]}),re=b(()=>{var e;return(null==(e=le.records)?void 0:e.links)||null}),oe=[{key:"name",label:"Name"},{key:"name_ar",label:"Arabic Name"},{key:"school.name",label:"School"},{key:"email",label:"Email"},{key:"phone_number",label:"Phone"},{key:"gender",label:"Gender"},{key:"actions",label:"Actions"}],te=b(()=>le.schools.map(e=>({value:e.id,label:e.name}))),ue=[{name:"name",label:"Name",type:"text",required:!0,value:""},{name:"name_ar",label:"Arabic Name",type:"text",value:""},{name:"school_id",label:"School",type:"select",required:!0,options:te,value:""},{name:"email",label:"Email",type:"email",value:""},{name:"phone_number",label:"Phone Number",type:"text",value:""},{name:"whatsapp_number",label:"WhatsApp Number",type:"text",value:""},{name:"gender",label:"Gender",type:"select",options:[{value:"male",label:"Male"},{value:"female",label:"Female"}],value:""},{name:"nationality",label:"Nationality",type:"text",value:""},{name:"date_of_birth",label:"Date of Birth",type:"date",value:""},{name:"address",label:"Address",type:"textarea",value:""},{name:"notes",label:"Notes",type:"textarea",value:""}],se=y(!1),de=y(null),ie=y(!1),ne=y(1),me=y(null),pe=(e=null)=>{de.value=e,se.value=!0,e?ue.forEach(l=>{l.value=e[l.name]}):ue.forEach(e=>{e.value=""})},ce=()=>{se.value=!1,de.value=null},ve=({},e,l)=>{if(ie.value)return;ie.value=!0,i.start();const a=de.value?`${Y}/${de.value.id}`:Y;axios({method:de.value?"put":"post",url:a,data:ue.reduce((e,l)=>({...e,[l.name]:l.value}),{})}).then(l=>{e(),ce(),be()}).catch(e=>{var a,r;(null==(r=null==(a=e.response)?void 0:a.data)?void 0:r.errors)?l(e.response.data.errors):l({error:["An unexpected error occurred"]})}).finally(()=>{ie.value=!1,i.done()})},be=()=>{k.reload({only:["records"],preserveScroll:!0,preserveState:!0})},ye=()=>{window.location.href=`${Y}/export`},fe=e=>{k.get(`${Y}?page=${e}`)},Ve=[{key:"name",label:"Name"},{key:"school",label:"school"}];return(a,b)=>{const y=f("AppLayout3");return h(),V(y,{title:X},{header:q(()=>[_(l,null,{default:q(()=>[_(e,{class:"text-h6"},{default:q(()=>[g(j(X))]),_:1})]),_:1})]),default:q(()=>[b[16]||(b[16]=g("ffffffff ")),w("div",F,[_(t,{class:"q-pa-md"},{default:q(()=>{var e;return[(null==(e=a.$page.props.flash)?void 0:e.success)?(h(),V(r,{key:0,class:"bg-green-1 text-green"},{default:q(()=>[g(j(a.$page.props.flash.success),1)]),_:1})):x("",!0),w("div",U,[w("div",N,[_(o,{color:"primary",onClick:b[0]||(b[0]=e=>pe()),label:"Add New Teacher",ref_key:"addTeacherButtonRef",ref:me},null,512),_(Q,{onImported:be,"validate-url":Y+"/validate-import","import-url":Y+"/import",columns:Ve,"button-text":"Import Teachers","preview-title":"Preview Teacher Data"},null,8,["validate-url","import-url"]),_(o,{color:"secondary",onClick:ye,label:"Export"})])]),_(m,{rows:ae.value,columns:oe,onRowClick:b[1]||(b[1]=(e,l)=>pe(l)),flat:"",bordered:""},{"body-cell-actions":q(e=>[_(n,{props:e},{default:q(()=>[_(o,{icon:"edit",onClick:l=>pe(e.row),flat:"",dense:""},null,8,["onClick"]),_(o,{icon:"delete",onClick:l=>{return a=e.row,void(ee.dialog({title:"Confirm",message:"Are you sure you want to delete this record?",cancel:!0,persistent:!0}).then(()=>!0).catch(()=>!1)&&(i.start(),axios.delete(`${Y}/${a.id}`).then(()=>{be()}).catch(e=>{console.error("Error:",e),ee.notify({type:"negative",message:"An error occurred while deleting the record."})}).finally(()=>{i.done()})));var a},flat:"",dense:""},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows"]),re.value?(h(),V(p,{key:1,modelValue:ne.value,"onUpdate:modelValue":[b[2]||(b[2]=e=>ne.value=e),fe],max:re.value.last_page,class:"q-mt-md"},null,8,["modelValue","max"])):x("",!0)]}),_:1})]),_(d,{modelValue:se.value,"onUpdate:modelValue":b[15]||(b[15]=e=>se.value=e),persistent:""},{default:q(()=>[_(t,{style:{"min-width":"500px"}},{default:q(()=>[_(u,null,{default:q(()=>[w("div",{class:"text-h6"},j("Teacher"))]),_:1}),_(u,null,{default:q(()=>[_(v,{onSubmit:ve},{default:q(()=>[w("div",A,[w("div",T,[_(s,{modelValue:ue[0].value,"onUpdate:modelValue":b[3]||(b[3]=e=>ue[0].value=e),label:ue[0].label,type:ue[0].type,rules:ue[0].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","type","rules"])]),w("div",C,[_(s,{modelValue:ue[1].value,"onUpdate:modelValue":b[4]||(b[4]=e=>ue[1].value=e),label:ue[1].label,type:ue[1].type,rules:ue[1].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","type","rules"])])]),w("div",$,[w("div",S,[_(c,{modelValue:ue[2].value,"onUpdate:modelValue":b[5]||(b[5]=e=>ue[2].value=e),label:ue[2].label,options:te.value,rules:ue[2].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","options","rules"])]),w("div",E,[_(s,{modelValue:ue[3].value,"onUpdate:modelValue":b[6]||(b[6]=e=>ue[3].value=e),label:ue[3].label,type:ue[3].type,rules:ue[3].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","type","rules"])])]),w("div",P,[w("div",I,[_(s,{modelValue:ue[4].value,"onUpdate:modelValue":b[7]||(b[7]=e=>ue[4].value=e),label:ue[4].label,type:ue[4].type,rules:ue[4].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","type","rules"])]),w("div",B,[_(s,{modelValue:ue[5].value,"onUpdate:modelValue":b[8]||(b[8]=e=>ue[5].value=e),label:ue[5].label,type:ue[5].type,rules:ue[5].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","type","rules"])])]),w("div",M,[w("div",D,[_(c,{modelValue:ue[6].value,"onUpdate:modelValue":b[9]||(b[9]=e=>ue[6].value=e),label:ue[6].label,options:ue[6].options,rules:ue[6].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","options","rules"])]),w("div",G,[_(s,{modelValue:ue[7].value,"onUpdate:modelValue":b[10]||(b[10]=e=>ue[7].value=e),label:ue[7].label,type:ue[7].type,rules:ue[7].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","type","rules"])])]),w("div",L,[w("div",R,[_(s,{modelValue:ue[8].value,"onUpdate:modelValue":b[11]||(b[11]=e=>ue[8].value=e),label:ue[8].label,type:ue[8].type,rules:ue[8].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","type","rules"])]),w("div",W,[_(s,{modelValue:ue[9].value,"onUpdate:modelValue":b[12]||(b[12]=e=>ue[9].value=e),label:ue[9].label,type:ue[9].type,rules:ue[9].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","type","rules"])])]),w("div",J,[w("div",K,[_(s,{modelValue:ue[10].value,"onUpdate:modelValue":b[13]||(b[13]=e=>ue[10].value=e),label:ue[10].label,type:ue[10].type,rules:ue[10].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","type","rules"])])]),w("div",O,[w("div",z,[_(s,{modelValue:ue[11].value,"onUpdate:modelValue":b[14]||(b[14]=e=>ue[11].value=e),label:ue[11].label,type:ue[11].type,rules:ue[11].required?[e=>!!e||"Field is required"]:[]},null,8,["modelValue","label","type","rules"])])]),w("div",H,[_(o,{flat:"",label:"Cancel",onClick:ce}),_(o,{type:"submit",color:"primary",label:"Save"})])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}};export{Z as default};
