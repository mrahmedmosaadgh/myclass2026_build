import{f as e,M as l,a as s,N as t,J as a,R as r,b as o,K as n,z as i,P as d,L as u,V as c,U as v,o as h,I as m,F as g,Q as p,y as f,W as x,Y as y,O as b}from"./vendor-BWKGNkNB.js";import{r as w,a as k,x as _}from"./app-DraepSDZ.js";const C={class:"min-h-screen bg-gray-100"},M={class:"bg-white border-b border-gray-100"},S={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},j={class:"flex justify-between h-16"},L={class:"flex"},$={class:"shrink-0 flex items-center"},A={class:"hidden sm:flex sm:items-center sm:ml-6"},I={class:"hidden sm:flex sm:items-center sm:ml-6"},W={class:"ml-3 relative"},R={class:"flex items-center"},U={class:"flex text-sm border-2 border-transparent rounded-full focus:outline-none focus:border-gray-300 transition"},B=["src"],O={key:1,class:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-gray-500"},z={class:"text-sm font-medium leading-none text-white"},F={class:"ml-2 inline-flex items-center rounded-md bg-blue-50 px-2 py-1 text-xs font-medium text-blue-700 ring-1 ring-inset ring-blue-700/10"},V={class:"-mr-2 flex items-center sm:hidden"},J={class:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},K={class:"flex"},N={class:"w-64 bg-white shadow-sm h-screen fixed left-0 overflow-y-auto"},P={class:"flex-1 ml-64 p-8"},Q={__name:"BaseLayout",setup(h){const m=e(!1),g=l(),p=s(()=>{var e;return null==(e=g.props.auth)?void 0:e.user}),f=s(()=>{var e;return(null==(e=p.value)?void 0:e.role)||"guest"});return(e,l)=>{var s,h,g;return a(),t("div",C,[r("nav",M,[r("div",S,[r("div",j,[r("div",L,[r("div",$,[o(i(d),{href:e.route("dashboard")},{default:n(()=>l[1]||(l[1]=[r("img",{class:"block h-9 w-auto",src:"/logo.svg",alt:"MyClass LMS"},null,-1)])),_:1},8,["href"])])]),r("div",A,[u(e.$slots,"navigation")]),r("div",I,[r("div",W,[r("div",R,[r("button",U,[(null==(s=p.value)?void 0:s.profile_photo_url)?(a(),t("img",{key:0,src:p.value.profile_photo_url,class:"h-8 w-8 rounded-full object-cover"},null,8,B)):(a(),t("span",O,[r("span",z,c((null==(g=null==(h=p.value)?void 0:h.name)?void 0:g[0])||"U"),1)]))]),r("span",F,c(f.value),1)])])]),r("div",V,[r("button",{onClick:l[0]||(l[0]=e=>m.value=!m.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 focus:text-gray-500 transition duration-150 ease-in-out"},[(a(),t("svg",J,[r("path",{class:v({hidden:m.value,"inline-flex":!m.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,2),r("path",{class:v({hidden:!m.value,"inline-flex":m.value}),"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,2)]))])])])]),r("div",{class:v([{block:m.value,hidden:!m.value},"sm:hidden"])},[u(e.$slots,"responsive-navigation")],2)]),r("div",K,[r("aside",N,[u(e.$slots,"sidebar")]),r("main",P,[u(e.$slots,"default")])])])}}},T={class:"flex space-x-4"},Y={class:"mr-1"},q={class:"pt-2 pb-3 space-y-1"},D={key:0,class:"pl-3 pr-4 py-2 text-gray-500"},E=["onClick"],G={key:1,class:"ml-4"},H={class:"mt-5 px-2"},X={key:0,class:"text-gray-500 px-2 py-2"},Z={key:1,class:"space-y-1"},ee={key:0,class:"space-y-1"},le=["onClick"],se={class:"mr-3 flex-shrink-0"},te={class:"space-y-1"},ae={class:"mr-3 flex-shrink-0"},re={class:"mr-3 flex-shrink-0"},oe=w({__name:"AdminLayout",setup(o){const w=k(),C=_(),M=s(()=>l().props.auth.user),S=s(()=>{var e;return(null==(e=M.value)?void 0:e.roles)||[]}),j=e(S.value[0]||"guest"),L=e({}),$=e(null);h(async()=>{(()=>{var e,s,t,a,r,o,n,i,d,u,c,v,h,m;const g=localStorage.getItem("school_id");let p=null;if(g)p=parseInt(g);else{const c=null==(r=null==(a=null==(t=null==(s=null==(e=l())?void 0:e.props)?void 0:s.auth)?void 0:t.user)?void 0:a.teacher)?void 0:r.School_id,v=null==(u=null==(d=null==(i=null==(n=null==(o=l())?void 0:o.props)?void 0:n.auth)?void 0:i.user)?void 0:d.student)?void 0:u.School_id;c?p=c:v&&(p=v)}if(p){$.value=p,localStorage.setItem("school_id",p);const e=((null==(m=null==(h=null==(v=null==(c=l())?void 0:c.props)?void 0:v.auth)?void 0:h.user)?void 0:m.schools)||[]).find(e=>e.id===p);e&&(L.value=e,C.selectedSchool_data=e)}})(),await w.fetchMenus(j.value)});const A=s(()=>w.getMenusForRole(j.value)),I=s(()=>{var e,l;const s={};return(null==(e=L.value)?void 0:e.slug)?(s.school_slug=L.value.slug,s.school=L.value.slug):(null==(l=L.value)?void 0:l.id)&&(s.school_slug=L.value.id,s.school=L.value.id),s}),W=(e,l={})=>{try{if(!e)return"#";if("string"==typeof e&&(e.startsWith("/")||e.startsWith("http")))return e;if(!(e=>{try{return"undefined"!=typeof window&&void 0!==window.route&&window.route().has(e)}catch(l){return!1}})(e))return"#";const s={...I.value,...l};return window.route(e,s)}catch(s){return console.warn(`Route error with ${e}:`,s),"#"}},R=s(()=>[{name:"Add User",href:W("dashboard"),icon:"âž•"},{name:"Create Class",href:W("dashboard"),icon:"ðŸ“š"},{name:"View Reports",href:W("dashboard"),icon:"ðŸ“Š"}]),U=e(new Set),B=e=>{U.value.has(e)?U.value.delete(e):U.value.add(e)};return(e,l)=>(a(),m(Q,null,{navigation:n(()=>[r("div",T,[(a(!0),t(g,null,p(R.value,e=>(a(),m(i(d),{key:e.name,href:e.href,class:"inline-flex items-center px-3 py-1 text-sm font-medium rounded-md text-indigo-600 bg-indigo-50 hover:bg-indigo-100"},{default:n(()=>[r("span",Y,c(e.icon),1),x(" "+c(e.name),1)]),_:2},1032,["href"]))),128))])]),"responsive-navigation":n(()=>[r("div",q,[i(w).loading?(a(),t("div",D," Loading navigation... ")):(a(!0),t(g,{key:1},p(A.value,e=>(a(),t(g,{key:e.id||e.title},[e.children&&e.children.length>0?(a(),t("button",{key:0,onClick:l=>B(e.title),class:"w-full text-left block pl-3 pr-4 py-2 border-l-4 text-base font-medium hover:bg-gray-50 hover:border-gray-300"},c(e.icon)+" "+c(e.title),9,E)):b("",!0),e.children&&e.children.length>0&&U.value.has(e.title)?(a(),t("div",G,[(a(!0),t(g,null,p(e.children,e=>(a(),m(i(d),{key:e.id||e.title,href:W(e.to),class:"block pl-3 pr-4 py-2 border-l-4 text-sm font-medium hover:bg-gray-50 hover:border-gray-300"},{default:n(()=>[x(c(e.icon)+" "+c(e.title),1)]),_:2},1032,["href"]))),128))])):e.children&&0!==e.children.length?b("",!0):(a(),m(i(d),{key:2,href:W(e.to),class:"block pl-3 pr-4 py-2 border-l-4 text-base font-medium hover:bg-gray-50 hover:border-gray-300"},{default:n(()=>[x(c(e.icon)+" "+c(e.title),1)]),_:2},1032,["href"]))],64))),128))])]),sidebar:n(()=>[r("nav",H,[i(w).loading?(a(),t("div",X," Loading navigation... ")):(a(),t("div",Z,[(a(!0),t(g,null,p(A.value,s=>(a(),t(g,{key:s.id||s.title},[s.children&&s.children.length>0?(a(),t("div",ee,[r("button",{onClick:e=>B(s.title),class:"w-full group flex items-center px-2 py-2 text-base font-medium rounded-md text-gray-600 hover:bg-gray-50 hover:text-gray-900"},[r("span",se,c(s.icon),1),x(" "+c(s.title)+" ",1),(a(),t("svg",{class:v([U.value.has(s.title)?"transform rotate-90":"","ml-auto h-5 w-5"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},l[0]||(l[0]=[r("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)]),2))],8,le),f(r("div",te,[(a(!0),t(g,null,p(s.children,l=>(a(),m(i(d),{key:l.id||l.title,href:W(l.to),class:v([W(l.to)&&e.$page.url.startsWith(W(l.to))?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","group flex items-center pl-10 pr-2 py-2 text-sm font-medium rounded-md"])},{default:n(()=>[r("span",ae,c(l.icon),1),x(" "+c(l.title),1)]),_:2},1032,["href","class"]))),128))],512),[[y,U.value.has(s.title)]])])):(a(),m(i(d),{key:1,href:W(s.to),class:v([W(s.to)&&e.$page.url.startsWith(W(s.to))?"bg-indigo-50 text-indigo-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900","group flex items-center px-2 py-2 text-base font-medium rounded-md"])},{default:n(()=>[r("span",re,c(s.icon),1),x(" "+c(s.title),1)]),_:2},1032,["href","class"]))],64))),128))]))]),l[1]||(l[1]=r("div",{class:"mt-8 px-4"},[r("h3",{class:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider"}," System Overview "),r("div",{class:"mt-2 space-y-2"},[r("div",{class:"bg-white p-4 rounded-lg shadow-sm"},[r("p",{class:"text-sm font-medium text-gray-600"},"Active Users"),r("p",{class:"text-2xl font-semibold text-gray-900"},"1,234")]),r("div",{class:"bg-white p-4 rounded-lg shadow-sm"},[r("p",{class:"text-sm font-medium text-gray-600"},"Classes Today"),r("p",{class:"text-2xl font-semibold text-gray-900"},"42")]),r("div",{class:"bg-white p-4 rounded-lg shadow-sm"},[r("p",{class:"text-sm font-medium text-gray-600"},"System Status"),r("p",{class:"text-sm font-medium text-green-600"},"All Systems Operational")])])],-1))]),default:n(()=>[u(e.$slots,"default",{},void 0,!0)]),_:3}))}},[["__scopeId","data-v-dc68afea"]]);export{oe as A};
