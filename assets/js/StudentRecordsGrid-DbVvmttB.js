import{u as e,e as l,g as a,Q as t,D as o,aj as s,h as n,aD as d,j as u,i,n as c,d as r,A as m,a as p,m as f,o as v,b as _}from"./app-BXm70mdJ.js";import{Q as b}from"./QTab-DhKL91H_.js";import{Q as k}from"./QTabs-CDJ215OP.js";import{Q as g}from"./QBadge-ZzhN1X9C.js";import{Q as h}from"./QSelect-CnZtzPIC.js";import{Q as y}from"./QTabPanel-sB32VrK8.js";import{Q as w}from"./QTabPanels-LFwTBPSC.js";import{f as V,a as C,L as j,I as U,M as x,b as Q,J as A,V as q,x as S,H as L,F as P,Q as $,S as N,U as O,O as B}from"./vendor-DNM7Y6Xn.js";import"./offline-BzIlwqNM.js";import"./i18n-CBOKL2HS.js";import"./ui-BP0GJNn5.js";import"./rtl-Cr6c3OOr.js";import"./use-panel-D2HepUiw.js";import"./use-render-cache-CmTcazfP.js";const I={class:"student-records-grid"},M={class:"grid-header q-mb-md"},R={class:"row items-center justify-between q-mb-sm"},T={class:"col-12 col-md-4"},z={class:"col-12 col-md-8 row justify-end q-gutter-sm"},H={class:"row q-col-gutter-md"},D={class:"row items-center no-wrap"},E=["src"],F={class:"student-info"},G={class:"text-h6 ellipsis-2-lines"},J={class:"row q-col-gutter-sm"},K={class:"col-12"},W={key:0,class:"col-12"},X={class:"row q-col-gutter-md"},Y={class:"row items-center no-wrap"},Z=["src"],ee={class:"student-info"},le={class:"text-h6 ellipsis-2-lines"},ae={class:"row q-col-gutter-sm"},te={class:"col-12"},oe={key:0,class:"col-12"},se={class:"text-h6"},ne={__name:"StudentRecordsGrid",props:{students:{type:Array,required:!0},loading:{type:Boolean,default:!1}},emits:["update:student","save-student"],setup(ne,{emit:de}){const ue=ne,ie=de,ce=e(),re=V(""),me=V("attendance"),pe=V("all"),fe=V(!1),ve=V(!1),_e=V(null),be=[{label:"Present",value:"present"},{label:"Absent",value:"absent"},{label:"Late",value:"late"},{label:"Excused",value:"excused"}],ke=C(()=>{let e=[...ue.students];if(re.value){const l=re.value.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(l))}return"all"!==pe.value&&(e=e.filter(e=>e.attendance_status===pe.value)),e});function ge(e){return{present:"positive",absent:"negative",late:"warning",excused:"info"}[e]||"grey"}function he(e){ce.dialog({title:"Confirm",message:`Are you sure you want to mark all students as ${e}?`,cancel:!0,persistent:!0}).onOk(()=>{ke.value.forEach(l=>{l.attendance_status=e,Ve(l)}),ce.notify({color:"positive",message:`All students marked as ${e}`,icon:"check"})})}function ye(e){pe.value=e}function we(){fe.value=!fe.value,ce.dark.set(fe.value)}function Ve(e){ie("update:student",e)}function Ce(e){ie("save-student",e),ce.notify({color:"positive",message:`Record updated for ${e.name}`,icon:"check"})}function je(e){_e.value={...e},ve.value=!0}function Ue(){const e=ue.students.findIndex(e=>e.id===_e.value.id);if(-1!==e){const l={...ue.students[e],notes:_e.value.notes};ie("update:student",l),ie("save-student",l)}}return(e,V)=>(U(),j("div",I,[x("div",M,[x("div",R,[x("div",T,[Q(a,{modelValue:re.value,"onUpdate:modelValue":V[0]||(V[0]=e=>re.value=e),dense:"",outlined:"",placeholder:"Search students...",class:"search-input"},{append:A(()=>[Q(l,{name:"search"})]),_:1},8,["modelValue"])]),x("div",z,[Q(o,{outline:""},{default:A(()=>[Q(t,{color:"positive",icon:"check_circle",label:"All Present",onClick:V[1]||(V[1]=e=>he("present"))}),Q(t,{color:"warning",icon:"schedule",label:"All Late",onClick:V[2]||(V[2]=e=>he("late"))}),Q(t,{color:"negative",icon:"cancel",label:"All Absent",onClick:V[3]||(V[3]=e=>he("absent"))})]),_:1}),Q(t,{color:"primary",icon:"filter_list"},{default:A(()=>[V[16]||(V[16]=q(" Filter ")),Q(s,null,{default:A(()=>[Q(n,{style:{"min-width":"150px"}},{default:A(()=>[S((U(),L(i,{clickable:"",onClick:V[4]||(V[4]=e=>ye("all"))},{default:A(()=>[Q(u,null,{default:A(()=>V[12]||(V[12]=[q("All Students")])),_:1})]),_:1})),[[d]]),S((U(),L(i,{clickable:"",onClick:V[5]||(V[5]=e=>ye("present"))},{default:A(()=>[Q(u,null,{default:A(()=>V[13]||(V[13]=[q("Present Only")])),_:1})]),_:1})),[[d]]),S((U(),L(i,{clickable:"",onClick:V[6]||(V[6]=e=>ye("absent"))},{default:A(()=>[Q(u,null,{default:A(()=>V[14]||(V[14]=[q("Absent Only")])),_:1})]),_:1})),[[d]]),S((U(),L(i,{clickable:"",onClick:V[7]||(V[7]=e=>ye("late"))},{default:A(()=>[Q(u,null,{default:A(()=>V[15]||(V[15]=[q("Late Only")])),_:1})]),_:1})),[[d]])]),_:1})]),_:1})]),_:1}),Q(t,{color:"secondary",icon:"dark_mode",onClick:we})])]),Q(k,{modelValue:me.value,"onUpdate:modelValue":V[8]||(V[8]=e=>me.value=e),class:"text-primary","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:A(()=>[Q(b,{name:"attendance",icon:"how_to_reg",label:"Attendance"}),Q(b,{name:"homework",icon:"assignment",label:"Homework"}),Q(b,{name:"behavior",icon:"psychology",label:"Behavior"}),Q(b,{name:"participation",icon:"record_voice_over",label:"Participation"})]),_:1},8,["modelValue"])]),Q(w,{modelValue:me.value,"onUpdate:modelValue":V[9]||(V[9]=e=>me.value=e),animated:"",class:"transparent"},{default:A(()=>[Q(y,{name:"attendance"},{default:A(()=>[x("div",H,[(U(!0),j(P,null,$(ke.value,e=>(U(),j("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[Q(c,{class:N(["student-card",`status-${e.attendance_status}`]),dark:fe.value},{default:A(()=>[Q(r,{class:"student-header"},{default:A(()=>[x("div",D,[Q(m,{size:"60px",class:"q-mr-sm"},{default:A(()=>[x("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random&color=fff`},null,8,E)]),_:2},1024),x("div",F,[x("div",G,O(e.name),1),Q(g,{color:ge(e.attendance_status)},{default:A(()=>{return[q(O((l=e.attendance_status,l.charAt(0).toUpperCase()+l.slice(1))),1)];var l}),_:2},1032,["color"])])])]),_:2},1024),Q(p),Q(r,null,{default:A(()=>[x("div",J,[x("div",K,[Q(h,{modelValue:e.attendance_status,"onUpdate:modelValue":[l=>e.attendance_status=l,l=>Ve(e)],options:be,outlined:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue"])]),"late"===e.attendance_status?(U(),j("div",W,[Q(a,{modelValue:e.late_minutes,"onUpdate:modelValue":[l=>e.late_minutes=l,l=>Ve(e)],modelModifiers:{number:!0},type:"number",label:"Minutes Late",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])])):B("",!0)])]),_:2},1024),Q(f,{align:"right"},{default:A(()=>[Q(t,{flat:"",color:"grey",icon:"edit",onClick:l=>je(e)},{default:A(()=>V[17]||(V[17]=[q(" Notes ")])),_:2},1032,["onClick"]),Q(t,{flat:"",color:ge(e.attendance_status),icon:"save",onClick:l=>Ce(e)},{default:A(()=>V[18]||(V[18]=[q(" Save ")])),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1032,["class","dark"])]))),128))])]),_:1}),Q(y,{name:"homework"},{default:A(()=>[x("div",X,[(U(!0),j(P,null,$(ke.value,e=>(U(),j("div",{key:e.id,class:"col-12 col-sm-6 col-md-4 col-lg-3"},[Q(c,{dark:fe.value,class:"student-card"},{default:A(()=>[Q(r,{class:"student-header"},{default:A(()=>[x("div",Y,[Q(m,{size:"60px",class:"q-mr-sm"},{default:A(()=>[x("img",{src:`https://ui-avatars.com/api/?name=${encodeURIComponent(e.name)}&background=random&color=fff`},null,8,Z)]),_:2},1024),x("div",ee,[x("div",le,O(e.name),1),Q(g,{color:e.homework_completed?"positive":"grey"},{default:A(()=>[q(O(e.homework_completed?"Completed":"Not Completed"),1)]),_:2},1032,["color"])])])]),_:2},1024),Q(p),Q(r,null,{default:A(()=>[x("div",ae,[x("div",te,[Q(v,{modelValue:e.homework_completed,"onUpdate:modelValue":[l=>e.homework_completed=l,l=>Ve(e)],label:"Homework Completed",color:"positive"},null,8,["modelValue","onUpdate:modelValue"])]),e.homework_completed?(U(),j("div",oe,[Q(a,{modelValue:e.homework_score,"onUpdate:modelValue":[l=>e.homework_score=l,l=>Ve(e)],modelModifiers:{number:!0},type:"number",label:"Score",outlined:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])])):B("",!0)])]),_:2},1024),Q(f,{align:"right"},{default:A(()=>[Q(t,{flat:"",color:"grey",icon:"edit",onClick:l=>je(e)},{default:A(()=>V[19]||(V[19]=[q(" Notes ")])),_:2},1032,["onClick"]),Q(t,{flat:"",color:"primary",icon:"save",onClick:l=>Ce(e)},{default:A(()=>V[20]||(V[20]=[q(" Save ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["dark"])]))),128))])]),_:1})]),_:1},8,["modelValue"]),Q(_,{modelValue:ve.value,"onUpdate:modelValue":V[11]||(V[11]=e=>ve.value=e),persistent:""},{default:A(()=>[Q(c,{style:{"min-width":"350px"},dark:fe.value},{default:A(()=>[Q(r,null,{default:A(()=>{var e;return[x("div",se,"Notes for "+O(null==(e=_e.value)?void 0:e.name),1)]}),_:1}),Q(r,null,{default:A(()=>[Q(a,{modelValue:_e.value.notes,"onUpdate:modelValue":V[10]||(V[10]=e=>_e.value.notes=e),type:"textarea",autofocus:"",outlined:""},null,8,["modelValue"])]),_:1}),Q(f,{align:"right"},{default:A(()=>[S(Q(t,{flat:"",label:"Cancel",color:"negative"},null,512),[[d]]),S(Q(t,{flat:"",label:"Save Notes",color:"positive",onClick:Ue},null,512),[[d]])]),_:1})]),_:1},8,["dark"])]),_:1},8,["modelValue"])]))}};export{ne as default};
