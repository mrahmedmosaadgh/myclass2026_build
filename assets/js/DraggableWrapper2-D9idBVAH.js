import{_ as e}from"./LucideIcon-CYYJCXCs.js";import{r as a}from"./app-CmR0nRZC.js";import{f as t,N as o,J as l,O as s,R as i,a0 as n,U as r,b as u,L as d,S as m}from"./vendor-BWKGNkNB.js";import"./createLucideIcon-bevK9Pnz.js";import"./printer-yyUpIzJF.js";import"./image-T1FtDBZI.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const c=["title"],v=a({__name:"DraggableWrapper2",props:{modelValue:{type:Object,required:!0,default:()=>({x:0,y:0,visible:!0})},hideDragHandle:{type:Boolean,default:!1},showHandle:{type:Boolean,default:!1},dragIconName:{type:String,default:"move"},dragTitle:{type:String,default:"Drag to move"},constraints:{type:Object,default:()=>({minX:0,maxX:90,minY:0,maxY:90})}},emits:["update:modelValue","drag-start","drag-end","toggle-visibility"],setup(a,{emit:v}){const p=a,g=v,y=t(!1),f=t({x:0,y:0}),b=t({x:0,y:0}),x=t(null),h=e=>{e.preventDefault(),y.value=!0;const a=e.target.closest(".canvas-area")||document.querySelector(".canvas-area");x.value=a.getBoundingClientRect(),f.value={x:e.clientX,y:e.clientY},b.value={x:p.modelValue.x,y:p.modelValue.y},document.addEventListener("mousemove",j),document.addEventListener("mouseup",V),g("drag-start")},j=e=>{if(!y.value||!x.value)return;const a=e.clientX-f.value.x,t=e.clientY-f.value.y,o=a/x.value.width*100,l=t/x.value.height*100;let s=b.value.x+o,i=b.value.y+l;s=Math.max(p.constraints.minX,Math.min(p.constraints.maxX,s)),i=Math.max(p.constraints.minY,Math.min(p.constraints.maxY,i)),g("update:modelValue",{...p.modelValue,x:s,y:i})},V=()=>{y.value=!1,document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",V),g("drag-end")};return(t,v)=>(l(),o("div",{class:"draggable-wrapper group relative",style:m({left:`${a.modelValue.x}%`,top:`${a.modelValue.y}%`,position:"absolute",opacity:a.modelValue.visible?1:.3,transform:`scale(${a.modelValue.visible?1:.95})`,transition:"opacity 0.3s ease, transform 0.3s ease",zIndex:y.value?50:10})},[a.hideDragHandle?s("",!0):(l(),o("div",{key:0,onDblclick:v[0]||(v[0]=e=>t.$emit("toggle-visibility")),class:r(["absolute -top-2 -left-2 w-8 h-8 rounded-full flex items-center justify-center cursor-move z-50 transition-all duration-200",y.value?"bg-indigo-600":"bg-gray-500 hover:bg-gray-600",a.showHandle?"opacity-100":"opacity-0 group-hover:opacity-100"]),onMousedown:n(h,["stop"]),title:a.dragTitle},[u(e,{name:a.dragIconName,class:r(["w-4 h-4 text-white",{"animate-spin":y.value}])},null,8,["name","class"])],42,c)),i("div",{class:r(["draggable-content",{"pointer-events-none":y.value}])},[d(t.$slots,"default",{},void 0,!0)],2)],4))}},[["__scopeId","data-v-8216ed9f"]]);export{v as default};
