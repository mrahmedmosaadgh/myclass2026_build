import{a7 as e,f as s,N as a,J as o,b as t,z as r,a4 as l,K as m,Q as i,O as n,V as u,I as d,W as c,P as p,U as f,a0 as g,F as b}from"./vendor-nQjeLEvd.js";import{A as y}from"./AuthenticationCard-C5fdGstI.js";import{_ as w}from"./AuthenticationCardLogo-ChtFmYpG.js";import{_ as v}from"./Checkbox-CVlnRiNm.js";import{_ as h}from"./InputError-Cavcn2H3.js";import{_ as x}from"./InputLabel-bFRC3oGQ.js";import{_ as j}from"./PrimaryButton-CsGumtxq.js";import{_ as k}from"./TextInput-Z6lyRUre.js";import"./app-tFXAu5dG.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";const _={key:0,class:"mb-4 font-medium text-sm text-green-600"},V={key:0,class:"mt-4"},I={key:1,class:"block mt-4"},L={class:"flex items-center"},P={key:2,class:"flex items-center justify-end mt-4"},U={key:3,class:"mt-4 text-center text-sm text-gray-600"},C={__name:"Login",props:{canResetPassword:Boolean,status:String},setup(C){const F=e({email:"",password:"",remember:!1}),R=s(!1);async function q(){if(F.email&&!(F.email.length<3)){R.value=!0;try{const e=await axios.post(route("detect.school"),{email:F.email});e.data.redirect&&(window.location.href=e.data.redirect+"?email="+encodeURIComponent(F.email))}catch(e){console.log("No school detected, using default login")}finally{R.value=!1}}}const A=()=>{F.transform(e=>({...e,remember:F.remember?"on":""})).post(route("login"),{onFinish:()=>F.reset("password")})};return(e,s)=>(o(),a(b,null,[t(r(l),{title:"Log in"}),t(y,null,{logo:m(()=>[t(w)]),default:m(()=>[C.status?(o(),a("div",_,u(C.status),1)):i("",!0),n("form",{onSubmit:g(A,["prevent"])},[n("div",null,[t(x,{for:"email",value:"Email"}),t(k,{id:"email",modelValue:r(F).email,"onUpdate:modelValue":s[0]||(s[0]=e=>r(F).email=e),class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"username",onBlur:q},null,8,["modelValue"]),t(h,{class:"mt-2",message:r(F).errors.email},null,8,["message"])]),R.value?i("",!0):(o(),a("div",V,[t(x,{for:"password",value:"Password"}),t(k,{id:"password",modelValue:r(F).password,"onUpdate:modelValue":s[1]||(s[1]=e=>r(F).password=e),type:"password",class:"mt-1 block w-full",required:"",autocomplete:"current-password"},null,8,["modelValue"]),t(h,{class:"mt-2",message:r(F).errors.password},null,8,["message"])])),R.value?i("",!0):(o(),a("div",I,[n("label",L,[t(v,{checked:r(F).remember,"onUpdate:checked":s[2]||(s[2]=e=>r(F).remember=e),name:"remember"},null,8,["checked"]),s[3]||(s[3]=n("span",{class:"ms-2 text-sm text-gray-600"},"Remember me",-1))])])),R.value?i("",!0):(o(),a("div",P,[C.canResetPassword?(o(),d(r(p),{key:0,href:e.route("password.request"),class:"underline text-sm text-gray-600 hover:text-gray-900 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:m(()=>s[4]||(s[4]=[c(" Forgot your password? ")])),_:1},8,["href"])):i("",!0),t(j,{class:f(["ms-4",{"opacity-25":r(F).processing}]),disabled:r(F).processing},{default:m(()=>s[5]||(s[5]=[c(" Log in ")])),_:1},8,["class","disabled"])])),R.value?(o(),a("div",U," Detecting your school... ")):i("",!0)],32)]),_:1})],64))}};export{C as default};
