import{r as e,u as i,f as a,b as l,d as o,aI as s,h as t}from"./app-CWAnT6CT.js";import{Q as n}from"./QTable-CegydSFg.js";import{r}from"./resumeApi-BXJd05Hi.js";import d from"./QuestionForm-BbpbN2Xr.js";import m from"./AnswerForm-D9u8RF0_.js";import u from"./Demo-DZx3ykTZ.js";import{f as c,r as p,o as g,N as f,J as v,b,I as j,O as w,K as y,W as Q,R as k,V as C}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./QMarkupTable-2zMPstj6.js";import"./QSelect-5P1Qxg14.js";import"./rtl-Cr6c3OOr.js";import"./QLinearProgress-DmE3hCo3.js";import"./use-fullscreen-6qPmzoi_.js";import"./QEditor-DokZzLXq.js";import"./QForm-BHNk-Zcq.js";import"./QCircularProgress-CAapHMJb.js";import"./use-file-rwSz7DzT.js";import"./ResumeQuestionsManager-CRrA8bHs.js";import"./QSpace-DC5Rdnaf.js";import"./QInnerLoading-CBO1uPrC.js";import"./QTd-7QzJJbSb.js";import"./QBadge-D8mJvg-f.js";import"./resumeApi-D4JEP9pi.js";import"./QuestionForm-BNN6UCh0.js";import"./AnswerForm-CKmcKJPF.js";import"./QFile-BGzsU6UY.js";import"./QuestionDetailsDialog-BAMQb1kQ.js";import"./QSpinnerDots-DA5FZWz2.js";import"./AnswerCard-ojDckwoy.js";import"./CommentsSection-C2fA4rki.js";import"./TextToSpeechButton-lnoh45Gd.js";import"./VoicePlayer-DJB7o8i2.js";import"./VoiceRecorderDialog-D9YreXKV.js";import"./AnswerFormDialog-cgnk_rer.js";import"./GeminiPrompt-DE_qFAm4.js";import"./QBtnToggle-C3Hu2Kxl.js";const q={class:"q-pa-md"},A=e({__name:"ResumeQuestionsManager",setup(e){const A=i(),h=c([]),V=p({}),_=c(!1),D=p({}),I=p({visible:!1,message:"",color:"positive"}),F=[{name:"title",label:"Title",field:"title",align:"left"},{name:"type",label:"Type",field:"type",align:"left"},{name:"category",label:"Category",field:"category",align:"left"},{name:"language",label:"Language",field:"language",align:"left"},{name:"actions",label:"Actions",field:"actions",align:"right"}],T=[{name:"user",label:"User",field:"user_id",align:"left"},{name:"answer",label:"Answer",field:"answer_text",align:"left"},{name:"media",label:"Media",field:"media_links",align:"left"},{name:"actions",label:"Actions",field:"actions",align:"right"}],S=p({visible:!1,data:null}),R=p({visible:!1,data:null,questionId:null});function x(e,i="positive"){I.message=e,I.color=i,I.visible=!0}async function M(){_.value=!0;try{h.value=await r.getQuestions()}catch(e){x("Failed to load questions","negative")}finally{_.value=!1}}async function P(e){D[e]=!0;try{V[e]=await r.getAnswers(e)}catch(i){x("Failed to load answers","negative")}finally{D[e]=!1}}function U(e=null){S.data=e?{...e}:null,S.visible=!0}function B(){S.visible=!1,M()}function L(){R.visible=!1,R.questionId&&P(R.questionId)}return g(M),(e,i)=>(v(),f("div",q,[b(o,null,{default:y(()=>[b(a,null,{default:y(()=>[i[4]||(i[4]=Q(" wwapp2 ")),b(u),i[5]||(i[5]=k("div",{class:"text-h5"},"Resume Questions Manager",-1)),b(l,{color:"primary",label:"Add Question",onClick:i[0]||(i[0]=e=>U()),class:"q-mb-md"}),b(n,{rows:h.value,columns:F,"row-key":"id",loading:_.value,expand:!0,onRequest:M},{"body-cell-actions":y(e=>[b(l,{flat:"",icon:"edit",onClick:i=>{U(e.row)}},null,8,["onClick"]),b(l,{flat:"",icon:"delete",color:"negative",onClick:i=>{return a=e.row,void A.dialog({title:"Confirm",message:"Delete this question?",cancel:!0,persistent:!0}).onOk(async()=>{try{await r.deleteQuestion(a.id),M(),x("Question deleted")}catch(e){x("Delete failed","negative")}});var a}},null,8,["onClick"]),b(l,{flat:"",icon:"list",color:"secondary",onClick:i=>{return a=e.key,void(V[a]||P(a));var a}},null,8,["onClick"])]),"body-row-expand":y(e=>[b(n,{rows:V[e.row.id]||[],columns:T,"row-key":"id",loading:D[e.row.id]},{"body-cell-actions":y(i=>[b(l,{flat:"",icon:"edit",onClick:a=>{return l=e.row.id,o=i.row,R.data={...o},R.questionId=l,void(R.visible=!0);var l,o}},null,8,["onClick"]),b(l,{flat:"",icon:"delete",color:"negative",onClick:a=>{return l=e.row.id,o=i.row,void A.dialog({title:"Confirm",message:"Delete this answer?",cancel:!0,persistent:!0}).onOk(async()=>{try{await r.deleteAnswer(o.id),P(l),x("Answer deleted")}catch(e){x("Delete failed","negative")}});var l,o}},null,8,["onClick"])]),top:y(()=>[b(l,{color:"primary",label:"Add Answer",onClick:i=>{return a=e.row.id,R.data=null,R.questionId=a,void(R.visible=!0);var a}},null,8,["onClick"])]),_:2},1032,["rows","loading"])]),_:1},8,["rows","loading"])]),_:1})]),_:1}),b(d,{modelValue:S.visible,"onUpdate:modelValue":i[1]||(i[1]=e=>S.visible=e),question:S.data,onSave:B},null,8,["modelValue","question"]),b(m,{modelValue:R.visible,"onUpdate:modelValue":i[2]||(i[2]=e=>R.visible=e),answer:R.data,"question-id":R.questionId,onSave:L},null,8,["modelValue","answer","question-id"]),_.value?(v(),j(s,{key:0,color:"primary",size:"2em"})):w("",!0),b(t,{modelValue:I.visible,"onUpdate:modelValue":i[3]||(i[3]=e=>I.visible=e),color:I.color},{default:y(()=>[Q(C(I.message),1)]),_:1},8,["modelValue","color"])]))}},[["__scopeId","data-v-2f32a1ec"]]);export{A as default};
