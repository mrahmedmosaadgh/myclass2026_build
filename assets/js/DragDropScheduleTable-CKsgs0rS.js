import{o as e,Q as a,m as d,p as s,aP as l,b as r}from"./app-B77gjd5a.js";import{Q as i}from"./QSpace-Bk4F2b8L.js";import{Q as t}from"./QBar-bEv3i1Ab.js";import o from"./ScheduleGrid-Cngd6zX_.js";import{f as u,k as p,M as c,J as n,b as m,K as y,y as f,I as h,Q as v,W as b,N as I,V as j,S}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./QSlider-DfH-qdFu.js";import"./ScheduleGridControls-BqqJDyA8.js";const _={key:0},x=e({__name:"DragDropScheduleTable",props:{schoolId:{type:[String,Number],required:!0},scheduleCopyId:{type:[String,Number],required:!0},teachers:{type:Array,required:!0,default:()=>[]},days:{type:Array,required:!1,default:()=>["Sunday","Monday","Tuesday","Wednesday","Thursday"]},periods:{type:Number,required:!0,default:8},initialSchedule:{type:Array,default:()=>[]}},emits:["schedule-change"],setup(e,{emit:x}){const C=e,g=u(!0),Q=u(!0),k=u([]),A=()=>{var e;(null==(e=C.initialSchedule)?void 0:e.length)>0?k.value=C.teachers.map((e,a)=>C.days.map((e,d)=>{var s;const l=(null==(s=C.initialSchedule[a])?void 0:s[d])||[];return Array(C.periods).fill().map((e,s)=>l[s]||{id:`empty-${a}-${d}-${s}`,empty:!0})})):k.value=C.teachers.map((e,a)=>C.days.map((e,d)=>Array(C.periods).fill().map((e,s)=>({id:`empty-${a}-${d}-${s}`,empty:!0}))))},$=({teacherIndex:e,dayIndex:a,periodIndex:d})=>{},q=e=>{if(!e||e.empty)return"#f8f9fa";const a=["#e3f2fd","#e8f5e9","#fff3e0","#fce4ec","#f3e5f5"];return a[e.subject?e.subject.charCodeAt(0)%a.length:0]};return A(),p(()=>C.teachers,A),p(()=>C.days,A),p(()=>C.periods,A),(u,p)=>(n(),c("div",null,[m(a,{label:"Maximized",color:"primary",onClick:p[0]||(p[0]=e=>g.value=!0)}),m(r,{modelValue:g.value,"onUpdate:modelValue":p[2]||(p[2]=e=>g.value=e),persistent:"",maximized:Q.value,"transition-show":"slide-up","transition-hide":"slide-down"},{default:y(()=>[m(d,{class:""},{default:y(()=>[m(t,null,{default:y(()=>[m(i),m(a,{dense:"",flat:"",icon:"minimize",onClick:p[1]||(p[1]=e=>Q.value=!1),disable:!Q.value},{default:y(()=>[Q.value?(n(),h(s,{key:0,class:"bg-white text-primary"},{default:y(()=>p[3]||(p[3]=[b("Minimize")])),_:1})):v("",!0)]),_:1},8,["disable"]),f((n(),h(a,{dense:"",flat:"",icon:"close"},{default:y(()=>[m(s,{class:"bg-white text-primary"},{default:y(()=>p[4]||(p[4]=[b("Close")])),_:1})]),_:1})),[[l]])]),_:1}),m(o,{schoolId:e.schoolId,scheduleCopyId:e.scheduleCopyId,teachers:e.teachers,days:["Sunday","Monday","Tuesday","Wednesday","Thursday"],periods:e.periods,"schedule-data":k.value,onCellClick:$},{cell:y(({teacherIndex:e,dayIndex:a,periodIndex:d,item:s})=>[I("div",{class:"schedule-cell",style:S({backgroundColor:q(s)})},[s.empty?v("",!0):(n(),c("div",_,[I("div",null,"P"+j(d+1)+": "+j(s.subject||"Free"),1),I("div",null,j(s.class||""),1),b(" "+j(e)+" "+j(a),1)]))],4)]),_:1},8,["schoolId","scheduleCopyId","teachers","periods","schedule-data"])]),_:1})]),_:1},8,["modelValue","maximized"])]))}},[["__scopeId","data-v-1bb6b9d4"]]);export{x as default};
