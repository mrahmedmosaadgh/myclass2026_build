import{bb as e,d as t,m as a,aD as s,Q as l,n as i,b as o,e as n,g as r}from"./app-DXXarK7I.js";import{Q as u}from"./QFile-1eeNRLjn.js";import{Y as c,Z as d,a as m,H as p,I as v,J as f,b as h,M as g,U as y,x as _,a2 as x,f as b,k as F,e as S,L as V,y as I,X as w}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./use-file-BqJY9vFb.js";const k=c("dp_focus",{state:()=>({activeSession:null,startTime:null,elapsedMinutes:0,timerInterval:null,isFocusing:!1}),actions:{async startFocus(t=null){try{const a=(new Date).toISOString(),s=await d.post(route("dp.focus.store"),{dp_daily_task_id:t,start_time:a});this.activeSession=s.data,this.startTime=new Date,this.isFocusing=!0,this.startTimer(),e.create({type:"positive",message:"Focus session started! ðŸš€"})}catch(a){e.create({type:"negative",message:"Failed to start focus session"})}},async endFocus(t=""){if(this.activeSession)try{const a=new Date,s=Math.round((a-this.startTime)/6e4);await d.put(route("dp.focus.update",this.activeSession.id),{end_time:a.toISOString(),duration_minutes:s,notes:t}),this.stopTimer(),this.activeSession=null,this.isFocusing=!1,this.elapsedMinutes=0,e.create({type:"positive",message:"Focus session ended. Great job! ðŸŽ‰"})}catch(a){e.create({type:"negative",message:"Failed to end focus session"})}},async logDistraction(){if(this.activeSession)try{await d.post(route("dp.focus.distraction",this.activeSession.id)),e.create({type:"warning",message:"Distraction logged. Stay focused! ðŸ‘€"})}catch(t){console.error("Failed to log distraction")}},startTimer(){this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=setInterval(()=>{if(this.startTime){const e=new Date;this.elapsedMinutes=Math.floor((e-this.startTime)/6e4)}},6e4)},stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null)}}}),M={class:"text-body1 q-mt-md"},T={__name:"dp_FocusPopup",props:{modelValue:Boolean},emits:["update:modelValue","confirmed","distracted"],setup(e,{emit:n}){const r=e,u=n,c=m({get:()=>r.modelValue,set:e=>u("update:modelValue",e)}),d=["Ù‡Ù„ Ø£Ù†Øª Ù…Ø¹ Ø§Ù„Ù…Ù‡Ù…Ø© Ø£Ù… Ù…Ø¹ Ø§Ù„Ø£ÙÙƒØ§Ø±ØŸ","ØªØ°ÙƒØ± Ù‡Ø¯ÙÙƒ! Ù‡Ù„ Ù…Ø§ ØªÙØ¹Ù„Ù‡ Ø§Ù„Ø¢Ù† ÙŠÙ‚Ø±Ø¨Ùƒ Ù…Ù†Ù‡ØŸ","ØªÙ†ÙØ³ Ø¨Ø¹Ù…Ù‚... ÙˆØ¹Ø¯ Ù„Ù„ØªØ±ÙƒÙŠØ²!","Ø£Ù†Øª Ø£Ù‚ÙˆÙ‰ Ù…Ù† Ø§Ù„Ù…Ø´ØªØªØ§Øª!"],x=m(()=>d[Math.floor(Math.random()*d.length)]);return(e,n)=>(v(),p(o,{modelValue:c.value,"onUpdate:modelValue":n[2]||(n[2]=e=>c.value=e),persistent:""},{default:f(()=>[h(i,{class:"q-pa-md text-center",style:{"min-width":"300px"}},{default:f(()=>[h(t,null,{default:f(()=>n[3]||(n[3]=[g("div",{class:"text-h6 text-primary"},"Ù‡Ù„ Ù…Ø§ Ø²Ù„Øª ØªØ±ÙƒØ²ØŸ ðŸ§",-1)])),_:1}),h(t,{class:"q-py-none"},{default:f(()=>[g("div",M,y(x.value),1)]),_:1}),h(a,{align:"center",class:"q-mt-md"},{default:f(()=>[_(h(l,{label:"Ù†Ø¹Ù…ØŒ Ø£Ù†Ø§ Ø¨Ø·Ù„! ðŸ’ª",color:"green",onClick:n[0]||(n[0]=t=>e.$emit("confirmed"))},null,512),[[s]]),_(h(l,{label:"ØªØ´ØªØª Ù‚Ù„ÙŠÙ„Ø§Ù‹ ðŸ˜…",color:"orange",flat:"",onClick:n[1]||(n[1]=t=>e.$emit("distracted"))},null,512),[[s]])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},j={class:"flex flex-center bg-grey-9 text-white"},D={class:"text-center"},q={class:"text-h2 q-mb-lg"},U={class:"q-mb-xl"},C={class:"q-mb-md",style:{"max-width":"300px",margin:"0 auto"}},L={__name:"dp_LiveFocus",setup(e){const t=k(),{isFocusing:a,elapsedMinutes:s}=x(t),i=b(""),o=b(null),c=b(null),d=b(!1);let M=null;const L=m(()=>{const e=Math.floor(s.value/60),t=s.value%60;return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}),$=()=>{t.startFocus(),P()},O=()=>{t.endFocus(),Q()},P=()=>{M=setInterval(()=>{d.value=!0},6e5)},Q=()=>{M&&clearInterval(M)},z=()=>{},R=()=>{t.logDistraction()},Y=e=>{if(e){const t=URL.createObjectURL(e);c.value.src=t,c.value.play()}};return F(i,e=>{e&&c.value&&(c.value.src=e)}),S(()=>{Q()}),(e,t)=>(v(),V("div",j,[g("div",D,[g("div",q,y(L.value),1),g("div",U,[I(a)?(v(),p(l,{key:1,round:"",color:"red",icon:"stop",size:"xl",onClick:O})):(v(),p(l,{key:0,round:"",color:"green",icon:"play_arrow",size:"xl",onClick:$}))]),g("div",C,[h(r,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),dark:"",filled:"",label:"Ø±Ø§Ø¨Ø· Ù…ÙˆØ³ÙŠÙ‚Ù‰ (YouTube/MP3)",placeholder:"Ø¶Ø¹ Ø±Ø§Ø¨Ø· Ø§Ù„Ù…ÙˆØ³ÙŠÙ‚Ù‰ Ù‡Ù†Ø§"},{append:f(()=>[h(n,{name:"music_note"})]),_:1},8,["modelValue"]),t[3]||(t[3]=g("div",{class:"text-caption text-grey"},"Ø£Ùˆ Ø§Ø®ØªØ± Ù…Ù„Ù Ù…Ø­Ù„ÙŠ:",-1)),h(u,{modelValue:o.value,"onUpdate:modelValue":[t[1]||(t[1]=e=>o.value=e),Y],dark:"",filled:"",label:"Ù…Ù„Ù ØµÙˆØªÙŠ",accept:"audio/*"},null,8,["modelValue"])]),_(g("audio",{ref_key:"audioPlayer",ref:c,controls:"",class:"full-width q-mt-sm"},null,512),[[w,i.value||o.value]])]),h(T,{modelValue:d.value,"onUpdate:modelValue":t[2]||(t[2]=e=>d.value=e),onConfirmed:z,onDistracted:R},null,8,["modelValue"])]))}};export{L as default};
