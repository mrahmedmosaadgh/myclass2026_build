import{p as e,u as s,d as t,e as l,aD as o,Q as a,C as i,n,b as r}from"./app-DXXarK7I.js";import{Q as u}from"./QBadge-ZjTd_Ty8.js";import{Q as d}from"./QSpinnerDots-iSvAMlO9.js";import m from"./AnswerCard-B1QfEPpW.js";import c from"./AnswerFormDialog-DWSd0DH1.js";import p from"./TextToSpeechButton-Cyapvl_d.js";import{r as v}from"./resumeApi-BgW6JfPs.js";import{a as q,f as g,k as f,H as y,I as b,J as w,b as x,M as h,x as j,V as _,U as Q,L as V,Q as A,F as k}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./QSpace-B3qNlK-o.js";import"./CommentsSection-B2FfnLab.js";import"./VoicePlayer-BVs85pXL.js";import"./QLinearProgress-BEkk-xFg.js";import"./VoiceRecorderDialog-BWuWNoF2.js";import"./QSelect-OI6RFhnT.js";import"./rtl-Cr6c3OOr.js";import"./QFile-1eeNRLjn.js";import"./use-file-BqJY9vFb.js";import"./QForm-BR4sPudX.js";const D={class:"text-h6 flex-1"},C={class:"row q-gutter-md"},S={class:"col-12 col-md-8"},F={class:"row items-start q-gutter-sm q-mb-sm"},R={class:"col"},z={class:"text-h5"},L={class:"col-auto"},U={class:"text-body2 text-grey-7 q-mb-md"},B={class:"row q-gutter-sm q-mb-md"},E={class:"col-12 col-md-4"},I={class:"q-mb-xs"},P={class:"q-mb-xs"},T={class:"q-mb-xs"},M={class:"row q-gutter-sm"},O={class:"text-h6 q-mb-md"},H={key:0,class:"text-center q-pa-xl"},J={key:1,class:"text-center q-pa-xl"},K={key:2,class:"answers-container"},N=e({__name:"QuestionDetailsDialog",props:{modelValue:{type:Boolean,default:!1},question:{type:Object,default:null}},emits:["update:modelValue","questionUpdated"],setup(e,{emit:N}){const Z=e,G=N,W=s(),X=q({get:()=>Z.modelValue,set:e=>G("update:modelValue",e)}),Y=g([]),$=g(!1),ee=g(!1),se=g(null),te=()=>{var e;(null==(e=Z.question)?void 0:e.id)&&($.value=!0,v.getAnswers(Z.question.id).then(e=>{Y.value=e}).catch(e=>{console.error("Error loading answers:",e),W.notify({type:"negative",message:"Failed to load answers",position:"top"})}).finally(()=>{$.value=!1}))},le=()=>{se.value=null,ee.value=!0},oe=e=>{se.value=e,ee.value=!0},ae=()=>{G("questionUpdated",Z.question),X.value=!1},ie=e=>{W.dialog({title:"Confirm Delete",message:"Are you sure you want to delete this answer?",cancel:!0,persistent:!0}).onOk(()=>{v.deleteAnswer(e).then(()=>{W.notify({type:"positive",message:"Answer deleted successfully",position:"top"}),te()}).catch(e=>{console.error("Error deleting answer:",e),W.notify({type:"negative",message:"Failed to delete answer",position:"top"})})})},ne=(e,s)=>{console.log("Rate answer:",e,s)},re=e=>{console.log("Add comment to answer:",e)},ue=()=>{ee.value=!1,te()};return f(()=>Z.question,e=>{e&&Z.modelValue&&te()},{immediate:!0}),f(()=>Z.modelValue,e=>{e&&Z.question&&te()}),(s,v)=>(b(),y(r,{modelValue:X.value,"onUpdate:modelValue":v[1]||(v[1]=e=>X.value=e),maximized:"","transition-show":"slide-up","transition-hide":"slide-down"},{default:w(()=>{var s;return[x(n,{class:"question-details-dialog"},{default:w(()=>[x(t,{class:"row items-center q-pb-none bg-primary text-white"},{default:w(()=>[h("div",D,[x(l,{name:"quiz",class:"q-mr-sm"}),v[2]||(v[2]=_(" Question Details & Answers "))]),j(x(a,{icon:"close",flat:"",round:"",dense:"",color:"white"},null,512),[[o]])]),_:1}),x(t,{class:"bg-grey-1"},{default:w(()=>{var s,t,o,a,r,d;return[h("div",C,[h("div",S,[h("div",F,[h("div",R,[h("div",z,Q(null==(s=e.question)?void 0:s.title),1)]),h("div",L,[x(p,{text:(null==(t=e.question)?void 0:t.title)+((null==(o=e.question)?void 0:o.description)?". "+(null==(a=e.question)?void 0:a.description):""),size:"sm",round:"",color:"primary"},null,8,["text"])])]),h("div",U,Q(null==(r=e.question)?void 0:r.description),1),h("div",B,[(b(!0),V(k,null,A(null==(d=e.question)?void 0:d.category,e=>(b(),y(i,{key:e,size:"sm",color:"blue-grey-2","text-color":"blue-grey-8",icon:"category"},{default:w(()=>[_(Q(e),1)]),_:2},1024))),128))])]),h("div",E,[x(n,{flat:"",bordered:"",class:"q-pa-md"},{default:w(()=>{var s,t,o,a,i,n,r,d;return[v[7]||(v[7]=h("div",{class:"text-subtitle2 q-mb-sm"},"Question Info",-1)),h("div",I,[v[3]||(v[3]=h("strong",null,"Type:",-1)),x(u,{color:(d=null==(s=e.question)?void 0:s.type,{text:"blue",textarea:"green",select:"orange","multi-select":"purple",media:"pink",file:"brown"}[d]||"grey"),label:null==(t=e.question)?void 0:t.type},null,8,["color","label"])]),h("div",P,[v[4]||(v[4]=h("strong",null,"Language:",-1)),_(" "+Q(null==(o=e.question)?void 0:o.language),1)]),h("div",T,[v[5]||(v[5]=h("strong",null,"Required:",-1)),x(l,{name:(null==(a=e.question)?void 0:a.is_required)?"check_circle":"cancel",color:(null==(i=e.question)?void 0:i.is_required)?"positive":"negative"},null,8,["name","color"])]),h("div",null,[v[6]||(v[6]=h("strong",null,"Created:",-1)),_(" "+Q((r=null==(n=e.question)?void 0:n.created_at,r?new Date(r).toLocaleDateString():"")),1)])]}),_:1})])])]}),_:1}),x(t,{class:"q-pt-none"},{default:w(()=>[h("div",M,[x(a,{color:"primary",icon:"add",label:"Add Answer",onClick:le}),x(a,{color:"secondary",icon:"edit",label:"Edit Question",onClick:ae}),x(a,{color:"info",icon:"refresh",label:"Refresh",onClick:te})])]),_:1}),x(t,{class:"flex-1"},{default:w(()=>[h("div",O,[x(l,{name:"forum",class:"q-mr-sm"}),_(" Answers ("+Q(Y.value.length)+") ",1)]),$.value?(b(),V("div",H,[x(d,{size:"50px",color:"primary"}),v[8]||(v[8]=h("div",{class:"q-mt-md"},"Loading answers...",-1))])):0===Y.value.length?(b(),V("div",J,[x(l,{name:"sentiment_neutral",size:"4em",color:"grey-5"}),v[9]||(v[9]=h("div",{class:"text-h6 q-mt-md text-grey-6"},"No answers yet",-1)),v[10]||(v[10]=h("div",{class:"text-body2 text-grey-5 q-mb-md"},"Be the first to answer this question!",-1)),x(a,{color:"primary",icon:"add",label:"Add First Answer",onClick:le})])):(b(),V("div",K,[(b(!0),V(k,null,A(Y.value,s=>(b(),y(m,{key:s.id,answer:s,question:e.question,onEdit:oe,onDelete:ie,onRate:ne,onComment:re,onRefresh:te},null,8,["answer","question"]))),128))]))]),_:1})]),_:1}),x(c,{modelValue:ee.value,"onUpdate:modelValue":v[0]||(v[0]=e=>ee.value=e),answer:se.value,"question-id":null==(s=e.question)?void 0:s.id,onSave:ue},null,8,["modelValue","answer","question-id"])]}),_:1},8,["modelValue"]))}},[["__scopeId","data-v-ab0b98a6"]]);export{N as default};
