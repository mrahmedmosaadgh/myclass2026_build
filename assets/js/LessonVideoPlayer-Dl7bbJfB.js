import{r as e}from"./app-4gpSDtVV.js";import{f as i,k as t,o,N as n,J as s,R as r}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const l={class:"lesson-video-player"},a=["src"],d=e({__name:"LessonVideoPlayer",props:{slide:Object},emits:["timelineEvent"],setup(e,{expose:d,emit:u}){const v=e,m=u,p=i(null);let c=new Set;function f(e){var i;const t=p.value.currentTime;((null==(i=v.slide)?void 0:i.timeline)||[]).forEach(e=>{if("time"===e.trigger){const i=e.time||e.start||0;t>=i&&!c.has(e.id)&&(c.add(e.id),m("timelineEvent",e),"pause"===e.type&&p.value.pause())}})}function y(){m("timelineEvent",{type:"ended"})}return t(()=>v.slide,e=>{c=new Set,p.value&&e&&e.video&&"number"==typeof e.video.playFrom&&(p.value.currentTime=e.video.playFrom||0,p.value.play().catch(()=>{}))}),o(()=>{}),d({seekTo:function(e){p.value&&(p.value.currentTime=e)}}),(i,t)=>{var o,d;return s(),n("div",l,[r("video",{ref_key:"videoEl",ref:p,src:null==(d=null==(o=e.slide)?void 0:o.video)?void 0:d.src,controls:"",onTimeupdate:f,onEnded:y,style:{width:"100%",background:"#000"}},null,40,a)])}}},[["__scopeId","data-v-0e4dc3f8"]]);export{d as default};
