import e from"./purify.es-C2Ba6vpb.js";import{r as a}from"./app-Dtv5Fi9L.js";import{f as t,a as n,k as l,N as i,J as o,R as r,y as s,ac as d,F as u,Q as c,U as m,O as v,V as p,ab as g,W as h,S as b}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const y={class:"relative bg-white"},w={class:"border-b"},f={class:"p-4 flex flex-wrap items-center gap-3"},x={class:"flex items-center gap-1 border rounded-md bg-white shadow-sm"},k=["onClick","title"],H={key:0,class:"font-bold"},C={key:1,class:"italic"},M={key:2,class:"underline"},z={class:"flex items-center gap-2"},V={class:"flex items-center gap-1 border rounded-md bg-white shadow-sm"},T=["onClick","title"],L={xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},B=["d"],_=["value"],j={class:"p-6"},A=["innerHTML"],I=["innerHTML"],U=a({__name:"ReusableHtmlViewer_Editor9",props:{modelValue:{type:String,required:!0},title:{type:String,default:"Document"}},emits:["update:modelValue"],setup(a,{emit:U}){const E=a,$=U,P=t(E.title),S=t(null),D=t(null),R=t(1.5),F=t("left"),N=t("inline-block"),q=t(100),O=t([]),W=[5,10,15,20,25,33,50,75,100,110,120,150,200,300],G={left:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 5a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1z",center:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3 5a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm-3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",right:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm5 5a1 1 0 011-1h6a1 1 0 110 2H9a1 1 0 01-1-1zm-5 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"},J=n(()=>e.sanitize(E.modelValue)),Q=a=>{const t=a.target.innerHTML,n=e.sanitize(t);$("update:modelValue",n)},Y=e=>document.queryCommandState(e),K=()=>{R.value=Math.max(1,Math.min(3,R.value))},X=()=>{N.value="inline-block"===N.value?"block":"inline-block",O.value.length&&O.value.forEach(e=>{e.style.display=N.value})},Z=e=>{"IMG"===e.target.tagName&&(O.value=[e.target])},ee=()=>{O.value.length&&O.value.forEach(e=>{e.style.width=`${q.value}%`})},ae=()=>{const e=window.open("","_blank"),a=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n            <title>${P.value}</title>\n            <style>\n                @page {\n                    margin: 1cm;\n                    size: A4;\n                }\n                body {\n                    font-family: system-ui, -apple-system, sans-serif;\n                    line-height: ${R.value};\n                    margin: 0;\n                    padding: 1cm;\n                    text-align: ${F.value};\n                }\n                .prose {\n                    max-width: none;\n                }\n                .prose img {\n                    max-width: 100%;\n                    height: auto;\n                    page-break-inside: avoid;\n                }\n                @media print {\n                    html, body {\n                        width: 210mm;\n                        height: 297mm;\n                    }\n                }\n            </style>\n        </head>\n        <body>\n            ${J.value}\n        </body>\n        </html>\n    `;e.document.write(a),e.document.close(),e.onload=()=>{e.print(),e.onafterprint=()=>{e.close()}}},te=async()=>{if(!D.value)return;const e=D.value.getElementsByTagName("img"),a=Array.from(e).map(async e=>{if(!e.src.startsWith("data:"))try{const a=await fetch(e.src),t=await a.blob(),n=await(e=>new Promise((a,t)=>{const n=new FileReader;n.onload=()=>a(n.result),n.onerror=t,n.readAsDataURL(e)}))(t);e.src=n}catch(a){console.error("Failed to convert image to base64:",a)}});await Promise.all(a),Q({target:D.value})};l(()=>E.modelValue,a=>{D.value&&D.value.innerHTML!==a&&(D.value.innerHTML=e.sanitize(a))});const ne=async()=>{try{const a=await navigator.clipboard.readText();if(!a)return;document.createElement("div").innerHTML=e.sanitize(a),te()}catch(a){console.error("Clipboard operation failed:",a)}};return(e,a)=>(o(),i("div",y,[r("div",w,[r("div",f,[s(r("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>P.value=e),class:"border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",placeholder:"Document Title"},null,512),[[d,P.value]]),r("div",x,[(o(),i(u,null,c(["bold","italic","underline"],e=>r("button",{key:e,onClick:a=>(e=>{document.execCommand(e,!1,null)})(e),class:m(["p-2 hover:bg-gray-100 transition-colors",{"bg-blue-50 text-blue-600":Y(e)}]),title:e.charAt(0).toUpperCase()+e.slice(1)},["bold"===e?(o(),i("span",H,"B")):"italic"===e?(o(),i("span",C,"I")):"underline"===e?(o(),i("span",M,"U")):v("",!0)],10,k)),64))]),r("div",z,[a[3]||(a[3]=r("label",{class:"text-sm text-gray-600"},"Line Spacing:",-1)),s(r("input",{type:"number","onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),onInput:K,min:"1",max:"3",step:"0.1",class:"w-20 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,544),[[d,R.value]])]),r("div",V,[(o(),i(u,null,c(["left","center","right"],e=>r("button",{key:e,onClick:a=>{return t=e,void(F.value=t);var t},class:m(["p-2 hover:bg-gray-100 transition-colors",{"bg-blue-50 text-blue-600":F.value===e}]),title:`Align ${e}`},[(o(),i("svg",L,[r("path",{"fill-rule":"evenodd",d:G[e],"clip-rule":"evenodd"},null,8,B)]))],10,T)),64))]),r("button",{onClick:X,class:m(["px-2 py-1 rounded text-sm","inline-block"===N.value?"bg-blue-500 text-white":"bg-gray-200 text-gray-700"])},p("inline-block"===N.value?"Inline":"Block"),3),s(r("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>q.value=e),onChange:ee,class:"w-24 rounded-md border-gray-300 shadow-sm"},[(o(),i(u,null,c(W,e=>r("option",{key:e,value:e},p(e)+"% ",9,_)),64))],544),[[g,q.value]]),r("button",{onClick:te,class:"px-2 py-1 rounded text-sm bg-gray-200 text-gray-700 hover:bg-gray-300"}," Convert Images to Base64 "),r("button",{onClick:ne,class:"px-2 py-1 rounded text-sm bg-blue-500 text-white hover:bg-blue-600 flex items-center"},a[4]||(a[4]=[r("svg",{class:"w-4 h-4 mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),h(" Paste with Base64 ")])),r("div",{class:"flex items-center gap-2 ml-auto"},[r("button",{onClick:ae,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition flex items-center gap-2"},a[5]||(a[5]=[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[r("path",{"fill-rule":"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z","clip-rule":"evenodd"})],-1),h(" Print ")]))])])]),r("div",j,[r("div",{class:"prose max-w-none",innerHTML:J.value,contenteditable:"true",ref_key:"editableContent",ref:D,onInput:Q,onClick:Z,style:b({lineHeight:R.value,textAlign:F.value})},null,44,A)]),r("div",{ref_key:"printContainer",ref:S,class:"hidden"},[r("div",{class:"print-content prose max-w-none",innerHTML:J.value,style:b({lineHeight:R.value,textAlign:F.value})},null,12,I)],512)]))}},[["__scopeId","data-v-996691a4"]]);export{U as default};
