import e from"./Editor7tiptap-BagbSRGa.js";import t from"./TodoList7-BxllX5Lr.js";import{f as a,k as l,o,n as r,M as s,J as i,N as n,Q as u,y as d,ab as c,an as p,U as m,b as v,V as g}from"./vendor-DuKqz2x4.js";import"./TabButtons-BYnAPaH6.js";import"./ReusableHtmlViewer_Editor9-BrPekaR8.js";import"./purify.es-C2Ba6vpb.js";import"./app-B77gjd5a.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./use_paste-BBHk3bFE.js";import"./AdvancedClipboardHandler-DW5vjDPu.js";import"./LucideIcon-DSukDbp_.js";import"./createLucideIcon-CH-llAdf.js";import"./align-right-GjtEmXC3.js";import"./underline-mNdAcouf.js";import"./image-C7UVNzjr.js";import"./printer-DFzJsatj.js";const f={class:"space-y-4"},y={class:"flex items-center gap-2 mb-4"},h=["value","rows","required","placeholder"],V={key:1,class:"p-0"},w={key:2,class:"space-y-2"},x=["src"],_={key:3,class:"space-y-4"},b=["value","rows"],j=["src"],k={key:4,class:"space-y-4"},S={key:5,class:"p-0"},T=["innerHTML"],N="mt-1 block w-full rounded-lg border-gray-300 shadow-sm transition-all duration-200 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",I={__name:"slide_content",props:{modelValue:{type:String,default:""},contentType:{type:String,default:"text"},rows:{type:[String,Number],default:4},required:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue","update:contentType","save_data"],setup(I,{emit:J}){const O=I,E=J,C=a(!1),L=a(O.contentType),U=a(""),A=a(""),R=a(null),H=a(null),q=a(O.modelValue),M=a((()=>{if(O.modelValue&&"todo_list"===O.contentType)try{return JSON.parse(O.modelValue)}catch(e){return console.error("Error parsing initial todos:",e),[]}return[]})());l(L,e=>{E("update:contentType",e)}),l(()=>O.modelValue,e=>{if("todo_list"===L.value&&e)try{const t=JSON.parse(e);JSON.stringify(M.value)!==JSON.stringify(t)&&(M.value=t)}catch(t){console.error("Error parsing todos:",t),M.value=[]}else"html"===L.value&&(q.value=e||"")}),l(L,(e,t)=>{if("todo_list"===e&&"todo_list"!==t)try{M.value=O.modelValue?JSON.parse(O.modelValue):[]}catch(a){console.error("Error parsing todos on type change:",a),M.value=[]}});const $=async()=>{"html"===L.value?(q.value=O.modelValue||"",C.value=!1,await r(),C.value=!0):"todo_list"===L.value?(M.value=[],E("update:modelValue",JSON.stringify(M.value))):E("update:modelValue","")},D=async e=>{const t=e.target.files[0];if(t)try{const e=await new Promise((e,a)=>{const l=new FileReader;l.onload=()=>e(l.result),l.onerror=a,l.readAsDataURL(t)});E("update:modelValue",e)}catch(a){console.error("Error converting image to base64:",a)}},B=async e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{A.value=e.target.result,F("image",e.target.result)},e.readAsDataURL(t)}},F=(e,t)=>{const a={text:"text"===e?t:U.value,image:"image"===e?t:A.value};U.value=a.text,A.value=a.image,E("update:modelValue",JSON.stringify(a))},P=e=>{try{q.value=e,E("update:modelValue",e)}catch(t){z(t)}},z=e=>{console.error("Editor error:",e),q.value=""};l(M,e=>{E("update:modelValue",JSON.stringify(e))},{deep:!0});const Q=e=>{const t=M.value.filter(t=>t.id!==e);M.value=t,E("update:modelValue",JSON.stringify(t))},G=e=>{const t=M.value.map(t=>t.id===e.id?{...t,completed:!t.completed}:t);M.value=t,E("update:modelValue",JSON.stringify(t))},K=()=>{const e=M.value.filter(e=>!e.completed);M.value=e,E("update:modelValue",JSON.stringify(e))};return o(async()=>{"html"===L.value&&(await r(),C.value=!0)}),(a,l)=>(i(),s("div",f,[n("div",y,[d(n("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>L.value=e),class:"rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500",onChange:$},l[8]||(l[8]=[p('<option value="text">Plain Text</option><option value="html">Rich HTML</option><option value="screenshot">Screenshot</option><option value="text_img">Text with Image</option><option value="todo_list">todo_list</option><option value="force_html">force_html</option>',6)]),544),[[c,L.value]])]),"text"===L.value?(i(),s("textarea",{key:0,class:m(["",N]),value:I.modelValue,onInput:l[1]||(l[1]=e=>a.$emit("update:modelValue",e.target.value)),rows:I.rows,required:I.required,placeholder:I.placeholder},null,40,h)):u("",!0),"html"===L.value?(i(),s("div",V,[v(e,{modelValue:q.value,"onUpdate:modelValue":[l[2]||(l[2]=e=>q.value=e),P],locale:"en",mode:"default",height:"300px",placeholder:I.placeholder,onError:z},null,8,["modelValue","placeholder"])])):u("",!0),"screenshot"===L.value?(i(),s("div",w,[n("input",{type:"file",accept:"image/*",onChange:D,class:"hidden",ref_key:"fileInput",ref:R},null,544),n("button",{onClick:l[3]||(l[3]=e=>a.$refs.fileInput.click()),class:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"}," Upload Screenshot "),I.modelValue?(i(),s("img",{key:0,src:I.modelValue,class:"max-w-full h-auto rounded",alt:"Screenshot"},null,8,x)):u("",!0)])):u("",!0),"text_img"===L.value?(i(),s("div",_,[n("textarea",{value:U.value,onInput:l[4]||(l[4]=e=>F("text",e.target.value)),rows:I.rows,class:m(N),placeholder:"Enter text content..."},null,40,b),n("div",null,[n("input",{type:"file",accept:"image/*",onChange:B,class:"hidden",ref_key:"textImageInput",ref:H},null,544),n("button",{onClick:l[5]||(l[5]=e=>a.$refs.textImageInput.click()),class:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"}," Add Image "),A.value?(i(),s("img",{key:0,src:A.value,class:"max-w-full h-auto mt-2 rounded",alt:"Uploaded image"},null,8,j)):u("",!0)])])):u("",!0),"todo_list"===L.value?(i(),s("div",k,[v(t,{todos:M.value,"onUpdate:todos":l[6]||(l[6]=e=>M.value=e),"show-filters":!0,"show-priority":!0,"show-stats":!0,placeholder:"Enter a new task...","add-button-text":"Add Task",onAdd:Q,onDelete:Q,onToggle:G,onClearCompleted:K,onSave_data:l[7]||(l[7]=e=>a.$emit("save_data"))},null,8,["todos"])])):u("",!0),"force_html"===L.value?(i(),s("div",S,[n("div",{class:"p-0",innerHTML:q.value},null,8,T),n("details",null,[l[9]||(l[9]=n("summary",null,"code",-1)),n("pre",null,g(q.value),1)])])):u("",!0)]))}};export{I as default};
