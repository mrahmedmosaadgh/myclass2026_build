import{o as e,u as a,Q as l,C as o,c as t,m as s,d as i,f as r,l as n,b as d,A as u,aP as p}from"./app-DOc39CFu.js";import{Q as v}from"./QBtnToggle-CdtgOgxF.js";import{Q as c}from"./QBadge-Dz6oAuer.js";import{Q as m}from"./QSelect-Dkiz84LX.js";import{f as y,o as g,af as b,M as f,J as h,b as _,N as x,Q as V,F as w,R as B,I as C,K as k,V as j,W as U,U as Q,y as A,_ as N}from"./vendor-DuKqz2x4.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";import"./rtl-Cr6c3OOr.js";const q={class:"p-6 space-y-6"},M={class:"flex justify-between items-center"},z={class:"flex justify-end"},E={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},P={class:"flex justify-between items-start mb-3"},D={class:"flex gap-2"},F={class:"text-xl font-bold text-gray-900 mb-2"},T={class:"flex items-center gap-2 mb-3"},S={key:0,class:"text-sm text-gray-600 mb-3"},I={class:"flex gap-2 mt-4"},$={key:0,class:"text-center py-12"},H={class:"text-h6"},J={class:"space-y-4"},K=e({__name:"BehaviorManagement",setup(e){const K=a(),O=y([]),R=y("en"),W=y(!1),G=y(!1),L=y(null),X=y(null),Y=y(!1),Z=y(!1),ee=y({name:"",name_ar:"",type:"positive",points:1,description:"",school_id:1}),ae=async()=>{try{const e=await N.get("/api/behaviors",{params:{school_id:1}});O.value=e.data}catch(e){K.notify({type:"negative",message:"Failed to load behaviors",position:"top"})}},le=async()=>{var e,a;Y.value=!0;try{L.value?(await N.put(`/api/behaviors/${L.value.id}`,ee.value),K.notify({type:"positive",message:"Behavior updated successfully",position:"top"})):(await N.post("/api/behaviors",ee.value),K.notify({type:"positive",message:"Behavior created successfully",position:"top"})),te(),ae()}catch(l){K.notify({type:"negative",message:(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Failed to save behavior",position:"top"})}finally{Y.value=!1}},oe=async()=>{var e,a;Z.value=!0;try{await N.delete(`/api/behaviors/${X.value.id}`),K.notify({type:"positive",message:"Behavior deleted successfully",position:"top"}),G.value=!1,ae()}catch(l){K.notify({type:"negative",message:(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Failed to delete behavior",position:"top"})}finally{Z.value=!1}},te=()=>{W.value=!1,L.value=null,ee.value={name:"",name_ar:"",type:"positive",points:1,description:"",school_id:1}};return g(()=>{ae()}),(e,a)=>{const y=b("Head");return h(),f(w,null,[_(y,{title:"Behavior Management"}),x("div",q,[x("div",M,[a[9]||(a[9]=x("div",null,[x("h1",{class:"text-3xl font-bold text-gray-900"},"ðŸŽ¯ Behavior Management"),x("p",{class:"text-gray-600 mt-1"},"Manage school-wide default behaviors")],-1)),_(l,{color:"primary",icon:"add",label:"Add Behavior",onClick:a[0]||(a[0]=e=>W.value=!0),size:"lg",class:"shadow-lg"})]),x("div",z,[_(v,{modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),options:[{label:"ðŸ‡¬ðŸ‡§ English",value:"en"},{label:"ðŸ‡¸ðŸ‡¦ Arabic",value:"ar"}],color:"primary","toggle-color":"primary",unelevated:""},null,8,["modelValue"])]),x("div",E,[(h(!0),f(w,null,B(O.value,e=>(h(),C(s,{key:e.id,class:Q(["shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer",{"border-l-4 border-green-500":"positive"===e.type,"border-l-4 border-red-500":"negative"===e.type}])},{default:k(()=>[_(t,null,{default:k(()=>[x("div",P,[x("div",D,[_(c,{color:"positive"===e.type?"green":"red",label:"positive"===e.type?"âœ… Positive":"âŒ Negative"},null,8,["color","label"]),e.teacher_id?(h(),C(c,{key:1,color:"purple",label:"âœï¸ Teacher Custom"})):(h(),C(c,{key:0,color:"blue",label:"ðŸ”’ School Default"}))])]),x("h3",F,j("ar"===R.value&&e.name_ar?e.name_ar:e.name),1),x("div",T,[_(o,{color:e.points>0?"green":"red","text-color":"white",size:"lg",class:"font-bold"},{default:k(()=>[U(j(e.points>0?"+":"")+j(e.points)+" points ",1)]),_:2},1032,["color"])]),e.description?(h(),f("div",S," ðŸ“‚ "+j(e.description),1)):V("",!0),x("div",I,[_(l,{icon:"edit",label:"Edit",color:"primary",outline:"",size:"sm",onClick:a=>(e=>{L.value=e,ee.value={name:e.name,name_ar:e.name_ar||"",type:e.type,points:e.points,description:e.description||"",school_id:e.school_id},W.value=!0})(e)},null,8,["onClick"]),_(l,{icon:"delete",label:"Delete",color:"negative",outline:"",size:"sm",onClick:a=>(e=>{X.value=e,G.value=!0})(e)},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),O.value.length?V("",!0):(h(),f("div",$,[_(i,{name:"emoji_events",size:"4rem",color:"grey-5"}),a[10]||(a[10]=x("p",{class:"text-xl text-gray-600 mt-4"},"No behaviors yet",-1)),a[11]||(a[11]=x("p",{class:"text-gray-500"},'Click "Add Behavior" to create your first one',-1))])),_(d,{modelValue:W.value,"onUpdate:modelValue":a[7]||(a[7]=e=>W.value=e),persistent:""},{default:k(()=>[_(s,{style:{"min-width":"600px"}},{default:k(()=>[_(t,{class:"bg-primary text-white"},{default:k(()=>[x("div",H,j(L.value?"âœï¸ Edit Behavior":"âž• Add New Behavior"),1)]),_:1}),_(t,{class:"q-pt-md"},{default:k(()=>[x("div",J,[_(r,{modelValue:ee.value.name,"onUpdate:modelValue":a[2]||(a[2]=e=>ee.value.name=e),label:"ðŸ‡¬ðŸ‡§ Behavior Name (English)",outlined:"",rules:[e=>!!e||"English name is required"]},{prepend:k(()=>[_(i,{name:"translate"})]),_:1},8,["modelValue","rules"]),_(r,{modelValue:ee.value.name_ar,"onUpdate:modelValue":a[3]||(a[3]=e=>ee.value.name_ar=e),label:"ðŸ‡¸ðŸ‡¦ Behavior Name (Arabic)",outlined:"",dir:"rtl"},{prepend:k(()=>[_(i,{name:"translate"})]),_:1},8,["modelValue"]),_(m,{modelValue:ee.value.type,"onUpdate:modelValue":a[4]||(a[4]=e=>ee.value.type=e),options:[{label:"âœ… Positive",value:"positive"},{label:"âŒ Negative",value:"negative"}],label:"Behavior Type",outlined:"","emit-value":"","map-options":"",rules:[e=>!!e||"Type is required"]},{prepend:k(()=>[_(i,{name:"category"})]),_:1},8,["modelValue","rules"]),_(r,{modelValue:ee.value.points,"onUpdate:modelValue":a[5]||(a[5]=e=>ee.value.points=e),modelModifiers:{number:!0},type:"number",label:"Points",outlined:"",rules:[e=>null!==e&&""!==e||"Points are required"],hint:"Use positive numbers for rewards, negative for deductions"},{prepend:k(()=>[_(i,{name:"stars"})]),_:1},8,["modelValue","rules"]),_(r,{modelValue:ee.value.description,"onUpdate:modelValue":a[6]||(a[6]=e=>ee.value.description=e),label:"Category/Description (Optional)",outlined:""},{prepend:k(()=>[_(i,{name:"folder"})]),_:1},8,["modelValue"])])]),_:1}),_(n,{align:"right",class:"q-px-md q-pb-md"},{default:k(()=>[_(l,{flat:"",label:"Cancel",color:"grey",onClick:te}),_(l,{label:L.value?"Update":"Create",color:"primary",onClick:le,loading:Y.value},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),_(d,{modelValue:G.value,"onUpdate:modelValue":a[8]||(a[8]=e=>G.value=e),persistent:""},{default:k(()=>[_(s,null,{default:k(()=>[_(t,{class:"row items-center"},{default:k(()=>[_(u,{icon:"delete",color:"negative","text-color":"white"}),a[12]||(a[12]=x("span",{class:"q-ml-sm"},"Are you sure you want to delete this behavior?",-1))]),_:1}),_(n,{align:"right"},{default:k(()=>[A(_(l,{flat:"",label:"Cancel",color:"grey"},null,512),[[p]]),_(l,{flat:"",label:"Delete",color:"negative",onClick:oe,loading:Z.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])],64)}}},[["__scopeId","data-v-44760859"]]);export{K as default};
