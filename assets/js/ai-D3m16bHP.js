import{f as e,M as a,J as s,b as l,W as o,N as r,Q as t,F as n,R as u,U as i,a0 as d,y as p,ac as c,a2 as v,V as f,_ as y,n as m}from"./vendor-DuKqz2x4.js";import b from"./purify.es-C2Ba6vpb.js";import g from"./OpenAiChat-Vu8-7XC-.js";import{o as x}from"./app-DOc39CFu.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const w={class:"flex flex-col h-full"},h=["innerHTML"],j={key:0,class:"animate-pulse bg-gray-50 rounded-lg p-4 max-w-3xl mx-auto"},_={class:"border-t p-4 bg-white"},k=["onKeydown","disabled"],S=["disabled"],T=x({__name:"ai",setup(x){const T=e([]),H=e(""),I=e(!1),K=e(null),M=e(null),z=async()=>{await m(),K.value&&(K.value.scrollTop=K.value.scrollHeight)},A=e=>{e.shiftKey||C()},C=async()=>{var e;const a=H.value.trim();if(a&&!I.value)try{I.value=!0,T.value.push({role:"user",content:b.sanitize(a)}),H.value="",await z();const e=await y.post("/api/ai-proxy",{text:a});e.data.output&&(T.value.push({role:"assistant",content:b.sanitize(e.data.output)}),await z())}catch(s){console.error("API Error:",s),T.value.push({role:"assistant",content:"Sorry, I encountered an error. Please try again."})}finally{I.value=!1,null==(e=M.value)||e.focus()}};return(e,y)=>(s(),a("div",w,[l(g),y[2]||(y[2]=o(" -----------------============------------- ")),y[3]||(y[3]=r("br",null,null,-1)),r("div",{class:"flex-1 overflow-y-auto p-4 space-y-4",ref_key:"messagesContainer",ref:K},[(s(!0),a(n,null,u(T.value,(e,l)=>(s(),a("div",{key:l,class:i(["rounded-lg p-4 max-w-3xl mx-auto","user"===e.role?"bg-blue-50":"bg-gray-50"])},[r("div",{class:"prose max-w-none",innerHTML:e.content},null,8,h)],2))),128)),I.value?(s(),a("div",j,y[1]||(y[1]=[r("div",{class:"h-4 bg-gray-200 rounded w-3/4"},null,-1)]))):t("",!0)],512),r("div",_,[r("form",{onSubmit:d(C,["prevent"]),class:"flex gap-2"},[p(r("textarea",{"onUpdate:modelValue":y[0]||(y[0]=e=>H.value=e),onKeydown:v(d(A,["prevent"]),["enter"]),ref_key:"inputField",ref:M,disabled:I.value,class:i(["flex-1 rounded-lg border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",{"opacity-50":I.value}]),rows:"2",placeholder:"Type your message..."},null,42,k),[[c,H.value]]),r("button",{type:"submit",disabled:I.value||!H.value.trim(),class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"},f(I.value?"Sending...":"Send"),9,S)],32)])]))}},[["__scopeId","data-v-f11d8141"]]);export{T as default};
