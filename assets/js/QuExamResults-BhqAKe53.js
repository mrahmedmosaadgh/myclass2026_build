import{p as e,d as s,C as t,e as a,a as r,n as l,h as i,i as c,j as n,m as o,Q as d}from"./app-BzjXrVp9.js";import{a as u,ac as m,L as _,I as v,b as x,M as p,J as w,H as y,O as h,U as q,S as f,V as g,F as b,Q as k,y as A,_ as M}from"./vendor-EI0FRBVb.js";import{s as j}from"./i18n-BbKXhR_S.js";import{r as T}from"./katex-BAATRBTg.js";import"./offline-BzIlwqNM.js";import"./ui-B__oX9pK.js";import"./katex-BXKQVcz-.js";const H={class:"q-pa-md"},L={class:"text-h5"},z={class:"text-subtitle2"},Q={class:"text-h6 text-grey-7 q-mt-sm"},E={class:"row q-gutter-md"},R={class:"col-12 col-sm-6 col-md-3"},O={class:"text-h6"},S={class:"col-12 col-sm-6 col-md-3"},B={class:"text-h6"},C={class:"col-12 col-sm-6 col-md-3"},I={class:"text-h6"},Y={key:0,class:"col-12 col-sm-6 col-md-3"},D={class:"text-h6"},F={class:"row items-start"},N={class:"col"},P={class:"text-subtitle1 text-weight-bold q-mb-sm"},U=["innerHTML"],$={key:0,class:"q-mb-md"},J={key:0},V=["innerHTML"],G={key:1},K={key:1},W=["innerHTML"],X={key:0,class:"q-mt-sm"},Z=["innerHTML"],ee={class:"col-auto text-center"},se=e({__name:"QuExamResults",props:{exam:Object,attempt:Object,statistics:Object,show_results:Boolean,show_correct_answers:Boolean,questions_with_answers:Array},setup(e){const se=e,te=u(()=>se.statistics.passed?se.statistics.passed?"text-positive":"text-negative":"text-grey-7"),ae=(e,s)=>{var t;if(!se.show_correct_answers)return"";const a=(Array.isArray(e.correct_answer)?e.correct_answer[0]:e.correct_answer)===s,r=(null==(t=e.student_answer)?void 0:t.selected_options)===s;return a?"text-positive text-weight-bold":r&&!a?"text-negative":""},re=(e,s)=>{var t,a;if(!se.show_correct_answers)return"";const r=e.correct_answer===s,l=(null==(a=null==(t=e.student_answer)?void 0:t.selected_options)?void 0:a[0])===s;return r?"text-positive text-weight-bold":l&&!r?"text-negative":""},le=e=>{var s,t;const a=null!=(t=null==(s=e.student_answer)?void 0:s.marks_obtained)?t:0;return a===e.marks?"positive":0===a?"negative":"orange"},ie=()=>{M.visit(j("qu-student.exams.index"))};return(u,M)=>{const j=m("Head");return v(),_(b,null,[x(j,{title:e.exam.title?e.exam.title+" - Results":"Exam Results"},null,8,["title"]),p("div",H,[x(l,null,{default:w(()=>[x(s,{class:"bg-primary text-white"},{default:w(()=>{var s;return[p("div",L,q(e.exam.title),1),p("div",z,q(null==(s=e.exam.subject)?void 0:s.name),1)]}),_:1}),e.show_results?(v(),y(s,{key:0,class:"text-center q-py-xl"},{default:w(()=>[p("div",{class:f(["text-h2 text-weight-bold",te.value])},q(Math.round(e.attempt.score))+" / "+q(e.exam.total_marks),3),p("div",Q,q(e.statistics.percentage)+"% ",1),null!==e.statistics.passed?(v(),y(t,{key:0,color:e.statistics.passed?"positive":"negative","text-color":"white",size:"lg",class:"q-mt-md"},{default:w(()=>[x(a,{name:e.statistics.passed?"check_circle":"cancel",size:"sm",class:"q-mr-sm"},null,8,["name"]),g(" "+q(e.statistics.passed?"PASSED":"FAILED"),1)]),_:1},8,["color"])):h("",!0)]),_:1})):(v(),y(s,{key:1,class:"text-center q-py-xl"},{default:w(()=>[x(a,{name:"lock",size:"64px",color:"grey-5"}),M[0]||(M[0]=p("div",{class:"text-h6 text-grey-7 q-mt-md"}," Results Not Yet Available ",-1)),M[1]||(M[1]=p("div",{class:"text-caption text-grey-6 q-mt-sm"}," Your teacher will publish the results soon. ",-1))]),_:1})),x(r),e.show_results?(v(),y(s,{key:2},{default:w(()=>[p("div",E,[p("div",R,[x(l,{flat:"",bordered:""},{default:w(()=>[x(s,{class:"text-center"},{default:w(()=>[p("div",O,q(e.statistics.answered_questions),1),M[2]||(M[2]=p("div",{class:"text-caption text-grey-7"},"Questions Answered",-1))]),_:1})]),_:1})]),p("div",S,[x(l,{flat:"",bordered:""},{default:w(()=>[x(s,{class:"text-center"},{default:w(()=>[p("div",B,q(e.statistics.total_questions),1),M[3]||(M[3]=p("div",{class:"text-caption text-grey-7"},"Total Questions",-1))]),_:1})]),_:1})]),p("div",C,[x(l,{flat:"",bordered:""},{default:w(()=>[x(s,{class:"text-center"},{default:w(()=>[p("div",I,q(Math.round(e.attempt.time_taken_minutes))+" min",1),M[4]||(M[4]=p("div",{class:"text-caption text-grey-7"},"Time Taken",-1))]),_:1})]),_:1})]),e.exam.passing_score?(v(),_("div",Y,[x(l,{flat:"",bordered:""},{default:w(()=>[x(s,{class:"text-center"},{default:w(()=>[p("div",D,q(e.exam.passing_score),1),M[5]||(M[5]=p("div",{class:"text-caption text-grey-7"},"Passing Score",-1))]),_:1})]),_:1})])):h("",!0)])]),_:1})):h("",!0),e.show_results&&e.questions_with_answers.length>0?(v(),y(r,{key:3})):h("",!0),e.show_results&&e.questions_with_answers.length>0?(v(),y(s,{key:4},{default:w(()=>[M[8]||(M[8]=p("div",{class:"text-h6 q-mb-md"},"Question Review",-1)),x(i,{separator:""},{default:w(()=>[(v(!0),_(b,null,k(e.questions_with_answers,(s,r)=>(v(),y(c,{key:s.id,class:"q-pa-md"},{default:w(()=>[x(n,null,{default:w(()=>[p("div",F,[p("div",N,[p("div",P," Question "+q(r+1),1),p("div",{class:"text-body1 q-mb-md",innerHTML:A(T)(s.question_text)},null,8,U),"mcq"===s.question_type||"true_false"===s.question_type?(v(),_("div",$,["mcq"===s.question_type?(v(),_("div",J,[(v(!0),_(b,null,k(s.options,(t,r)=>{var l;return v(),_("div",{key:r,class:f(["q-py-xs",ae(s,r)])},[e.show_correct_answers&&(Array.isArray(s.correct_answer)?s.correct_answer[0]===r:s.correct_answer===r)?(v(),y(a,{key:0,name:"check_circle",color:"positive",size:"sm",class:"q-mr-sm"})):(null==(l=s.student_answer)?void 0:l.selected_options)===r&&(Array.isArray(s.correct_answer)?s.correct_answer[0]!==r:s.correct_answer!==r)?(v(),y(a,{key:1,name:"cancel",color:"negative",size:"sm",class:"q-mr-sm"})):h("",!0),p("span",{innerHTML:`${r}. ${A(T)(t)}`},null,8,V)],2)}),128))])):(v(),_("div",G,[(v(),_(b,null,k(["true","false"],t=>{var r,l,i;return p("div",{key:t,class:f(["q-py-xs",re(s,t)])},[e.show_correct_answers&&s.correct_answer===t?(v(),y(a,{key:0,name:"check_circle",color:"positive",size:"sm",class:"q-mr-sm"})):(null==(l=null==(r=s.student_answer)?void 0:r.selected_options)?void 0:l[0])===t&&s.correct_answer!==t?(v(),y(a,{key:1,name:"cancel",color:"negative",size:"sm",class:"q-mr-sm"})):h("",!0),g(" "+q((i=t,i?i.charAt(0).toUpperCase()+i.slice(1):"")),1)],2)}),64))]))])):"short"===s.question_type||"long"===s.question_type?(v(),_("div",K,[M[7]||(M[7]=p("div",{class:"text-caption text-grey-7 q-mb-xs"},"Your Answer:",-1)),x(l,{flat:"",bordered:"",class:"q-pa-sm bg-grey-1"},{default:w(()=>{var e;return[p("div",{innerHTML:A(T)((null==(e=s.student_answer)?void 0:e.answer_text)||"No answer provided")},null,8,W)]}),_:2},1024),e.show_correct_answers&&s.correct_answer?(v(),_("div",X,[M[6]||(M[6]=p("div",{class:"text-caption text-grey-7 q-mb-xs"},"Model Answer:",-1)),x(l,{flat:"",bordered:"",class:"q-pa-sm bg-green-1"},{default:w(()=>[p("div",{innerHTML:A(T)(s.correct_answer)},null,8,Z)]),_:2},1024)])):h("",!0)])):h("",!0)]),p("div",ee,[x(t,{color:le(s),"text-color":"white",size:"lg"},{default:w(()=>{var e,t;return[g(q(null!=(t=null==(e=s.student_answer)?void 0:e.marks_obtained)?t:0)+" / "+q(s.marks),1)]}),_:2},1032,["color"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})):h("",!0),x(r),x(o,{align:"center",class:"q-pa-md"},{default:w(()=>[x(d,{color:"primary",label:"Back to Exams",icon:"arrow_back",onClick:ie})]),_:1})]),_:1})])],64)}}},[["__scopeId","data-v-7cb92b0e"]]);export{se as default};
