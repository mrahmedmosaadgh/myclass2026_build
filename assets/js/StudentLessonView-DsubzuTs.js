import{p as e,u as t,aq as s}from"./app-BzjXrVp9.js";import{f as r,o,H as i,L as a,I as n,b as p,Z as m}from"./vendor-EI0FRBVb.js";import l from"./LessonPlayer-2Iw7hW3S.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./QSpinnerDots-CsCCDASU.js";import"./QBadge-D2ciqrkO.js";import"./QPage-DC7Lbtn5.js";import"./QPageContainer--if2P0k6.js";import"./QLayout-BkQn7DTH.js";import"./QuestionSlide-CI00oUy6.js";import"./EnhancedQuestionEditor-z-4FgyOI.js";import"./QuestionEditor-B7HsQdH0.js";import"./RichTextEditor-CgI_Wije.js";import"./QColor-9nuGqmA9.js";import"./QSlider-Ca7ul8Gv.js";import"./QTabs-BwLFzVWR.js";import"./rtl-Cr6c3OOr.js";import"./QTab-Cx9aTRVb.js";import"./QTabPanels-C2OMgZHe.js";import"./use-panel-DdQZ_Vdk.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-BWvsj8on.js";import"./purify.es-C2Ba6vpb.js";import"./MathEditor-DTd-X9KR.js";import"./katex-BXKQVcz-.js";import"./MathPastePreview-D7IfRdxZ.js";import"./QSelect-CciNNEfD.js";import"./StepByStepEditor-CnjOsexu.js";import"./QuestionTypeSelector-BRH1uRly.js";import"./QuizEngine-DpGxhJ8D.js";import"./useQuizI18n-Bzgnl5cn.js";import"./PlayerSidebar-DTCRvwxS.js";import"./QDrawer-0abd2rGn.js";import"./SectionCard-Bx7HC74v.js";import"./SectionBanner-brdcxv_1.js";import"./QLinearProgress-L5RdawR6.js";import"./SlideRenderer-8w63klYE.js";import"./FingerDrawingSlide-D-EXbGbC.js";import"./QPopupProxy-DuCU3AfJ.js";import"./QSpace-qzKo_-If.js";import"./NavigationFooter-uQOBQONt.js";import"./DrawingOverlay-CWYgKn3s.js";import"./DrawingCanvas-Ra21G5zo.js";import"./DrawingToolbar-WFwoXAYt.js";import"./QBtnToggle-CLBD-K6a.js";import"./SlideAnnotationOverlay-DjaS00m-.js";const d={key:1,class:"h-screen flex items-center justify-center bg-gray-50"},c=e({__name:"StudentLessonView",props:{presentationId:{type:[String,Number],required:!0},studentId:{type:[String,Number],required:!0},sections:{type:Array,default:()=>[]}},setup(e){const c=t(),j=e,u=r({}),y=r([]),g=r(null),b=r(!0),Q=async()=>{try{b.value=!0;const e=await m.get(route("lesson-presentation.show",{id:j.presentationId}));u.value=e.data,y.value=(e.data.slides||[]).map(e=>({...e,section:e.section||"learn"}));const t=(await m.get(route("lesson-presentation.progress.student",{studentId:j.studentId}))).data.find(e=>e.lesson_presentation_id==j.presentationId);g.value=t}catch(e){console.error("Failed to load data:",e),c.notify({type:"negative",message:"Failed to load lesson data"})}finally{b.value=!1}},v=async()=>{try{await m.put(route("lesson-presentation.progress.complete-learn",{id:g.value.id})),await Q(),c.notify({type:"positive",message:"Learn section completed! Practice unlocked."})}catch(e){console.error("Failed to complete learn:",e)}},S=async()=>{await Q(),c.notify({type:"positive",message:"Practice submitted! Waiting for teacher review."})};return o(()=>{Q()}),(t,r)=>b.value?(n(),a("div",d,[p(s,{color:"primary",size:"3em"})])):(n(),i(l,{key:0,presentation:u.value,sections:e.sections,slides:y.value,progress:g.value,loading:b.value,onCompleteLearn:v,onSubmitPractice:S},null,8,["presentation","sections","slides","progress","loading"]))}},[["__scopeId","data-v-683abdec"]]);export{c as default};
