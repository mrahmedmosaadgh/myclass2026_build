import{ac as e,T as a,U as l,ax as t,az as r,aN as n,aT as u,a2 as o,b0 as i,V as s,E as v,ba as c,K as d}from"./app-Dccx8xF5.js";import{p as m,f as b,a as p,z as g,h as f,k as h}from"./vendor-EI0FRBVb.js";const k="q-slider__marker-labels",y=e=>({value:e}),x=({marker:e})=>f("div",{key:e.value,style:e.style,class:e.classes},e.label),$=[34,37,40,33,39,38],C={...a,...e,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}};function M({updateValue:e,updatePosition:a,getDragging:v,formAttrs:c}){const{props:d,emit:h,slots:C,proxy:{$q:M}}=m(),S=l(d,M),q=i(c),w=b(!1),_=b(!1),T=b(!1),V=b(!1),L=p(()=>!0===d.vertical?"--v":"--h"),B=p(()=>"-"+(!0===d.switchLabelSide?"switched":"standard")),N=p(()=>!0===d.vertical?!0===d.reverse:d.reverse!==(!0===M.lang.rtl)),R=p(()=>!0===isNaN(d.innerMin)||d.innerMin<d.min?d.min:d.innerMin),z=p(()=>!0===isNaN(d.innerMax)||d.innerMax>d.max?d.max:d.innerMax),I=p(()=>!0!==d.disable&&!0!==d.readonly&&R.value<z.value),A=p(()=>{if(0===d.step)return e=>e;const e=(String(d.step).trim().split(".")[1]||"").length;return a=>parseFloat(a.toFixed(e))}),F=p(()=>0===d.step?1:d.step),P=p(()=>!0===I.value?d.tabindex||0:-1),D=p(()=>d.max-d.min),E=p(()=>z.value-R.value),K=p(()=>se(R.value)),j=p(()=>se(z.value)),O=p(()=>!0===d.vertical?!0===N.value?"bottom":"top":!0===N.value?"right":"left"),Q=p(()=>!0===d.vertical?"height":"width"),U=p(()=>!0===d.vertical?"width":"height"),W=p(()=>!0===d.vertical?"vertical":"horizontal"),X=p(()=>{const e={role:"slider","aria-valuemin":R.value,"aria-valuemax":z.value,"aria-orientation":W.value,"data-step":d.step};return!0===d.disable?e["aria-disabled"]="true":!0===d.readonly&&(e["aria-readonly"]="true"),e}),G=p(()=>`q-slider q-slider${L.value} q-slider--${!0===w.value?"":"in"}active inline no-wrap `+(!0===d.vertical?"row":"column")+(!0===d.disable?" disabled":" q-slider--enabled"+(!0===I.value?" q-slider--editable":""))+("both"===T.value?" q-slider--focus":"")+(d.label||!0===d.labelAlways?" q-slider--label":"")+(!0===d.labelAlways?" q-slider--label-always":"")+(!0===S.value?" q-slider--dark":"")+(!0===d.dense?" q-slider--dense q-slider--dense"+L.value:""));function H(e){const a="q-slider__"+e;return`${a} ${a}${L.value} ${a}${L.value}${B.value}`}function J(e){const a="q-slider__"+e;return`${a} ${a}${L.value}`}const Y=p(()=>{const e=d.selectionColor||d.color;return"q-slider__selection absolute"+(void 0!==e?` text-${e}`:"")}),Z=p(()=>J("markers")+" absolute overflow-hidden"),ee=p(()=>J("track-container")),ae=p(()=>H("pin")),le=p(()=>H("label")),te=p(()=>H("text-container")),re=p(()=>H("marker-labels-container")+(void 0!==d.markerLabelsClass?` ${d.markerLabelsClass}`:"")),ne=p(()=>"q-slider__track relative-position no-outline"+(void 0!==d.trackColor?` bg-${d.trackColor}`:"")),ue=p(()=>{const e={[U.value]:d.trackSize};return void 0!==d.trackImg&&(e.backgroundImage=`url(${d.trackImg}) !important`),e}),oe=p(()=>"q-slider__inner absolute"+(void 0!==d.innerTrackColor?` bg-${d.innerTrackColor}`:"")),ie=p(()=>{const e=j.value-K.value,a={[O.value]:100*K.value+"%",[Q.value]:0===e?"2px":100*e+"%"};return void 0!==d.innerTrackImg&&(a.backgroundImage=`url(${d.innerTrackImg}) !important`),a});function se(e){return 0===D.value?0:(e-d.min)/D.value}const ve=p(()=>!0===t(d.markers)?d.markers:F.value),ce=p(()=>{const e=[],a=ve.value,l=d.max;let t=d.min;do{e.push(t),t+=a}while(t<l);return e.push(l),e}),de=p(()=>{const e=` ${k}${L.value}-`;return k+`${e}${!0===d.switchMarkerLabelsSide?"switched":"standard"}${e}${!0===N.value?"rtl":"ltr"}`}),me=p(()=>!1===d.markerLabels?null:function(e){if(!1===e)return null;if(!0===e)return ce.value.map(y);if("function"==typeof e)return ce.value.map(a=>{const l=e(a);return!0===r(l)?{...l,value:a}:{value:a,label:l}});const a=({value:e})=>e>=d.min&&e<=d.max;if(!0===Array.isArray(e))return e.map(e=>!0===r(e)?e:{value:e}).filter(a);return Object.keys(e).map(a=>{const l=e[a],t=Number(a);return!0===r(l)?{...l,value:t}:{value:t,label:l}}).filter(a)}(d.markerLabels).map((e,a)=>({index:a,value:e.value,label:e.label||e.value,classes:de.value+(void 0!==e.classes?" "+e.classes:""),style:{...ge(e.value),...e.style||{}}}))),be=p(()=>({markerList:me.value,markerMap:fe.value,classes:de.value,getStyle:ge})),pe=p(()=>{const e=0===E.value?"2px":100*ve.value/E.value;return{...ie.value,backgroundSize:!0===d.vertical?`2px ${e}%`:`${e}% 2px`}});function ge(e){return{[O.value]:100*(e-d.min)/D.value+"%"}}const fe=p(()=>{if(!1===d.markerLabels)return null;const e={};return me.value.forEach(a=>{e[a.value]=a}),e});const he=p(()=>[[n,ke,void 0,{[W.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function ke(l){!0===l.isFinal?(void 0!==V.value&&(a(l.evt),!0===l.touch&&e(!0),V.value=void 0,h("pan","end")),w.value=!1,T.value=!1):!0===l.isFirst?(V.value=v(l.evt),a(l.evt),e(),w.value=!0,h("pan","start")):(a(l.evt),e())}function ye(){T.value=!1}function xe(){_.value=!1,w.value=!1,e(!0),ye(),document.removeEventListener("mouseup",xe,!0)}return g(()=>{document.removeEventListener("mouseup",xe,!0)}),{state:{active:w,focus:T,preventFocus:_,dragging:V,editable:I,classes:G,tabindex:P,attributes:X,roundValueFn:A,keyStep:F,trackLen:D,innerMin:R,innerMinRatio:K,innerMax:z,innerMaxRatio:j,positionProp:O,sizeProp:Q,isReversed:N},methods:{onActivate:function(l){a(l,v(l)),e(),_.value=!0,w.value=!0,document.addEventListener("mouseup",xe,!0)},onMobileClick:function(l){a(l,v(l)),e(!0)},onBlur:ye,onKeyup:function(a){$.includes(a.keyCode)&&e(!0)},getContent:function(e,a,l,t){const r=[];"transparent"!==d.innerTrackColor&&r.push(f("div",{key:"inner",class:oe.value,style:ie.value})),"transparent"!==d.selectionColor&&r.push(f("div",{key:"selection",class:Y.value,style:e.value})),!1!==d.markers&&r.push(f("div",{key:"marker",class:Z.value,style:pe.value})),t(r);const n=[s("div",{key:"trackC",class:ee.value,tabindex:a.value,...l.value},[f("div",{class:ne.value,style:ue.value},r)],"slide",I.value,()=>he.value)];if(!1!==d.markerLabels){n[!0===d.switchMarkerLabelsSide?"unshift":"push"](f("div",{key:"markerL",class:re.value},function(){if(void 0!==C["marker-label-group"])return C["marker-label-group"](be.value);const e=C["marker-label"]||x;return me.value.map(a=>e({marker:a,...be.value}))}()))}return n},getThumbRenderFn:function(e){const a=p(()=>!1!==_.value||T.value!==e.focusValue&&"both"!==T.value?"":" q-slider--focus"),l=p(()=>`q-slider__thumb q-slider__thumb${L.value} q-slider__thumb${L.value}-${!0===N.value?"rtl":"ltr"} absolute non-selectable`+a.value+(void 0!==e.thumbColor.value?` text-${e.thumbColor.value}`:"")),t=p(()=>({width:d.thumbSize,height:d.thumbSize,[O.value]:100*e.ratio.value+"%",zIndex:T.value===e.focusValue?2:void 0})),r=p(()=>void 0!==e.labelColor.value?` text-${e.labelColor.value}`:""),n=p(()=>function(e){if(!0===d.vertical)return null;const a=M.lang.rtl!==d.reverse?1-e:e;return{transform:`translateX(calc(${2*a-1} * ${d.thumbSize} / 2 + ${50-100*a}%))`}}(e.ratio.value)),u=p(()=>"q-slider__text"+(void 0!==e.labelTextColor.value?` text-${e.labelTextColor.value}`:""));return()=>{const a=[f("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[f("path",{d:d.thumbPath})]),f("div",{class:"q-slider__focus-ring fit"})];return!0!==d.label&&!0!==d.labelAlways||(a.push(f("div",{class:ae.value+" absolute fit no-pointer-events"+r.value},[f("div",{class:le.value,style:{minWidth:d.thumbSize}},[f("div",{class:te.value,style:n.value},[f("span",{class:u.value},e.label.value)])])])),void 0!==d.name&&!0!==d.disable&&q(a,"push")),f("div",{class:l.value,style:t.value,...e.getNodeData()},a)}},convertRatioToModel:function(e){const{min:a,max:l,step:t}=d;let r=a+e*(l-a);if(t>0){const e=(r-R.value)%t;r+=(Math.abs(e)>=t/2?(e<0?-1:1)*t:0)-e}return r=A.value(r),u(r,R.value,z.value)},convertModelToRatio:se,getDraggingRatio:function(e,a){const l=o(e),t=!0===d.vertical?u((l.top-a.top)/a.height,0,1):u((l.left-a.left)/a.width,0,1);return u(!0===N.value?1-t:t,K.value,j.value)}}}}const S=()=>({}),q=v({name:"QSlider",props:{...C,modelValue:{required:!0,default:null,validator:e=>"number"==typeof e||null===e},labelValue:[String,Number]},emits:["pan","update:modelValue","change"],setup(e,{emit:a}){const{proxy:{$q:l}}=m(),{state:t,methods:r}=M({updateValue:C,updatePosition:function(a,l=t.dragging.value){const n=r.getDraggingRatio(a,l);i.value=r.convertRatioToModel(n),o.value=!0!==e.snap||0===e.step?n:r.convertModelToRatio(i.value)},getDragging:function(){return n.value.getBoundingClientRect()},formAttrs:c(e)}),n=b(null),o=b(0),i=b(0);function s(){i.value=null===e.modelValue?t.innerMin.value:u(e.modelValue,t.innerMin.value,t.innerMax.value)}h(()=>`${e.modelValue}|${t.innerMin.value}|${t.innerMax.value}`,s),s();const v=p(()=>r.convertModelToRatio(i.value)),g=p(()=>!0===t.active.value?o.value:v.value),k=p(()=>{const a={[t.positionProp.value]:100*t.innerMinRatio.value+"%",[t.sizeProp.value]:100*(g.value-t.innerMinRatio.value)+"%"};return void 0!==e.selectionImg&&(a.backgroundImage=`url(${e.selectionImg}) !important`),a}),y=r.getThumbRenderFn({focusValue:!0,getNodeData:S,ratio:g,label:p(()=>void 0!==e.labelValue?e.labelValue:i.value),thumbColor:p(()=>e.thumbColor||e.color),labelColor:p(()=>e.labelColor),labelTextColor:p(()=>e.labelTextColor)}),x=p(()=>!0!==t.editable.value?{}:!0===l.platform.is.mobile?{onClick:r.onMobileClick}:{onMousedown:r.onActivate,onFocus:q,onBlur:r.onBlur,onKeydown:w,onKeyup:r.onKeyup});function C(l){i.value!==e.modelValue&&a("update:modelValue",i.value),!0===l&&a("change",i.value)}function q(){t.focus.value=!0}function w(a){if(!1===$.includes(a.keyCode))return;d(a);const l=([34,33].includes(a.keyCode)?10:1)*t.keyStep.value,r=([34,37,40].includes(a.keyCode)?-1:1)*(!0===t.isReversed.value?-1:1)*(!0===e.vertical?-1:1)*l;i.value=u(t.roundValueFn.value(i.value+r),t.innerMin.value,t.innerMax.value),C()}return()=>{const a=r.getContent(k,t.tabindex,x,e=>{e.push(y())});return f("div",{ref:n,class:t.classes.value+(null===e.modelValue?" q-slider--no-value":""),...t.attributes.value,"aria-valuenow":e.modelValue},a)}}});export{q as Q};
