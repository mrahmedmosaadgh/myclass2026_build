import{Q as e}from"./QSelect-Dkiz84LX.js";import{f as l,Q as o,n as a,k as t,bp as u}from"./app-DOc39CFu.js";import{f as d,k as s,M as i,J as n,b as r,Q as m,N as v,F as c,R as p}from"./vendor-DuKqz2x4.js";import"./rtl-Cr6c3OOr.js";import"./offline-BzIlwqNM.js";import"./i18n-DE5KxGn8.js";import"./ui-BITzTqrO.js";const V={class:"q-pa-md column gap-md"},b={key:0,class:"q-pa-sm bg-grey-2 rounded-borders"},y={class:"row items-center q-gutter-sm"},f={class:"row q-mt-sm q-col-gutter-sm"},q=["src"],x={key:1,class:"q-pa-sm bg-blue-1 rounded-borders"},g={key:0},k={key:1},U={key:2},S={class:"row justify-between q-mt-lg"},w={__name:"11SlideEditor",props:{modelValue:Object},emits:["update:modelValue","save"],setup(w,{emit:h}){const j=w,C=h,N=d(JSON.parse(JSON.stringify(j.modelValue||{}))),O=d(""),Q=d(null),T=[{label:"Video Slide",value:"video"},{label:"Question Slide",value:"question"}],J=[{label:"Multiple Choice",value:"multiple"},{label:"True / False",value:"truefalse"},{label:"Open Ended",value:"open"}];s(()=>j.modelValue,e=>{e&&(N.value=JSON.parse(JSON.stringify(e)))},{deep:!0}),s(N,e=>{C("update:modelValue",e)},{deep:!0});const M=()=>{var e,l;(null==(l=null==(e=N.value.video)?void 0:e.src)?void 0:l.startsWith("http"))&&(O.value=N.value.video.src)},R=()=>{const e=document.createElement("input");e.type="file",e.accept="video/*",e.onchange=e=>{const l=e.target.files[0];if(l){const e=URL.createObjectURL(l);O.value=e,N.value.video.src=l.name,N.value.video.file=l}},e.click()},E=()=>{const e=Q.value,{end:l,autoNext:o}=N.value.video;e&&l&&e.currentTime>=l&&(e.pause(),o&&C("nextSlide"))},_=()=>{N.value.question.options.push({text:"",correct:!1})},F=()=>{if("video"===N.value.type){const e=Q.value;e&&(e.currentTime=N.value.video.start||0,e.play())}else if("question"===N.value.type){const e=N.value.question;if(!e||!e.text)return void alert("No question text defined yet.");alert(`Question Preview:\n${e.text}`)}},L=()=>{C("save",N.value)};return(d,s)=>(n(),i("div",V,[r(e,{modelValue:N.value.type,"onUpdate:modelValue":s[0]||(s[0]=e=>N.value.type=e),options:T,label:"Slide Type",dense:"",filled:"",class:"q-mb-md"},null,8,["modelValue"]),"video"===N.value.type?(n(),i("div",b,[v("div",y,[r(l,{modelValue:N.value.video.src,"onUpdate:modelValue":s[1]||(s[1]=e=>N.value.video.src=e),label:"Video URL or local path",dense:"",filled:"",class:"col",onChange:M},null,8,["modelValue"]),r(o,{flat:"",dense:"",icon:"upload",color:"primary",onClick:R,title:"Select local video file"})]),v("div",f,[r(l,{modelValue:N.value.video.start,"onUpdate:modelValue":s[2]||(s[2]=e=>N.value.video.start=e),modelModifiers:{number:!0},type:"number",label:"Start (sec)",dense:"",outlined:"",class:"col"},null,8,["modelValue"]),r(l,{modelValue:N.value.video.end,"onUpdate:modelValue":s[3]||(s[3]=e=>N.value.video.end=e),modelModifiers:{number:!0},type:"number",label:"End (sec)",dense:"",outlined:"",class:"col"},null,8,["modelValue"])]),r(a,{modelValue:N.value.video.autoNext,"onUpdate:modelValue":s[4]||(s[4]=e=>N.value.video.autoNext=e),label:"Move to next slide automatically after video ends",color:"primary",class:"q-mt-md"},null,8,["modelValue"]),O.value?(n(),i("video",{key:0,ref_key:"videoRef",ref:Q,src:O.value,controls:"",class:"q-mt-md rounded-borders shadow-2",style:{width:"100%","max-height":"400px"},onTimeupdate:E},null,40,q)):m("",!0)])):"question"===N.value.type?(n(),i("div",x,[r(l,{modelValue:N.value.question.text,"onUpdate:modelValue":s[5]||(s[5]=e=>N.value.question.text=e),label:"Question Text",autogrow:"",dense:"",filled:"",class:"q-mb-sm"},null,8,["modelValue"]),r(e,{modelValue:N.value.question.type,"onUpdate:modelValue":s[6]||(s[6]=e=>N.value.question.type=e),options:J,label:"Question Type",dense:"",filled:"",class:"q-mb-sm"},null,8,["modelValue"]),"multiple"===N.value.question.type?(n(),i("div",g,[(n(!0),i(c,null,p(N.value.question.options,(e,a)=>(n(),i("div",{key:a,class:"row items-center q-gutter-sm q-mb-xs"},[r(l,{modelValue:e.text,"onUpdate:modelValue":l=>e.text=l,label:"Option",dense:"",filled:"",class:"col"},null,8,["modelValue","onUpdate:modelValue"]),r(t,{modelValue:e.correct,"onUpdate:modelValue":l=>e.correct=l,label:"Correct",color:"green"},null,8,["modelValue","onUpdate:modelValue"]),r(o,{flat:"",round:"",icon:"delete",color:"red",onClick:e=>(e=>{N.value.question.options.splice(e,1)})(a)},null,8,["onClick"])]))),128)),r(o,{flat:"",icon:"add",label:"Add Option",color:"primary",onClick:_})])):m("",!0),"truefalse"===N.value.question.type?(n(),i("div",k,[r(u,{modelValue:N.value.question.correct,"onUpdate:modelValue":s[7]||(s[7]=e=>N.value.question.correct=e),options:[{label:"True",value:!0},{label:"False",value:!1}],color:"primary",inline:""},null,8,["modelValue"])])):m("",!0),"open"===N.value.question.type?(n(),i("div",U,[r(l,{modelValue:N.value.question.answer,"onUpdate:modelValue":s[8]||(s[8]=e=>N.value.question.answer=e),label:"Correct Answer",dense:"",filled:""},null,8,["modelValue"])])):m("",!0)])):m("",!0),v("div",S,[r(o,{icon:"play_arrow",label:"Preview",color:"primary",onClick:F}),r(o,{icon:"save",label:"Save Slide",color:"green",onClick:L})])]))}};export{w as default};
