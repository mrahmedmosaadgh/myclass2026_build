import{r as e,s as t,p as a,f as s,c as l,h as r,g as d,Q as o,b as c,d as n}from"./app-DTyzyps1.js";import{Q as i}from"./QBadge-CkKjK8Tj.js";import{a7 as m,f as u,a as p,k as g,I as b,J as v,K as _,b as w,O as x,W as f,V as h,U as y,z as q,Q as V}from"./vendor-BJyC5yAd.js";import"./offline-BzIlwqNM.js";import"./i18n-BDgsCcB6.js";import"./ui-DFn3cvMd.js";const D={class:"row items-center q-gutter-sm"},S={class:"column"},k={class:"text-weight-bold text-grey-9"},C={class:"text-caption text-grey-6 text-weight-medium"},j={class:"row items-center"},I={class:"row q-col-gutter-sm q-mb-md"},z={class:"col-12"},T={class:"col-12"},U={class:"row q-col-gutter-xs items-center"},A={class:"col"},E={class:"col-4"},Q={class:"bg-grey-1 rounded-lg q-pa-sm border-grey-2 border"},R={class:"row items-center justify-between q-mb-sm"},O={class:"row items-center q-gutter-xs"},W={class:"row q-col-gutter-sm q-mb-sm text-caption text-grey-8 font-medium"},G={class:"col"},N={class:"text-weight-bold"},B={class:"col text-right"},F={class:"text-weight-bold"},J=e({__name:"SemesterCard",props:{semester:Object},setup(e){const J=e,K=m({name:J.semester.name,start_date:J.semester.start_date?J.semester.start_date.split("T")[0]:"",end_date:J.semester.end_date?J.semester.end_date.split("T")[0]:"",active:J.semester.active,total_weeks:J.semester.total_weeks||""}),L=u(J.semester.calculated_weeks||""),M=u(!1),H=p(()=>0===J.semester.calendar_count&&K.start_date&&K.end_date),P=()=>{if(K.start_date&&L.value){const e=new Date(K.start_date),t=new Date(e);t.setDate(e.getDate()+7*L.value-1),K.end_date=t.toISOString().split("T")[0],X()}},X=()=>{K.post(route("admin.academic_calendar.semester.update",J.semester.id),{preserveScroll:!0})},Y=()=>{K.active=!K.active,X()},Z=()=>{M.value=!0,K.post(route("admin.academic_calendar.semester.generate",J.semester.id),{preserveScroll:!0,onFinish:()=>{M.value=!1}})};return g(()=>J.semester.calculated_weeks,e=>{L.value=e}),(m,u)=>(v(),b(n,{flat:"",bordered:"",class:y([e.semester.active?"border-primary shadow-2":"border-grey-3 hover:shadow-1","transition-all duration-300 rounded-xl overflow-hidden"])},{default:_(()=>[w(s,{class:y([e.semester.active?"bg-blue-1":"bg-grey-1","row items-center justify-between q-py-sm"])},{default:_(()=>[x("div",D,[w(t,{size:"24px",color:"primary","text-color":"white","font-size":"10px",class:"text-weight-bold"},{default:_(()=>[f(" S"+h(e.semester.semester_number),1)]),_:1}),x("div",S,[x("span",k,h(e.semester.name),1),x("span",C,"ID: #"+h(e.semester.id),1)])]),x("div",j,[w(a,{"model-value":e.semester.active,"onUpdate:modelValue":Y,color:"primary",size:"md",label:"ACTIVE","left-label":"",class:"text-weight-bold text-caption tracking-tighter"},null,8,["model-value"])])]),_:1},8,["class"]),w(l),w(s,{class:"q-pa-md"},{default:_(()=>[x("div",I,[x("div",z,[w(r,{modelValue:q(K).start_date,"onUpdate:modelValue":u[0]||(u[0]=e=>q(K).start_date=e),type:"date",label:"Start Date",filled:"",dense:"",onChange:X,class:"text-caption"},null,8,["modelValue"])]),x("div",T,[x("div",U,[x("div",A,[w(r,{modelValue:q(K).end_date,"onUpdate:modelValue":u[1]||(u[1]=e=>q(K).end_date=e),type:"date",label:"End Date",filled:"",dense:"",onChange:X,class:"text-caption"},null,8,["modelValue"])]),x("div",E,[w(r,{modelValue:L.value,"onUpdate:modelValue":u[2]||(u[2]=e=>L.value=e),type:"number",label:"Weeks",filled:"",dense:"",onInput:P,class:"text-caption",suffix:"W"},null,8,["modelValue"])])])])]),x("div",Q,[x("div",R,[x("div",O,[x("div",{class:y([e.semester.calendar_count>0?"bg-green":"bg-amber","h-2 w-2 rounded-full"])},null,2),u[3]||(u[3]=x("span",{class:"text-caption text-weight-bold text-grey-7"},"CALENDAR STATUS",-1))]),w(i,{color:e.semester.calendar_count>0?"green-1":"amber-1","text-color":e.semester.calendar_count>0?"green-9":"amber-9",class:"text-weight-bold",dense:""},{default:_(()=>[f(h(e.semester.calendar_count>0?"CREATED":"MISSING"),1)]),_:1},8,["color","text-color"])]),x("div",W,[x("div",G,[u[4]||(u[4]=f("Records: ")),x("span",N,h(e.semester.calendar_count)+" days",1)]),x("div",B,[u[5]||(u[5]=f("Duration: ")),x("span",F,h(e.semester.calculated_days)+"d ("+h(e.semester.calculated_weeks)+"w)",1)])]),H.value?(v(),b(d,{key:0,dense:"",rounded:"",class:"bg-amber-1 text-amber-10 q-mb-sm text-caption"},{avatar:_(()=>[w(o,{name:"warning",color:"amber-9",size:"xs"})]),default:_(()=>[u[6]||(u[6]=f(" Dates changed or missing. Generate calendar now. "))]),_:1})):V("",!0),w(c,{onClick:Z,loading:M.value,color:e.semester.calendar_count>0?"grey-2":"primary","text-color":e.semester.calendar_count>0?"grey-9":"white",unelevated:"",class:"full-width text-weight-bold",size:"sm",label:e.semester.calendar_count>0?"Regenerate Calendar":"Create Calendar",icon:"event"},null,8,["loading","color","text-color","label"])])]),_:1})]),_:1},8,["class"]))}},[["__scopeId","data-v-c40668b9"]]);export{J as default};
