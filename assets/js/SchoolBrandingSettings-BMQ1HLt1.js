import{o as e,c as l,a as o,f as a,d as s,k as n,l as t,Q as i,m as r,p as c,N as d}from"./app-C-NJhdpe.js";import{Q as u}from"./QSelect-B3f0Rrq3.js";import{Q as m}from"./QFile-Df8jQ91k.js";import{Q as p}from"./QColor-AENRVZHO.js";import{Q as g}from"./QPopupProxy-D8p5Hvz_.js";import{f as v,a as b,a6 as _,k as f,H as h,I as y,J as V,M as k,b as w,y as S,L as q,O as C,Q as x,R as U,F as j,V as L,S as Q,U as P,_ as F}from"./vendor-CUZ9QTQV.js";import{_ as B}from"./AppLayout-ClCiCQFL.js";import{c as R}from"./copy-to-clipboard-DMC0mKNP.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";import"./rtl-Cr6c3OOr.js";import"./use-file-DLm3sfQB.js";import"./QSlider-BYqguEYs.js";import"./QTabs-C8Sz98qV.js";import"./QTab-C_vkYR0k.js";import"./QTabPanels-bY91sdlT.js";import"./use-panel-CGzbevm7.js";import"./use-render-cache-CmTcazfP.js";import"./QTabPanel-zhJc0Joi.js";const z={class:"q-pa-md"},A={class:"row q-col-gutter-md"},E={class:"col-12 col-md-6"},T={class:"q-mb-md"},$={key:0,class:"q-mt-sm"},D=["src"],I={class:"q-mb-md"},N={key:0,class:"q-mt-sm"},J=["src"],M={class:"q-mb-md"},O={class:"row q-gutter-xs q-mt-xs"},H=["onClick"],K={class:"q-mb-md"},X={class:"row q-gutter-xs q-mt-xs"},Y=["onClick"],Z={class:"q-mb-md"},G={class:"row q-gutter-xs q-mt-xs"},W=["onClick"],ee={class:"q-mb-md"},le={class:"col-12 col-md-6"},oe={class:"preview-content"},ae={key:0,class:"preview-logo"},se=["src"],ne={class:"preview-school-name"},te={class:"preview-form"},ie=e({__name:"SchoolBrandingSettings",props:{schools:Array},setup(e){const ie=e,re=v(ie.schools.length>0?ie.schools[0].id:null),ce=b(()=>ie.schools.find(e=>e.id===re.value)),de=_({school_name_en:"",school_name_ar:"",school_slug:"",colors:{primary:"#6366f1",secondary:"#8b5cf6",accent:"#ec4899"},login_page_settings:{show_particles:!0,animation_style:"fade",card_style:"glassmorphism"}}),ue=v(null),me=v(null),pe=v(null),ge=v(null),ve=v(""),be=["#6366f1","#8b5cf6","#ec4899","#f43f5e","#ef4444","#f97316","#f59e0b","#eab308","#84cc16","#22c55e","#10b981","#14b8a6","#06b6d4","#0ea5e9","#3b82f6"];function _e(e){const l=e.branding||{};de.school_name_en=l.school_name_en||e.name||"",de.school_name_ar=l.school_name_ar||e.name_ar||"",de.school_slug=l.school_slug||e.school_slug||"",de.colors=l.colors||de.colors,de.login_page_settings=l.login_page_settings||de.login_page_settings,pe.value=e.logo_url,ge.value=e.background_url,function(){if(!re.value)return;axios.get(route("admin.school-branding.login-link",re.value)).then(e=>{ve.value=e.data.url})}()}function fe(e){if(ue.value=e,e){const l=new FileReader;l.onload=e=>{pe.value=e.target.result},l.readAsDataURL(e),function(){if(!ue.value)return;const e=new FormData;e.append("logo",ue.value),F.post(route("admin.school-branding.upload-logo",re.value),e,{preserveScroll:!0,onSuccess:e=>{d.create({type:"positive",message:"Logo uploaded successfully",position:"top"});const l=e.props.schools.find(e=>e.id===re.value);l&&(pe.value=l.logo_url)},onError:e=>{d.create({type:"negative",message:e.logo||"Failed to upload logo",position:"top"})}})}()}}function he(e){if(me.value=e,e){const l=new FileReader;l.onload=e=>{ge.value=e.target.result},l.readAsDataURL(e),function(){if(!me.value)return;const e=new FormData;e.append("background",me.value),F.post(route("admin.school-branding.upload-background",re.value),e,{preserveScroll:!0,onSuccess:e=>{d.create({type:"positive",message:"Background uploaded successfully",position:"top"});const l=e.props.schools.find(e=>e.id===re.value);l&&(ge.value=l.background_url)},onError:e=>{d.create({type:"negative",message:e.background||"Failed to upload background",position:"top"})}})}()}}function ye(){de.put(route("admin.school-branding.update",re.value),{preserveScroll:!0,onSuccess:e=>{d.create({type:"positive",message:"Branding settings saved successfully",position:"top"});const l=e.props.schools.find(e=>e.id===re.value);l&&_e(l)},onError:()=>{d.create({type:"negative",message:"Failed to save branding settings",position:"top"})}})}function Ve(){R(ve.value).then(()=>{d.create({type:"positive",message:"Login link copied to clipboard!",position:"top",icon:"content_copy"})}).catch(()=>{d.create({type:"negative",message:"Failed to copy link",position:"top"})})}return f(re,e=>{const l=ie.schools.find(l=>l.id===e);l&&_e(l)}),ce.value&&_e(ce.value),(d,v)=>(y(),h(B,{title:"School Branding Settings"},{default:V(()=>[k("div",z,[k("div",A,[k("div",E,[w(r,{class:"q-mb-md"},{default:V(()=>[w(l,null,{default:V(()=>v[15]||(v[15]=[k("div",{class:"text-h6"},"School Branding Settings",-1),k("div",{class:"text-subtitle2 text-grey-7"},"Customize your school's login page",-1)])),_:1}),w(o),w(l,null,{default:V(()=>[w(u,{modelValue:re.value,"onUpdate:modelValue":v[0]||(v[0]=e=>re.value=e),options:e.schools,"option-value":"id","option-label":"name","emit-value":"","map-options":"",label:"Select School",outlined:"",class:"q-mb-md"},null,8,["modelValue","options"]),w(a,{modelValue:S(de).school_name_en,"onUpdate:modelValue":v[1]||(v[1]=e=>S(de).school_name_en=e),label:"School Name (English)",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),w(a,{modelValue:S(de).school_name_ar,"onUpdate:modelValue":v[2]||(v[2]=e=>S(de).school_name_ar=e),label:"School Name (Arabic)",outlined:"",class:"q-mb-md"},null,8,["modelValue"]),w(a,{modelValue:S(de).school_slug,"onUpdate:modelValue":v[3]||(v[3]=e=>S(de).school_slug=e),label:"School URL Slug",outlined:"",hint:"URL-safe identifier (e.g., al-noor-school)",class:"q-mb-md"},null,8,["modelValue"]),k("div",T,[v[16]||(v[16]=k("div",{class:"text-subtitle2 q-mb-sm"},"School Logo",-1)),w(m,{modelValue:ue.value,"onUpdate:modelValue":[v[4]||(v[4]=e=>ue.value=e),fe],label:"Upload Logo",outlined:"",accept:"image/jpeg,image/png,image/svg+xml","max-file-size":"2097152"},{prepend:V(()=>[w(s,{name:"image"})]),_:1},8,["modelValue"]),pe.value?(y(),q("div",$,[k("img",{src:pe.value,class:"logo-preview",alt:"Logo Preview"},null,8,D)])):C("",!0)]),k("div",I,[v[17]||(v[17]=k("div",{class:"text-subtitle2 q-mb-sm"},"Background Image",-1)),w(m,{modelValue:me.value,"onUpdate:modelValue":[v[5]||(v[5]=e=>me.value=e),he],label:"Upload Background",outlined:"",accept:"image/jpeg,image/png,image/webp","max-file-size":"5242880"},{prepend:V(()=>[w(s,{name:"wallpaper"})]),_:1},8,["modelValue"]),ge.value?(y(),q("div",N,[k("img",{src:ge.value,class:"background-preview",alt:"Background Preview"},null,8,J)])):C("",!0)]),k("div",M,[v[18]||(v[18]=k("div",{class:"text-subtitle2 q-mb-sm"},"Primary Color",-1)),w(a,{modelValue:S(de).colors.primary,"onUpdate:modelValue":v[7]||(v[7]=e=>S(de).colors.primary=e),outlined:"",rules:["anyColor"]},{append:V(()=>[w(s,{name:"colorize",class:"cursor-pointer"},{default:V(()=>[w(g,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:V(()=>[w(p,{modelValue:S(de).colors.primary,"onUpdate:modelValue":v[6]||(v[6]=e=>S(de).colors.primary=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),k("div",O,[(y(),q(j,null,x(be,e=>k("div",{key:e,class:"color-preset",style:U({backgroundColor:e}),onClick:l=>S(de).colors.primary=e},null,12,H)),64))])]),k("div",K,[v[19]||(v[19]=k("div",{class:"text-subtitle2 q-mb-sm"},"Secondary Color",-1)),w(a,{modelValue:S(de).colors.secondary,"onUpdate:modelValue":v[9]||(v[9]=e=>S(de).colors.secondary=e),outlined:"",rules:["anyColor"]},{append:V(()=>[w(s,{name:"colorize",class:"cursor-pointer"},{default:V(()=>[w(g,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:V(()=>[w(p,{modelValue:S(de).colors.secondary,"onUpdate:modelValue":v[8]||(v[8]=e=>S(de).colors.secondary=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),k("div",X,[(y(),q(j,null,x(be,e=>k("div",{key:e,class:"color-preset",style:U({backgroundColor:e}),onClick:l=>S(de).colors.secondary=e},null,12,Y)),64))])]),k("div",Z,[v[20]||(v[20]=k("div",{class:"text-subtitle2 q-mb-sm"},"Accent Color",-1)),w(a,{modelValue:S(de).colors.accent,"onUpdate:modelValue":v[11]||(v[11]=e=>S(de).colors.accent=e),outlined:"",rules:["anyColor"]},{append:V(()=>[w(s,{name:"colorize",class:"cursor-pointer"},{default:V(()=>[w(g,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:V(()=>[w(p,{modelValue:S(de).colors.accent,"onUpdate:modelValue":v[10]||(v[10]=e=>S(de).colors.accent=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),k("div",G,[(y(),q(j,null,x(be,e=>k("div",{key:e,class:"color-preset",style:U({backgroundColor:e}),onClick:l=>S(de).colors.accent=e},null,12,W)),64))])]),k("div",ee,[v[21]||(v[21]=k("div",{class:"text-subtitle2 q-mb-sm"},"Login Page Style",-1)),w(u,{modelValue:S(de).login_page_settings.card_style,"onUpdate:modelValue":v[12]||(v[12]=e=>S(de).login_page_settings.card_style=e),options:["glassmorphism","solid","gradient"],outlined:"",label:"Card Style"},null,8,["modelValue"])]),w(n,{modelValue:S(de).login_page_settings.show_particles,"onUpdate:modelValue":v[13]||(v[13]=e=>S(de).login_page_settings.show_particles=e),label:"Show Particle Effects"},null,8,["modelValue"])]),_:1}),w(o),w(t,{align:"right"},{default:V(()=>[w(i,{label:"Save Settings",color:"primary",onClick:ye,loading:S(de).processing},null,8,["loading"])]),_:1})]),_:1}),w(r,null,{default:V(()=>[w(l,null,{default:V(()=>[v[23]||(v[23]=k("div",{class:"text-h6 q-mb-md"},"School Login Link",-1)),w(a,{modelValue:ve.value,"onUpdate:modelValue":v[14]||(v[14]=e=>ve.value=e),outlined:"",readonly:"",label:"Login URL"},{append:V(()=>[w(i,{flat:"",round:"",dense:"",icon:"content_copy",onClick:Ve},{default:V(()=>[w(c,null,{default:V(()=>v[22]||(v[22]=[L("Copy to clipboard")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),k("div",le,[w(r,{class:"preview-card"},{default:V(()=>[w(l,null,{default:V(()=>[v[26]||(v[26]=k("div",{class:"text-h6 q-mb-md"},"Live Preview",-1)),k("div",{class:"preview-container",style:U({backgroundImage:ge.value?`url(${ge.value})`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundSize:"cover",backgroundPosition:"center"})},[k("div",{class:"preview-overlay",style:U({background:`linear-gradient(135deg, ${S(de).colors.primary}CC 0%, ${S(de).colors.secondary}CC 100%)`})},null,4),k("div",oe,[k("div",{class:Q(["preview-login-card",`card-style-${S(de).login_page_settings.card_style}`])},[pe.value?(y(),q("div",ae,[k("img",{src:pe.value,alt:"School Logo"},null,8,se)])):C("",!0),k("div",ne,P(S(de).school_name_en||"School Name"),1),k("div",te,[v[24]||(v[24]=k("div",{class:"preview-input"},null,-1)),v[25]||(v[25]=k("div",{class:"preview-input"},null,-1)),k("div",{class:"preview-button",style:U({backgroundColor:S(de).colors.primary})}," Login ",4)])],2)])],4)]),_:1})]),_:1})])])])]),_:1}))}},[["__scopeId","data-v-a66b9cad"]]);export{ie as default};
