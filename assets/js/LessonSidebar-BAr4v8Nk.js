import{p as e,e as l,q as t,Q as a}from"./app-BXm70mdJ.js";import{Q as o}from"./QPagination-CaPaC77P.js";import{a as i,f as s,k as r,L as d,I as n,M as c,O as u,F as v,Q as p,R as m,S as f,b as y,V as x,U as g,J as b}from"./vendor-DNM7Y6Xn.js";import"./offline-BzIlwqNM.js";import"./i18n-CBOKL2HS.js";import"./ui-BP0GJNn5.js";const k={class:"flex flex-wrap gap-3 justify-center p-1 scale-75"},C=["onClick"],S={key:0,class:"p-4"},h={class:"flex-1"},w={key:0,class:"flex justify-center"},_={key:0,class:"bg-white rounded-lg shadow-sm border border-gray-200"},j={key:0},A={key:1,class:"text-center py-6"},z=e({__name:"LessonSidebar",props:{sections:{type:Array,required:!0},currentSection:{type:String,default:""},slides:{type:Array,default:()=>[]},showDrawer:{type:Boolean,default:!1},canEdit:{type:Boolean,default:!0},activeSlide:{type:Object,default:null}},emits:["update:currentSection","update:currentSection_data","update:showDrawer","addSlide","deleteSlide","selectSlide"],setup(e,{emit:z}){const I=e,q=z,Q=i({get:()=>I.currentSection,set:e=>q("update:currentSection",e)}),V=s(0),F=s(null),B=s({}),D=e=>I.slides.filter(l=>l.section===e),L=i(()=>D(Q.value)),O=e=>{const l=e-1,t=L.value[l];t&&q("selectSlide",t)};r(()=>I.activeSlide,e=>{if(e&&L.value.length>0){const l=L.value.findIndex(l=>l===e||l.id&&l.id===e.id);-1!==l&&(F.value=l+1)}},{immediate:!0}),r(()=>I.currentSection,()=>{F.value=1,L.value.length>0&&q("selectSlide",L.value[0])}),i(()=>0===L.value.length?null:L.value[F.value-1]);const U=()=>{q("addSlide")},E=e=>D(e).length;return(i,s)=>(n(),d("div",null,[c("div",k,[(n(!0),d(v,null,p(e.sections,(e,t)=>(n(),d("div",{key:e.id,class:f(["cursor-pointer hover:scale-105 p-3 rounded-xl border-2 flex items-center gap-1 transition-all duration-200 shadow-sm",Q.value==e.id?"ring-2 ring-offset-2":"opacity-75 hover:opacity-100"]),style:m({backgroundColor:Q.value==e.id?e.bg:"white",borderColor:e.borderColor,ringColor:e.borderColor}),onClick:l=>{B.value=e,Q.value=e.id,V.value=t,i.$emit("update:currentSection_data",e)}},[c("div",{class:"w-9 h-9 rounded-full flex items-center justify-center shadow-sm",style:m({color:e.textColor,backgroundColor:Q.value==e.id?"rgba(255,255,255,0.9)":e.bg})},[y(l,{name:e.qIcon||e.icon,size:"12px"},null,8,["name"])],4),c("div",null,[c("div",{class:"text-base font-bold leading-tight",style:m({color:Q.value==e.id?e.textColor:"#374151"})},[c("span",{class:"inline-block w-5 h-5 text-center text-xs leading-5 rounded mr-1",style:m({backgroundColor:Q.value==e.id?"rgba(255,255,255,0.3)":e.bg,color:Q.value==e.id?e.textColor:"black"})},g(t+1),5),x(" "+g(e.title),1)],4),c("div",{class:"text-[10px] font-medium mt-0.5",style:m({color:Q.value==e.id?e.textColor:"#9CA3AF",opacity:Q.value==e.id?.8:1})},g(E(e.id))+" slides ",5)])],14,C))),128))]),B.value?(n(),d("div",S,[c("div",{class:"mb-1 p-1 rounded-lg flex items-center gap-3",style:m({backgroundColor:B.value.bg})},[c("div",{class:"w-8 h-8 rounded-full flex items-center justify-center bg-white/90",style:m({color:B.value.textColor})},[y(l,{name:B.value.qIcon||B.value.icon,size:"16px"},null,8,["name"])],4),c("div",h,[c("div",{class:"text-xs font-semibold opacity-80",style:m({color:B.value.textColor})}," Current Section ",4),c("div",{class:"text-sm font-bold",style:m({color:B.value.textColor})},g(B.value.title)+" ["+g(E(B.value.id))+" slide] ",5),F.value?(n(),d("div",w,[y(o,{modelValue:F.value,"onUpdate:modelValue":[s[0]||(s[0]=e=>F.value=e),O],max:L.value.length,"max-pages":7,"direction-links":"","boundary-links":"","icon-first":"skip_previous","icon-last":"skip_next","icon-prev":"fast_rewind","icon-next":"fast_forward",color:"primary","active-color":"primary"},null,8,["modelValue","max"]),y(a,{round:"",dense:"",color:"positive",icon:"add",size:"sm",onClick:U},{default:b(()=>[y(t,null,{default:b(()=>s[1]||(s[1]=[x("Add Slide")])),_:1})]),_:1})])):u("",!0)])],4),F.value?(n(),d("div",_,[L.value.length>0?(n(),d("div",j)):(n(),d("div",A,[y(l,{name:"layers",size:"2.5rem",color:"grey-4"}),s[2]||(s[2]=c("p",{class:"text-gray-400 text-sm mt-2 mb-3"},"No slides yet",-1)),y(a,{unelevated:"",color:"positive",icon:"add",label:"Add First Slide",size:"sm",onClick:U})]))])):u("",!0)])):u("",!0)]))}},[["__scopeId","data-v-ba7370fd"]]);export{z as default};
