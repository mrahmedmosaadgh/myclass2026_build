import{_ as e}from"./LucideIcon-DP3BSI4t.js";import{p as t}from"./app-Dccx8xF5.js";import{f as l,a as o,L as a,I as i,O as n,K as s,$ as d,S as r,b as m,M as u,R as p,F as c,Q as y,H as v,J as g}from"./vendor-EI0FRBVb.js";import b from"./ElementContent-CKrs3ZNW.js";import"./createLucideIcon-APVJ2SH-.js";import"./align-right-CnRMXp62.js";import"./underline-PDlIMkNx.js";import"./image-CpjPXLZL.js";import"./printer-DTcC0fi8.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./presentationStore-DWhX22Pw.js";import"./youtube_VideoPlayer-BVFTJdm-.js";import"./VideoPlayer-CKtYcbNX.js";import"./text_el-Ql4zo6hO.js";const V=["title"],f=["title"],h=t({__name:"DraggableWrapper",props:{modelValue:{type:Object,required:!0},readonly:{type:Boolean,default:!1},hideDragHandle:{type:Boolean,default:!1},hideSettings:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1}},emits:["update:modelValue","toggle-visibility","open-settings","delete-element"],setup(t,{emit:c}){const y=t,v=c,g=l(!1),b=l({x:0,y:0}),h=o(()=>g.value?"move":"grip"),j=o(()=>g.value?"Release to drop":"Drag to move"),x=e=>{!y.readonly&&y.modelValue.visible&&(g.value=!0,b.value={x:e.clientX,y:e.clientY},document.addEventListener("mousemove",_),document.addEventListener("mouseup",E))},_=e=>{if(!g.value)return;const t=e.clientX-b.value.x,l=e.clientY-b.value.y,o=e.target.closest(".canvas-editor");if(!o)return;const a=o.getBoundingClientRect(),i=t/a.width*100,n=l/a.height*100;v("update:modelValue",{...y.modelValue,x:Math.max(0,Math.min(100,y.modelValue.x+i)),y:Math.max(0,Math.min(100,y.modelValue.y+n))}),b.value={x:e.clientX,y:e.clientY}},E=()=>{g.value=!1,document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",E)};return(l,o)=>(i(),a("div",{class:"draggable-wrapper group relative",style:p({left:`${t.modelValue.x}%`,top:`${t.modelValue.y}%`,position:"absolute",opacity:t.modelValue.visible?1:.3,transform:`scale(${t.modelValue.visible?1:.95})`,transition:"opacity 0.3s ease, transform 0.3s ease",zIndex:g.value?50:10})},[t.hideDragHandle||t.readonly?n("",!0):(i(),a("div",{key:0,onDblclick:o[0]||(o[0]=e=>l.$emit("toggle-visibility")),class:r(["absolute -top-2 -left-2 w-8 h-8 rounded-full flex items-center justify-center cursor-move z-50 transition-all duration-200",g.value?"bg-indigo-600":"bg-gray-500 hover:bg-gray-600",t.modelValue.visible?"opacity-0 group-hover:opacity-100":"opacity-60"]),onMousedown:d(x,["stop"]),title:j.value},[m(e,{name:h.value,size:16,class:"text-white"},null,8,["name"])],42,V)),t.readonly?n("",!0):(i(),a("div",{key:1,class:r(["absolute -top-2 -right-2 flex gap-1 z-50 transition-all duration-200",t.modelValue.visible?"opacity-0 group-hover:opacity-100":"opacity-60"])},[u("button",{onClick:o[1]||(o[1]=e=>l.$emit("toggle-visibility")),class:"control-button",title:t.modelValue.visible?"Hide Element":"Show Element"},[m(e,{name:t.modelValue.visible?"eye":"eye-off",size:16,class:"text-gray-600"},null,8,["name"])],8,f),t.hideSettings?n("",!0):(i(),a("button",{key:0,onClick:o[2]||(o[2]=e=>l.$emit("open-settings")),class:"control-button",title:"Element Settings"},[m(e,{name:"settings",size:16,class:"text-gray-600"})])),t.hideDelete?n("",!0):(i(),a("button",{key:1,onClick:o[3]||(o[3]=e=>l.$emit("delete-element")),class:"control-button",title:"Delete Element"},[m(e,{name:"trash-2",size:16,class:"text-gray-600"})]))],2)),s(l.$slots,"default",{},void 0,!0)],4))}},[["__scopeId","data-v-6c17d3ba"]]),j={class:"elements-container"},x=t({__name:"CanvasEditor",props:{modelValue:{type:Object,required:!0,default:()=>({elements:[],backgroundImage:""})},presentationMode:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const l=e,o=t,n=(e,t)=>{const a=[...l.modelValue.elements],i=a.findIndex(t=>t.id===e);-1!==i&&(a[i]=t,o("update:modelValue",{...l.modelValue,elements:a}))};return(t,s)=>(i(),a("div",{class:r(["canvas-editor",{"presentation-mode":e.presentationMode,readonly:e.readonly}])},[u("div",j,[(i(!0),a(c,null,y(e.modelValue.elements,t=>(i(),v(h,{key:t.id,modelValue:t,readonly:e.presentationMode||e.readonly,"onUpdate:modelValue":e=>n(t.id,e),onToggleVisibility:e=>(e=>{const t=l.modelValue.elements.map(t=>t.id===e?{...t,visible:!t.visible}:t);o("update:modelValue",{...l.modelValue,elements:t})})(t.id),onOpenSettings:e=>{},onDeleteElement:e=>(e=>{const t=l.modelValue.elements.filter(t=>t.id!==e);o("update:modelValue",{...l.modelValue,elements:t})})(t.id)},{default:g(()=>[m(b,{element:t,readonly:e.presentationMode||e.readonly,"onUpdate:element":e=>n(t.id,e)},null,8,["element","readonly","onUpdate:element"])]),_:2},1032,["modelValue","readonly","onUpdate:modelValue","onToggleVisibility","onOpenSettings","onDeleteElement"]))),128))])],2))}},[["__scopeId","data-v-7098cb4d"]]);export{x as default};
