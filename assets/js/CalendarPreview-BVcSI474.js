import{Q as e}from"./QSpinnerGears-DFnfaAB_.js";import{r,Q as a}from"./app-YpH5vqWh.js";import{Q as t}from"./QTab-D15tnj4c.js";import{Q as l}from"./QTabs-CSqR0VCn.js";import{f as s,a as o,o as d,_ as n,N as i,J as c,b as u,R as b,K as m,F as g,Q as v,I as y,V as p,U as x,O as f}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";const w={class:"relative-position min-h-64"},h={key:0,class:"flex flex-center q-pa-xl"},k={key:1,class:"flex flex-center column q-pa-xl text-grey-5"},_={key:2,class:"column no-wrap q-gutter-y-lg"},j={class:"q-pa-md bg-grey-1 rounded-xl border-grey-2 border"},q={class:"calendar-grid"},C=["onClick"],D={class:"text-[10px] text-weight-bold opacity-60"},Q={class:"text-subtitle1 text-weight-black"},S={key:0,class:"text-[9px] text-weight-bold opacity-40"},T={class:"row q-gutter-md q-px-sm"},F={class:"text-caption text-weight-bold text-grey-7"},I=r({__name:"CalendarPreview",props:{yearId:Number},setup(r){const I=r,O=s(!0),V=s([]),$=s(null),z=[{label:"Work Day",colorClass:"bg-blue-1 border-blue-6"},{label:"Day Off",colorClass:"bg-grey-1 border-grey-4"},{label:"Activity",colorClass:"bg-green-1 border-green-6"},{label:"Test",colorClass:"bg-amber-1 border-amber-6"},{label:"Final Exam",colorClass:"bg-red-1 border-red-6"}],E=o(()=>{const e={};return V.value.forEach(r=>{var a;e[r.semester_id]||(e[r.semester_id]={id:r.semester_id,name:`S${(null==(a=r.semester)?void 0:a.semester_number)||"?"}`,count:0}),e[r.semester_id].count++}),Object.values(e)}),N=o(()=>$.value?V.value.filter(e=>e.semester_id===$.value):V.value);d(async()=>{try{const e=await n.get(`/admin/academic-calendar/year/${I.yearId}/calendar-data`);V.value=e.data,E.value.length>0&&($.value=E.value[0].id)}catch(e){console.error("Error loading calendar:",e)}finally{O.value=!1}});const U=e=>{switch(e.status){case 1:return"bg-blue-1 border-blue-6 text-blue-10 border";case 0:return"bg-grey-1 border-grey-4 text-grey-6 border";case 2:return"bg-green-1 border-green-6 text-green-10 border";case 3:return"bg-amber-1 border-amber-6 text-amber-10 border";case 4:return"bg-red-1 border-red-6 text-red-10 border";default:return"bg-white border-grey-3 text-grey-9 border"}},W=e=>new Date(e).getDate();return(r,s)=>(c(),i("div",w,[O.value?(c(),i("div",h,[u(e,{color:"primary",size:"80px"}),s[1]||(s[1]=b("div",{class:"text-grey-7 q-mt-md text-weight-bold"},"Organizing Calendar Data...",-1))])):0===V.value.length?(c(),i("div",k,[u(a,{name:"event_busy",size:"100px"}),s[2]||(s[2]=b("div",{class:"text-h6 q-mt-md"},"No calendar data found for this year.",-1)),s[3]||(s[3]=b("div",{class:"text-caption"},"Generate semester calendars to see results here.",-1))])):(c(),i("div",_,[u(l,{modelValue:$.value,"onUpdate:modelValue":s[0]||(s[0]=e=>$.value=e),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"left","narrow-indicator":""},{default:m(()=>[(c(!0),i(g,null,v(E.value,e=>(c(),y(t,{key:e.id,name:e.id,label:`${e.name} (${e.count}d)`,class:"text-weight-black"},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),b("div",j,[b("div",q,[(c(),i(g,null,v(["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e=>b("div",{key:e,class:"text-center text-weight-black text-caption text-grey-5 uppercase q-py-sm"},p(e),1)),64)),(c(!0),i(g,null,v(N.value,(e,r)=>{return c(),i("div",{key:r,class:x(["day-cell rounded-lg q-pa-xs column items-center justify-center cursor-pointer transition-all",U(e)]),onClick:r=>(e=>console.log("Day details:",e))(e)},[b("div",D,p((a=e.date,new Date(a).toLocaleDateString("en-US",{weekday:"short"}))),1),b("div",Q,p(W(e.date)),1),e.week_number?(c(),i("div",S,"W"+p(e.week_number),1)):f("",!0)],10,C);var a}),128))])]),b("div",T,[(c(),i(g,null,v(z,e=>b("div",{key:e.label,class:"row items-center q-gutter-xs"},[b("div",{class:x([e.colorClass,"w-3 h-3 rounded-sm border"])},null,2),b("span",F,p(e.label),1)])),64))])]))]))}},[["__scopeId","data-v-843a5b48"]]);export{I as default};
