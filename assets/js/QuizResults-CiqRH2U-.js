import{p as s,u as e,Q as l,d as t,e as i,n as a}from"./app-DXXarK7I.js";import{Q as r}from"./QCircularProgress-D62Pdt1Q.js";import{Q as u}from"./QBtnToggle-Lw6F7ljP.js";import{Q as o}from"./QBadge-ZjTd_Ty8.js";import{f as c,a as n,o as _,L as v,I as d,M as z,b as q,y as p,_ as m,U as f,J as g,F as b,Q as k,O as h,S as w,H as x}from"./vendor-EI0FRBVb.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";const Q={class:"quiz-results"},y={class:"quiz-results__header"},I={class:"quiz-results__header-content"},C={class:"quiz-results__title"},j={class:"quiz-results__summary"},S={class:"quiz-results__score-circle"},T={class:"quiz-results__score-value"},N={class:"quiz-results__score-label"},R={class:"quiz-results__stats-grid"},A={class:"quiz-results__stat"},B={class:"quiz-results__stat-value"},M={class:"quiz-results__stat"},P={class:"quiz-results__stat-value"},$={class:"quiz-results__stat"},H={class:"quiz-results__stat-value"},J={class:"quiz-results__actions"},L={class:"quiz-results__review"},V={class:"quiz-results__review-header"},E={class:"quiz-results__questions"},G={class:"quiz-results__question-header"},O={class:"quiz-results__question-number"},U=["innerHTML"],D={class:"quiz-results__options"},F={class:"quiz-results__option-label"},K={class:"quiz-results__option-text"},W={class:"quiz-results__option-icon"},X={key:0,class:"quiz-results__explanation"},Y={class:"quiz-results__explanation-header"},Z=s({__name:"QuizResults",props:{quizId:Number},setup(s){const Z=e(),ss=s,es=c({quizId:null,quizName:"",answers:{},questions:[],score:0,correctAnswers:0,totalQuestions:0,timeTaken:0}),ls=c("all"),ts=n(()=>"all"===ls.value?es.value.questions:es.value.questions.filter((s,e)=>{const l=is(s,e);return"correct"===ls.value?l:!l})),is=(s,e)=>{var l;const t=es.value.answers[e],i=null==(l=s.options)?void 0:l.find(s=>s.is_correct);return t===(null==i?void 0:i.id)},as=(s,e,l)=>{const t=es.value.answers[l]===s.id,i=s.is_correct;return{"quiz-results__option--correct":i,"quiz-results__option--incorrect":t&&!i,"quiz-results__option--selected":t}},rs=(s,e)=>({"quiz-results__question-card--correct":is(s,e),"quiz-results__question-card--incorrect":!is(s,e)}),us=s=>s>=90?"Excellent!":s>=80?"Great Job!":s>=70?"Good Work!":s>=60?"Not Bad!":"Keep Practicing!",os=()=>{sessionStorage.removeItem("quizResults"),m.visit(`/quizzes/${ss.quizId}/test`)};return _(()=>{(()=>{const s=sessionStorage.getItem("quizResults");s?es.value=JSON.parse(s):(Z.notify({type:"warning",message:"No quiz results found. Please take the quiz first.",icon:"warning"}),m.visit(`/quizzes/${ss.quizId}/test`))})()}),(s,e)=>(d(),v("div",Q,[z("div",y,[q(l,{flat:"",round:"",icon:"arrow_back",onClick:e[0]||(e[0]=s=>p(m).visit("/quizzes"))}),z("div",I,[z("h1",C,f(es.value.quizName),1),e[3]||(e[3]=z("p",{class:"quiz-results__subtitle"},"Quiz Results",-1))])]),z("div",j,[q(a,{class:"quiz-results__score-card"},{default:g(()=>[q(t,{class:"text-center"},{default:g(()=>{return[z("div",S,[q(r,{value:es.value.score,size:"180px",thickness:.12,color:(t=es.value.score,t>=80?"positive":t>=60?"warning":"negative"),"track-color":"grey-3","show-value":"",class:"quiz-results__progress"},{default:g(()=>[z("div",T,f(es.value.score)+"% ",1)]),_:1},8,["value","color"])]),z("h2",N,f(us(es.value.score)),1),z("div",R,[z("div",A,[q(i,{name:"check_circle",size:"32px",color:"positive"}),z("div",B,f(es.value.correctAnswers),1),e[4]||(e[4]=z("div",{class:"quiz-results__stat-label"},"Correct",-1))]),z("div",M,[q(i,{name:"cancel",size:"32px",color:"negative"}),z("div",P,f(es.value.totalQuestions-es.value.correctAnswers),1),e[5]||(e[5]=z("div",{class:"quiz-results__stat-label"},"Incorrect",-1))]),z("div",$,[q(i,{name:"schedule",size:"32px",color:"info"}),z("div",H,f((s=es.value.timeTaken,`${Math.floor(s/60)}:${String(s%60).padStart(2,"0")}`)),1),e[6]||(e[6]=z("div",{class:"quiz-results__stat-label"},"Time Taken",-1))])]),z("div",J,[q(l,{flat:"",label:"Back to Dashboard",icon:"arrow_back",onClick:e[1]||(e[1]=s=>p(m).visit("/quizzes"))}),q(l,{unelevated:"",color:"primary",label:"Retake Quiz",icon:"refresh",onClick:os})])];var s,t}),_:1})]),_:1})]),z("div",L,[z("div",V,[e[7]||(e[7]=z("h3",null,"Question Review",-1)),q(u,{modelValue:ls.value,"onUpdate:modelValue":e[2]||(e[2]=s=>ls.value=s),options:[{label:"All",value:"all"},{label:"Correct",value:"correct"},{label:"Incorrect",value:"incorrect"}],unelevated:"",dense:""},null,8,["modelValue"])]),z("div",E,[(d(!0),v(b,null,k(ts.value,(s,l)=>(d(),v("div",{key:s.id,class:"quiz-results__question-card"},[q(a,{class:w(rs(s,l))},{default:g(()=>[q(t,null,{default:g(()=>[z("div",G,[z("div",O," Question "+f(l+1),1),q(o,{color:is(s,l)?"positive":"negative",icon:is(s,l)?"check":"close",label:is(s,l)?"Correct":"Incorrect"},null,8,["color","icon","label"])]),z("div",{class:"quiz-results__question-text",innerHTML:s.question_text},null,8,U),z("div",D,[(d(!0),v(b,null,k(s.options,(s,e)=>(d(),v("div",{key:s.id,class:w(["quiz-results__option",as(s,0,l)])},[z("div",F,f(String.fromCharCode(65+e)),1),z("div",K,f(s.option_text),1),z("div",W,[s.is_correct?(d(),x(i,{key:0,name:"check_circle",color:"positive",size:"24px"})):es.value.answers[l]===s.id?(d(),x(i,{key:1,name:"cancel",color:"negative",size:"24px"})):h("",!0)])],2))),128))]),s.explanation?(d(),v("div",X,[z("div",Y,[q(i,{name:"lightbulb",color:"warning"}),e[8]||(e[8]=z("strong",null,"Explanation",-1))]),z("p",null,f(s.explanation),1)])):h("",!0)]),_:2},1024)]),_:2},1032,["class"])]))),128))])])]))}},[["__scopeId","data-v-4c838e7d"]]);export{Z as default};
