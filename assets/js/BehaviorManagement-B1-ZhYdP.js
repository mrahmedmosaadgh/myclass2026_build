import{o as e,u as a,Q as l,C as o,c as t,m as s,d as i,f as r,l as n,b as u,A as d,aP as p}from"./app-Cs5CKgHw.js";import{Q as c}from"./QBtnToggle-5HzBn6ma.js";import{Q as v}from"./QBadge-jxRwPSDj.js";import{Q as m}from"./QSelect-D-pA-eh-.js";import{f as g,a as y,o as b,af as f,N as h,J as _,b as V,O as x,Q as j,F as w,R as B,I as k,K as C,V as Q,W as U,U as A,y as N,_ as P}from"./vendor-nQjeLEvd.js";import T from"./BehaviorAIGeneratorDialog-DkuXlBp3.js";import"./offline-BzIlwqNM.js";import"./i18n-kquWfmcz.js";import"./ui-Bfjdq-TR.js";import"./rtl-Cr6c3OOr.js";import"./QSpace-Xg69Ss6f.js";import"./QStepperNavigation-Dh61x9DW.js";import"./QStepper-CTYenw8s.js";import"./use-panel-FmIc7Z0R.js";import"./use-render-cache-CmTcazfP.js";import"./QTd-DLUO5rKK.js";import"./QTable-DEHl3da8.js";import"./QMarkupTable-BjeGqCdI.js";import"./QLinearProgress-HhXIc2H5.js";import"./use-fullscreen-CZ7VjReR.js";const q={class:"p-6 space-y-6"},S={class:"flex justify-between items-center"},z={class:"flex gap-3"},M={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},D={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},E={class:"flex justify-between items-start mb-3"},I={class:"flex gap-2"},F={class:"text-xl font-bold text-gray-900 mb-2"},G={class:"flex items-center gap-2 mb-3"},O={key:0,class:"text-sm text-gray-600 mb-3"},R={class:"flex gap-2 mt-4"},W={key:0,class:"text-center py-12"},$={class:"text-h6"},H={class:"space-y-4"},J=e({__name:"BehaviorManagement",setup(e){const J=a(),K=g([]),L=g("en"),X=g("all"),Y=g(!1),Z=g(!1),ee=g(!1),ae=g(null),le=g(null),oe=g(!1),te=g(!1),se=g({name:"",name_ar:"",type:"positive",points:1,description:"",school_id:1}),ie=y(()=>"all"===X.value?K.value:K.value.filter(e=>e.type===X.value)),re=async()=>{try{const e=await P.get("/api/behaviors",{params:{school_id:1}});K.value=e.data}catch(e){J.notify({type:"negative",message:"Failed to load behaviors",position:"top"})}},ne=async()=>{var e,a;oe.value=!0;try{ae.value?(await P.put(`/api/behaviors/${ae.value.id}`,se.value),J.notify({type:"positive",message:"Behavior updated successfully",position:"top"})):(await P.post("/api/behaviors",se.value),J.notify({type:"positive",message:"Behavior created successfully",position:"top"})),pe(),re()}catch(l){J.notify({type:"negative",message:(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Failed to save behavior",position:"top"})}finally{oe.value=!1}},ue=async()=>{var e,a;te.value=!0;try{await P.delete(`/api/behaviors/${le.value.id}`),J.notify({type:"positive",message:"Behavior deleted successfully",position:"top"}),Z.value=!1,re()}catch(l){J.notify({type:"negative",message:(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Failed to delete behavior",position:"top"})}finally{te.value=!1}},de=()=>{re(),J.notify({type:"positive",message:"Behaviors created successfully via AI Generator!",icon:"auto_awesome",position:"top"})},pe=()=>{Y.value=!1,ae.value=null,se.value={name:"",name_ar:"",type:"positive",points:1,description:"",school_id:1}};return b(()=>{re()}),(e,a)=>{const g=f("Head");return _(),h(w,null,[V(g,{title:"Behavior Management"}),x("div",q,[x("div",S,[a[12]||(a[12]=x("div",null,[x("h1",{class:"text-3xl font-bold text-gray-900"},"ðŸŽ¯ Behavior Management"),x("p",{class:"text-gray-600 mt-1"},"Manage school-wide default behaviors")],-1)),x("div",z,[V(l,{color:"secondary",icon:"auto_awesome",label:"AI Bulk Generator",onClick:a[0]||(a[0]=e=>ee.value=!0),size:"lg",outline:"",class:"shadow-lg"}),V(l,{color:"primary",icon:"add",label:"Add Behavior",onClick:a[1]||(a[1]=e=>Y.value=!0),size:"lg",class:"shadow-lg"})])]),x("div",M,[V(c,{modelValue:L.value,"onUpdate:modelValue":a[2]||(a[2]=e=>L.value=e),options:[{label:"ðŸ‡¬ðŸ‡§ English",value:"en"},{label:"ðŸ‡¸ðŸ‡¦ Arabic",value:"ar"}],color:"primary","toggle-color":"primary",unelevated:""},null,8,["modelValue"]),V(c,{modelValue:X.value,"onUpdate:modelValue":a[3]||(a[3]=e=>X.value=e),options:[{label:"All",value:"all",icon:"apps"},{label:"âœ… Positive",value:"positive",icon:"thumb_up"},{label:"âŒ Negative",value:"negative",icon:"thumb_down"}],color:"secondary","toggle-color":"secondary",unelevated:""},null,8,["modelValue"])]),x("div",D,[(_(!0),h(w,null,B(ie.value,e=>(_(),k(s,{key:e.id,class:A(["shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer",{"border-l-4 border-green-500":"positive"===e.type,"border-l-4 border-red-500":"negative"===e.type}])},{default:C(()=>[V(t,null,{default:C(()=>[x("div",E,[x("div",I,[V(v,{color:"positive"===e.type?"green":"red",label:"positive"===e.type?"âœ… Positive":"âŒ Negative"},null,8,["color","label"]),e.teacher_id?(_(),k(v,{key:1,color:"purple",label:"âœï¸ Teacher Custom"})):(_(),k(v,{key:0,color:"blue",label:"ðŸ”’ School Default"}))])]),x("h3",F,Q("ar"===L.value&&e.name_ar?e.name_ar:e.name),1),x("div",G,[V(o,{color:e.points>0?"green":"red","text-color":"white",size:"lg",class:"font-bold"},{default:C(()=>[U(Q(e.points>0?"+":"")+Q(e.points)+" points ",1)]),_:2},1032,["color"])]),e.description?(_(),h("div",O," ðŸ“‚ "+Q(e.description),1)):j("",!0),x("div",R,[V(l,{icon:"edit",label:"Edit",color:"primary",outline:"",size:"sm",onClick:a=>(e=>{ae.value=e,se.value={name:e.name,name_ar:e.name_ar||"",type:e.type,points:e.points,description:e.description||"",school_id:e.school_id},Y.value=!0})(e)},null,8,["onClick"]),V(l,{icon:"delete",label:"Delete",color:"negative",outline:"",size:"sm",onClick:a=>(e=>{le.value=e,Z.value=!0})(e)},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),ie.value.length?j("",!0):(_(),h("div",W,[V(i,{name:"emoji_events",size:"4rem",color:"grey-5"}),a[13]||(a[13]=x("p",{class:"text-xl text-gray-600 mt-4"},"No behaviors yet",-1)),a[14]||(a[14]=x("p",{class:"text-gray-500"},'Click "Add Behavior" to create your first one',-1))])),V(u,{modelValue:Y.value,"onUpdate:modelValue":a[9]||(a[9]=e=>Y.value=e),persistent:""},{default:C(()=>[V(s,{style:{"min-width":"600px"}},{default:C(()=>[V(t,{class:"bg-primary text-white"},{default:C(()=>[x("div",$,Q(ae.value?"âœï¸ Edit Behavior":"âž• Add New Behavior"),1)]),_:1}),V(t,{class:"q-pt-md"},{default:C(()=>[x("div",H,[V(r,{modelValue:se.value.name,"onUpdate:modelValue":a[4]||(a[4]=e=>se.value.name=e),label:"ðŸ‡¬ðŸ‡§ Behavior Name (English)",outlined:"",rules:[e=>!!e||"English name is required"]},{prepend:C(()=>[V(i,{name:"translate"})]),_:1},8,["modelValue","rules"]),V(r,{modelValue:se.value.name_ar,"onUpdate:modelValue":a[5]||(a[5]=e=>se.value.name_ar=e),label:"ðŸ‡¸ðŸ‡¦ Behavior Name (Arabic)",outlined:"",dir:"rtl"},{prepend:C(()=>[V(i,{name:"translate"})]),_:1},8,["modelValue"]),V(m,{modelValue:se.value.type,"onUpdate:modelValue":a[6]||(a[6]=e=>se.value.type=e),options:[{label:"âœ… Positive",value:"positive"},{label:"âŒ Negative",value:"negative"}],label:"Behavior Type",outlined:"","emit-value":"","map-options":"",rules:[e=>!!e||"Type is required"]},{prepend:C(()=>[V(i,{name:"category"})]),_:1},8,["modelValue","rules"]),V(r,{modelValue:se.value.points,"onUpdate:modelValue":a[7]||(a[7]=e=>se.value.points=e),modelModifiers:{number:!0},type:"number",label:"Points",outlined:"",rules:[e=>null!==e&&""!==e||"Points are required"],hint:"Use positive numbers for rewards, negative for deductions"},{prepend:C(()=>[V(i,{name:"stars"})]),_:1},8,["modelValue","rules"]),V(r,{modelValue:se.value.description,"onUpdate:modelValue":a[8]||(a[8]=e=>se.value.description=e),label:"Category/Description (Optional)",outlined:""},{prepend:C(()=>[V(i,{name:"folder"})]),_:1},8,["modelValue"])])]),_:1}),V(n,{align:"right",class:"q-px-md q-pb-md"},{default:C(()=>[V(l,{flat:"",label:"Cancel",color:"grey",onClick:pe}),V(l,{label:ae.value?"Update":"Create",color:"primary",onClick:ne,loading:oe.value},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),V(u,{modelValue:Z.value,"onUpdate:modelValue":a[10]||(a[10]=e=>Z.value=e),persistent:""},{default:C(()=>[V(s,null,{default:C(()=>[V(t,{class:"row items-center"},{default:C(()=>[V(d,{icon:"delete",color:"negative","text-color":"white"}),a[15]||(a[15]=x("span",{class:"q-ml-sm"},"Are you sure you want to delete this behavior?",-1))]),_:1}),V(n,{align:"right"},{default:C(()=>[N(V(l,{flat:"",label:"Cancel",color:"grey"},null,512),[[p]]),V(l,{flat:"",label:"Delete",color:"negative",onClick:ue,loading:te.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),V(T,{modelValue:ee.value,"onUpdate:modelValue":a[11]||(a[11]=e=>ee.value=e),"school-id":1,onSuccess:de},null,8,["modelValue"])])],64)}}},[["__scopeId","data-v-61703afa"]]);export{J as default};
