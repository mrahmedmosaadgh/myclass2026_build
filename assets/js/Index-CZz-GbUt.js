import{f as e,b as a,d as t,Q as s,i as o,R as r,j as n,s as i,k as l,l as d}from"./app-NYt77MEb.js";import{Q as c}from"./QBadge-BeBayzBo.js";import{_ as m}from"./AppLayout-B3PyevP7.js";import{I as u,J as p,K as y,R as f,b as _,N as g,z as v,Q as x,y as h,O as b,W as k,V as w,F as j}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const C={class:"py-12"},S={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},z={key:0,class:"text-center py-8"},D={key:0,class:"text-grey-7 text-caption"},L={key:0},N={__name:"Index",props:{conversations:{type:Array,default:()=>[]}},setup(N){const Q=window.route,q=e=>{const a=new Date(e),t=new Date-a;return t<864e5?a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t<6048e5?a.toLocaleDateString([],{weekday:"short"}):a.toLocaleDateString([],{month:"short",day:"numeric"})},A=e=>{if(!e)return"primary";const a=["primary","secondary","accent","positive","negative","info","warning"];return a[e.split("").reduce((e,a)=>e+a.charCodeAt(0),0)%a.length]};return(I,R)=>(p(),u(m,{title:"Conversations"},{header:y(()=>R[0]||(R[0]=[f("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Conversations ",-1)])),default:y(()=>[f("div",C,[f("div",S,[_(t,{flat:"",bordered:"",class:"q-mb-md"},{default:y(()=>[_(e,{class:"flex justify-between items-center"},{default:y(()=>[R[1]||(R[1]=f("div",{class:"text-h5"},"Your Conversations",-1)),_(a,{color:"primary",to:v(Q)("conversations.create"),icon:"add",label:"New Conversation"},null,8,["to"])]),_:1})]),_:1}),0===N.conversations.length?(p(),g("div",z,[_(s,{name:"chat",size:"4em",color:"grey-5"}),R[2]||(R[2]=f("div",{class:"text-h6 q-mt-md"},"No conversations yet",-1)),R[3]||(R[3]=f("div",{class:"text-grey-7 q-mb-md"},"Start a new conversation to chat with someone",-1)),_(a,{color:"primary",to:v(Q)("conversations.create"),label:"Start a Conversation"},null,8,["to"])])):(p(),u(o,{key:1,bordered:"",separator:"",class:"rounded-borders"},{default:y(()=>[(p(!0),g(j,null,x(N.conversations,e=>h((p(),u(n,{key:e.id,to:v(Q)("conversations.show",e.id),clickable:""},{default:y(()=>[_(l,{avatar:""},{default:y(()=>[e.is_group?(p(),u(i,{key:0},{default:y(()=>[_(s,{name:"group",size:"md"})]),_:1})):(p(),u(i,{key:1,color:A(e.name)},{default:y(()=>{return[k(w((a=e.name,a?a.split(" ").map(e=>e[0]).join("").toUpperCase():"?")),1)];var a}),_:2},1032,["color"]))]),_:2},1024),_(l,null,{default:y(()=>[_(d,{class:"flex justify-between"},{default:y(()=>[f("span",null,w(e.name),1),e.latest_message?(p(),g("span",D,w(q(e.latest_message.created_at)),1)):b("",!0)]),_:2},1024),e.latest_message?(p(),u(d,{key:0,caption:"",lines:"1"},{default:y(()=>[e.latest_message.is_mine?(p(),g("span",L,"You: ")):b("",!0),k(" "+w(e.latest_message.body),1)]),_:2},1024)):(p(),u(d,{key:1,caption:""},{default:y(()=>R[4]||(R[4]=[f("span",{class:"text-grey-7"},"No messages yet",-1)])),_:1}))]),_:2},1024),e.unread_count>0?(p(),u(l,{key:0,side:""},{default:y(()=>[_(c,{color:"primary",rounded:""},{default:y(()=>[k(w(e.unread_count),1)]),_:2},1024)]),_:2},1024)):b("",!0)]),_:2},1032,["to"])),[[r]])),128))]),_:1}))])])]),_:1}))}};export{N as default};
