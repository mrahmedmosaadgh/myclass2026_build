import{r as e}from"./app-CmR0nRZC.js";import{f as l,a,o as s,k as t,N as u,J as n,R as r,y as o,O as i,F as v,Q as p,U as c,V as y,ac as d}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";const m={class:"typing-area"},f=["disabled"],g={key:0,class:"typing-prompt"},k=e({__name:"TypingArea",props:{lessonText:{type:String,required:!0}},emits:["key-press","exercise-complete"],setup(e,{emit:k}){const x=e,h=k,T=l(null),j=l(""),_=l([]),b=l(0),w=l(!1),B=l(null),D=a(()=>b.value===x.lessonText.length),F=e=>{if(B.value||(B.value=Date.now()),"Backspace"!==e.key){if(1===e.key.length&&(h("key-press",e.key),_.value[b.value]=e.key,b.value++,D.value)){const e=(Date.now()-B.value)/6e4,l=x.lessonText.split(" ").length,a=Math.round(l/e);h("exercise-complete",{wpm:a,accuracy:M(),errors:R()})}}else b.value>0&&(b.value--,_.value[b.value]=null)},M=()=>{const e=_.value.filter((e,l)=>e===x.lessonText[l]).length;return Math.round(e/x.lessonText.length*100)},R=()=>_.value.filter((e,l)=>e&&e!==x.lessonText[l]).length;return s(()=>{var e;null==(e=T.value)||e.focus()}),t(D,e=>{var l;e&&(null==(l=T.value)||l.blur())}),(l,a)=>(n(),u("div",m,[r("div",{class:c(["lesson-text",{blur:!w.value}])},[(n(!0),u(v,null,p(e.lessonText,(e,l)=>(n(),u("span",{key:l,class:c({current:b.value===l,correct:_.value[l]===e,incorrect:_.value[l]&&_.value[l]!==e})},y(e),3))),128))],2),o(r("input",{ref_key:"inputRef",ref:T,type:"text",class:"typing-input","onUpdate:modelValue":a[0]||(a[0]=e=>j.value=e),onKeydown:F,onFocus:a[1]||(a[1]=e=>w.value=!0),onBlur:a[2]||(a[2]=e=>w.value=!1),disabled:D.value},null,40,f),[[d,j.value]]),w.value?i("",!0):(n(),u("div",g," Click here to start typing "))]))}},[["__scopeId","data-v-257c50c8"]]);export{k as default};
