import{p as e,u as l,d as a,g as t,Q as o,a as s,n as i,m as u,b as n,aD as d}from"./app-Dccx8xF5.js";import{Q as r}from"./QSelect-aOnYle6d.js";import{Q as c}from"./QTable-D3jRDWU3.js";import{f as p,a as m,o as v,H as y,I as f,J as b,M as k,b as V,L as g,y as h,O as _,F as C,Q as w,U as x,x as S,Z as j}from"./vendor-EI0FRBVb.js";import{_ as U}from"./AppLayout-CE2yjlSr.js";import"./offline-BzIlwqNM.js";import"./i18n-BbKXhR_S.js";import"./ui-B__oX9pK.js";import"./rtl-Cr6c3OOr.js";import"./QMarkupTable-D7D4aY0S.js";import"./QLinearProgress-BYmNETNA.js";import"./use-fullscreen-CBorX6t8.js";const O={class:"q-pa-md"},J={class:"row q-col-gutter-md items-center"},N={class:"p-0 flex scale-75"},T={key:0},q={key:1},I={class:"row q-col-gutter-md"},P={class:"text-h6"},A={class:"text-caption text-grey"},Q={key:0,class:"q-mt-sm"},L={key:1,class:"q-mt-xs text-grey-7"},z={key:2,class:"q-mt-xs text-blue-7 text-caption"},F={class:"q-mt-xs text-caption"},$={class:"text-h6"},E={key:0,class:"text-negative q-mt-sm"},M={key:0,class:"text-negative q-mt-sm"},D=e({__name:"ProjectTracker",setup(e){const D=l(),B=p([]),H=p(!1),R=p(!1),Z=p({id:null,title:"",path:"",description:"",priority:"",type:"",status:"",notes:""}),G=p({search:"",status:null,type:null,priority:null}),K=["todo","in_progress","done"],W=["UI","Backend","Feature"],X=["low","medium","high"],Y=[{name:"title",label:"Title",field:"title",align:"left"},{name:"type",label:"Type",field:"type",align:"left"},{name:"priority",label:"Priority",field:"priority",align:"left"},{name:"status",label:"Status",field:"status",align:"left"},{name:"updated_at",label:"Updated",field:"updated_at",align:"left"},{name:"actions",label:"Actions",field:"actions",align:"right"}],ee=async()=>{H.value=!0;const{data:e}=await j.get("/api/project-tasks");B.value=e,H.value=!1},le=m(()=>B.value.filter(e=>{const l=!G.value.search||e.title.toLowerCase().includes(G.value.search.toLowerCase())||e.description&&e.description.toLowerCase().includes(G.value.search.toLowerCase()),a=!G.value.status||e.status===G.value.status,t=!G.value.type||e.type===G.value.type,o=!G.value.priority||e.priority===G.value.priority;return l&&a&&t&&o}));function ae(e=null){Z.value=e?{...e}:{id:null,title:"",path:"",description:"",priority:"",type:"",status:"",notes:""},R.value=!0}async function te(){Z.value.id?await j.put(`/api/project-tasks/${Z.value.id}`,Z.value):await j.post("/api/project-tasks",Z.value),R.value=!1,ee()}async function oe(e){await j.delete(`/api/project-tasks/${e}`),ee()}async function se(e){await j.put(`/api/project-tasks/${e.id}`,{...e,status:"done"}),ee()}const ie=p(!1),ue=p(""),ne=p(""),de=p(!1),re=p(""),ce=p("");function pe(){const e=JSON.stringify(B.value,null,2);navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{D.notify({type:"positive",message:"Tasks copied as JSON to clipboard."})},()=>{D.notify({type:"negative",message:"Clipboard write failed."})}):window.prompt("Copy JSON:",e)}function me(){ue.value="",ne.value=""}function ve(){let e;ne.value="";try{e=JSON.parse(ue.value)}catch(l){return void(ne.value="Invalid JSON.")}if(Array.isArray(e)){for(const l of e)if(!l.title||!l.type||!l.status)return void(ne.value="Each task must have title, type, and status.");B.value=e,ie.value=!1,me(),D.notify({type:"positive",message:"Tasks imported from JSON."})}else ne.value="JSON must be an array of tasks."}function ye(){re.value="",ce.value=""}function fe(){let e;ce.value="";try{e=JSON.parse(re.value)}catch(l){return void(ce.value="Invalid JSON.")}if("object"==typeof e&&!Array.isArray(e)&&e){for(const l of Object.keys(Z.value))""!==Z.value[l]&&null!==Z.value[l]||!e[l]||(Z.value[l]=e[l]);de.value=!1,ye(),D.notify({type:"positive",message:"Form fields filled from JSON."})}else ce.value="JSON must be a single task object."}return v(ee),(e,l)=>(f(),y(U,{title:"Project Tracker"},{default:b(()=>[k("div",O,[V(i,{flat:"",bordered:""},{default:b(()=>[V(a,null,{default:b(()=>[k("div",J,[V(t,{modelValue:G.value.search,"onUpdate:modelValue":l[0]||(l[0]=e=>G.value.search=e),label:"Search",class:"col",dense:""},null,8,["modelValue"]),V(r,{modelValue:G.value.status,"onUpdate:modelValue":l[1]||(l[1]=e=>G.value.status=e),options:K,label:"Status",class:"col",dense:"",clearable:""},null,8,["modelValue"]),V(r,{modelValue:G.value.type,"onUpdate:modelValue":l[2]||(l[2]=e=>G.value.type=e),options:W,label:"Type",class:"col",dense:"",clearable:""},null,8,["modelValue"]),V(r,{modelValue:G.value.priority,"onUpdate:modelValue":l[3]||(l[3]=e=>G.value.priority=e),options:X,label:"Priority",class:"col",dense:"",clearable:""},null,8,["modelValue"]),k("div",N,[V(o,{color:"primary",label:"Add Task",onClick:l[4]||(l[4]=e=>ae()),class:"q-ml-sm"}),V(o,{color:"secondary",label:"Export as JSON",onClick:pe,class:"q-ml-sm"})])])]),_:1}),V(s),V(a,null,{default:b(()=>[h(D).screen.gt.sm?(f(),g("div",T,[V(c,{rows:le.value,columns:Y,"row-key":"id",flat:"",dense:"",loading:H.value},{"body-cell-actions":b(e=>[V(o,{size:"sm",icon:"edit",onClick:l=>ae(e.row),flat:""},null,8,["onClick"]),V(o,{size:"sm",icon:"delete",color:"negative",onClick:l=>oe(e.row.id),flat:""},null,8,["onClick"]),"done"!==e.row.status?(f(),y(o,{key:0,size:"sm",icon:"check_circle",color:"positive",onClick:l=>se(e.row),flat:""},null,8,["onClick"])):_("",!0)]),_:1},8,["rows","loading"])])):(f(),g("div",q,[k("div",I,[(f(!0),g(C,null,w(le.value,e=>(f(),g("div",{key:e.id,class:"col-12"},[V(i,{class:"q-mb-md"},{default:b(()=>[V(a,null,{default:b(()=>[k("div",P,x(e.title),1),k("div",A,x(e.type)+" | "+x(e.priority||"no priority")+" | "+x(e.status),1),e.description?(f(),g("div",Q,x(e.description),1)):_("",!0),e.notes?(f(),g("div",L,x(e.notes),1)):_("",!0),e.path?(f(),g("div",z,x(e.path),1)):_("",!0),k("div",F,"Updated: "+x(e.updated_at),1)]),_:2},1024),V(u,{align:"right"},{default:b(()=>[V(o,{size:"sm",icon:"edit",onClick:l=>ae(e),flat:""},null,8,["onClick"]),V(o,{size:"sm",icon:"delete",color:"negative",onClick:l=>oe(e.id),flat:""},null,8,["onClick"]),"done"!==e.status?(f(),y(o,{key:0,size:"sm",icon:"check_circle",color:"positive",onClick:l=>se(e),flat:""},null,8,["onClick"])):_("",!0)]),_:2},1024)]),_:2},1024)]))),128))])]))]),_:1})]),_:1})]),V(n,{modelValue:R.value,"onUpdate:modelValue":l[13]||(l[13]=e=>R.value=e)},{default:b(()=>[V(i,{style:{"min-width":"350px"}},{default:b(()=>[V(a,null,{default:b(()=>[k("div",$,x(Z.value.id?"Edit Task":"Add Task"),1)]),_:1}),V(a,null,{default:b(()=>[V(t,{modelValue:Z.value.title,"onUpdate:modelValue":l[5]||(l[5]=e=>Z.value.title=e),label:"Title",dense:""},null,8,["modelValue"]),V(t,{modelValue:Z.value.path,"onUpdate:modelValue":l[6]||(l[6]=e=>Z.value.path=e),label:"Path",dense:""},null,8,["modelValue"]),V(t,{modelValue:Z.value.description,"onUpdate:modelValue":l[7]||(l[7]=e=>Z.value.description=e),label:"Description",dense:""},null,8,["modelValue"]),V(r,{modelValue:Z.value.priority,"onUpdate:modelValue":l[8]||(l[8]=e=>Z.value.priority=e),options:X,label:"Priority",dense:""},null,8,["modelValue"]),V(r,{modelValue:Z.value.type,"onUpdate:modelValue":l[9]||(l[9]=e=>Z.value.type=e),options:W,label:"Type",dense:""},null,8,["modelValue"]),V(r,{modelValue:Z.value.status,"onUpdate:modelValue":l[10]||(l[10]=e=>Z.value.status=e),options:K,label:"Status",dense:""},null,8,["modelValue"]),V(t,{modelValue:Z.value.notes,"onUpdate:modelValue":l[11]||(l[11]=e=>Z.value.notes=e),label:"Notes",type:"textarea",dense:""},null,8,["modelValue"]),V(o,{color:"secondary",label:"Import JSON to Form",onClick:l[12]||(l[12]=e=>de.value=!0),class:"q-mt-md"})]),_:1}),V(u,{align:"right"},{default:b(()=>[S(V(o,{flat:"",label:"Cancel"},null,512),[[d]]),V(o,{color:"primary",label:"Save",onClick:te})]),_:1})]),_:1})]),_:1},8,["modelValue"]),V(n,{modelValue:de.value,"onUpdate:modelValue":l[15]||(l[15]=e=>de.value=e)},{default:b(()=>[V(i,{style:{"min-width":"350px"}},{default:b(()=>[V(a,null,{default:b(()=>l[18]||(l[18]=[k("div",{class:"text-h6"},"Import JSON to Form",-1)])),_:1}),V(a,null,{default:b(()=>[V(t,{modelValue:re.value,"onUpdate:modelValue":l[14]||(l[14]=e=>re.value=e),type:"textarea",label:"Paste JSON here",autogrow:""},null,8,["modelValue"]),ce.value?(f(),g("div",E,x(ce.value),1)):_("",!0)]),_:1}),V(u,{align:"right"},{default:b(()=>[S(V(o,{flat:"",label:"Cancel",onClick:ye},null,512),[[d]]),V(o,{color:"primary",label:"Import",onClick:fe})]),_:1})]),_:1})]),_:1},8,["modelValue"]),V(n,{modelValue:ie.value,"onUpdate:modelValue":l[17]||(l[17]=e=>ie.value=e)},{default:b(()=>[V(i,{style:{"min-width":"400px"}},{default:b(()=>[V(a,null,{default:b(()=>l[19]||(l[19]=[k("div",{class:"text-h6"},"Import Tasks from JSON",-1)])),_:1}),V(a,null,{default:b(()=>[V(t,{modelValue:ue.value,"onUpdate:modelValue":l[16]||(l[16]=e=>ue.value=e),type:"textarea",label:"Paste JSON here",autogrow:""},null,8,["modelValue"]),ne.value?(f(),g("div",M,x(ne.value),1)):_("",!0)]),_:1}),V(u,{align:"right"},{default:b(()=>[S(V(o,{flat:"",label:"Cancel",onClick:me},null,512),[[d]]),V(o,{color:"primary",label:"Import",onClick:ve})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}},[["__scopeId","data-v-bb9d4de5"]]);export{D as default};
