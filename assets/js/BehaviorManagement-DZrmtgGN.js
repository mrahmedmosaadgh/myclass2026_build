import{r as e,u as a,b as l,G as o,f as t,d as s,Q as i,h as r,o as n,e as u,s as d,aS as p}from"./app-CmR0nRZC.js";import{Q as v}from"./QBtnToggle-CXNjn7Dn.js";import{Q as c}from"./QBadge-BkyG8a2n.js";import{Q as m}from"./QSelect-CiD02PIi.js";import{f as g,a as y,o as f,af as b,N as h,J as _,b as x,R as V,O as w,F as j,Q as B,I as k,K as Q,V as C,W as U,U as A,y as N,_ as S}from"./vendor-BWKGNkNB.js";import T from"./BehaviorAIGeneratorDialog-DLBI66y-.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./rtl-Cr6c3OOr.js";import"./QSpace-DLpWPxtA.js";import"./QStepperNavigation-DxpGK3kM.js";import"./QStepper-BgYcKVtw.js";import"./use-panel-CkLmuBWI.js";import"./use-render-cache-CmTcazfP.js";import"./QTd-BfUBupf2.js";import"./QTable-twXUsOYs.js";import"./QMarkupTable-D7EQqc1V.js";import"./QLinearProgress-CQupa4Ep.js";import"./use-fullscreen-DVo7i5vz.js";const q={class:"p-6 space-y-6"},z={class:"flex justify-between items-center"},D={class:"flex gap-3"},E={class:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},M={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},P={class:"flex justify-between items-start mb-3"},I={class:"flex gap-2"},F={class:"text-xl font-bold text-gray-900 mb-2"},G={class:"flex items-center gap-2 mb-3"},O={key:0,class:"text-sm text-gray-600 mb-3"},R={class:"flex gap-2 mt-4"},$={key:0,class:"text-center py-12"},H={class:"text-h6"},J={class:"space-y-4"},K=e({__name:"BehaviorManagement",setup(e){const K=a(),L=g([]),W=g("en"),X=g("all"),Y=g(!1),Z=g(!1),ee=g(!1),ae=g(null),le=g(null),oe=g(!1),te=g(!1),se=g({name:"",name_ar:"",type:"positive",points:1,description:"",school_id:1}),ie=y(()=>"all"===X.value?L.value:L.value.filter(e=>e.type===X.value)),re=async()=>{try{const e=await S.get("/api/behaviors",{params:{school_id:1}});L.value=e.data}catch(e){K.notify({type:"negative",message:"Failed to load behaviors",position:"top"})}},ne=async()=>{var e,a;oe.value=!0;try{ae.value?(await S.put(`/api/behaviors/${ae.value.id}`,se.value),K.notify({type:"positive",message:"Behavior updated successfully",position:"top"})):(await S.post("/api/behaviors",se.value),K.notify({type:"positive",message:"Behavior created successfully",position:"top"})),pe(),re()}catch(l){K.notify({type:"negative",message:(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Failed to save behavior",position:"top"})}finally{oe.value=!1}},ue=async()=>{var e,a;te.value=!0;try{await S.delete(`/api/behaviors/${le.value.id}`),K.notify({type:"positive",message:"Behavior deleted successfully",position:"top"}),Z.value=!1,re()}catch(l){K.notify({type:"negative",message:(null==(a=null==(e=l.response)?void 0:e.data)?void 0:a.message)||"Failed to delete behavior",position:"top"})}finally{te.value=!1}},de=()=>{re(),K.notify({type:"positive",message:"Behaviors created successfully via AI Generator!",icon:"auto_awesome",position:"top"})},pe=()=>{Y.value=!1,ae.value=null,se.value={name:"",name_ar:"",type:"positive",points:1,description:"",school_id:1}};return f(()=>{re()}),(e,a)=>{const g=b("Head");return _(),h(j,null,[x(g,{title:"Behavior Management"}),V("div",q,[V("div",z,[a[12]||(a[12]=V("div",null,[V("h1",{class:"text-3xl font-bold text-gray-900"},"ðŸŽ¯ Behavior Management"),V("p",{class:"text-gray-600 mt-1"},"Manage school-wide default behaviors")],-1)),V("div",D,[x(l,{color:"secondary",icon:"auto_awesome",label:"AI Bulk Generator",onClick:a[0]||(a[0]=e=>ee.value=!0),size:"lg",outline:"",class:"shadow-lg"}),x(l,{color:"primary",icon:"add",label:"Add Behavior",onClick:a[1]||(a[1]=e=>Y.value=!0),size:"lg",class:"shadow-lg"})])]),V("div",E,[x(v,{modelValue:W.value,"onUpdate:modelValue":a[2]||(a[2]=e=>W.value=e),options:[{label:"ðŸ‡¬ðŸ‡§ English",value:"en"},{label:"ðŸ‡¸ðŸ‡¦ Arabic",value:"ar"}],color:"primary","toggle-color":"primary",unelevated:""},null,8,["modelValue"]),x(v,{modelValue:X.value,"onUpdate:modelValue":a[3]||(a[3]=e=>X.value=e),options:[{label:"All",value:"all",icon:"apps"},{label:"âœ… Positive",value:"positive",icon:"thumb_up"},{label:"âŒ Negative",value:"negative",icon:"thumb_down"}],color:"secondary","toggle-color":"secondary",unelevated:""},null,8,["modelValue"])]),V("div",M,[(_(!0),h(j,null,B(ie.value,e=>(_(),k(s,{key:e.id,class:A(["shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer",{"border-l-4 border-green-500":"positive"===e.type,"border-l-4 border-red-500":"negative"===e.type}])},{default:Q(()=>[x(t,null,{default:Q(()=>[V("div",P,[V("div",I,[x(c,{color:"positive"===e.type?"green":"red",label:"positive"===e.type?"âœ… Positive":"âŒ Negative"},null,8,["color","label"]),e.teacher_id?(_(),k(c,{key:1,color:"purple",label:"âœï¸ Teacher Custom"})):(_(),k(c,{key:0,color:"blue",label:"ðŸ”’ School Default"}))])]),V("h3",F,C("ar"===W.value&&e.name_ar?e.name_ar:e.name),1),V("div",G,[x(o,{color:e.points>0?"green":"red","text-color":"white",size:"lg",class:"font-bold"},{default:Q(()=>[U(C(e.points>0?"+":"")+C(e.points)+" points ",1)]),_:2},1032,["color"])]),e.description?(_(),h("div",O," ðŸ“‚ "+C(e.description),1)):w("",!0),V("div",R,[x(l,{icon:"edit",label:"Edit",color:"primary",outline:"",size:"sm",onClick:a=>(e=>{ae.value=e,se.value={name:e.name,name_ar:e.name_ar||"",type:e.type,points:e.points,description:e.description||"",school_id:e.school_id},Y.value=!0})(e)},null,8,["onClick"]),x(l,{icon:"delete",label:"Delete",color:"negative",outline:"",size:"sm",onClick:a=>(e=>{le.value=e,Z.value=!0})(e)},null,8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),ie.value.length?w("",!0):(_(),h("div",$,[x(i,{name:"emoji_events",size:"4rem",color:"grey-5"}),a[13]||(a[13]=V("p",{class:"text-xl text-gray-600 mt-4"},"No behaviors yet",-1)),a[14]||(a[14]=V("p",{class:"text-gray-500"},'Click "Add Behavior" to create your first one',-1))])),x(u,{modelValue:Y.value,"onUpdate:modelValue":a[9]||(a[9]=e=>Y.value=e),persistent:""},{default:Q(()=>[x(s,{style:{"min-width":"600px"}},{default:Q(()=>[x(t,{class:"bg-primary text-white"},{default:Q(()=>[V("div",H,C(ae.value?"âœï¸ Edit Behavior":"âž• Add New Behavior"),1)]),_:1}),x(t,{class:"q-pt-md"},{default:Q(()=>[V("div",J,[x(r,{modelValue:se.value.name,"onUpdate:modelValue":a[4]||(a[4]=e=>se.value.name=e),label:"ðŸ‡¬ðŸ‡§ Behavior Name (English)",outlined:"",rules:[e=>!!e||"English name is required"]},{prepend:Q(()=>[x(i,{name:"translate"})]),_:1},8,["modelValue","rules"]),x(r,{modelValue:se.value.name_ar,"onUpdate:modelValue":a[5]||(a[5]=e=>se.value.name_ar=e),label:"ðŸ‡¸ðŸ‡¦ Behavior Name (Arabic)",outlined:"",dir:"rtl"},{prepend:Q(()=>[x(i,{name:"translate"})]),_:1},8,["modelValue"]),x(m,{modelValue:se.value.type,"onUpdate:modelValue":a[6]||(a[6]=e=>se.value.type=e),options:[{label:"âœ… Positive",value:"positive"},{label:"âŒ Negative",value:"negative"}],label:"Behavior Type",outlined:"","emit-value":"","map-options":"",rules:[e=>!!e||"Type is required"]},{prepend:Q(()=>[x(i,{name:"category"})]),_:1},8,["modelValue","rules"]),x(r,{modelValue:se.value.points,"onUpdate:modelValue":a[7]||(a[7]=e=>se.value.points=e),modelModifiers:{number:!0},type:"number",label:"Points",outlined:"",rules:[e=>null!==e&&""!==e||"Points are required"],hint:"Use positive numbers for rewards, negative for deductions"},{prepend:Q(()=>[x(i,{name:"stars"})]),_:1},8,["modelValue","rules"]),x(r,{modelValue:se.value.description,"onUpdate:modelValue":a[8]||(a[8]=e=>se.value.description=e),label:"Category/Description (Optional)",outlined:""},{prepend:Q(()=>[x(i,{name:"folder"})]),_:1},8,["modelValue"])])]),_:1}),x(n,{align:"right",class:"q-px-md q-pb-md"},{default:Q(()=>[x(l,{flat:"",label:"Cancel",color:"grey",onClick:pe}),x(l,{label:ae.value?"Update":"Create",color:"primary",onClick:ne,loading:oe.value},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),x(u,{modelValue:Z.value,"onUpdate:modelValue":a[10]||(a[10]=e=>Z.value=e),persistent:""},{default:Q(()=>[x(s,null,{default:Q(()=>[x(t,{class:"row items-center"},{default:Q(()=>[x(d,{icon:"delete",color:"negative","text-color":"white"}),a[15]||(a[15]=V("span",{class:"q-ml-sm"},"Are you sure you want to delete this behavior?",-1))]),_:1}),x(n,{align:"right"},{default:Q(()=>[N(x(l,{flat:"",label:"Cancel",color:"grey"},null,512),[[p]]),x(l,{flat:"",label:"Delete",color:"negative",onClick:ue,loading:te.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),x(T,{modelValue:ee.value,"onUpdate:modelValue":a[11]||(a[11]=e=>ee.value=e),"school-id":1,onSuccess:de},null,8,["modelValue"])])],64)}}},[["__scopeId","data-v-61703afa"]]);export{K as default};
