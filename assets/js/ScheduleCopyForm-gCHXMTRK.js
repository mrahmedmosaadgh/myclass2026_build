import{d as e,e as a,Q as l,a as t,g as o,l as d,q as s,m as u,n,b as r,aD as m}from"./app-BXm70mdJ.js";import{Q as i}from"./QSpace-Bu8V-QDa.js";import{Q as p}from"./QSelect-CnZtzPIC.js";import{Q as c}from"./QForm-DyZk5PSh.js";import{u as v}from"./schoolData-lzO9rVwn.js";import{a as _,f as y,k as f,H as b,I as V,J as g,b as h,M as j,x as w,V as C,U as k,$ as S,O as U}from"./vendor-DNM7Y6Xn.js";import"./offline-BzIlwqNM.js";import"./i18n-CBOKL2HS.js";import"./ui-BP0GJNn5.js";import"./rtl-Cr6c3OOr.js";const x={class:"text-h6"},q={__name:"ScheduleCopyForm",props:{modelValue:{type:Boolean,default:!1},editData:{type:Object,default:null},schools:{type:Array,default:()=>[]},academicYears:{type:Array,default:()=>[]},semesters:{type:Array,default:()=>[]},loadingSchools:{type:Boolean,default:!1},loadingYears:{type:Boolean,default:!1},loadingSemesters:{type:Boolean,default:!1},saving:{type:Boolean,default:!1}},emits:["update:modelValue","submit"],setup(q,{emit:D}){const A=v(),I=q,Q=D,B=_({get:()=>I.modelValue,set:e=>Q("update:modelValue",e)}),N=_(()=>{var e;return!!(null==(e=I.editData)?void 0:e.id)}),Y=[{label:"Draft",value:"draft"},{label:"Pending",value:"pending"},{label:"Active",value:"active"},{label:"Archived",value:"archived"}],E=()=>({name:"",description:"",school_id:A.schoolId||null,academic_year_id:A.academicYearId||null,semester_id:A.semesterId||null,week_number:null,copy_date:null,status:"draft",notes:"",auto_generate:!0}),F=y(E());f(()=>I.editData,e=>{F.value=e?{...E(),...e,copy_date:e.copy_date?e.copy_date.split("T")[0]:null}:E()},{immediate:!0}),f(B,e=>{e?N.value||(F.value.school_id=A.schoolId||F.value.school_id,F.value.academic_year_id=A.academicYearId||F.value.academic_year_id,F.value.semester_id=A.semesterId||F.value.semester_id):F.value=E()});const M=()=>{F.value.name&&Q("submit",{...F.value,isEdit:N.value})};return(v,_)=>(V(),b(r,{modelValue:B.value,"onUpdate:modelValue":_[7]||(_[7]=e=>B.value=e),persistent:""},{default:g(()=>[h(n,{style:{"min-width":"500px","max-width":"600px"}},{default:g(()=>[h(e,{class:"row items-center q-pb-none"},{default:g(()=>[j("div",x,[h(a,{name:N.value?"edit":"add_circle",class:"q-mr-sm"},null,8,["name"]),C(" "+k(N.value?"Edit Schedule Copy":"Create Schedule Copy"),1)]),h(i),w(h(l,{icon:"close",flat:"",round:"",dense:""},null,512),[[m]])]),_:1}),h(t,{class:"q-my-md"}),h(e,{class:"q-pt-none"},{default:g(()=>[h(c,{onSubmit:S(M,["prevent"]),class:"q-gutter-md"},{default:g(()=>[h(o,{modelValue:F.value.name,"onUpdate:modelValue":_[0]||(_[0]=e=>F.value.name=e),label:"Copy Name *",outlined:"",dense:"",rules:[e=>!!e||"Name is required"]},{prepend:g(()=>[h(a,{name:"label"})]),_:1},8,["modelValue","rules"]),h(o,{modelValue:F.value.description,"onUpdate:modelValue":_[1]||(_[1]=e=>F.value.description=e),label:"Description",outlined:"",dense:"",type:"textarea",rows:"2"},{prepend:g(()=>[h(a,{name:"description"})]),_:1},8,["modelValue"]),h(o,{modelValue:F.value.week_number,"onUpdate:modelValue":_[2]||(_[2]=e=>F.value.week_number=e),modelModifiers:{number:!0},label:"Starting Week Number",outlined:"",dense:"",type:"number",min:"1",max:"52"},{prepend:g(()=>[h(a,{name:"view_week"})]),_:1},8,["modelValue"]),h(o,{modelValue:F.value.copy_date,"onUpdate:modelValue":_[3]||(_[3]=e=>F.value.copy_date=e),label:"Copy Date",outlined:"",dense:"",type:"date"},{prepend:g(()=>[h(a,{name:"event"})]),_:1},8,["modelValue"]),N.value?(V(),b(p,{key:0,modelValue:F.value.status,"onUpdate:modelValue":_[4]||(_[4]=e=>F.value.status=e),options:Y,label:"Status",outlined:"",dense:"","emit-value":"","map-options":""},{prepend:g(()=>[h(a,{name:"flag"})]),_:1},8,["modelValue"])):U("",!0),h(o,{modelValue:F.value.notes,"onUpdate:modelValue":_[5]||(_[5]=e=>F.value.notes=e),label:"Notes",outlined:"",dense:"",type:"textarea",rows:"2"},{prepend:g(()=>[h(a,{name:"note"})]),_:1},8,["modelValue"]),N.value?U("",!0):(V(),b(d,{key:1,modelValue:F.value.auto_generate,"onUpdate:modelValue":_[6]||(_[6]=e=>F.value.auto_generate=e),label:"Auto-generate schedule entries from subject-teacher assignments",color:"primary"},{default:g(()=>[h(s,null,{default:g(()=>_[8]||(_[8]=[C(" Creates schedule records based on classes_per_week for each subject-teacher assignment ")])),_:1})]),_:1},8,["modelValue"]))]),_:1})]),_:1}),h(t),h(u,{align:"right",class:"q-pa-md"},{default:g(()=>[w(h(l,{flat:"",label:"Cancel",color:"grey"},null,512),[[m]]),h(l,{label:N.value?"Update":"Create",color:"primary",loading:q.saving,onClick:M},null,8,["label","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]))}};export{q as default};
