import{r as e,u as l,h as a,b as s,Q as t,s as o,t as r}from"./app-NYt77MEb.js";import{d}from"./vuedraggable.umd-DshT_Vng.js";import{f as i,o as n,N as u,J as c,R as m,b as g,O as p,W as v,F as f,Q as b,V as y,K as x,z as h,U as w,y as k,ac as _}from"./vendor-BWKGNkNB.js";import"./offline-BzIlwqNM.js";import"./i18n-B0T1C7j3.js";import"./ui-B7TfxbV_.js";import"./index-SlSKjXnq.js";const C={class:"flex flex-col h-full bg-gray-50"},N={class:"bg-white p-4 border-b flex items-center justify-between shadow-sm"},V={class:"flex items-center gap-4"},j={class:"flex gap-2"},L={class:"flex-1 flex overflow-hidden"},z={key:0,class:"w-64 bg-white border-r flex flex-col shadow-lg"},U={class:"p-4 border-b bg-indigo-50"},D={class:"font-bold text-indigo-900 flex items-center gap-2"},G={class:"flex-1 overflow-y-auto p-2"},S={class:"flex items-center justify-between"},A={class:"flex-1 min-w-0"},E={class:"font-bold text-sm text-gray-800 truncate"},O={class:"text-xs text-gray-500"},q={class:"flex gap-1"},Q={class:"p-3 border-t bg-gray-50"},$={class:"w-64 bg-white border-r flex flex-col z-10 shadow-lg"},F={class:"p-4 border-b bg-gray-50"},I={class:"font-bold text-gray-700 flex items-center gap-2"},J={class:"flex-1 overflow-y-auto p-2 bg-gray-100/50"},K={class:"bg-white p-3 rounded-lg shadow-sm border border-gray-200 cursor-move hover:border-blue-400 hover:shadow-md transition-all flex items-center gap-3"},M={class:"text-sm font-medium text-gray-800 truncate"},R={class:"flex-1 overflow-y-auto p-6 bg-slate-100"},T={key:0,class:"h-full flex flex-col items-center justify-center text-gray-400"},W={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 items-start"},B={class:"p-3 border-b bg-gray-50 flex items-center justify-between group-header"},H=["onUpdate:modelValue"],P={class:"p-2 min-h-[150px] bg-white"},X={class:"bg-blue-50 p-2 rounded-lg border border-blue-100 cursor-move flex items-center gap-2 hover:bg-blue-100 transition-colors"},Y={class:"text-sm font-medium text-blue-900 truncate"},Z={class:"p-2 bg-gray-50 border-t text-xs text-gray-500 text-center"},ee=e({__name:"StudentGrouping",props:{students:{type:Array,required:!0},savedLayouts:{type:Array,default:()=>[]},editingLayout:{type:Object,default:null}},emits:["save","close","delete"],setup(e,{emit:ee}){const le=l(),ae=e,se=ee,te=i(""),oe=i([]),re=i([]),de=i(null);n(()=>{ae.editingLayout?ie(ae.editingLayout):re.value=[...ae.students]});const ie=e=>{de.value=e.id,te.value=e.name,oe.value=e.groups.map(e=>({id:Date.now()+Math.random(),name:e.name,students:ae.students.filter(l=>e.student_ids.includes(l.id))}));const l=new Set;oe.value.forEach(e=>{e.students.forEach(e=>l.add(e.id))}),re.value=ae.students.filter(e=>!l.has(e.id))},ne=()=>{de.value=null,te.value="",oe.value=[],re.value=[...ae.students]},ue=()=>{oe.value.push({id:Date.now(),name:`Group ${oe.value.length+1}`,students:[]})},ce=()=>{if(!te.value)return;const e={id:de.value||Date.now().toString(),name:te.value,groups:oe.value.map(e=>({name:e.name,student_ids:e.students.map(e=>e.id)}))};se("save",e)};return(l,i)=>(c(),u("div",C,[m("div",N,[m("div",V,[g(a,{modelValue:te.value,"onUpdate:modelValue":i[0]||(i[0]=e=>te.value=e),placeholder:"Layout Name (e.g., Lab Groups)",dense:"",outlined:"",class:"w-64",rules:[e=>!!e||"Name is required"]},null,8,["modelValue","rules"]),g(s,{color:"primary",icon:"add",label:"Add Group",flat:"",onClick:ue})]),m("div",j,[g(s,{flat:"",label:"Cancel",onClick:i[1]||(i[1]=e=>se("close")),color:"grey-7"}),g(s,{color:"primary",icon:"save",label:"Save Layout",onClick:ce,disable:!te.value||0===oe.value.length},null,8,["disable"])])]),m("div",L,[e.savedLayouts.length>0?(c(),u("div",z,[m("div",U,[m("h3",D,[g(t,{name:"folder"}),i[3]||(i[3]=v(" Saved Layouts "))])]),m("div",G,[(c(!0),u(f,null,b(e.savedLayouts,e=>{var l;return c(),u("div",{key:e.id,class:w(["mb-2 p-3 rounded-lg border transition-all cursor-pointer",de.value===e.id?"bg-indigo-100 border-indigo-400":"bg-gray-50 border-gray-200 hover:border-indigo-300 hover:bg-indigo-50"])},[m("div",S,[m("div",A,[m("div",E,y(e.name),1),m("div",O,y((null==(l=e.groups)?void 0:l.length)||0)+" groups",1)]),m("div",q,[g(s,{flat:"",round:"",dense:"",size:"sm",icon:"edit",color:"primary",onClick:l=>(e=>{ie(e)})(e)},{default:x(()=>[g(r,null,{default:x(()=>i[4]||(i[4]=[v("Edit")])),_:1})]),_:2},1032,["onClick"]),g(s,{flat:"",round:"",dense:"",size:"sm",icon:"delete",color:"negative",onClick:l=>(e=>{le.dialog({title:"Delete Layout",message:`Are you sure you want to delete "${e.name}"? This action cannot be undone.`,cancel:!0,persistent:!0,ok:{label:"Delete",color:"negative",flat:!0}}).onOk(()=>{se("delete",e.id),de.value===e.id&&ne()})})(e)},{default:x(()=>[g(r,null,{default:x(()=>i[5]||(i[5]=[v("Delete")])),_:1})]),_:2},1032,["onClick"])])])],2)}),128))]),m("div",Q,[g(s,{flat:"",dense:"",color:"primary",icon:"add",label:"New Layout",class:"w-full",onClick:ne})])])):p("",!0),m("div",$,[m("div",F,[m("h3",I,[g(t,{name:"person_off"}),v(" Unassigned ("+y(re.value.length)+") ",1)])]),m("div",J,[g(h(d),{modelValue:re.value,"onUpdate:modelValue":i[2]||(i[2]=e=>re.value=e),group:"students","item-key":"id",class:"flex flex-col gap-2 min-h-[100px]",animation:200,"ghost-class":"opacity-50"},{item:x(({element:e})=>[m("div",K,[g(o,{size:"sm",color:"blue-100","text-color":"blue-800","font-size":"12px"},{default:x(()=>{var l,a;return[v(y(null==(l=e.firstName)?void 0:l[0])+y(null==(a=e.lastName)?void 0:a[0]),1)]}),_:2},1024),m("div",M,y(e.firstName)+" "+y(e.lastName),1)])]),_:1},8,["modelValue"])])]),m("div",R,[0===oe.value.length?(c(),u("div",T,[g(t,{name:"groups",size:"4rem",class:"mb-4 opacity-50"}),i[6]||(i[6]=m("p",{class:"text-lg"},"No groups created yet.",-1)),g(s,{flat:"",color:"primary",label:"Create your first group",onClick:ue})])):(c(),u("div",W,[(c(!0),u(f,null,b(oe.value,(e,l)=>(c(),u("div",{key:e.id,class:"bg-white rounded-xl shadow-sm border border-gray-200 flex flex-col overflow-hidden transition-all hover:shadow-md"},[m("div",B,[k(m("input",{"onUpdate:modelValue":l=>e.name=l,class:"bg-transparent font-bold text-gray-700 border-none focus:ring-0 p-0 w-full",placeholder:"Group Name"},null,8,H),[[_,e.name]]),g(s,{flat:"",round:"",dense:"",color:"negative",icon:"close",size:"sm",class:"opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>(e=>{const l=oe.value[e].students;re.value.push(...l),oe.value.splice(e,1)})(l)},null,8,["onClick"])]),m("div",P,[g(h(d),{modelValue:e.students,"onUpdate:modelValue":l=>e.students=l,group:"students","item-key":"id",class:"flex flex-col gap-2 h-full min-h-[100px]",animation:200,"ghost-class":"opacity-50"},{item:x(({element:e})=>[m("div",X,[g(o,{size:"xs",color:"blue-600","text-color":"white"},{default:x(()=>{var l;return[v(y(null==(l=e.firstName)?void 0:l[0]),1)]}),_:2},1024),m("span",Y,y(e.firstName)+" "+y(e.lastName),1)])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),m("div",Z,y(e.students.length)+" students ",1)]))),128))]))])])]))}},[["__scopeId","data-v-e1678e2f"]]);export{ee as default};
