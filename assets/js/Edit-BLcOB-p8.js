import{o as e,u as t,c as l,Q as s,a,m as o,f as i,C as r,g as d,h as n,i as u,d as c,j as m}from"./app-BwCflFkV.js";import{Q as v}from"./QSelect-Cyosk05W.js";import{Q as f}from"./QForm-BCWodDs-.js";import{r as p,f as b,a as y,H as g,I as x,J as _,M as h,b as q,U as j,O as V,L,V as w,Q as k,F as U,_ as O}from"./vendor-CUZ9QTQV.js";import{_ as C}from"./AppLayout-ClCiCQFL.js";import"./offline-BzIlwqNM.js";import"./i18n-CP46N9fu.js";import"./ui-LrZmvB2D.js";import"./rtl-Cr6c3OOr.js";const Q={class:"q-pa-md"},S={class:"row items-center justify-between"},E={class:"text-subtitle2"},A={class:"row q-col-gutter-md"},B={class:"col-12 col-md-8"},F={class:"q-mb-md"},I={class:"q-mb-md"},z={class:"q-mb-md"},D={class:"row q-col-gutter-md"},M={class:"col-12 col-md-6"},P={class:"col-12 col-md-6"},T={class:"q-mt-md"},$={class:"col-12 col-md-4"},H={class:"section-context"},J={class:"text-h6 text-primary"},W={class:"text-caption text-grey-7 q-mt-xs"},G={class:"text-caption text-grey-7"},K={class:"lesson-preview"},N={class:"text-subtitle1 text-primary"},R={key:0,class:"text-caption text-grey-7 q-mt-xs"},X={key:1,class:"q-mt-md row q-col-gutter-xs"},Y={key:0,class:"col-auto"},Z={key:1,class:"col-auto"},ee={class:"text-caption text-grey-7 q-mt-sm"},te={class:"row justify-end q-gutter-sm"},le=e({__name:"Edit",props:{lesson:{type:Object,required:!0},errors:{type:Object,default:()=>({})}},setup(e){var le,se,ae;const oe=e,ie=t(),re=p({title:oe.lesson.title,text:oe.lesson.text||"",order:oe.lesson.order,duration:(null==(le=oe.lesson.data)?void 0:le.duration)||null,difficulty:(null==(se=oe.lesson.data)?void 0:se.difficulty)||null}),de=b((null==(ae=oe.lesson.data)?void 0:ae.objectives)?oe.lesson.data.objectives.join("\n"):""),ne=b(!1),ue=[{label:"Beginner",value:"beginner"},{label:"Intermediate",value:"intermediate"},{label:"Advanced",value:"advanced"}],ce=y(()=>de.value?de.value.split("\n").map(e=>e.trim()).filter(e=>e.length>0):[]),me=e=>({beginner:"green-8",intermediate:"orange-8",advanced:"red-8"}[e]||"grey-8"),ve=()=>{ne.value=!0;const e={title:re.title,text:re.text,order:re.order,data:{}};re.duration&&(e.data.duration=re.duration),re.difficulty&&(e.data.difficulty=re.difficulty),ce.value.length>0&&(e.data.objectives=ce.value),O.put(route("course-management.lessons.update",oe.lesson.id),e,{onSuccess:()=>{ie.notify({type:"positive",message:"Lesson updated successfully!",icon:"check_circle"})},onError:e=>{ie.notify({type:"negative",message:"Please check the form for errors.",icon:"error"})},onFinish:()=>{ne.value=!1}})};return(t,p)=>(x(),g(C,{title:"Edit Lesson"},{default:_(()=>[h("div",Q,[q(o,{flat:"",bordered:""},{default:_(()=>[q(l,null,{default:_(()=>{var l;return[h("div",S,[h("div",null,[p[8]||(p[8]=h("div",{class:"text-h6"},"Edit Lesson",-1)),h("div",E,'Update lesson information for "'+j(null==(l=e.lesson.section)?void 0:l.title)+'"',1)]),q(s,{flat:"",color:"grey-7",icon:"arrow_back",label:"Back to Lesson",onClick:p[0]||(p[0]=l=>t.$inertia.visit(t.route("course-management.lessons.show",e.lesson.id)))})])]}),_:1}),q(a),q(f,{onSubmit:ve,class:"q-pa-md"},{default:_(()=>[h("div",A,[h("div",B,[q(o,{flat:"",bordered:""},{default:_(()=>[q(l,null,{default:_(()=>[p[9]||(p[9]=h("div",{class:"text-subtitle1 q-mb-md"},"Lesson Information",-1)),h("div",F,[q(i,{modelValue:re.title,"onUpdate:modelValue":p[1]||(p[1]=e=>re.title=e),label:"Lesson Title *",outlined:"",error:!!e.errors.title,"error-message":e.errors.title,placeholder:"e.g., What is a Fraction?, Basic Addition"},null,8,["modelValue","error","error-message"])]),h("div",I,[q(i,{modelValue:re.text,"onUpdate:modelValue":p[2]||(p[2]=e=>re.text=e),label:"Lesson Description",outlined:"",type:"textarea",rows:"3",error:!!e.errors.text,"error-message":e.errors.text,placeholder:"Brief description of what this lesson covers..."},null,8,["modelValue","error","error-message"])]),h("div",z,[q(i,{modelValue:re.order,"onUpdate:modelValue":p[3]||(p[3]=e=>re.order=e),modelModifiers:{number:!0},label:"Order",outlined:"",type:"number",min:"0",error:!!e.errors.order,"error-message":e.errors.order,hint:"Position of this lesson in the section"},null,8,["modelValue","error","error-message"])])]),_:1})]),_:1}),q(o,{flat:"",bordered:"",class:"q-mt-md"},{default:_(()=>[q(l,null,{default:_(()=>[p[10]||(p[10]=h("div",{class:"text-subtitle1 q-mb-md"},"Lesson Settings",-1)),h("div",D,[h("div",M,[q(i,{modelValue:re.duration,"onUpdate:modelValue":p[4]||(p[4]=e=>re.duration=e),modelModifiers:{number:!0},label:"Duration (minutes)",outlined:"",type:"number",min:"1",placeholder:"30"},null,8,["modelValue"])]),h("div",P,[q(v,{modelValue:re.difficulty,"onUpdate:modelValue":p[5]||(p[5]=e=>re.difficulty=e),options:ue,outlined:"",label:"Difficulty Level","emit-value":"","map-options":"",clearable:""},null,8,["modelValue"])])]),h("div",T,[q(i,{modelValue:de.value,"onUpdate:modelValue":p[6]||(p[6]=e=>de.value=e),label:"Learning Objectives",outlined:"",type:"textarea",rows:"3",placeholder:"Enter each objective on a new line...",hint:"One objective per line"},null,8,["modelValue"])])]),_:1})]),_:1})]),h("div",$,[q(o,{flat:"",bordered:""},{default:_(()=>[q(l,null,{default:_(()=>{var t,l,s,a,o,i;return[p[11]||(p[11]=h("div",{class:"text-subtitle1 q-mb-md"},"Section Context",-1)),h("div",H,[h("div",J,j(null==(t=e.lesson.section)?void 0:t.title),1),h("div",W,' Section in "'+j(null==(s=null==(l=e.lesson.section)?void 0:l.level)?void 0:s.title)+'" ',1),h("div",G,' Course: "'+j(null==(i=null==(o=null==(a=e.lesson.section)?void 0:a.level)?void 0:o.course)?void 0:i.name)+'" ',1)])]}),_:1})]),_:1}),q(o,{flat:"",bordered:"",class:"q-mt-md"},{default:_(()=>[q(l,null,{default:_(()=>{return[p[12]||(p[12]=h("div",{class:"text-subtitle1 q-mb-md"},"Lesson Preview",-1)),h("div",K,[h("div",N,j(re.title||"Lesson Title"),1),re.text?(x(),L("div",R,j(re.text),1)):V("",!0),re.duration||re.difficulty?(x(),L("div",X,[re.duration?(x(),L("div",Y,[q(r,{size:"sm",color:"blue-1","text-color":"blue-8",icon:"schedule"},{default:_(()=>[w(j(re.duration)+" min ",1)]),_:1})])):V("",!0),re.difficulty?(x(),L("div",Z,[q(r,{size:"sm",color:(e=re.difficulty,{beginner:"green-1",intermediate:"orange-1",advanced:"red-1"}[e]||"grey-1"),"text-color":me(re.difficulty),icon:"trending_up"},{default:_(()=>[w(j(re.difficulty),1)]),_:1},8,["color","text-color"])])):V("",!0)])):V("",!0),h("div",ee," Order: "+j(re.order||"Auto"),1)])];var e}),_:1})]),_:1}),ce.value.length>0?(x(),g(o,{key:0,flat:"",bordered:"",class:"q-mt-md"},{default:_(()=>[q(l,null,{default:_(()=>[p[13]||(p[13]=h("div",{class:"text-subtitle1 q-mb-md"},"Learning Objectives",-1)),q(d,{dense:""},{default:_(()=>[(x(!0),L(U,null,k(ce.value,(e,t)=>(x(),g(n,{key:t},{default:_(()=>[q(u,{avatar:""},{default:_(()=>[q(c,{name:"check_circle",color:"positive",size:"sm"})]),_:1}),q(u,null,{default:_(()=>[q(m,{class:"text-caption"},{default:_(()=>[w(j(e),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})):V("",!0)])]),q(a,{class:"q-my-md"}),h("div",te,[q(s,{flat:"",label:"Cancel",color:"grey-7",onClick:p[7]||(p[7]=l=>t.$inertia.visit(t.route("course-management.lessons.show",e.lesson.id)))}),q(s,{type:"submit",label:"Update Lesson",color:"primary",icon:"save",loading:ne.value},null,8,["loading"])])]),_:1})]),_:1})])]),_:1}))}},[["__scopeId","data-v-a2690764"]]);export{le as default};
