import{p as e,A as t,o as a,d as s,a as l,g as r,f as d,e as o,Q as n,n as c}from"./app-BXm70mdJ.js";import{Q as i}from"./QBadge-ZzhN1X9C.js";import{a6 as m,f as u,a as p,k as g,H as b,I as v,J as _,b as w,M as x,V as f,U as y,S as h,y as q,O as S}from"./vendor-DNM7Y6Xn.js";import"./offline-BzIlwqNM.js";import"./i18n-CBOKL2HS.js";import"./ui-BP0GJNn5.js";const V={class:"row items-center q-gutter-sm"},D={class:"column"},k={class:"text-weight-bold text-grey-9"},C={class:"text-caption text-grey-6 text-weight-medium"},j={class:"row items-center"},I={class:"row q-col-gutter-sm q-mb-md"},T={class:"col-12"},z={class:"col-12"},A={class:"row q-col-gutter-xs items-center"},U={class:"col"},E={class:"col-4"},R={class:"bg-grey-1 rounded-lg q-pa-sm border-grey-2 border"},O={class:"row items-center justify-between q-mb-sm"},Q={class:"row items-center q-gutter-xs"},G={class:"row q-col-gutter-sm q-mb-sm text-caption text-grey-8 font-medium"},M={class:"col"},N={class:"text-weight-bold"},W={class:"col text-right"},B={class:"text-weight-bold"},F=e({__name:"SemesterCard",props:{semester:Object},setup(e){const F=e,H=m({name:F.semester.name,start_date:F.semester.start_date?F.semester.start_date.split("T")[0]:"",end_date:F.semester.end_date?F.semester.end_date.split("T")[0]:"",active:F.semester.active,total_weeks:F.semester.total_weeks||""}),J=u(F.semester.calculated_weeks||""),L=u(!1),K=p(()=>0===F.semester.calendar_count&&H.start_date&&H.end_date),P=()=>{if(H.start_date&&J.value){const e=new Date(H.start_date),t=new Date(e);t.setDate(e.getDate()+7*J.value-1),H.end_date=t.toISOString().split("T")[0],X()}},X=()=>{H.post(route("admin.academic_calendar.semester.update",F.semester.id),{preserveScroll:!0})},Y=()=>{H.active=!H.active,X()},Z=()=>{L.value=!0,H.post(route("admin.academic_calendar.semester.generate",F.semester.id),{preserveScroll:!0,onFinish:()=>{L.value=!1}})};return g(()=>F.semester.calculated_weeks,e=>{J.value=e}),(m,u)=>(v(),b(c,{flat:"",bordered:"",class:h([e.semester.active?"border-primary shadow-2":"border-grey-3 hover:shadow-1","transition-all duration-300 rounded-xl overflow-hidden"])},{default:_(()=>[w(s,{class:h([e.semester.active?"bg-blue-1":"bg-grey-1","row items-center justify-between q-py-sm"])},{default:_(()=>[x("div",V,[w(t,{size:"24px",color:"primary","text-color":"white","font-size":"10px",class:"text-weight-bold"},{default:_(()=>[f(" S"+y(e.semester.semester_number),1)]),_:1}),x("div",D,[x("span",k,y(e.semester.name),1),x("span",C,"ID: #"+y(e.semester.id),1)])]),x("div",j,[w(a,{"model-value":e.semester.active,"onUpdate:modelValue":Y,color:"primary",size:"md",label:"ACTIVE","left-label":"",class:"text-weight-bold text-caption tracking-tighter"},null,8,["model-value"])])]),_:1},8,["class"]),w(l),w(s,{class:"q-pa-md"},{default:_(()=>[x("div",I,[x("div",T,[w(r,{modelValue:q(H).start_date,"onUpdate:modelValue":u[0]||(u[0]=e=>q(H).start_date=e),type:"date",label:"Start Date",filled:"",dense:"",onChange:X,class:"text-caption"},null,8,["modelValue"])]),x("div",z,[x("div",A,[x("div",U,[w(r,{modelValue:q(H).end_date,"onUpdate:modelValue":u[1]||(u[1]=e=>q(H).end_date=e),type:"date",label:"End Date",filled:"",dense:"",onChange:X,class:"text-caption"},null,8,["modelValue"])]),x("div",E,[w(r,{modelValue:J.value,"onUpdate:modelValue":u[2]||(u[2]=e=>J.value=e),type:"number",label:"Weeks",filled:"",dense:"",onInput:P,class:"text-caption",suffix:"W"},null,8,["modelValue"])])])])]),x("div",R,[x("div",O,[x("div",Q,[x("div",{class:h([e.semester.calendar_count>0?"bg-green":"bg-amber","h-2 w-2 rounded-full"])},null,2),u[3]||(u[3]=x("span",{class:"text-caption text-weight-bold text-grey-7"},"CALENDAR STATUS",-1))]),w(i,{color:e.semester.calendar_count>0?"green-1":"amber-1","text-color":e.semester.calendar_count>0?"green-9":"amber-9",class:"text-weight-bold",dense:""},{default:_(()=>[f(y(e.semester.calendar_count>0?"CREATED":"MISSING"),1)]),_:1},8,["color","text-color"])]),x("div",G,[x("div",M,[u[4]||(u[4]=f("Records: ")),x("span",N,y(e.semester.calendar_count)+" days",1)]),x("div",W,[u[5]||(u[5]=f("Duration: ")),x("span",B,y(e.semester.calculated_days)+"d ("+y(e.semester.calculated_weeks)+"w)",1)])]),K.value?(v(),b(d,{key:0,dense:"",rounded:"",class:"bg-amber-1 text-amber-10 q-mb-sm text-caption"},{avatar:_(()=>[w(o,{name:"warning",color:"amber-9",size:"xs"})]),default:_(()=>[u[6]||(u[6]=f(" Dates changed or missing. Generate calendar now. "))]),_:1})):S("",!0),w(n,{onClick:Z,loading:L.value,color:e.semester.calendar_count>0?"grey-2":"primary","text-color":e.semester.calendar_count>0?"grey-9":"white",unelevated:"",class:"full-width text-weight-bold",size:"sm",label:e.semester.calendar_count>0?"Regenerate Calendar":"Create Calendar",icon:"event"},null,8,["loading","color","text-color","label"])])]),_:1})]),_:1},8,["class"]))}},[["__scopeId","data-v-c40668b9"]]);export{F as default};
